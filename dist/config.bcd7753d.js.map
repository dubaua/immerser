{"version":3,"sources":["../immerser.js","config.js","../node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["Immerser","options","defaults","immerserSelector","defaultValue","description","validator","selectorValidator","layerSelector","solidSelector","pagerSelector","solidClassnames","x","Array","isArray","length","pagerTreshold","immerserClassname","classnameValidator","immerserWrapperClassname","immerserMaskClassname","pagerClassname","pagerLinkClassname","pagerLinkActiveClassname","immerserNode","immerserClassnames","states","documentHeight","windowHeight","resizeTimerId","key","hasOwnProperty","value","console","warn","init","setWindowSizes","setLayerSizes","setStates","createPagerLinks","createDOMStructure","initPagerLinks","draw","window","addEventListener","bind","onResize","document","querySelector","layerNodeList","querySelectorAll","forEachNode","layerNode","push","JSON","parse","dataset","node","top","bottom","documentElement","offsetHeight","innerHeight","map","state","offsetTop","index","isFirst","isLast","immerserHeight","immerserTop","startEnter","enter","startLeave","leave","height","pagerNode","classList","add","forEach","layerId","id","pagerLinkNode","createElement","href","stateIndex","appendChild","pagerLinkNodeArray","maskAndWrapperStyles","position","right","left","overflow","originalChildrenNodeList","wrapper","applyStyles","childNode","clonnedChildNode","cloneNode","clonedSolidNodeList","solidId","immerserSolidId","mask","setAttribute","maskNode","wrapperNode","pagerLinkHTMLCollection","getElementsByClassName","y","getLastScrollPositionY","progress","style","transform","pagerScrollActivePoint","remove","clearTimeout","setTimeout","Math","min","max","scrollTop","styles","rule","nodeList","callback","string","test","my","logo","pager","menu","suka","log","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","call","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","type","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","body","getElementById","stackTrace","innerText","innerHTML","getParents","modules","parents","k","d","dep","concat","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"config.bcd7753d.js","sourceRoot":"..\\example","sourcesContent":["export default class Immerser {\r\n  constructor(options) {\r\n    this.defaults = {\r\n      immerserSelector: {\r\n        defaultValue: '[data-immerser]',\r\n        description: 'non empty .js- preffixed classname or data-attribute selector',\r\n        validator: this.selectorValidator,\r\n      },\r\n      layerSelector: {\r\n        defaultValue: '[data-immerser-classnames]',\r\n        description: 'non empty .js- preffixed classname or data-attribute selector',\r\n        validator: this.selectorValidator,\r\n      },\r\n      solidSelector: {\r\n        defaultValue: '[data-immerser-solid-id]',\r\n        description: 'non empty .js- preffixed classname or data-attribute selector',\r\n        validator: this.selectorValidator,\r\n      },\r\n      pagerSelector: {\r\n        defaultValue: '[data-immerser-pager]',\r\n        description: 'non empty .js- preffixed classname or data-attribute selector',\r\n        validator: this.selectorValidator,\r\n      },\r\n      solidClassnames: {\r\n        defaultValue: null,\r\n        description: 'non empty array of objects',\r\n        validator: x => Array.isArray(x) && x.length !== 0,\r\n      },\r\n      pagerTreshold: {\r\n        defaultValue: 0.5,\r\n        description: 'a number between 0 and 1',\r\n        validator: x => typeof x === 'number' && 0 <= x && x <= 1,\r\n      },\r\n      immerserClassname: {\r\n        defaultValue: 'immerser',\r\n        description: 'valid non empty classname string',\r\n        validator: this.classnameValidator,\r\n      },\r\n      immerserWrapperClassname: {\r\n        defaultValue: 'immerser__wrapper',\r\n        description: 'valid non empty classname string',\r\n        validator: this.classnameValidator,\r\n      },\r\n      immerserMaskClassname: {\r\n        defaultValue: 'immerser__mask',\r\n        description: 'valid non empty classname string',\r\n        validator: this.classnameValidator,\r\n      },\r\n      pagerClassname: {\r\n        defaultValue: 'pager',\r\n        description: 'valid non empty classname string',\r\n        validator: this.classnameValidator,\r\n      },\r\n      pagerLinkClassname: {\r\n        defaultValue: 'pager__link',\r\n        description: 'valid non empty classname string',\r\n        validator: this.classnameValidator,\r\n      },\r\n      pagerLinkActiveClassname: {\r\n        defaultValue: 'pager__link--active',\r\n        description: 'valid non empty classname string',\r\n        validator: this.classnameValidator,\r\n      },\r\n    };\r\n\r\n    // state\r\n    this.options = {};\r\n    this.immerserNode = null;\r\n    this.immerserClassnames = [];\r\n    this.states = [];\r\n    this.documentHeight = 0;\r\n    this.windowHeight = 0;\r\n    this.resizeTimerId = null;\r\n\r\n    // TODO user defined solid layout\r\n\r\n    for (const key in this.defaults) {\r\n      const { defaultValue, description, validator } = this.defaults[key];\r\n      if (options.hasOwnProperty(key)) {\r\n        const value = options[key];\r\n        if (validator(value)) {\r\n          this.options[key] = value;\r\n        } else {\r\n          console.warn(\r\n            `Expected ${key} is ${description}, got ${typeof value} ${value}. Fallback to default value ${defaultValue}`\r\n          );\r\n          this.options[key] = defaultValue;\r\n        }\r\n      }\r\n    }\r\n\r\n    this.init();\r\n    this.setWindowSizes();\r\n    this.setLayerSizes();\r\n    this.setStates();\r\n    this.createPagerLinks(options);\r\n    this.createDOMStructure();\r\n    this.initPagerLinks();\r\n    this.draw();\r\n\r\n    window.addEventListener('scroll', this.draw.bind(this), false);\r\n    window.addEventListener('resize', this.onResize.bind(this), false);\r\n  }\r\n\r\n  init() {\r\n    this.immerserNode = document.querySelector(this.options.immerserSelector);\r\n    if (!this.immerserNode) {\r\n      console.warn('Immerser element not found. Check documentation https://github.com/dubaua/immerser');\r\n    }\r\n\r\n    if (this.options.solidClassnames) {\r\n      this.immerserClassnames = this.options.solidClassnames;\r\n    }\r\n    const layerNodeList = document.querySelectorAll(this.options.layerSelector);\r\n    this.forEachNode(layerNodeList, layerNode => {\r\n      if (!this.options.solidClassnames) {\r\n        this.immerserClassnames.push(JSON.parse(layerNode.dataset.immerserClassnames));\r\n      }\r\n      this.states.push({\r\n        node: layerNode,\r\n        top: 0,\r\n        bottom: 0,\r\n      });\r\n    });\r\n    // warn if no classnames given\r\n  }\r\n\r\n  setWindowSizes() {\r\n    this.documentHeight = document.documentElement.offsetHeight;\r\n    this.windowHeight = window.innerHeight;\r\n  }\r\n\r\n  setLayerSizes() {\r\n    this.states = this.states.map(state => {\r\n      const top = state.node.offsetTop;\r\n      const bottom = top + state.node.offsetHeight;\r\n      return {\r\n        ...state,\r\n        top,\r\n        bottom,\r\n      };\r\n    });\r\n  }\r\n\r\n  setStates() {\r\n    this.states = this.states.map((state, index) => {\r\n      const isFirst = index === 0;\r\n      const isLast = index === this.states.length - 1;\r\n\r\n      const immerserHeight = this.immerserNode.offsetHeight;\r\n      const immerserTop = this.immerserNode.offsetTop;\r\n\r\n      // actually not 0 and this.documentHeight but start of first and end of last.\r\n      const startEnter = isFirst ? 0 : immerserTop + this.states[index - 1].top; // == previous start\r\n      const enter = isFirst ? 0 : startEnter + immerserHeight;\r\n      const startLeave = isLast ? this.documentHeight : immerserTop + this.states[index].top;\r\n      const leave = isLast ? this.documentHeight : startLeave + immerserHeight;\r\n\r\n      return {\r\n        ...state,\r\n        startEnter,\r\n        enter,\r\n        startLeave,\r\n        leave,\r\n        height: immerserHeight,\r\n      };\r\n    });\r\n  }\r\n\r\n  createPagerLinks() {\r\n    const pagerNode = document.querySelector(this.options.pagerSelector);\r\n    if (!pagerNode) return;\r\n\r\n    const { pagerClassname, pagerLinkClassname } = this.options;\r\n    pagerNode.classList.add(pagerClassname);\r\n\r\n    this.states.forEach((state, index) => {\r\n      let layerId = state.node.id;\r\n\r\n      // if no layerId create it, to point anchor to\r\n      if (layerId === '') {\r\n        layerId = `immerser-section-${index}`;\r\n        state.node.id = layerId;\r\n      }\r\n\r\n      const pagerLinkNode = document.createElement('a');\r\n      pagerLinkNode.classList.add(pagerLinkClassname);\r\n      pagerLinkNode.href = `#${layerId}`;\r\n      // not the best way to store index for\r\n      pagerLinkNode.dataset.stateIndex = index;\r\n      pagerNode.appendChild(pagerLinkNode);\r\n\r\n      state.pagerLinkNodeArray = [];\r\n    });\r\n  }\r\n\r\n  createDOMStructure() {\r\n    const maskAndWrapperStyles = {\r\n      position: 'absolute',\r\n      top: 0,\r\n      right: 0,\r\n      bottom: 0,\r\n      left: 0,\r\n      overflow: 'hidden',\r\n    };\r\n\r\n    const { immerserClassname, immerserWrapperClassname, immerserMaskClassname } = this.options;\r\n    const originalChildrenNodeList = this.immerserNode.querySelectorAll(this.options.solidSelector);\r\n    this.immerserNode.classList.add(immerserClassname);\r\n\r\n    this.states = this.states.map((state, stateIndex) => {\r\n      const wrapper = document.createElement('div');\r\n      this.applyStyles(wrapper, maskAndWrapperStyles);\r\n      wrapper.classList.add(immerserWrapperClassname);\r\n\r\n      this.forEachNode(originalChildrenNodeList, childNode => {\r\n        const clonnedChildNode = childNode.cloneNode(true);\r\n        wrapper.appendChild(clonnedChildNode);\r\n        // TODO remove original children. mess with DOM\r\n      });\r\n\r\n      // TODO achieve hovering with linking clonned elements\r\n\r\n      const clonedSolidNodeList = wrapper.querySelectorAll(this.options.solidSelector);\r\n      this.forEachNode(clonedSolidNodeList, ({ dataset, classList }) => {\r\n        const solidId = dataset.immerserSolidId;\r\n        if (this.immerserClassnames[stateIndex].hasOwnProperty(solidId)) {\r\n          classList.add(this.immerserClassnames[stateIndex][solidId]);\r\n        }\r\n      });\r\n\r\n      const mask = document.createElement('div');\r\n      this.applyStyles(mask, maskAndWrapperStyles);\r\n      mask.classList.add(immerserMaskClassname);\r\n\r\n      if (stateIndex !== 0) {\r\n        mask.setAttribute('aria-hidden', 'true');\r\n      }\r\n      mask.appendChild(wrapper);\r\n      this.immerserNode.appendChild(mask);\r\n\r\n      state.maskNode = mask;\r\n      state.wrapperNode = wrapper;\r\n      return state;\r\n    });\r\n  }\r\n\r\n  initPagerLinks() {\r\n    const pagerLinkHTMLCollection = this.immerserNode.getElementsByClassName(this.options.pagerLinkClassname);\r\n    for (let index = 0; index < pagerLinkHTMLCollection.length; index++) {\r\n      const pagerLinkNode = pagerLinkHTMLCollection[index];\r\n      const stateIndex = pagerLinkNode.dataset.stateIndex;\r\n      this.states[stateIndex].pagerLinkNodeArray.push(pagerLinkNode);\r\n    }\r\n  }\r\n\r\n  draw() {\r\n    const y = this.getLastScrollPositionY();\r\n    this.states.forEach(\r\n      ({ startEnter, enter, startLeave, leave, height, maskNode, wrapperNode, top, bottom, pagerLinkNodeArray }) => {\r\n        let progress;\r\n        if (startEnter > y) {\r\n          progress = height;\r\n        } else if (startEnter <= y && y < enter) {\r\n          progress = enter - y;\r\n        } else if (enter <= y && y < startLeave) {\r\n          progress = 0;\r\n        } else if (startLeave <= y && y < leave) {\r\n          progress = startLeave - y;\r\n        } else {\r\n          progress = -height;\r\n        }\r\n        maskNode.style.transform = `translateY(${progress}px)`;\r\n        wrapperNode.style.transform = `translateY(${-progress}px)`;\r\n\r\n        // check if pager\r\n        const pagerScrollActivePoint = y + this.windowHeight * this.options.pagerTreshold;\r\n        if (top <= pagerScrollActivePoint && pagerScrollActivePoint < bottom) {\r\n          pagerLinkNodeArray.forEach(({ classList }) => {\r\n            classList.add(this.options.pagerLinkActiveClassname);\r\n          });\r\n        } else {\r\n          pagerLinkNodeArray.forEach(({ classList }) => {\r\n            classList.remove(this.options.pagerLinkActiveClassname);\r\n          });\r\n        }\r\n      }\r\n    );\r\n  }\r\n\r\n  onResize() {\r\n    // TODO maybe refactor on requestAnimationFrame\r\n    // simlpe debouncer\r\n    clearTimeout(this.resizeTimerId);\r\n    this.resizeTimerId = setTimeout(() => {\r\n      this.setWindowSizes();\r\n      this.setLayerSizes();\r\n      this.setStates();\r\n      this.draw();\r\n    }, 16);\r\n  }\r\n\r\n  // utils\r\n  getLastScrollPositionY() {\r\n    // limit scroll position between 0 and document height in case of iOS overflow scroll\r\n    return Math.min(Math.max(document.documentElement.scrollTop, 0), this.documentHeight);\r\n  }\r\n\r\n  applyStyles({ style }, styles) {\r\n    for (const rule in styles) {\r\n      style[rule] = styles[rule];\r\n    }\r\n  }\r\n\r\n  forEachNode(nodeList, callback) {\r\n    for (let index = 0; index < nodeList.length; index++) {\r\n      const node = nodeList[index];\r\n      callback(node, index, nodeList);\r\n    }\r\n  }\r\n\r\n  classnameValidator(string) {\r\n    return typeof string === 'string' && string !== '' && /^[a-z_-][a-z\\d_-]*$/i.test(string);\r\n  }\r\n\r\n  selectorValidator(string) {\r\n    return typeof string === 'string' && string !== '' && /\\.js\\-[a-z-_]+|\\[[a-z]+(\\-[a-z]+)*\\]/.test(string);\r\n  }\r\n}\r\n","import Immerser from '../immerser.js';\r\n\r\nconst my = new Immerser({\r\n  solidClassnames: [\r\n    { logo: 'logo--contrast', pager: 'pager--contrast' },\r\n    { menu: 'menu--contrast' },\r\n    { logo: 'logo--contrast', pager: 'pager--contrast' },\r\n    { menu: 'menu--contrast' },\r\n  ],\r\n  pagerTreshold: 1.3,\r\n  pagerClassname: 'jopa',\r\n  pagerLinkClassname: 'jopa',\r\n  pagerLinkActiveClassname: 'jopa',\r\n  layerSelector: 'sea',\r\n  suka: 'bitch'\r\n});\r\n\r\nconsole.log(my);\r\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else {\n        window.location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}