{"version":3,"sources":["webpack://Immerser/webpack/universalModuleDefinition","webpack://Immerser/./node_modules/@dubaua/merge-options/dist/merge-options.min.js","webpack://Immerser/./node_modules/@dubaua/observable/dist/observable.min.js","webpack://Immerser/./src/defaults.ts","webpack://Immerser/./src/utils.ts","webpack://Immerser/./src/immerser.ts","webpack://Immerser/webpack/bootstrap","webpack://Immerser/webpack/startup","webpack://Immerser/webpack/runtime/compat get default export","webpack://Immerser/webpack/runtime/define property getters","webpack://Immerser/webpack/runtime/hasOwnProperty shorthand"],"names":["root","factory","exports","module","define","amd","this","o","e","Object","prototype","hasOwnProperty","call","Array","isArray","t","optionConfig","i","userOptions","r","n","preffix","f","a","suffix","u","p","strict","d","c","join","s","l","g","v","required","y","default","b","description","x","validator","h","q","E","w","TypeError","console","warn","Observable","callbacks","internal","subscribe","push","indexOf","slice","concat","key","get","set","length","enumerable","configurable","writable","defineProperty","CLASSNAME_REGEX","OPTION_CONFIG","solidClassnameArray","fromViewportWidth","pagerThreshold","hasToUpdateHash","scrollAdjustThreshold","scrollAdjustDelay","pagerLinkActiveClassname","str","test","isScrollHandled","onInit","onBind","onUnbind","onDestroy","onActiveLayerChange","MESSAGE_PREFFIX","bindStyles","node","styles","rule","style","getNodeArray","selector","parent","document","nodeList","querySelectorAll","showError","message","warning","docs","docsHash","resultMessage","Error","limit","number","min","max","Math","getLastScrollPosition","scrollX","window","documentElement","scrollLeft","scrollY","scrollTop","offsetWidth","offsetHeight","CROPPED_FULL_ABSOLUTE_STYLES","position","top","right","bottom","left","overflow","NOT_INTERACTIVE_STYLES","pointerEvents","touchAction","INTERACTIVE_STYLES","Immerser","layer","solid","pagerLink","mask","maskInner","synchroHover","init","setNodes","validateMarkup","mergeOptions","getClassnamesFromMarkup","validateSolidClassnameArray","initSectionIds","initStatemap","validateClassnames","toggleBindOnRezise","setSizes","addScrollAndResizeListeners","options","rootNode","querySelector","selectors","layerNodeArray","solidNodeArray","forEach","layerNode","layerIndex","dataset","immerserLayerConfig","JSON","parse","error","layerCount","id","__immerserCustomId","stateIndexById","stateArray","map","solidClassnames","beginEnter","beginLeave","endEnter","endLeave","layerBottom","layerTop","maskInnerNode","maskNode","every","state","obj","keys","constructor","stopToggleBindOnRezise","reactiveWindowWidth","nextWindowWidth","isBound","bind","unbind","documentHeight","windowHeight","innerHeight","immerserTop","offsetTop","immerserHeight","value","innerWidth","onScroll","handleScroll","addEventListener","onResize","handleResize","createMarkup","initPagerLinks","initHoverSynchro","attachCallbacks","draw","detachCallbacks","removeSyncroHoverListeners","clearCustomSectionIds","restoreOriginalSolidNodes","cleanupClonnedMarkup","reactiveActiveLayer","undefined","pagerLinkNodeArray","originalSolidNodeArray","maskNodeArray","synchroHoverNodeArray","isCustomMarkup","customMaskNodeArray","resizeFrameId","scrollFrameId","scrollAdjustTimerId","reactiveSynchroHoverId","stopRedrawingPager","stopUpdatingHash","stopFiringActiveLayerChangeCallback","stopTrackingSynchroHover","onSynchroHoverMouseOver","onSynchroHoverMouseOut","removeScrollAndResizeListeners","resetInternalState","initCustomMarkup","stateIndex","createElement","immerserMask","immerserMaskInner","childNode","clonnedChildNode","cloneNode","__immerserClonned","appendChild","callback","index","forEachNode","clonedSolidNode","solidId","immerserSolid","classList","add","setAttribute","detachOriginalSolidNodes","customMaskNode","customChildrenHTMLCollection","children","removeChild","pagerLinkNode","href","layerId","split","immerserLayerIndex","toString","synchroHoverId","target","immerserSynchroHover","synchroHoverNode","drawPagerLinks","drawHash","nextIndex","drawSynchroHover","removeEventListener","removeAttribute","immerserMaskNode","immerserMaskInnerNode","clonnedSolideNode","progress","transform","pagerScrollActivePoint","parseInt","remove","location","hash","topThreshold","abs","bottomThreshold","scrollTo","cancelAnimationFrame","requestAnimationFrame","clearTimeout","setTimeout","adjustScroll","__webpack_module_cache__","__webpack_require__","moduleId","__webpack_modules__","getter","__esModule","definition","prop"],"mappings":"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","file":"immerser.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Immerser\"] = factory();\n\telse\n\t\troot[\"Immerser\"] = factory();\n})(this, function() {\nreturn ","\"use strict\";function o(o,e){return Object.prototype.hasOwnProperty.call(o,e)}function e(o){return null!==o&&\"object\"==typeof o&&!1===Array.isArray(o)}function t(e){var t=e.optionConfig,i=e.userOptions,r=void 0===i?{}:i,n=e.preffix,f=void 0===n?\"\":n,a=e.suffix,u=void 0===a?\"\":a,p=e.strict,d=void 0===p||p,c=function(o){return[f,o,u].join(\" \")},s={};for(var l in t)if(o(t,l)){var g=t[l],v=g.required,y=g.default,b=g.description,x=g.validator,h=r[l],q=!!o(g,\"required\")&&(\"function\"==typeof v?v(r):v),E=o(r,l),w=x(h,r);if(q){if(!E)throw new TypeError(c(l+\" is required.\"));if(!w)throw new TypeError(c(\"Expected \"+l+\" to be \"+b+\", got \"+typeof h+\" \"+h+\".\"));s[l]=h}else if(s[l]=y,E)if(w)s[l]=h;else{if(d)throw new TypeError(c(\"Expected \"+l+\" to be \"+b+\", got \"+typeof h+\" \"+h+\".\"));console.warn(c(\"Expected \"+l+\" to be \"+b+\", got \"+typeof h+\" \"+h+\". Fallback to default value \"+y+\".\"))}}return s}var i=\"[mergeOptions]:\",r=\"\\nCheck out documentation https://github.com/dubaua/merge-options#parameters-and-return\";function n(o){throw new TypeError([i,o,r].join(\" \"))}var f={optionConfig:{required:!0,validator:function(t){for(var i in t)if(o(t,i)){var r=t[i];if(e(r)||n(\"Expected optionConfig.\"+i+\" to be an object with declarative option configuration, got \"+typeof r+\" \"+r+\".\"),o(r,\"required\")){var f=r.required,a=typeof f;\"boolean\"!==a&&\"function\"!==a&&n(\"Expected optionConfig.\"+i+\".required to be either boolean or function, got \"+typeof f+\" \"+f+\".\")}else o(r,\"default\")||n(\"Expected optionConfig.\"+i+\" to either have required or default value.\");if(o(r,\"default\")||o(r,\"required\")||n(\"Expected optionConfig.\"+i+\" to either have required or default value.\"),o(r,\"description\")){var u=r.description;\"string\"!=typeof r.description&&n(\"Expected optionConfig.\"+i+\".description to be a string, got \"+typeof u+\" \"+u+\".\")}else n(\"Missing description on optionConfig.\"+i+\" config.\");if(o(r,\"validator\")){var p=r.validator;\"function\"!=typeof r.validator&&n(\"Expected optionConfig.\"+i+\".validator to be a function, got \"+typeof p+\" \"+p+\".\")}else n(\"Missing validator on optionConfig.\"+i+\" config.\")}return e(t)},description:\"an object with declarative option configuration\"},userOptions:{required:!1,default:{},validator:e,description:\"an object\"},preffix:{required:!1,default:\"\",validator:function(o){return\"string\"==typeof o},description:\"a string\"},suffix:{required:!1,default:\"\",validator:function(o){return\"string\"==typeof o},description:\"a string\"},strict:{required:!1,default:!0,validator:function(o){return\"boolean\"==typeof o},description:\"a boolean\"}};module.exports=function(o){var e=t({optionConfig:f,userOptions:o,preffix:i,suffix:r});return t(e)};\n//# sourceMappingURL=merge-options.min.js.map\n","\"use strict\";module.exports=function(){function Observable(e){this.callbacks=[],this.internal=e}var e;return Observable.prototype.subscribe=function(e){var t=this;if(\"function\"!=typeof e)throw new TypeError(\"[createObservable]: expected callback to be a function.\");return this.callbacks.push(e),function(){var n=t.callbacks.indexOf(e);t.callbacks=t.callbacks.slice(0,n).concat(t.callbacks.slice(n+1))}},(e=[{key:\"value\",get:function(){return this.internal},set:function(e){if(e!==this.internal){var t=this.internal;this.internal=e;for(var n=0;n<this.callbacks.length;n++)this.callbacks[n](this.internal,t)}}}])&&function(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,\"value\"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}(Observable.prototype,e),Observable}();\n//# sourceMappingURL=observable.min.js.map\n","const CLASSNAME_REGEX = /^[a-z_-][a-z\\d_-]*$/i;\n\nfunction classnameValidator(str: string): boolean {\n  return typeof str === 'string' && str !== '' && CLASSNAME_REGEX.test(str);\n}\n\ninterface OptionConfigItem {\n  default: any;\n  description: string;\n  validator: (x: any) => boolean;\n}\n\nconst OPTION_CONFIG: Record<string, OptionConfigItem> = {\n  solidClassnameArray: {\r\n    default: [],\r\n    description: 'non empty array of objects',\r\n    validator: (x) => Array.isArray(x) && x.length !== 0,\r\n  },\r\n  fromViewportWidth: {\r\n    default: 0,\r\n    description: 'a natural number',\r\n    validator: (x) => typeof x === 'number' && 0 <= x && x % 1 === 0,\r\n  },\r\n  pagerThreshold: {\r\n    default: 0.5,\r\n    description: 'a number between 0 and 1',\r\n    validator: (x) => typeof x === 'number' && 0 <= x && x <= 1,\r\n  },\r\n  hasToUpdateHash: {\r\n    default: false,\r\n    description: 'a boolean',\r\n    validator: (x) => typeof x === 'boolean',\r\n  },\r\n  scrollAdjustThreshold: {\r\n    default: 0,\r\n    description: 'a number greater than or equal to 0',\r\n    validator: (x) => typeof x === 'number' && x >= 0,\r\n  },\r\n  scrollAdjustDelay: {\r\n    default: 600,\r\n    description: 'a number greater than or equal to 300',\r\n    validator: (x) => typeof x === 'number' && x >= 300,\r\n  },\r\n  pagerLinkActiveClassname: {\r\n    default: 'pager-link-active',\r\n    description: 'valid non empty classname string',\r\n    validator: classnameValidator,\r\n  },\r\n  isScrollHandled: {\r\n    default: true,\r\n    description: 'a boolean',\r\n    validator: (x) => typeof x === 'boolean',\r\n  },\r\n  onInit: {\r\n    default: null,\r\n    description: 'a function',\r\n    validator: (x) => typeof x === 'function',\r\n  },\r\n  onBind: {\r\n    default: null,\r\n    description: 'a function',\r\n    validator: (x) => typeof x === 'function',\r\n  },\r\n  onUnbind: {\r\n    default: null,\r\n    description: 'a function',\r\n    validator: (x) => typeof x === 'function',\r\n  },\r\n  onDestroy: {\r\n    default: null,\r\n    description: 'a function',\r\n    validator: (x) => typeof x === 'function',\r\n  },\r\n  onActiveLayerChange: {\r\n    default: null,\r\n    description: 'a function',\r\n    validator: (x) => typeof x === 'function',\r\n  },\r\n};\n\nconst MESSAGE_PREFFIX = '[immmerser:]';\n\nexport { OPTION_CONFIG, MESSAGE_PREFFIX };\n","import { MESSAGE_PREFFIX } from '@/defaults';\n\r\nexport function bindStyles(node: HTMLElement, styles: { [key: string]: string }): void {\n  for (const rule in styles) {\n    (node.style as any)[rule] = styles[rule];\n  }\n}\n\nexport function forEachNode<T extends Element>(nodeList: ArrayLike<T>, callback: (node: T, index: number, nodeList: ArrayLike<T>) => void): void {\n  for (let index = 0; index < nodeList.length; index++) {\n    const node = nodeList[index];\n    callback(node, index, nodeList);\n  }\n}\n\nexport function getNodeArray({ selector, parent = document }: { selector: string; parent?: Document | Element | null }): Element[] {\n  if (!parent) {\n    return [];\n  }\n  const nodeList = parent.querySelectorAll(selector);\n  return [].slice.call(nodeList);\n}\n\nexport function showError({ message, warning = false, docs }: { message: string; warning?: boolean; docs?: string }): void {\n  const docsHash = docs ? docs : '';\n  const resultMessage = `${MESSAGE_PREFFIX} ${message} \\nCheck out documentation https://github.com/dubaua/immerser${docsHash}`;\n  if (warning) {\n    console.warn(resultMessage);\n  } else {\n    throw new Error(resultMessage);\n  }\n}\n\nexport function isEmpty(obj?: Record<string, any> | null): boolean {\n  if (!obj) {\n    return true;\n  }\n  return Object.keys(obj).length === 0 && obj.constructor === Object;\n}\n\nexport function limit(number: number, min: number, max: number): number {\n  return Math.max(Math.min(number, max), min);\n}\n\nexport function getLastScrollPosition(): { x: number; y: number } {\n  const scrollX = window.scrollX || document.documentElement.scrollLeft;\n  const scrollY = window.scrollY || document.documentElement.scrollTop;\n  // limit scroll position between 0 and document height in case of iOS overflow scroll\n  return {\n    x: limit(scrollX, 0, document.documentElement.offsetWidth),\n    y: limit(scrollY, 0, document.documentElement.offsetHeight),\n  };\n}\n","import mergeOptions from '@dubaua/merge-options';\r\nimport Observable from '@dubaua/observable';\r\nimport { MESSAGE_PREFFIX, OPTION_CONFIG } from '@/defaults';\nimport { bindStyles, forEachNode, getLastScrollPosition, getNodeArray, isEmpty, showError } from '@/utils';\n\r\nconst CROPPED_FULL_ABSOLUTE_STYLES = {\r\n  position: 'absolute',\r\n  top: 0,\r\n  right: 0,\r\n  bottom: 0,\r\n  left: 0,\r\n  overflow: 'hidden',\r\n};\r\n\r\nconst NOT_INTERACTIVE_STYLES = {\r\n  pointerEvents: 'none',\r\n  touchAction: 'none',\r\n};\r\n\r\nconst INTERACTIVE_STYLES = {\n  pointerEvents: 'all',\n  touchAction: 'auto',\n};\n\ninterface SolidClassnames {\n  [key: string]: string;\n}\n\ninterface State {\n  beginEnter: number;\n  beginLeave: number;\n  endEnter: number;\n  endLeave: number;\n  id: string;\n  layerBottom: number;\n  layerTop: number;\n  maskInnerNode: HTMLElement | null;\n  maskNode: HTMLElement | null;\n  layerNode: HTMLElement;\n  solidClassnames: SolidClassnames | null;\n}\n\ninterface Options {\n  solidClassnameArray: SolidClassnames[];\n  fromViewportWidth: number;\n  pagerThreshold: number;\n  hasToUpdateHash: boolean;\n  scrollAdjustThreshold: number;\n  scrollAdjustDelay: number;\n  pagerLinkActiveClassname: string;\n  isScrollHandled: boolean;\n  onInit: ((immerser: Immerser) => void) | null;\n  onBind: ((immerser: Immerser) => void) | null;\n  onUnbind: ((immerser: Immerser) => void) | null;\n  onDestroy: ((immerser: Immerser) => void) | null;\n  onActiveLayerChange: ((layerIndex: number, immerser: Immerser) => void) | null;\n}\n\ninterface IObservable<T> {\n  value: T;\n  subscribe(callback: (value: T) => void): () => void;\n}\n\nexport default class Immerser {\n  options: Options = {} as Options;\n  selectors = {\n    root: '[data-immerser]',\n    layer: '[data-immerser-layer]',\n    solid: '[data-immerser-solid]',\n    pagerLink: '[data-immerser-pager-link]',\n    mask: '[data-immerser-mask]',\n    maskInner: '[data-immerser-mask-inner]',\n    synchroHover: '[data-immerser-synchro-hover]',\n  };\n  stateArray: State[] = [];\n  stateIndexById: Record<string, number> = {};\n  isBound = false;\n  rootNode: HTMLElement | null = null;\n  layerNodeArray: HTMLElement[] = [];\n  solidNodeArray: HTMLElement[] = [];\n  pagerLinkNodeArray: HTMLElement[] = [];\n  originalSolidNodeArray: HTMLElement[] = [];\n  maskNodeArray: HTMLElement[] = [];\n  synchroHoverNodeArray: HTMLElement[] = [];\n  isCustomMarkup = false;\n  customMaskNodeArray: HTMLElement[] = [];\n  documentHeight = 0;\n  windowHeight = 0;\n  immerserTop = 0;\n  immerserHeight = 0;\n  resizeFrameId: number | null = null;\n  scrollFrameId: number | null = null;\n  scrollAdjustTimerId: ReturnType<typeof setTimeout> | null = null;\n  reactiveActiveLayer: IObservable<number | undefined> = new Observable() as IObservable<number | undefined>;\n  reactiveWindowWidth: IObservable<number> = new Observable() as IObservable<number>;\n  reactiveSynchroHoverId: IObservable<string | undefined> = new Observable() as IObservable<string | undefined>;\n  stopRedrawingPager: (() => void) | null = null;\n  stopUpdatingHash: (() => void) | null = null;\n  stopFiringActiveLayerChangeCallback: (() => void) | null = null;\n  stopTrackingSynchroHover: (() => void) | null = null;\n  stopToggleBindOnRezise: (() => void) | null = null;\n  onResize: (() => void) | null = null;\n  onScroll: (() => void) | null = null;\n  onSynchroHoverMouseOver: ((e: MouseEvent) => void) | null = null;\n  onSynchroHoverMouseOut: (() => void) | null = null;\n\n  constructor(userOptions?: Partial<Options>) {\n    this.init(userOptions);\n  }\n\n  init(userOptions?: Partial<Options>): void {\n    this.setNodes();\r\n    this.validateMarkup();\r\n    this.mergeOptions(userOptions);\r\n    this.getClassnamesFromMarkup();\r\n    this.validateSolidClassnameArray();\r\n    this.initSectionIds();\r\n    this.initStatemap();\r\n    this.validateClassnames();\r\n    this.toggleBindOnRezise();\r\n    this.setSizes();\r\n    this.addScrollAndResizeListeners();\r\n    if (typeof this.options.onInit === 'function') {\r\n      this.options.onInit(this);\r\n    }\r\n  }\r\n\r\n  setNodes(): void {\n    this.rootNode = document.querySelector(this.selectors.root);\n    this.layerNodeArray = getNodeArray({ selector: this.selectors.layer });\n    this.solidNodeArray = getNodeArray({ selector: this.selectors.solid, parent: this.rootNode });\n  }\n\n  validateMarkup(): void {\n    if (!this.rootNode) {\n      showError({\n        message: 'immerser root node not found.',\n        docs: '#prepare-your-markup',\n      });\n    }\r\n    if (this.layerNodeArray.length < 0) {\r\n      showError({\r\n        message: 'immerser will not work without layer nodes.',\r\n        docs: '#prepare-your-markup',\r\n      });\r\n    }\r\n    if (this.solidNodeArray.length < 0) {\r\n      showError({\r\n        message: 'immerser will not work without solid nodes.',\r\n        docs: '#prepare-your-markup',\r\n      });\r\n    }\r\n  }\n\n  mergeOptions(userOptions?: Partial<Options>): void {\n    this.options = mergeOptions({\n      optionConfig: OPTION_CONFIG,\n      userOptions,\n      preffix: MESSAGE_PREFFIX,\n      suffix: '\\nCheck out documentation https://github.com/dubaua/immerser#options',\n    }) as Options;\n  }\n\n  getClassnamesFromMarkup(): void {\n    this.layerNodeArray.forEach((layerNode, layerIndex) => {\n      if (layerNode.dataset.immerserLayerConfig) {\n        try {\n          this.options.solidClassnameArray[layerIndex] = JSON.parse(layerNode.dataset.immerserLayerConfig);\n        } catch (e) {\n          console.error(MESSAGE_PREFFIX, 'Failed to parse JSON classname configuration.', e);\r\n        }\r\n      }\r\n    });\r\n  }\n\n  validateSolidClassnameArray(): void {\n    const layerCount = this.layerNodeArray.length;\n    const classnamesCount = this.options.solidClassnameArray.length;\n    if (classnamesCount !== layerCount) {\n      showError({\n        message: 'solidClassnameArray length differs from count of layers',\n        docs: '#options',\r\n      });\r\n    }\r\n  }\r\n\r\n  initSectionIds(): void {\n    this.layerNodeArray.forEach((layerNode, layerIndex) => {\n      let id = layerNode.id;\n      if (!id) {\n        id = `immerser-section-${layerIndex}`;\n        layerNode.id = id;\n        (layerNode as any).__immerserCustomId = true;\n      }\n      this.stateIndexById[id] = layerIndex;\n    });\n  }\n\n  initStatemap(): void {\n    this.stateArray = this.layerNodeArray.map((layerNode, layerIndex) => {\n      const solidClassnames = this.options.solidClassnameArray[layerIndex];\n      const { id } = layerNode;\n      return {\n        beginEnter: 0,\n        beginLeave: 0,\n        endEnter: 0,\n        endLeave: 0,\n        id,\n        layerBottom: 0,\n        layerTop: 0,\n        maskInnerNode: null,\n        maskNode: null,\n        layerNode: layerNode,\n        solidClassnames,\n      } as State;\n    });\n  }\n\n  validateClassnames(): void {\n    const noClassnameConfigPassed = this.stateArray.every((state) => isEmpty(state.solidClassnames));\n    if (noClassnameConfigPassed) {\n      showError({\n        message: 'immerser will do nothing without solid classname configuration.',\n        docs: '#prepare-your-markup',\n      });\n    }\n  }\n\n  toggleBindOnRezise(): void {\n    this.stopToggleBindOnRezise = this.reactiveWindowWidth.subscribe((nextWindowWidth) => {\n      if (nextWindowWidth >= this.options.fromViewportWidth) {\n        if (!this.isBound) {\n          this.bind();\n        }\n      } else if (this.isBound) {\n        this.unbind();\n      }\n    });\n  }\n\n  setSizes(): void {\n    this.documentHeight = document.documentElement.offsetHeight;\n    this.windowHeight = window.innerHeight;\n    this.immerserTop = (this.rootNode as HTMLElement).offsetTop;\n    this.immerserHeight = (this.rootNode as HTMLElement).offsetHeight;\n\n    this.stateArray = this.stateArray.map((state) => {\n      const layerTop = state.layerNode.offsetTop;\n      const layerBottom = layerTop + state.layerNode.offsetHeight;\n\n      const endEnter = layerTop - this.immerserTop;\n      const beginEnter = endEnter - this.immerserHeight;\n      const endLeave = layerBottom - this.immerserTop;\n      const beginLeave = endLeave - this.immerserHeight;\n\n      return {\n        ...state,\n        layerTop,\n        layerBottom,\n        beginEnter,\n        endEnter,\n        beginLeave,\n        endLeave,\n      } as State;\n    });\n\n    this.reactiveWindowWidth.value = window.innerWidth;\n  }\n\n  addScrollAndResizeListeners(): void {\n    if (this.options.isScrollHandled) {\n      this.onScroll = this.handleScroll.bind(this);\n      window.addEventListener('scroll', this.onScroll, false);\n    }\n    this.onResize = this.handleResize.bind(this);\n    window.addEventListener('resize', this.onResize, false);\n  }\n\n  bind(): void {\n    this.createMarkup();\n    this.initPagerLinks();\n    this.initHoverSynchro();\n    this.attachCallbacks();\n    this.isBound = true;\n    this.draw();\n    if (typeof this.options.onBind === 'function') {\n      this.options.onBind(this);\n    }\n  }\n\n  unbind(): void {\n    this.detachCallbacks();\n    this.removeSyncroHoverListeners();\n    this.clearCustomSectionIds();\n    this.restoreOriginalSolidNodes();\n    this.cleanupClonnedMarkup();\n    this.isBound = false;\n    if (typeof this.options.onUnbind === 'function') {\n      this.options.onUnbind(this);\n    }\n    this.reactiveActiveLayer.value = undefined;\n  }\n\n  private resetInternalState(): void {\n    this.stateArray = [];\n    this.stateIndexById = {};\n    this.isBound = false;\n    this.rootNode = null;\n    this.layerNodeArray = [];\n    this.solidNodeArray = [];\n    this.pagerLinkNodeArray = [];\n    this.originalSolidNodeArray = [];\n    this.maskNodeArray = [];\n    this.synchroHoverNodeArray = [];\n    this.isCustomMarkup = false;\n    this.customMaskNodeArray = [];\n    this.documentHeight = 0;\n    this.windowHeight = 0;\n    this.immerserTop = 0;\n    this.immerserHeight = 0;\n    this.resizeFrameId = null;\n    this.scrollFrameId = null;\n    this.scrollAdjustTimerId = null;\n    this.reactiveActiveLayer = new Observable() as IObservable<number | undefined>;\n    this.reactiveWindowWidth = new Observable() as IObservable<number>;\n    this.reactiveSynchroHoverId = new Observable() as IObservable<string | undefined>;\n    this.stopRedrawingPager = null;\n    this.stopUpdatingHash = null;\n    this.stopFiringActiveLayerChangeCallback = null;\n    this.stopTrackingSynchroHover = null;\n    this.stopToggleBindOnRezise = null;\n    this.onResize = null;\n    this.onScroll = null;\n    this.onSynchroHoverMouseOver = null;\n    this.onSynchroHoverMouseOut = null;\n  }\n\n  destroy(): void {\n    this.unbind();\n    this.stopToggleBindOnRezise?.();\n    this.removeScrollAndResizeListeners();\n    if (typeof this.options.onDestroy === 'function') {\n      this.options.onDestroy(this);\n    }\n    this.resetInternalState();\n  }\n\r\n  createMarkup(): void {\n    bindStyles(this.rootNode as HTMLElement, NOT_INTERACTIVE_STYLES);\n    this.initCustomMarkup();\n    this.originalSolidNodeArray = getNodeArray({ selector: this.selectors.solid, parent: this.rootNode });\n\r\n    this.stateArray = this.stateArray.map((state, stateIndex) => {\r\n      // create or assign existing markup, bind styles\r\n      const maskNode = this.isCustomMarkup ? this.customMaskNodeArray[stateIndex] : document.createElement('div');\n      bindStyles(maskNode, CROPPED_FULL_ABSOLUTE_STYLES);\n\r\n      const maskInnerNode = this.isCustomMarkup\r\n        ? maskNode.querySelector(this.selectors.maskInner)\r\n        : document.createElement('div');\r\n      bindStyles(maskInnerNode, CROPPED_FULL_ABSOLUTE_STYLES);\r\n\r\n      // mark created masks with data attributes\r\n      if (!this.isCustomMarkup) {\r\n        maskNode.dataset.immerserMask = '';\r\n        maskInnerNode.dataset.immerserMaskInner = '';\r\n      }\r\n\r\n      // clone solids to innerMask\r\n      this.originalSolidNodeArray.forEach((childNode) => {\r\n        const clonnedChildNode = childNode.cloneNode(true) as HTMLElement;\n        bindStyles(clonnedChildNode, INTERACTIVE_STYLES);\n        (clonnedChildNode as any).__immerserClonned = true;\n        maskInnerNode.appendChild(clonnedChildNode);\n      });\n\r\n      // assign class modifiers to cloned solids\r\n      const clonedSolidNodeList = maskInnerNode.querySelectorAll(this.selectors.solid);\r\n      forEachNode(clonedSolidNodeList, (clonedSolidNode) => {\r\n        const solidId = clonedSolidNode.dataset.immerserSolid;\r\n        if (state.solidClassnames && Object.prototype.hasOwnProperty.call(state.solidClassnames, solidId)) {\r\n          clonedSolidNode.classList.add(state.solidClassnames[solidId]);\r\n        }\r\n      });\r\n\r\n      // a11y\r\n      if (stateIndex !== 0) {\r\n        maskNode.setAttribute('aria-hidden', 'true');\r\n      }\r\n\r\n      maskNode.appendChild(maskInnerNode);\r\n      this.rootNode.appendChild(maskNode);\r\n\r\n      this.maskNodeArray.push(maskNode);\r\n\r\n      return { ...state, maskNode, maskInnerNode };\r\n    });\r\n\r\n    this.detachOriginalSolidNodes();\r\n  }\r\n\r\n  initCustomMarkup(): void {\n    this.customMaskNodeArray = getNodeArray({ selector: this.selectors.mask, parent: this.rootNode });\n    this.isCustomMarkup = this.customMaskNodeArray.length === this.stateArray.length;\n\n    if (this.customMaskNodeArray.length > 0 && !this.isCustomMarkup) {\n      showError({\n        message: 'You\\'re trying use custom markup, but count of your immerser masks doesn\\'t equal layers count.',\n        warning: true,\n        docs: '#cloning-event-listeners',\n      });\n    }\n\n    this.customMaskNodeArray.forEach((customMaskNode) => {\n      const customChildrenHTMLCollection = (customMaskNode.querySelector(this.selectors.maskInner) as HTMLElement).children;\n      for (let i = 0; i < customChildrenHTMLCollection.length; i++) {\n        bindStyles(customChildrenHTMLCollection[i] as HTMLElement, INTERACTIVE_STYLES);\n      }\n    });\n  }\n\n  detachOriginalSolidNodes(): void {\n    this.originalSolidNodeArray.forEach((childNode) => {\n      (this.rootNode as HTMLElement).removeChild(childNode);\n    });\n  }\n\n  initPagerLinks(): void {\n    this.pagerLinkNodeArray = getNodeArray({ selector: this.selectors.pagerLink, parent: this.rootNode });\n    this.pagerLinkNodeArray.forEach((pagerLinkNode) => {\n      const { href } = pagerLinkNode as HTMLAnchorElement;\n      if (href) {\n        const layerId = href.split('#')[1];\n        if (layerId) {\n          const layerIndex = this.stateIndexById[layerId];\n          pagerLinkNode.dataset.immerserLayerIndex = layerIndex.toString();\n        }\n      }\n    });\n  }\n\n  initHoverSynchro(): void {\n    this.synchroHoverNodeArray = getNodeArray({ selector: this.selectors.synchroHover, parent: this.rootNode });\n\n    this.onSynchroHoverMouseOver = (e: MouseEvent): void => {\n      const target = e.target as HTMLElement;\n      const synchroHoverId = target.dataset.immerserSynchroHover;\n      this.reactiveSynchroHoverId.value = synchroHoverId;\n    };\n\n    this.onSynchroHoverMouseOut = (): void => {\n      this.reactiveSynchroHoverId.value = undefined;\n    };\n\n    this.synchroHoverNodeArray.forEach((synchroHoverNode) => {\n      synchroHoverNode.addEventListener('mouseover', this.onSynchroHoverMouseOver!);\n      synchroHoverNode.addEventListener('mouseout', this.onSynchroHoverMouseOut!);\n    });\n  }\n\n  attachCallbacks(): void {\n    if (this.pagerLinkNodeArray.length > 0) {\n      this.stopRedrawingPager = this.reactiveActiveLayer.subscribe(this.drawPagerLinks.bind(this));\n    }\n\n    if (this.options.hasToUpdateHash) {\n      this.stopUpdatingHash = this.reactiveActiveLayer.subscribe(this.drawHash.bind(this));\n    }\n\n    if (typeof this.options.onActiveLayerChange === 'function') {\n      this.stopFiringActiveLayerChangeCallback = this.reactiveActiveLayer.subscribe((nextIndex) => {\n        this.options.onActiveLayerChange!(nextIndex, this);\n      });\n    }\n\n    if (this.synchroHoverNodeArray.length > 0) {\n      this.stopTrackingSynchroHover = this.reactiveSynchroHoverId.subscribe(this.drawSynchroHover.bind(this));\n    }\n  }\n\n  detachCallbacks(): void {\n    if (typeof this.stopRedrawingPager === 'function') {\n      this.stopRedrawingPager();\n    }\n\n    if (typeof this.stopUpdatingHash === 'function') {\n      this.stopUpdatingHash();\n    }\n\n    if (typeof this.stopFiringActiveLayerChangeCallback === 'function') {\n      this.stopFiringActiveLayerChangeCallback();\n    }\n\n    if (typeof this.stopTrackingSynchroHover === 'function') {\n      this.stopTrackingSynchroHover();\n    }\n  }\n\n  removeSyncroHoverListeners(): void {\n    this.synchroHoverNodeArray.forEach((synchroHoverNode) => {\n      synchroHoverNode.removeEventListener('mouseover', this.onSynchroHoverMouseOver!);\n      synchroHoverNode.removeEventListener('mouseout', this.onSynchroHoverMouseOut!);\n    });\n  }\n\n  clearCustomSectionIds(): void {\n    this.stateArray.forEach((state) => {\n      if ((state.layerNode as any).__immerserCustomId) {\n        state.layerNode.removeAttribute('id');\n      }\n    });\n  }\n\n  restoreOriginalSolidNodes(): void {\n    this.originalSolidNodeArray.forEach((childNode) => {\n      (this.rootNode as HTMLElement).appendChild(childNode);\n    });\n  }\n\n  cleanupClonnedMarkup(): void {\n    this.maskNodeArray.forEach((immerserMaskNode) => {\n      if (this.isCustomMarkup) {\n        immerserMaskNode.removeAttribute('style');\n        immerserMaskNode.removeAttribute('aria-hidden');\n        const immerserMaskInnerNode = immerserMaskNode.querySelector(this.selectors.maskInner) as HTMLElement;\n        immerserMaskInnerNode.removeAttribute('style');\n        const clonnedSolidNodeArray = getNodeArray({ selector: this.selectors.solid, parent: immerserMaskInnerNode });\n        clonnedSolidNodeArray.forEach((clonnedSolideNode) => {\n          if ((clonnedSolideNode as any).__immerserClonned) {\n            immerserMaskInnerNode.removeChild(clonnedSolideNode);\n          }\n        });\n      } else {\n        (this.rootNode as HTMLElement).removeChild(immerserMaskNode);\n      }\n    });\n  }\n\n  removeScrollAndResizeListeners(): void {\n    if (this.options.isScrollHandled) {\n      window.removeEventListener('scroll', this.onScroll!, false);\n    }\n    window.removeEventListener('resize', this.onResize!, false);\n  }\n\n  draw(scrollY?: number): void {\n    const y = scrollY !== undefined ? scrollY : getLastScrollPosition().y;\n    this.stateArray.forEach(\n      ({ beginEnter, endEnter, beginLeave, endLeave, maskNode, maskInnerNode, layerTop, layerBottom }, layerIndex) => {\n        let progress: number;\n\n        if (beginEnter > y) {\n          progress = this.immerserHeight;\n        } else if (beginEnter <= y && y < endEnter) {\n          progress = endEnter - y;\n        } else if (endEnter <= y && y < beginLeave) {\n          progress = 0;\n        } else if (beginLeave <= y && y < endLeave) {\n          progress = beginLeave - y;\n        } else {\n          progress = -this.immerserHeight;\n        }\n\n        maskNode.style.transform = `translateY(${progress}px)`;\n        maskInnerNode.style.transform = `translateY(${-progress}px)`;\n\n        const pagerScrollActivePoint = y + this.windowHeight * (1 - this.options.pagerThreshold);\n        if (layerTop <= pagerScrollActivePoint && pagerScrollActivePoint < layerBottom) {\n          this.reactiveActiveLayer.value = layerIndex;\n        }\n      },\n    );\n  }\n\n  drawPagerLinks(layerIndex?: number): void {\n    this.pagerLinkNodeArray.forEach((pagerLinkNode) => {\n      if (parseInt(pagerLinkNode.dataset.immerserLayerIndex, 10) === layerIndex) {\n        pagerLinkNode.classList.add(this.options.pagerLinkActiveClassname);\n      } else {\n        pagerLinkNode.classList.remove(this.options.pagerLinkActiveClassname);\n      }\n    });\n  }\n\n  drawHash(layerIndex: number): void {\n    const { id, layerNode } = this.stateArray[layerIndex];\n    layerNode.removeAttribute('id');\n    window.location.hash = id;\n    layerNode.setAttribute('id', id);\n  }\n\n  drawSynchroHover(synchroHoverId?: string): void {\n    this.synchroHoverNodeArray.forEach((synchroHoverNode) => {\n      if (synchroHoverNode.dataset.immerserSynchroHover === synchroHoverId) {\n        synchroHoverNode.classList.add('_hover');\n      } else {\n        synchroHoverNode.classList.remove('_hover');\n      }\n    });\n  }\n\n  adjustScroll(): void {\n    const { layerTop, layerBottom } = this.stateArray[this.reactiveActiveLayer.value as number];\n    const { x, y } = getLastScrollPosition();\n    const topThreshold = Math.abs(y - layerTop);\n    const bottomThreshold = Math.abs(y + this.windowHeight - layerBottom);\n\n    if (topThreshold !== 0 && bottomThreshold !== 0) {\n      if (topThreshold <= bottomThreshold && topThreshold <= this.options.scrollAdjustThreshold) {\n        window.scrollTo(x, layerTop);\n      } else if (bottomThreshold <= topThreshold && bottomThreshold <= this.options.scrollAdjustThreshold) {\n        window.scrollTo(x, layerBottom - this.windowHeight);\n      }\n    }\n  }\n\n  onDOMChange(): void {\n    this.setSizes();\n    this.draw();\n  }\n\n  handleScroll(): void {\n    if (this.isBound) {\n      if (this.scrollFrameId) {\n        window.cancelAnimationFrame(this.scrollFrameId);\n        this.scrollFrameId = null;\n      }\n      this.scrollFrameId = window.requestAnimationFrame(() => {\n        this.draw();\n        if (this.options.scrollAdjustThreshold > 0) {\n          if (this.scrollAdjustTimerId) {\n            clearTimeout(this.scrollAdjustTimerId);\n            this.scrollAdjustTimerId = null;\n          }\n          this.scrollAdjustTimerId = setTimeout(this.adjustScroll.bind(this), this.options.scrollAdjustDelay);\n        }\n      }, this.options.scrollAdjustDelay);\n    }\n  }\n\n  handleResize(): void {\n    if (this.resizeFrameId) {\n      window.cancelAnimationFrame(this.resizeFrameId);\n      this.resizeFrameId = null;\n    }\n    this.resizeFrameId = window.requestAnimationFrame(() => {\n      this.setSizes();\n      this.draw();\n    });\n  }\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(254);\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => module['default'] :\n\t\t() => module;\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)"],"sourceRoot":""}