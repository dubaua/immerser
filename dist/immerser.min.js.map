{"version":3,"file":"immerser.min.js","mappings":"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","sources":["webpack://Immerser/webpack/universalModuleDefinition","webpack://Immerser/./node_modules/@dubaua/observable/dist/observable.min.js","webpack://Immerser/./node_modules/@dubaua/merge-options/dist/merge-options.min.js","webpack://Immerser/webpack/bootstrap","webpack://Immerser/webpack/runtime/compat get default export","webpack://Immerser/webpack/runtime/define property getters","webpack://Immerser/webpack/runtime/hasOwnProperty shorthand","webpack://Immerser/./src/options.ts","webpack://Immerser/./src/utils.ts","webpack://Immerser/./src/immerser.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Immerser\"] = factory();\n\telse\n\t\troot[\"Immerser\"] = factory();\n})(this, () => {\nreturn ","\"use strict\";function t(t){var e=function(t){if(\"object\"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,\"string\");if(\"object\"!=typeof i)return i;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(t)}(t);return\"symbol\"==typeof e?e:e+\"\"}module.exports=/*#__PURE__*/function(){function Observable(t){this.callbacks=[],this.internal=t,this.initialValue=t}var e,i,r=Observable.prototype;return r.subscribe=function(t){var e=this;if(\"function\"!=typeof t)throw new TypeError(\"[createObservable]: expected callback to be a function.\");return this.callbacks.push(t),function(){var i=e.callbacks.indexOf(t);e.callbacks=e.callbacks.slice(0,i).concat(e.callbacks.slice(i+1))}},r.reset=function(){this.callbacks=[],this.internal=this.initialValue},e=Observable,(i=[{key:\"value\",get:function(){return this.internal},set:function(t){if(t!==this.internal){var e=this.internal;this.internal=t;for(var i=0;i<this.callbacks.length;i++)this.callbacks[i](this.internal,e)}}}])&&function(e,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,t(n.key),n)}}(e.prototype,i),Object.defineProperty(e,\"prototype\",{writable:!1}),e}();\n//# sourceMappingURL=observable.min.js.map\n","\"use strict\";function o(o,e){return Object.prototype.hasOwnProperty.call(o,e)}function e(o){return null!==o&&\"object\"==typeof o&&!1===Array.isArray(o)}function t(e){var t=e.optionConfig,i=e.userOptions,r=void 0===i?{}:i,n=e.prefix,a=void 0===n?\"\":n,f=e.suffix,u=void 0===f?\"\":f,p=e.strict,d=void 0===p||p,c=function(o){return[a,o,u].join(\" \")},s={};for(var l in t)if(o(t,l)){var g=t[l],v=g.required,y=g.default,b=g.description,x=g.validator,h=r[l],q=!!o(g,\"required\")&&(\"function\"==typeof v?v(r):v),E=o(r,l),w=x(h,r);if(q){if(!E)throw new TypeError(c(l+\" is required.\"));if(!w)throw new TypeError(c(\"Expected \"+l+\" to be \"+b+\", got \"+typeof h+\" \"+h+\".\"));s[l]=h}else if(s[l]=y,E)if(w)s[l]=h;else{if(d)throw new TypeError(c(\"Expected \"+l+\" to be \"+b+\", got \"+typeof h+\" \"+h+\".\"));console.warn(c(\"Expected \"+l+\" to be \"+b+\", got \"+typeof h+\" \"+h+\". Fallback to default value \"+y+\".\"))}}return s}var i=\"[mergeOptions]:\",r=\"\\nCheck out documentation https://github.com/dubaua/merge-options#parameters-and-return\";function n(o){throw new TypeError([i,o,r].join(\" \"))}var a={optionConfig:{required:!0,validator:function(t){for(var i in t)if(o(t,i)){var r=t[i];if(e(r)||n(\"Expected optionConfig.\"+i+\" to be an object with declarative option configuration, got \"+typeof r+\" \"+r+\".\"),o(r,\"required\")){var a=r.required,f=typeof a;\"boolean\"!==f&&\"function\"!==f&&n(\"Expected optionConfig.\"+i+\".required to be either boolean or function, got \"+typeof a+\" \"+a+\".\")}else o(r,\"default\")||n(\"Expected optionConfig.\"+i+\" to either have required or default value.\");if(o(r,\"default\")||o(r,\"required\")||n(\"Expected optionConfig.\"+i+\" to either have required or default value.\"),o(r,\"description\")){var u=r.description;\"string\"!=typeof r.description&&n(\"Expected optionConfig.\"+i+\".description to be a string, got \"+typeof u+\" \"+u+\".\")}else n(\"Missing description on optionConfig.\"+i+\" config.\");if(o(r,\"validator\")){var p=r.validator;\"function\"!=typeof r.validator&&n(\"Expected optionConfig.\"+i+\".validator to be a function, got \"+typeof p+\" \"+p+\".\")}else n(\"Missing validator on optionConfig.\"+i+\" config.\")}return e(t)},description:\"an object with declarative option configuration\"},userOptions:{required:!1,default:{},validator:e,description:\"an object\"},prefix:{required:!1,default:\"\",validator:function(o){return\"string\"==typeof o},description:\"a string\"},suffix:{required:!1,default:\"\",validator:function(o){return\"string\"==typeof o},description:\"a string\"},strict:{required:!1,default:!0,validator:function(o){return\"boolean\"==typeof o},description:\"a boolean\"}};module.exports=function(o){var e=t({optionConfig:a,userOptions:o,prefix:i,suffix:r});return t(e)};\n//# sourceMappingURL=merge-options.min.js.map\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","import type { OptionConfig } from '@dubaua/merge-options';\nimport type { EventName, Options } from './types';\n\nconst CLASSNAME_REGEX = /^[a-z_-][a-z\\d_-]*$/i;\n\nexport const INITIAL_DEBUG = process.env.NODE_ENV === 'development';\n\n/** @public All available immerser event names. */\nexport const EVENT_NAMES = ['init', 'bind', 'unbind', 'destroy', 'activeLayerChange', 'layersUpdate'] as const;\n\nfunction classnameValidator(str: string): boolean {\n  return typeof str === 'string' && str !== '' && CLASSNAME_REGEX.test(str);\n}\n\nfunction onOptionValidator(on?: Options['on']): boolean {\n  if (on === undefined) {\n    return true;\n  }\n  if (!on || typeof on !== 'object' || Array.isArray(on)) {\n    return false;\n  }\n  return Object.keys(on).every(\n    (eventName) =>\n      EVENT_NAMES.includes(eventName as EventName) &&\n      (on as Record<string, unknown>)[eventName] !== undefined &&\n      typeof (on as Record<string, unknown>)[eventName] === 'function',\n  );\n}\n\nexport const OPTION_CONFIG: OptionConfig<Options> = {\n  solidClassnameArray: {\n    default: [],\n    description: 'non empty array of objects',\n    validator: (x) => Array.isArray(x) && x.length !== 0,\n  },\n  fromViewportWidth: {\n    default: 0,\n    description: 'a natural number',\n    validator: (x) => typeof x === 'number' && 0 <= x && x % 1 === 0,\n  },\n  pagerThreshold: {\n    default: 0.5,\n    description: 'a number between 0 and 1',\n    validator: (x) => typeof x === 'number' && 0 <= x && x <= 1,\n  },\n  hasToUpdateHash: {\n    default: false,\n    description: 'a boolean',\n    validator: (x) => typeof x === 'boolean',\n  },\n  scrollAdjustThreshold: {\n    default: 0,\n    description: 'a number greater than or equal to 0',\n    validator: (x) => typeof x === 'number' && x >= 0,\n  },\n  scrollAdjustDelay: {\n    default: 600,\n    description: 'a number greater than or equal to 300',\n    validator: (x) => typeof x === 'number' && x >= 300,\n  },\n  pagerLinkActiveClassname: {\n    default: 'pager-link-active',\n    description: 'valid non empty classname string',\n    validator: classnameValidator,\n  },\n  isScrollHandled: {\n    default: true,\n    description: 'a boolean',\n    validator: (x) => typeof x === 'boolean',\n  },\n  debug: {\n    default: INITIAL_DEBUG,\n    description: 'a boolean',\n    validator: (x) => typeof x === 'boolean',\n  },\n  on: {\n    default: {},\n    description: 'an object containing event handlers',\n    validator: onOptionValidator,\n  },\n};\n\nexport const MESSAGE_PREFIX = '[immerser:]';\n\nexport const CROPPED_FULL_ABSOLUTE_STYLES: Record<string, string> = {\n  position: 'absolute',\n  top: '0',\n  right: '0',\n  bottom: '0',\n  left: '0',\n  overflow: 'hidden',\n};\n\nexport const NOT_INTERACTIVE_STYLES: Record<string, string> = {\n  pointerEvents: 'none',\n  touchAction: 'none',\n};\n\nexport const INTERACTIVE_STYLES: Record<string, string> = {\n  pointerEvents: 'all',\n  touchAction: 'auto',\n};\n","export function bindStyles(node: HTMLElement, styles: { [key: string]: string }): void {\n  for (const rule in styles) {\n    (node.style as any)[rule] = styles[rule];\n  }\n}\n\nexport function forEachNode<T extends Element>(\n  nodeList: ArrayLike<T>,\n  callback: (node: T, index: number, nodeList: ArrayLike<T>) => void,\n): void {\n  for (let index = 0; index < nodeList.length; index++) {\n    const node = nodeList[index];\n    callback(node, index, nodeList);\n  }\n}\n\nexport function getNodeArray<T extends Element = HTMLElement>({\n  selector,\n  parent = document,\n}: {\n  selector: string;\n  parent?: Document | Element | null;\n}): T[] {\n  if (!parent) {\n    return [];\n  }\n  const nodeList = parent.querySelectorAll<T>(selector);\n  return Array.from(nodeList);\n}\n\nexport function isEmpty(obj?: Record<string, any> | null): boolean {\n  if (!obj) {\n    return true;\n  }\n  return Object.keys(obj).length === 0 && obj.constructor === Object;\n}\n\nexport function limit(number: number, min: number, max: number): number {\n  return Math.max(Math.min(number, max), min);\n}\n\nexport function getLastScrollPosition(): { x: number; y: number } {\n  const scrollX = window.scrollX || document.documentElement.scrollLeft;\n  const scrollY = window.scrollY || document.documentElement.scrollTop;\n  // limit scroll position between 0 and document height in case of iOS overflow scroll\n  return {\n    x: limit(scrollX, 0, document.documentElement.offsetWidth),\n    y: limit(scrollY, 0, document.documentElement.offsetHeight),\n  };\n}\n\ntype WrappedOnceHandler<F extends (...args: any[]) => void> = F & {\n  __immerserOriginalHandler?: F;\n};\n\nexport function wrapOnceHandler<F extends(...args: any[]) => void>(\n  original: F,\n  wrapper: (...args: Parameters<F>) => void,\n): F {\n  const wrapped = wrapper as WrappedOnceHandler<F>;\n  wrapped.__immerserOriginalHandler = original;\n  return wrapped;\n}\n\nexport function getOriginalHandler<F extends(...args: any[]) => void>(handler: F): F | undefined {\n  return (handler as WrappedOnceHandler<F>).__immerserOriginalHandler;\n}\n","import mergeOptions from '@dubaua/merge-options';\nimport Observable from '@dubaua/observable';\nimport {\n  CROPPED_FULL_ABSOLUTE_STYLES,\n  EVENT_NAMES,\n  INITIAL_DEBUG,\n  INTERACTIVE_STYLES,\n  MESSAGE_PREFIX,\n  NOT_INTERACTIVE_STYLES,\n  OPTION_CONFIG,\n} from './options';\nimport {\n  bindStyles,\n  forEachNode,\n  getLastScrollPosition,\n  getNodeArray,\n  getOriginalHandler,\n  isEmpty,\n  wrapOnceHandler,\n} from './utils';\nimport type {\n  ActiveLayerChangeHandler,\n  BaseHandler,\n  EventHandlers,\n  EventName,\n  HandlerArgs,\n  HandlerByEventName,\n  LayerState,\n  LayersUpdateHandler,\n  Options,\n  SolidClassnames,\n} from './types';\n\n/** @public Main Immerser controller orchestrating markup cloning and scroll-driven transitions. */\nexport default class Immerser {\n  private _options: Options = {} as Options;\n  private _selectors = {\n    root: '[data-immerser]',\n    layer: '[data-immerser-layer]',\n    solid: '[data-immerser-solid]',\n    pagerLink: '[data-immerser-pager-link]',\n    mask: '[data-immerser-mask]',\n    maskInner: '[data-immerser-mask-inner]',\n    synchroHover: '[data-immerser-synchro-hover]',\n  };\n  private _layerStateArray: LayerState[] = [];\n  private _layerStateIndexById: Record<string, number> = {};\n  private _isBound = false;\n  private _rootNode: HTMLElement | null = null;\n  private _layerNodeArray: HTMLElement[] = [];\n  private _solidNodeArray: HTMLElement[] = [];\n  private _pagerLinkNodeArray: HTMLElement[] = [];\n  private _originalSolidNodeArray: HTMLElement[] = [];\n  private _maskNodeArray: HTMLElement[] = [];\n  private _synchroHoverNodeArray: HTMLElement[] = [];\n  private _isCustomMarkup = false;\n  private _customMaskNodeArray: HTMLElement[] = [];\n  private _windowHeight = 0;\n  private _immerserTop = 0;\n  private _immerserHeight = 0;\n  private _resizeFrameId: number | null = null;\n  private _resizeObserver: ResizeObserver | null = null;\n  private _scrollFrameId: number | null = null;\n  private _scrollAdjustTimerId: ReturnType<typeof setTimeout> | null = null;\n  private _reactiveActiveLayer = new Observable<number>(-1);\n  private _reactiveWindowWidth = new Observable<number>(-1);\n  private _reactiveSynchroHoverId = new Observable<string | null>(null);\n  private _layerProgressArray: number[] = [];\n  private _unsubscribeRedrawingPager: (() => void) | null = null;\n  private _unsubscribeUpdatingHash: (() => void) | null = null;\n  private _unsubscribeActiveLayerChange: (() => void) | null = null;\n  private _unsubscribeSynchroHover: (() => void) | null = null;\n  private _unsubscribeToggleBindOnResize: (() => void) | null = null;\n  private _handlers: Record<EventName, Set<HandlerByEventName[EventName]>> = {\n    init: new Set(),\n    bind: new Set(),\n    unbind: new Set(),\n    destroy: new Set(),\n    activeLayerChange: new Set(),\n    layersUpdate: new Set(),\n  };\n  private _onResize: (() => void) | null = null;\n  private _onScroll: (() => void) | null = null;\n  private _onSynchroHoverMouseOver: ((e: MouseEvent) => void) | null = null;\n  private _onSynchroHoverMouseOut: (() => void) | null = null;\n\n  /** Enables warnings/errors reporting. Defaults to NODE_ENV===development. */\n  public debug = INITIAL_DEBUG;\n\n  /**\n   * Creates immerser instance and immediately runs setup with optional user options.\n   * @param userOptions - overrides for defaults defined in OPTION_CONFIG if pass validation\n   */\n  constructor(userOptions?: Partial<Options>) {\n    this._init(userOptions);\n  }\n\n  /** Bootstraps nodes, options, state, listeners and emits init event. */\n  private _init(userOptions?: Partial<Options>): void {\n    this._mergeOptions(userOptions);\n    this.debug = this._options.debug;\n    this._setDomNodes();\n    this._validateMarkup();\n    this._registerHandlersFromOptions();\n    this._readClassnamesFromMarkup();\n    this._validateSolidClassnameArray();\n    this._initSectionIds();\n    this._initLayerStateArray();\n    this._validateClassnames();\n    this._toggleBindOnResizeObserver();\n    this._setSizes();\n    this._addScrollAndResizeListeners();\n    this._emit('init', this);\n  }\n\n  /** Saves event handlers passed via options into internal registry. */\n  private _registerHandlersFromOptions(): void {\n    if (!this._options.on) {\n      return;\n    }\n    EVENT_NAMES.forEach((eventName) => {\n      const handler = this._options.on?.[eventName];\n      if (typeof handler === 'function') {\n        this.on(eventName, handler);\n      }\n    });\n  }\n\n  /** Executes registered event handlers with provided arguments. */\n  private _emit<K extends EventName>(eventName: K, ...args: HandlerArgs<K>): void {\n    const handlerSet = this._handlers[eventName];\n    handlerSet.forEach((handler: HandlerByEventName[K]) => {\n      try {\n        handler.apply(undefined, args);\n      } catch (error) {\n        this._report({\n          message: `handler for ${eventName} event failed`,\n          error,\n          docsHash: '#events',\n        });\n      }\n    });\n  }\n\n  private _report({\n    message,\n    error,\n    isWarning = false,\n    docsHash = '',\n  }: {\n    message: string;\n    error?: unknown;\n    isWarning?: boolean;\n    docsHash?: string;\n  }): void {\n    const resultMessage = `${MESSAGE_PREFIX} ${message} \\nCheck out documentation https://github.com/dubaua/immerser${docsHash}`;\n\n    if (isWarning) {\n      if (!this.debug) {\n        return;\n      }\n\n      error !== undefined ? console.warn(resultMessage, error) : console.warn(resultMessage);\n\n      return;\n    }\n\n    throw new Error(resultMessage, { cause: error });\n  }\n\n  /** Collects root, layer and solid nodes from DOM. */\n  private _setDomNodes(): void {\n    this._rootNode = document.querySelector<HTMLElement>(this._selectors.root);\n    this._layerNodeArray = getNodeArray({ selector: this._selectors.layer });\n    this._solidNodeArray = getNodeArray({ selector: this._selectors.solid, parent: this._rootNode });\n  }\n\n  /** Validates required markup presence and reports descriptive errors. */\n  private _validateMarkup(): void {\n    if (!this._rootNode) {\n      this._report({\n        message: 'root node not found.',\n        docsHash: '#prepare-your-markup',\n      });\n    }\n    if (this._layerNodeArray.length === 0) {\n      this._report({\n        message: 'layer nodes not found.',\n        docsHash: '#prepare-your-markup',\n      });\n    }\n    if (this._solidNodeArray.length === 0) {\n      this._report({\n        message: 'solid nodes not found.',\n        docsHash: '#prepare-your-markup',\n      });\n    }\n  }\n\n  /** Merges user options with defaults and attaches helper metadata to messages. */\n  private _mergeOptions(userOptions?: Partial<Options>): void {\n    this._options = mergeOptions({\n      optionConfig: OPTION_CONFIG,\n      userOptions,\n      prefix: MESSAGE_PREFIX,\n      suffix: '\\nCheck out documentation https://github.com/dubaua/immerser#options',\n    }) as Options;\n  }\n\n  /** Reads per-layer classname configs from data attributes if provided. */\n  private _readClassnamesFromMarkup(): void {\n    this._layerNodeArray.forEach((layerNode, layerIndex) => {\n      if (layerNode.dataset.immerserLayerConfig) {\n        try {\n          this._options.solidClassnameArray[layerIndex] = JSON.parse(layerNode.dataset.immerserLayerConfig);\n        } catch (error) {\n          this._report({\n            message: 'Failed to parse JSON classname configuration.',\n            error,\n            docsHash: '#options',\n          });\n        }\n      }\n    });\n  }\n\n  /** Ensures classname configuration length matches layers count. */\n  private _validateSolidClassnameArray(): void {\n    const layerCount = this._layerNodeArray.length;\n    const classnamesCount = this._options.solidClassnameArray.length;\n    if (classnamesCount !== layerCount) {\n      this._report({\n        message: 'solidClassnameArray length differs from count of layers',\n        docsHash: '#options',\n      });\n    }\n  }\n\n  /** Assigns ids to layers when missing and records their indexes. */\n  private _initSectionIds(): void {\n    this._layerNodeArray.forEach((layerNode, layerIndex) => {\n      let id = layerNode.id;\n      if (!id) {\n        id = `immerser-section-${layerIndex}`;\n        layerNode.id = id;\n        (layerNode as any).__immerserCustomId = true;\n      }\n      this._layerStateIndexById[id] = layerIndex;\n    });\n  }\n\n  /** Creates initial LayerState entries for every layer. */\n  private _initLayerStateArray(): void {\n    this._layerStateArray = this._layerNodeArray.map((layerNode, layerIndex) => {\n      const solidClassnames = this._options.solidClassnameArray[layerIndex];\n      const { id } = layerNode;\n      return {\n        beginEnter: 0,\n        beginLeave: 0,\n        endEnter: 0,\n        endLeave: 0,\n        id,\n        layerBottom: 0,\n        layerTop: 0,\n        maskInnerNode: null,\n        maskNode: null,\n        layerNode: layerNode,\n        solidClassnames,\n      } as LayerState;\n    });\n    this._layerProgressArray = this._layerNodeArray.map(() => 0);\n  }\n\n  /** Verifies solid classnames are configured; otherwise warns via showError. */\n  private _validateClassnames(): void {\n    const noClassnameConfigPassed = this._layerStateArray.every((state) => isEmpty(state.solidClassnames));\n    if (noClassnameConfigPassed) {\n      this._report({\n        message: 'immerser will do nothing without solid classname configuration.',\n        docsHash: '#prepare-your-markup',\n        isWarning: true,\n      });\n    }\n  }\n\n  /** Subscribes to window width changes to bind/unbind based on breakpoint. */\n  private _toggleBindOnResizeObserver(): void {\n    this._unsubscribeToggleBindOnResize = this._reactiveWindowWidth.subscribe((nextWindowWidth) => {\n      if (nextWindowWidth >= this._options.fromViewportWidth) {\n        if (!this._isBound) {\n          this.bind();\n        }\n      } else if (this._isBound) {\n        this.unbind();\n      }\n    });\n  }\n\n  /** Recalculates sizes and thresholds for each layer and updates window width observable. */\n  private _setSizes(): void {\n    this._windowHeight = window.innerHeight;\n    this._immerserTop = (this._rootNode as HTMLElement).offsetTop;\n    this._immerserHeight = (this._rootNode as HTMLElement).offsetHeight;\n\n    this._layerStateArray = this._layerStateArray.map((state) => {\n      const layerTop = state.layerNode.offsetTop;\n      const layerBottom = layerTop + state.layerNode.offsetHeight;\n\n      const endEnter = layerTop - this._immerserTop;\n      const beginEnter = endEnter - this._immerserHeight;\n      const endLeave = layerBottom - this._immerserTop;\n      const beginLeave = endLeave - this._immerserHeight;\n\n      return {\n        ...state,\n        layerTop,\n        layerBottom,\n        beginEnter,\n        endEnter,\n        beginLeave,\n        endLeave,\n      } as LayerState;\n    });\n\n    this._reactiveWindowWidth.value = window.innerWidth;\n  }\n\n  /** Attaches scroll and resize listeners respecting isScrollHandled flag. */\n  private _addScrollAndResizeListeners(): void {\n    if (this._options.isScrollHandled) {\n      this._onScroll = this._handleScroll.bind(this);\n      window.addEventListener('scroll', this._onScroll, false);\n    }\n    this._onResize = this._handleResize.bind(this);\n    window.addEventListener('resize', this._onResize, false);\n    window.addEventListener('orientationchange', this._onResize, false);\n    if (typeof ResizeObserver !== 'undefined') {\n      this._resizeObserver = new ResizeObserver(this._onResize);\n      this._resizeObserver.observe(this._rootNode);\n    }\n  }\n\n  /** Clears internal caches, observables and references after destroy. */\n  private _resetInternalState(): void {\n    this._layerStateArray = [];\n    this._layerStateIndexById = {};\n    this._isBound = false;\n    this._rootNode = null;\n    this._layerNodeArray = [];\n    this._solidNodeArray = [];\n    this._pagerLinkNodeArray = [];\n    this._originalSolidNodeArray = [];\n    this._maskNodeArray = [];\n    this._synchroHoverNodeArray = [];\n    this._isCustomMarkup = false;\n    this._customMaskNodeArray = [];\n    this._windowHeight = 0;\n    this._immerserTop = 0;\n    this._immerserHeight = 0;\n    this._resizeFrameId = null;\n    this._resizeObserver = null;\n    this._scrollFrameId = null;\n    this._scrollAdjustTimerId = null;\n    this._reactiveActiveLayer.reset();\n    this._reactiveWindowWidth.reset();\n    this._reactiveSynchroHoverId.reset();\n    this._layerProgressArray = [];\n    this._unsubscribeRedrawingPager = null;\n    this._unsubscribeUpdatingHash = null;\n    this._unsubscribeActiveLayerChange = null;\n    this._unsubscribeSynchroHover = null;\n    this._unsubscribeToggleBindOnResize = null;\n    this._onResize = null;\n    this._onScroll = null;\n    this._onSynchroHoverMouseOver = null;\n    this._onSynchroHoverMouseOut = null;\n    EVENT_NAMES.forEach((eventName) => this._handlers[eventName].clear());\n  }\n\n  /** Builds masks, clones solids, applies classes and mounts generated markup. */\n  private _createMarkup(): void {\n    bindStyles(this._rootNode as HTMLElement, NOT_INTERACTIVE_STYLES);\n    this._initCustomMarkup();\n    this._originalSolidNodeArray = getNodeArray({ selector: this._selectors.solid, parent: this._rootNode });\n\n    this._layerStateArray = this._layerStateArray.map((state, stateIndex) => {\n      // create or assign existing markup, bind styles\n      const maskNode = this._isCustomMarkup ? this._customMaskNodeArray[stateIndex] : document.createElement('div');\n      bindStyles(maskNode, CROPPED_FULL_ABSOLUTE_STYLES);\n\n      let maskInnerNode = this._isCustomMarkup\n        ? maskNode.querySelector<HTMLElement>(this._selectors.maskInner)\n        : document.createElement('div');\n      if (!maskInnerNode) {\n        maskInnerNode = document.createElement('div');\n      }\n      bindStyles(maskInnerNode, CROPPED_FULL_ABSOLUTE_STYLES);\n\n      // mark created masks with data attributes\n      if (!this._isCustomMarkup) {\n        maskNode.dataset.immerserMask = '';\n        maskInnerNode.dataset.immerserMaskInner = '';\n      }\n\n      // clone solids to innerMask\n      this._originalSolidNodeArray.forEach((childNode) => {\n        const clonedChildNode = childNode.cloneNode(true);\n        if (clonedChildNode instanceof HTMLElement) {\n          bindStyles(clonedChildNode, INTERACTIVE_STYLES);\n          (clonedChildNode as any).__immerserCloned = true;\n          maskInnerNode.appendChild(clonedChildNode);\n        }\n      });\n\n      // assign class modifiers to cloned solids\n      const clonedSolidNodeList = getNodeArray<HTMLElement>({\n        selector: this._selectors.solid,\n        parent: maskInnerNode,\n      });\n      forEachNode(clonedSolidNodeList, (clonedSolidNode) => {\n        const solidId = clonedSolidNode.dataset.immerserSolid;\n        if (state.solidClassnames && Object.prototype.hasOwnProperty.call(state.solidClassnames, solidId)) {\n          clonedSolidNode.classList.add(state.solidClassnames[solidId]);\n        }\n      });\n\n      // a11y\n      if (stateIndex !== 0) {\n        maskNode.setAttribute('aria-hidden', 'true');\n      }\n\n      maskNode.appendChild(maskInnerNode);\n      this._rootNode.appendChild(maskNode);\n\n      this._maskNodeArray.push(maskNode);\n\n      return { ...state, maskNode, maskInnerNode };\n    });\n\n    this._detachOriginalSolidNodes();\n  }\n\n  /** Validates and prepares custom masks, binding interactive styles to their children. */\n  private _initCustomMarkup(): void {\n    this._customMaskNodeArray = getNodeArray({ selector: this._selectors.mask, parent: this._rootNode });\n    this._isCustomMarkup = this._customMaskNodeArray.length === this._layerStateArray.length;\n\n    if (this._customMaskNodeArray.length > 0 && !this._isCustomMarkup) {\n      this._report({\n        message: `You're trying use custom markup, but count of your immerser masks doesn't equal layers count.`,\n        isWarning: true,\n        docsHash: '#cloning-event-listeners',\n      });\n    }\n\n    this._customMaskNodeArray.forEach((customMaskNode) => {\n      const maskInnerNode = customMaskNode.querySelector<HTMLElement>(this._selectors.maskInner);\n      if (!maskInnerNode) {\n        return;\n      }\n      Array.from(maskInnerNode.children).forEach((child) => {\n        if (child instanceof HTMLElement) {\n          bindStyles(child, INTERACTIVE_STYLES);\n        }\n      });\n    });\n  }\n\n  /** Removes original solid nodes from root after clones are in place. */\n  private _detachOriginalSolidNodes(): void {\n    if (!this._rootNode) {\n      return;\n    }\n    this._originalSolidNodeArray.forEach((childNode) => {\n      this._rootNode.removeChild(childNode);\n    });\n  }\n\n  /** Parses pager links and maps them to layer indexes using href hash. */\n  private _initPagerLinks(): void {\n    this._pagerLinkNodeArray = getNodeArray({ selector: this._selectors.pagerLink, parent: this._rootNode });\n    this._pagerLinkNodeArray.forEach((pagerLinkNode) => {\n      const { href } = pagerLinkNode as HTMLAnchorElement;\n      if (href) {\n        const layerId = href.split('#')[1];\n        if (layerId) {\n          const layerIndex = this._layerStateIndexById[layerId];\n          pagerLinkNode.dataset.immerserLayerIndex = layerIndex.toString();\n        }\n      }\n    });\n  }\n\n  /** Sets up synchro hover listeners and reactive updates. */\n  private _initHoverSynchro(): void {\n    this._synchroHoverNodeArray = getNodeArray({ selector: this._selectors.synchroHover, parent: this._rootNode });\n\n    this._onSynchroHoverMouseOver = (e: MouseEvent): void => {\n      const target = e.target as HTMLElement;\n      const synchroHoverId = target.dataset.immerserSynchroHover;\n      this._reactiveSynchroHoverId.value = synchroHoverId;\n    };\n\n    this._onSynchroHoverMouseOut = (): void => {\n      this._reactiveSynchroHoverId.value = null;\n    };\n\n    this._synchroHoverNodeArray.forEach((synchroHoverNode) => {\n      synchroHoverNode.addEventListener('mouseover', this._onSynchroHoverMouseOver!);\n      synchroHoverNode.addEventListener('mouseout', this._onSynchroHoverMouseOut!);\n    });\n  }\n\n  /** Subscribes to reactive values to redraw pager, hash, callbacks and hover. */\n  private _attachCallbacks(): void {\n    if (this._pagerLinkNodeArray.length > 0) {\n      this._unsubscribeRedrawingPager = this._reactiveActiveLayer.subscribe(this._drawPagerLinks.bind(this));\n    }\n\n    if (this._options.hasToUpdateHash) {\n      this._unsubscribeUpdatingHash = this._reactiveActiveLayer.subscribe(this._drawHash.bind(this));\n    }\n\n    this._unsubscribeActiveLayerChange = this._reactiveActiveLayer.subscribe((nextIndex) => {\n      this._emit('activeLayerChange', nextIndex, this);\n    });\n\n    if (this._synchroHoverNodeArray.length > 0) {\n      this._unsubscribeSynchroHover = this._reactiveSynchroHoverId.subscribe(this._drawSynchroHover.bind(this));\n    }\n  }\n\n  /** Unsubscribes from all reactive callbacks. */\n  private _detachCallbacks(): void {\n    this._unsubscribeRedrawingPager?.();\n    this._unsubscribeUpdatingHash?.();\n    this._unsubscribeActiveLayerChange?.();\n    this._unsubscribeSynchroHover?.();\n  }\n\n  /** Removes hover listeners from synchro hover nodes. */\n  private _removeSyncroHoverListeners(): void {\n    this._synchroHoverNodeArray.forEach((synchroHoverNode) => {\n      synchroHoverNode.removeEventListener('mouseover', this._onSynchroHoverMouseOver!);\n      synchroHoverNode.removeEventListener('mouseout', this._onSynchroHoverMouseOut!);\n    });\n  }\n\n  /** Drops autogenerated ids from layers on teardown. */\n  private _clearCustomSectionIds(): void {\n    this._layerStateArray.forEach((state) => {\n      if ((state.layerNode as any).__immerserCustomId) {\n        state.layerNode.removeAttribute('id');\n      }\n    });\n  }\n\n  /** Restores original solid nodes back into the root node. */\n  private _restoreOriginalSolidNodes(): void {\n    if (!this._rootNode) {\n      return;\n    }\n    this._originalSolidNodeArray.forEach((childNode) => {\n      this._rootNode.appendChild(childNode);\n    });\n  }\n\n  /** Removes cloned markup or cleans up custom masks when unbinding. */\n  private _cleanupClonedMarkup(): void {\n    this._maskNodeArray.forEach((immerserMaskNode) => {\n      if (this._isCustomMarkup) {\n        immerserMaskNode.removeAttribute('style');\n        immerserMaskNode.removeAttribute('aria-hidden');\n        const immerserMaskInnerNode = immerserMaskNode.querySelector<HTMLElement>(this._selectors.maskInner);\n        if (!immerserMaskInnerNode) {\n          return;\n        }\n        immerserMaskInnerNode.removeAttribute('style');\n        const clonedSolidNodeArray = getNodeArray({ selector: this._selectors.solid, parent: immerserMaskInnerNode });\n        clonedSolidNodeArray.forEach((clonedSolidNode) => {\n          if ((clonedSolidNode as any).__immerserCloned) {\n            immerserMaskInnerNode.removeChild(clonedSolidNode);\n          }\n        });\n      } else {\n        if (this._rootNode) {\n          this._rootNode.removeChild(immerserMaskNode);\n        }\n      }\n    });\n  }\n\n  private _removeScrollAndResizeListeners(): void {\n    if (this._options.isScrollHandled) {\n      window.removeEventListener('scroll', this._onScroll!, false);\n    }\n    window.removeEventListener('resize', this._onResize!, false);\n    window.removeEventListener('orientationchange', this._onResize!, false);\n    this._resizeObserver?.disconnect();\n  }\n\n  /** Calculates per-layer progress (0..1) based on which part of screen the layer overlaps. */\n  private _setLayersProgress(scrollY?: number): void {\n    const y = scrollY ?? getLastScrollPosition().y;\n    const viewportBottom = y + this._windowHeight;\n\n    this._layerProgressArray = this._layerStateArray.map(({ layerTop, layerBottom }) => {\n      const layerHeight = layerBottom - layerTop;\n      const overlap = Math.min(layerBottom, viewportBottom) - Math.max(layerTop, y);\n      const overlapBase = Math.min(layerHeight, this._windowHeight);\n      return overlapBase <= 0 ? 0 : Math.max(0, Math.min(1, overlap / overlapBase));\n    });\n  }\n\n  /** Applies transforms based on scroll position and updates active layer state. */\n  private _draw(scrollY?: number): void {\n    const y = scrollY !== undefined ? scrollY : getLastScrollPosition().y;\n    this._layerStateArray.forEach(\n      ({ beginEnter, endEnter, beginLeave, endLeave, maskNode, maskInnerNode, layerTop, layerBottom }, layerIndex) => {\n        let progress: number;\n\n        if (beginEnter > y) {\n          progress = this._immerserHeight;\n        } else if (beginEnter <= y && y < endEnter) {\n          progress = endEnter - y;\n        } else if (endEnter <= y && y < beginLeave) {\n          progress = 0;\n        } else if (beginLeave <= y && y < endLeave) {\n          progress = beginLeave - y;\n        } else {\n          progress = -this._immerserHeight;\n        }\n\n        maskNode.style.transform = `translateY(${progress}px)`;\n        maskInnerNode.style.transform = `translateY(${-progress}px)`;\n\n        const pagerScrollActivePoint = y + this._windowHeight * (1 - this._options.pagerThreshold);\n        if (layerTop <= pagerScrollActivePoint && pagerScrollActivePoint < layerBottom) {\n          this._reactiveActiveLayer.value = layerIndex;\n        }\n      },\n    );\n  }\n\n  /** Adds or removes active pager classname according to current layer. */\n  private _drawPagerLinks(layerIndex?: number): void {\n    this._pagerLinkNodeArray.forEach((pagerLinkNode) => {\n      if (parseInt(pagerLinkNode.dataset.immerserLayerIndex, 10) === layerIndex) {\n        pagerLinkNode.classList.add(this._options.pagerLinkActiveClassname);\n      } else {\n        pagerLinkNode.classList.remove(this._options.pagerLinkActiveClassname);\n      }\n    });\n  }\n\n  /** Updates window hash to match active layer id. */\n  private _drawHash(layerIndex: number): void {\n    const { id, layerNode } = this._layerStateArray[layerIndex];\n    layerNode.removeAttribute('id');\n    window.location.hash = id;\n    layerNode.setAttribute('id', id);\n  }\n\n  /** Syncs hover state across elements with matching synchroHover id. */\n  private _drawSynchroHover(synchroHoverId?: string): void {\n    this._synchroHoverNodeArray.forEach((synchroHoverNode) => {\n      if (synchroHoverNode.dataset.immerserSynchroHover === synchroHoverId) {\n        synchroHoverNode.classList.add('_hover');\n      } else {\n        synchroHoverNode.classList.remove('_hover');\n      }\n    });\n  }\n\n  /** Adjusts scroll to layer edges when near thresholds, improving alignment. */\n  private _adjustScroll(): void {\n    const { layerTop, layerBottom } = this._layerStateArray[this._reactiveActiveLayer.value as number];\n    const { x, y } = getLastScrollPosition();\n    const topThreshold = Math.abs(y - layerTop);\n    const bottomThreshold = Math.abs(y + this._windowHeight - layerBottom);\n\n    if (topThreshold !== 0 && bottomThreshold !== 0) {\n      if (topThreshold <= bottomThreshold && topThreshold <= this._options.scrollAdjustThreshold) {\n        window.scrollTo(x, layerTop);\n      } else if (bottomThreshold <= topThreshold && bottomThreshold <= this._options.scrollAdjustThreshold) {\n        window.scrollTo(x, layerBottom - this._windowHeight);\n      }\n    }\n  }\n\n  /** RAF-throttled scroll handler that draws and optionally snaps scroll. */\n  private _handleScroll(): void {\n    if (this._isBound) {\n      if (this._scrollFrameId) {\n        window.cancelAnimationFrame(this._scrollFrameId);\n        this._scrollFrameId = null;\n      }\n      this._scrollFrameId = window.requestAnimationFrame(() => {\n        const y = getLastScrollPosition().y;\n        this._setLayersProgress(y);\n        this._emit('layersUpdate', this._layerProgressArray, this);\n        this._draw(y);\n        if (this._options.scrollAdjustThreshold > 0) {\n          if (this._scrollAdjustTimerId) {\n            clearTimeout(this._scrollAdjustTimerId);\n            this._scrollAdjustTimerId = null;\n          }\n          this._scrollAdjustTimerId = setTimeout(this._adjustScroll.bind(this), this._options.scrollAdjustDelay);\n        }\n      });\n    }\n  }\n\n  /** RAF-throttled resize handler that recalculates sizes and redraws. */\n  private _handleResize(): void {\n    if (this._resizeFrameId) {\n      window.cancelAnimationFrame(this._resizeFrameId);\n      this._resizeFrameId = null;\n    }\n    this._resizeFrameId = window.requestAnimationFrame(() => {\n      this.render();\n    });\n  }\n\n  /**\n   * Prepares markup, attaches listeners and triggers first draw; also emits bind event.\n   * Intended to be idempotent for toggling immerser on when viewport width allows.\n   */\n  public bind(): void {\n    this._createMarkup();\n    this._initPagerLinks();\n    this._initHoverSynchro();\n    this._attachCallbacks();\n    this._isBound = true;\n    this._setLayersProgress();\n    this._draw();\n    this._emit('bind', this);\n  }\n\n  /**\n   * Tears down generated markup and listeners, restores DOM, resets active layer and emits unbind event.\n   * Safe to call multiple times; no-op when already unbound.\n   */\n  public unbind(): void {\n    this._detachCallbacks();\n    this._removeSyncroHoverListeners();\n    this._clearCustomSectionIds();\n    this._restoreOriginalSolidNodes();\n    this._cleanupClonedMarkup();\n    this._isBound = false;\n    this._emit('unbind', this);\n    this._reactiveActiveLayer.value = undefined;\n  }\n\n  /**\n   * Fully destroys immerser: unbinds, removes window listeners, runs destroy event and clears all references.\n   * Use when component is permanently removed.\n   */\n  public destroy(): void {\n    this.unbind();\n    this._unsubscribeToggleBindOnResize?.();\n    this._removeScrollAndResizeListeners();\n    this._emit('destroy', this);\n    this._resetInternalState();\n  }\n\n  /**\n   * Manually recomputes sizes and redraws masks; call after DOM mutations that change layout.\n   * Exposed for dynamic content updates without reinitializing immerser.\n   *\n   * No throttling or performance optimization is applied here. The client is responsible for invocation frequency.\n   */\n  public render(): void {\n    this._setSizes();\n    this._setLayersProgress();\n    this._draw();\n  }\n\n  /**\n   * Syncs immerser with an externally controlled scroll position.\n   * `isScrollHandled=false` option flag is required to call this method.\n   * Call when using a custom scroll engine.\n   *\n   * No throttling or performance optimization is applied here. The client is responsible for invocation frequency.\n   */\n  public syncScroll(): void {\n    if (this._options.isScrollHandled) {\n      this._report({\n        message: 'syncScroll requires the isScrollHandled flag set to false. Call ignored.',\n        isWarning: true,\n        docsHash: '#external-scroll-engine',\n      });\n      return;\n    }\n    this._setLayersProgress();\n    this._draw();\n  }\n\n  /** Register persistent event handler. */\n  public on<K extends EventName>(eventName: K, handler: HandlerByEventName[K]): void {\n    this._handlers[eventName].add(handler);\n  }\n\n  /** Register event handler that will be removed after first call. */\n  public once<K extends EventName>(eventName: K, handler: HandlerByEventName[K]): void {\n    this._handlers[eventName].add(\n      wrapOnceHandler(handler, (...args: HandlerArgs<K>) => {\n        this.off(eventName, handler);\n        handler.apply(undefined, args);\n      }),\n    );\n  }\n\n  /** Removes handler(s) for provided event. */\n  public off<K extends EventName>(eventName: K, handler: HandlerByEventName[K]): void {\n    const handlerSet = this._handlers[eventName];\n\n    handlerSet.forEach((storedHandler) => {\n      const original = getOriginalHandler(storedHandler);\n      if (storedHandler === handler || original === handler) {\n        handlerSet.delete(storedHandler);\n      }\n    });\n  }\n\n  /** Current active layer index derived from scroll position. */\n  public get activeIndex(): number {\n    return this._reactiveActiveLayer.value;\n  }\n\n  /** Indicates whether immerser is currently bound (markup cloned and listeners attached). */\n  public get isBound(): boolean {\n    return this._isBound;\n  }\n\n  /** The root DOM node immerser is attached to. */\n  public get rootNode(): HTMLElement {\n    return this._rootNode;\n  }\n\n  /** Progress of each layer from 0 (off-screen) to 1 (fully visible). */\n  public get layerProgressArray(): readonly number[] {\n    return this._layerProgressArray;\n  }\n}\n\n// for typedef generation needs\nexport type {\n  ActiveLayerChangeHandler,\n  BaseHandler,\n  EventHandlers,\n  EventName,\n  HandlerByEventName,\n  LayersUpdateHandler,\n  Options,\n  SolidClassnames,\n};\nexport { EVENT_NAMES };\n"],"names":["root","factory","exports","module","define","amd","this","t","e","Symbol","toPrimitive","i","call","TypeError","String","Observable","callbacks","internal","initialValue","r","prototype","subscribe","push","indexOf","slice","concat","reset","key","get","set","length","n","enumerable","configurable","writable","Object","defineProperty","o","hasOwnProperty","Array","isArray","optionConfig","userOptions","prefix","a","f","suffix","u","p","strict","d","c","join","s","l","g","v","required","y","default","b","description","x","validator","h","q","E","w","console","warn","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","getter","__esModule","definition","obj","prop","CLASSNAME_REGEX","INITIAL_DEBUG","process","EVENT_NAMES","OPTION_CONFIG","solidClassnameArray","fromViewportWidth","pagerThreshold","hasToUpdateHash","scrollAdjustThreshold","scrollAdjustDelay","pagerLinkActiveClassname","str","test","isScrollHandled","debug","on","_typeof","keys","every","eventName","includes","MESSAGE_PREFIX","CROPPED_FULL_ABSOLUTE_STYLES","position","top","right","bottom","left","overflow","NOT_INTERACTIVE_STYLES","pointerEvents","touchAction","INTERACTIVE_STYLES","bindStyles","node","styles","rule","style","getNodeArray","_ref","selector","_ref$parent","parent","document","nodeList","querySelectorAll","from","limit","number","min","max","Math","getLastScrollPosition","scrollX","window","documentElement","scrollLeft","scrollY","scrollTop","offsetWidth","offsetHeight","Immerser","_classCallCheck","_defineProperty","layer","solid","pagerLink","mask","maskInner","synchroHover","init","Set","bind","unbind","destroy","activeLayerChange","layersUpdate","_init","value","_mergeOptions","_options","_setDomNodes","_validateMarkup","_registerHandlersFromOptions","_readClassnamesFromMarkup","_validateSolidClassnameArray","_initSectionIds","_initLayerStateArray","_validateClassnames","_toggleBindOnResizeObserver","_setSizes","_addScrollAndResizeListeners","_emit","_this","forEach","_this$_options$on","handler","_this2","_len","arguments","args","_key","_handlers","apply","error","_report","message","docsHash","_ref$isWarning","isWarning","_ref$docsHash","resultMessage","Error","cause","_rootNode","querySelector","_selectors","_layerNodeArray","_solidNodeArray","mergeOptions","_this3","layerNode","layerIndex","dataset","immerserLayerConfig","JSON","parse","layerCount","_this4","id","__immerserCustomId","_layerStateIndexById","_this5","_layerStateArray","map","solidClassnames","beginEnter","beginLeave","endEnter","endLeave","layerBottom","layerTop","maskInnerNode","maskNode","_layerProgressArray","state","constructor","_this6","_unsubscribeToggleBindOnResize","_reactiveWindowWidth","nextWindowWidth","_isBound","_this7","_windowHeight","innerHeight","_immerserTop","offsetTop","_immerserHeight","_objectSpread","innerWidth","_onScroll","_handleScroll","addEventListener","_onResize","_handleResize","ResizeObserver","_resizeObserver","observe","_this8","_pagerLinkNodeArray","_originalSolidNodeArray","_maskNodeArray","_synchroHoverNodeArray","_isCustomMarkup","_customMaskNodeArray","_resizeFrameId","_scrollFrameId","_scrollAdjustTimerId","_reactiveActiveLayer","_reactiveSynchroHoverId","_unsubscribeRedrawingPager","_unsubscribeUpdatingHash","_unsubscribeActiveLayerChange","_unsubscribeSynchroHover","_onSynchroHoverMouseOver","_onSynchroHoverMouseOut","clear","_this9","_initCustomMarkup","stateIndex","createElement","immerserMask","immerserMaskInner","childNode","clonedChildNode","cloneNode","HTMLElement","__immerserCloned","appendChild","callback","index","forEachNode","clonedSolidNode","solidId","immerserSolid","classList","add","setAttribute","_detachOriginalSolidNodes","_this0","customMaskNode","children","child","_this1","removeChild","_this10","pagerLinkNode","href","layerId","split","immerserLayerIndex","toString","_this11","synchroHoverId","target","immerserSynchroHover","synchroHoverNode","_this12","_drawPagerLinks","_drawHash","nextIndex","_drawSynchroHover","_this$_unsubscribeRed","_this$_unsubscribeUpd","_this$_unsubscribeAct","_this$_unsubscribeSyn","_this13","removeEventListener","removeAttribute","_this14","_this15","immerserMaskNode","immerserMaskInnerNode","_this$_resizeObserver","disconnect","_this16","viewportBottom","_ref3","layerHeight","overlap","overlapBase","_this17","_ref4","progress","transform","pagerScrollActivePoint","_this18","parseInt","remove","_this$_layerStateArra","location","hash","_this$_layerStateArra2","_getLastScrollPositio","topThreshold","abs","bottomThreshold","scrollTo","_this19","cancelAnimationFrame","requestAnimationFrame","_setLayersProgress","_draw","clearTimeout","setTimeout","_adjustScroll","_this20","render","_createMarkup","_initPagerLinks","_initHoverSynchro","_attachCallbacks","_detachCallbacks","_removeSyncroHoverListeners","_clearCustomSectionIds","_restoreOriginalSolidNodes","_cleanupClonedMarkup","_this$_unsubscribeTog","_removeScrollAndResizeListeners","_resetInternalState","original","wrapper","wrapped","_this21","off","_len2","_key2","__immerserOriginalHandler","handlerSet","storedHandler","getOriginalHandler","delete"],"ignoreList":[],"sourceRoot":""}