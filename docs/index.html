<!doctype html><html lang="en" class=""><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><title>immerser — Javascript Library for Switching Fixed Elements on Scroll</title><link href="https://fonts.googleapis.com/css?family=Questrial|Montserrat&display=swap&subset=cyrillic" rel="stylesheet"><link rel="icon" href="favicon.ico"><script defer="defer" src="main.js"></script><link href="main.css" rel="stylesheet"></head><body><div class="fixed" data-immerser><div class="fixed__pager pager" data-immerser-solid="pager"><a href="#reasoning" class="pager__link" data-immerser-synchro-hover="pager-reasoning" data-immerser-pager-link></a> <a href="#how-to-use" class="pager__link" data-immerser-synchro-hover="pager-how-to-use" data-immerser-pager-link></a> <a href="#how-it-works" class="pager__link" data-immerser-synchro-hover="pager-how-it-works" data-immerser-pager-link></a> <a href="#options" class="pager__link" data-immerser-synchro-hover="pager-options" data-immerser-pager-link></a> <a href="#recipes" class="pager__link" data-immerser-synchro-hover="pager-recipes" data-immerser-pager-link></a></div><a href="#reasoning" class="fixed__logo logo" data-immerser-solid="logo" data-immerser-synchro-hover="logo">immerser</a><div class="fixed__menu menu" data-immerser-solid="menu"><a href="#reasoning" class="menu__link" data-immerser-synchro-hover="reasoning">Reasoning</a> <a href="#how-to-use" class="menu__link" data-immerser-synchro-hover="how-to-use">How to Use</a> <a href="#how-it-works" class="menu__link" data-immerser-synchro-hover="how-it-works">How it Works</a> <a href="#options" class="menu__link" data-immerser-synchro-hover="options">Options</a> <a href="#recipes" class="menu__link" data-immerser-synchro-hover="recipes">Recipes</a></div><div class="fixed__language language" data-immerser-solid="language"><span class="language__link language__link--active">english</span><a href="./ru.html" class="language__link">по-русски</a></div><div class="fixed__about about" data-immerser-solid="about"><span>&copy; 2025 &mdash; Vladimir Lysov, Chelyabinsk, Russia</span> <a href="https://github.com/dubaua/immerser">github</a> <a href="mailto:dubaua@gmail.com">dubaua@gmail.com</a></div><div data-immerser-mask><div data-immerser-mask-inner><div class="fixed__emoji emoji"><svg class="emoji__face" data-emoji-face width="250" height="250" viewBox="0 0 250 250" fill="none" xmlns="http://www.w3.org/2000/svg"><defs><clipPath id="mouth-ellipse"><ellipse data-mouth-clip-path cx="125" cy="125" rx="73" ry="73"/></clipPath><clipPath id="mouth-bottom"><rect x="0" y="125" width="250" height="125"/></clipPath></defs><g data-emoji-hp-bar style="opacity: 0"><rect x="74" y="10" width="102" height="6" class="emoji__stroke-path emoji__stroke-path--thin" data-emoji-hp-bar-outline/><rect x="75" y="11" width="100" height="4" data-emoji-hp-bar-fill fill="#00ff00"/></g><g data-emoji-rotator><circle data-face cx="125" cy="125" r="97" class="emoji__stroke-path"/><path data-left-eye-closed d="M79 74L105 100M105 74L79 100" class="emoji__stroke-path"/><path data-right-eye-closed d="M145 74L171 100M171 74L145 100" class="emoji__stroke-path"/><circle data-left-eye-open cx="92" cy="87" r="10" class="emoji__stroke-path"/><circle data-right-eye-open cx="158" cy="87" r="10" class="emoji__stroke-path"/><path data-left-brow d="M68 69.5H116" class="emoji__stroke-path"/><path data-right-brow d="M134 69.5H182" class="emoji__stroke-path"/><path data-mouth-line d="M50 127.5H200" class="emoji__stroke-path"/><g clip-path="url(#mouth-bottom)"><ellipse data-mouth-shape cx="125" cy="125" rx="73" ry="73" class="emoji__stroke-path"/><path data-tongue d="M74 55.5H52.5C52.5 55.5 52.5 94 52.5 105.5C52.5 117 62 126.5 74 126.5C86 126.5 95.5 117 95.5 105.5C95.5 94 95.5 55.5 95.5 55.5H74ZM74 55.5V105.5" class="emoji__stroke-path"/><g clip-path="url(#mouth-ellipse)"><path data-teeth d="M60 127.5V197.5M70 127.5V197.5M80 127.5V197.5M90 127.5V197.5M100 127.5V197.5M110 127.5V197.5M120 127.5V197.5M130 127.5V197.5M140 127.5V197.5M150 127.5V197.5M160 127.5V197.5M170 127.5V197.5M180 127.5V197.5M190 127.5V197.5" class="emoji__stroke-path"/></g></g><g data-glass><rect x="69" y="72" width="46" height="30" class="emoji__fill"/><rect x="135" y="72" width="46" height="30" class="emoji__fill"/><path d="M80 87H104M113.5 87V100.5H70.5V73.5H113.5V87ZM113.5 87H136.5M136.5 87V73.5H179.5V100.5H136.5V87ZM146 87H170" class="emoji__stroke-path"/></g></g><g class="emoji__hand-out" data-emoji-hand-outer><g class="emoji__hand" data-emoji-hand><path d="M89.263 171.159C89.2214 170.999 89.1813 170.837 89.1431 170.673C88.745 168.967 89.4731 168.088 90.5752 166.757C92.3044 164.668 94.9541 161.467 95.6175 152.218C96.7036 137.075 86.623 122.485 77.3717 124.644C70.6987 126.202 72.0907 132.555 73.3485 138.296C73.8345 140.514 74.3004 142.641 74.2734 144.365C74.2711 144.515 74.2688 144.666 74.2666 144.817C74.1772 150.897 74.0743 157.885 64.7316 165.076C55.1563 172.445 48.4377 183.256 48.8769 193.935C49.3161 204.615 53.0991 218.622 61.4748 225.909C69.8505 233.196 79.1186 237.707 91.3728 237.414C100.639 237.192 116.261 234.018 123.694 229.291C124.795 228.768 125.752 227.984 126.48 227.015C127.257 226.139 127.734 225.225 127.842 224.28C127.86 224.124 127.868 223.972 127.867 223.823C127.923 223.506 127.959 223.182 127.974 222.853C128.11 219.842 126.452 217.165 123.945 215.858C128.087 215.457 131.411 212.061 131.606 207.783C131.797 203.576 128.896 199.944 124.911 199.088C129.092 198.476 132.389 194.97 132.588 190.591C132.797 185.97 129.485 182.005 125.022 181.295L161.029 172.89C165.87 171.76 168.877 166.92 167.748 162.08C166.618 157.24 161.778 154.232 156.937 155.362L89.263 171.159Z" class="emoji__fill emoji__stroke-path" stroke-linejoin="round"/></g></g></svg></div></div></div><div data-immerser-mask><div data-immerser-mask-inner><div class="fixed__emoji emoji emoji--inverse"><svg class="emoji__face" data-emoji-face width="250" height="250" viewBox="0 0 250 250" fill="none" xmlns="http://www.w3.org/2000/svg"><defs><clipPath id="mouth-ellipse"><ellipse data-mouth-clip-path cx="125" cy="125" rx="73" ry="73"/></clipPath><clipPath id="mouth-bottom"><rect x="0" y="125" width="250" height="125"/></clipPath></defs><g data-emoji-hp-bar style="opacity: 0"><rect x="74" y="10" width="102" height="6" class="emoji__stroke-path emoji__stroke-path--thin" data-emoji-hp-bar-outline/><rect x="75" y="11" width="100" height="4" data-emoji-hp-bar-fill fill="#00ff00"/></g><g data-emoji-rotator><circle data-face cx="125" cy="125" r="97" class="emoji__stroke-path"/><path data-left-eye-closed d="M79 74L105 100M105 74L79 100" class="emoji__stroke-path"/><path data-right-eye-closed d="M145 74L171 100M171 74L145 100" class="emoji__stroke-path"/><circle data-left-eye-open cx="92" cy="87" r="10" class="emoji__stroke-path"/><circle data-right-eye-open cx="158" cy="87" r="10" class="emoji__stroke-path"/><path data-left-brow d="M68 69.5H116" class="emoji__stroke-path"/><path data-right-brow d="M134 69.5H182" class="emoji__stroke-path"/><path data-mouth-line d="M50 127.5H200" class="emoji__stroke-path"/><g clip-path="url(#mouth-bottom)"><ellipse data-mouth-shape cx="125" cy="125" rx="73" ry="73" class="emoji__stroke-path"/><path data-tongue d="M74 55.5H52.5C52.5 55.5 52.5 94 52.5 105.5C52.5 117 62 126.5 74 126.5C86 126.5 95.5 117 95.5 105.5C95.5 94 95.5 55.5 95.5 55.5H74ZM74 55.5V105.5" class="emoji__stroke-path"/><g clip-path="url(#mouth-ellipse)"><path data-teeth d="M60 127.5V197.5M70 127.5V197.5M80 127.5V197.5M90 127.5V197.5M100 127.5V197.5M110 127.5V197.5M120 127.5V197.5M130 127.5V197.5M140 127.5V197.5M150 127.5V197.5M160 127.5V197.5M170 127.5V197.5M180 127.5V197.5M190 127.5V197.5" class="emoji__stroke-path"/></g></g><g data-glass><rect x="69" y="72" width="46" height="30" class="emoji__fill"/><rect x="135" y="72" width="46" height="30" class="emoji__fill"/><path d="M80 87H104M113.5 87V100.5H70.5V73.5H113.5V87ZM113.5 87H136.5M136.5 87V73.5H179.5V100.5H136.5V87ZM146 87H170" class="emoji__stroke-path"/></g></g><g class="emoji__hand-out" data-emoji-hand-outer><g class="emoji__hand" data-emoji-hand><path d="M89.263 171.159C89.2214 170.999 89.1813 170.837 89.1431 170.673C88.745 168.967 89.4731 168.088 90.5752 166.757C92.3044 164.668 94.9541 161.467 95.6175 152.218C96.7036 137.075 86.623 122.485 77.3717 124.644C70.6987 126.202 72.0907 132.555 73.3485 138.296C73.8345 140.514 74.3004 142.641 74.2734 144.365C74.2711 144.515 74.2688 144.666 74.2666 144.817C74.1772 150.897 74.0743 157.885 64.7316 165.076C55.1563 172.445 48.4377 183.256 48.8769 193.935C49.3161 204.615 53.0991 218.622 61.4748 225.909C69.8505 233.196 79.1186 237.707 91.3728 237.414C100.639 237.192 116.261 234.018 123.694 229.291C124.795 228.768 125.752 227.984 126.48 227.015C127.257 226.139 127.734 225.225 127.842 224.28C127.86 224.124 127.868 223.972 127.867 223.823C127.923 223.506 127.959 223.182 127.974 222.853C128.11 219.842 126.452 217.165 123.945 215.858C128.087 215.457 131.411 212.061 131.606 207.783C131.797 203.576 128.896 199.944 124.911 199.088C129.092 198.476 132.389 194.97 132.588 190.591C132.797 185.97 129.485 182.005 125.022 181.295L161.029 172.89C165.87 171.76 168.877 166.92 167.748 162.08C166.618 157.24 161.778 154.232 156.937 155.362L89.263 171.159Z" class="emoji__fill emoji__stroke-path" stroke-linejoin="round"/></g></g></svg></div></div></div><div data-immerser-mask><div data-immerser-mask-inner><div class="fixed__emoji emoji"><svg class="emoji__face" data-emoji-face width="250" height="250" viewBox="0 0 250 250" fill="none" xmlns="http://www.w3.org/2000/svg"><defs><clipPath id="mouth-ellipse"><ellipse data-mouth-clip-path cx="125" cy="125" rx="73" ry="73"/></clipPath><clipPath id="mouth-bottom"><rect x="0" y="125" width="250" height="125"/></clipPath></defs><g data-emoji-hp-bar style="opacity: 0"><rect x="74" y="10" width="102" height="6" class="emoji__stroke-path emoji__stroke-path--thin" data-emoji-hp-bar-outline/><rect x="75" y="11" width="100" height="4" data-emoji-hp-bar-fill fill="#00ff00"/></g><g data-emoji-rotator><circle data-face cx="125" cy="125" r="97" class="emoji__stroke-path"/><path data-left-eye-closed d="M79 74L105 100M105 74L79 100" class="emoji__stroke-path"/><path data-right-eye-closed d="M145 74L171 100M171 74L145 100" class="emoji__stroke-path"/><circle data-left-eye-open cx="92" cy="87" r="10" class="emoji__stroke-path"/><circle data-right-eye-open cx="158" cy="87" r="10" class="emoji__stroke-path"/><path data-left-brow d="M68 69.5H116" class="emoji__stroke-path"/><path data-right-brow d="M134 69.5H182" class="emoji__stroke-path"/><path data-mouth-line d="M50 127.5H200" class="emoji__stroke-path"/><g clip-path="url(#mouth-bottom)"><ellipse data-mouth-shape cx="125" cy="125" rx="73" ry="73" class="emoji__stroke-path"/><path data-tongue d="M74 55.5H52.5C52.5 55.5 52.5 94 52.5 105.5C52.5 117 62 126.5 74 126.5C86 126.5 95.5 117 95.5 105.5C95.5 94 95.5 55.5 95.5 55.5H74ZM74 55.5V105.5" class="emoji__stroke-path"/><g clip-path="url(#mouth-ellipse)"><path data-teeth d="M60 127.5V197.5M70 127.5V197.5M80 127.5V197.5M90 127.5V197.5M100 127.5V197.5M110 127.5V197.5M120 127.5V197.5M130 127.5V197.5M140 127.5V197.5M150 127.5V197.5M160 127.5V197.5M170 127.5V197.5M180 127.5V197.5M190 127.5V197.5" class="emoji__stroke-path"/></g></g><g data-glass><rect x="69" y="72" width="46" height="30" class="emoji__fill"/><rect x="135" y="72" width="46" height="30" class="emoji__fill"/><path d="M80 87H104M113.5 87V100.5H70.5V73.5H113.5V87ZM113.5 87H136.5M136.5 87V73.5H179.5V100.5H136.5V87ZM146 87H170" class="emoji__stroke-path"/></g></g><g class="emoji__hand-out" data-emoji-hand-outer><g class="emoji__hand" data-emoji-hand><path d="M89.263 171.159C89.2214 170.999 89.1813 170.837 89.1431 170.673C88.745 168.967 89.4731 168.088 90.5752 166.757C92.3044 164.668 94.9541 161.467 95.6175 152.218C96.7036 137.075 86.623 122.485 77.3717 124.644C70.6987 126.202 72.0907 132.555 73.3485 138.296C73.8345 140.514 74.3004 142.641 74.2734 144.365C74.2711 144.515 74.2688 144.666 74.2666 144.817C74.1772 150.897 74.0743 157.885 64.7316 165.076C55.1563 172.445 48.4377 183.256 48.8769 193.935C49.3161 204.615 53.0991 218.622 61.4748 225.909C69.8505 233.196 79.1186 237.707 91.3728 237.414C100.639 237.192 116.261 234.018 123.694 229.291C124.795 228.768 125.752 227.984 126.48 227.015C127.257 226.139 127.734 225.225 127.842 224.28C127.86 224.124 127.868 223.972 127.867 223.823C127.923 223.506 127.959 223.182 127.974 222.853C128.11 219.842 126.452 217.165 123.945 215.858C128.087 215.457 131.411 212.061 131.606 207.783C131.797 203.576 128.896 199.944 124.911 199.088C129.092 198.476 132.389 194.97 132.588 190.591C132.797 185.97 129.485 182.005 125.022 181.295L161.029 172.89C165.87 171.76 168.877 166.92 167.748 162.08C166.618 157.24 161.778 154.232 156.937 155.362L89.263 171.159Z" class="emoji__fill emoji__stroke-path" stroke-linejoin="round"/></g></g></svg></div></div></div><div data-immerser-mask><div data-immerser-mask-inner><div class="fixed__emoji emoji emoji--inverse"><svg class="emoji__face" data-emoji-face width="250" height="250" viewBox="0 0 250 250" fill="none" xmlns="http://www.w3.org/2000/svg"><defs><clipPath id="mouth-ellipse"><ellipse data-mouth-clip-path cx="125" cy="125" rx="73" ry="73"/></clipPath><clipPath id="mouth-bottom"><rect x="0" y="125" width="250" height="125"/></clipPath></defs><g data-emoji-hp-bar style="opacity: 0"><rect x="74" y="10" width="102" height="6" class="emoji__stroke-path emoji__stroke-path--thin" data-emoji-hp-bar-outline/><rect x="75" y="11" width="100" height="4" data-emoji-hp-bar-fill fill="#00ff00"/></g><g data-emoji-rotator><circle data-face cx="125" cy="125" r="97" class="emoji__stroke-path"/><path data-left-eye-closed d="M79 74L105 100M105 74L79 100" class="emoji__stroke-path"/><path data-right-eye-closed d="M145 74L171 100M171 74L145 100" class="emoji__stroke-path"/><circle data-left-eye-open cx="92" cy="87" r="10" class="emoji__stroke-path"/><circle data-right-eye-open cx="158" cy="87" r="10" class="emoji__stroke-path"/><path data-left-brow d="M68 69.5H116" class="emoji__stroke-path"/><path data-right-brow d="M134 69.5H182" class="emoji__stroke-path"/><path data-mouth-line d="M50 127.5H200" class="emoji__stroke-path"/><g clip-path="url(#mouth-bottom)"><ellipse data-mouth-shape cx="125" cy="125" rx="73" ry="73" class="emoji__stroke-path"/><path data-tongue d="M74 55.5H52.5C52.5 55.5 52.5 94 52.5 105.5C52.5 117 62 126.5 74 126.5C86 126.5 95.5 117 95.5 105.5C95.5 94 95.5 55.5 95.5 55.5H74ZM74 55.5V105.5" class="emoji__stroke-path"/><g clip-path="url(#mouth-ellipse)"><path data-teeth d="M60 127.5V197.5M70 127.5V197.5M80 127.5V197.5M90 127.5V197.5M100 127.5V197.5M110 127.5V197.5M120 127.5V197.5M130 127.5V197.5M140 127.5V197.5M150 127.5V197.5M160 127.5V197.5M170 127.5V197.5M180 127.5V197.5M190 127.5V197.5" class="emoji__stroke-path"/></g></g><g data-glass><rect x="69" y="72" width="46" height="30" class="emoji__fill"/><rect x="135" y="72" width="46" height="30" class="emoji__fill"/><path d="M80 87H104M113.5 87V100.5H70.5V73.5H113.5V87ZM113.5 87H136.5M136.5 87V73.5H179.5V100.5H136.5V87ZM146 87H170" class="emoji__stroke-path"/></g></g><g class="emoji__hand-out" data-emoji-hand-outer><g class="emoji__hand" data-emoji-hand><path d="M89.263 171.159C89.2214 170.999 89.1813 170.837 89.1431 170.673C88.745 168.967 89.4731 168.088 90.5752 166.757C92.3044 164.668 94.9541 161.467 95.6175 152.218C96.7036 137.075 86.623 122.485 77.3717 124.644C70.6987 126.202 72.0907 132.555 73.3485 138.296C73.8345 140.514 74.3004 142.641 74.2734 144.365C74.2711 144.515 74.2688 144.666 74.2666 144.817C74.1772 150.897 74.0743 157.885 64.7316 165.076C55.1563 172.445 48.4377 183.256 48.8769 193.935C49.3161 204.615 53.0991 218.622 61.4748 225.909C69.8505 233.196 79.1186 237.707 91.3728 237.414C100.639 237.192 116.261 234.018 123.694 229.291C124.795 228.768 125.752 227.984 126.48 227.015C127.257 226.139 127.734 225.225 127.842 224.28C127.86 224.124 127.868 223.972 127.867 223.823C127.923 223.506 127.959 223.182 127.974 222.853C128.11 219.842 126.452 217.165 123.945 215.858C128.087 215.457 131.411 212.061 131.606 207.783C131.797 203.576 128.896 199.944 124.911 199.088C129.092 198.476 132.389 194.97 132.588 190.591C132.797 185.97 129.485 182.005 125.022 181.295L161.029 172.89C165.87 171.76 168.877 166.92 167.748 162.08C166.618 157.24 161.778 154.232 156.937 155.362L89.263 171.159Z" class="emoji__fill emoji__stroke-path" stroke-linejoin="round"/></g></g></svg></div></div></div><div data-immerser-mask><div data-immerser-mask-inner><div class="fixed__emoji emoji"><svg class="emoji__face" data-emoji-face width="250" height="250" viewBox="0 0 250 250" fill="none" xmlns="http://www.w3.org/2000/svg"><defs><clipPath id="mouth-ellipse"><ellipse data-mouth-clip-path cx="125" cy="125" rx="73" ry="73"/></clipPath><clipPath id="mouth-bottom"><rect x="0" y="125" width="250" height="125"/></clipPath></defs><g data-emoji-hp-bar style="opacity: 0"><rect x="74" y="10" width="102" height="6" class="emoji__stroke-path emoji__stroke-path--thin" data-emoji-hp-bar-outline/><rect x="75" y="11" width="100" height="4" data-emoji-hp-bar-fill fill="#00ff00"/></g><g data-emoji-rotator><circle data-face cx="125" cy="125" r="97" class="emoji__stroke-path"/><path data-left-eye-closed d="M79 74L105 100M105 74L79 100" class="emoji__stroke-path"/><path data-right-eye-closed d="M145 74L171 100M171 74L145 100" class="emoji__stroke-path"/><circle data-left-eye-open cx="92" cy="87" r="10" class="emoji__stroke-path"/><circle data-right-eye-open cx="158" cy="87" r="10" class="emoji__stroke-path"/><path data-left-brow d="M68 69.5H116" class="emoji__stroke-path"/><path data-right-brow d="M134 69.5H182" class="emoji__stroke-path"/><path data-mouth-line d="M50 127.5H200" class="emoji__stroke-path"/><g clip-path="url(#mouth-bottom)"><ellipse data-mouth-shape cx="125" cy="125" rx="73" ry="73" class="emoji__stroke-path"/><path data-tongue d="M74 55.5H52.5C52.5 55.5 52.5 94 52.5 105.5C52.5 117 62 126.5 74 126.5C86 126.5 95.5 117 95.5 105.5C95.5 94 95.5 55.5 95.5 55.5H74ZM74 55.5V105.5" class="emoji__stroke-path"/><g clip-path="url(#mouth-ellipse)"><path data-teeth d="M60 127.5V197.5M70 127.5V197.5M80 127.5V197.5M90 127.5V197.5M100 127.5V197.5M110 127.5V197.5M120 127.5V197.5M130 127.5V197.5M140 127.5V197.5M150 127.5V197.5M160 127.5V197.5M170 127.5V197.5M180 127.5V197.5M190 127.5V197.5" class="emoji__stroke-path"/></g></g><g data-glass><rect x="69" y="72" width="46" height="30" class="emoji__fill"/><rect x="135" y="72" width="46" height="30" class="emoji__fill"/><path d="M80 87H104M113.5 87V100.5H70.5V73.5H113.5V87ZM113.5 87H136.5M136.5 87V73.5H179.5V100.5H136.5V87ZM146 87H170" class="emoji__stroke-path"/></g></g><g class="emoji__hand-out" data-emoji-hand-outer><g class="emoji__hand" data-emoji-hand><path d="M89.263 171.159C89.2214 170.999 89.1813 170.837 89.1431 170.673C88.745 168.967 89.4731 168.088 90.5752 166.757C92.3044 164.668 94.9541 161.467 95.6175 152.218C96.7036 137.075 86.623 122.485 77.3717 124.644C70.6987 126.202 72.0907 132.555 73.3485 138.296C73.8345 140.514 74.3004 142.641 74.2734 144.365C74.2711 144.515 74.2688 144.666 74.2666 144.817C74.1772 150.897 74.0743 157.885 64.7316 165.076C55.1563 172.445 48.4377 183.256 48.8769 193.935C49.3161 204.615 53.0991 218.622 61.4748 225.909C69.8505 233.196 79.1186 237.707 91.3728 237.414C100.639 237.192 116.261 234.018 123.694 229.291C124.795 228.768 125.752 227.984 126.48 227.015C127.257 226.139 127.734 225.225 127.842 224.28C127.86 224.124 127.868 223.972 127.867 223.823C127.923 223.506 127.959 223.182 127.974 222.853C128.11 219.842 126.452 217.165 123.945 215.858C128.087 215.457 131.411 212.061 131.606 207.783C131.797 203.576 128.896 199.944 124.911 199.088C129.092 198.476 132.389 194.97 132.588 190.591C132.797 185.97 129.485 182.005 125.022 181.295L161.029 172.89C165.87 171.76 168.877 166.92 167.748 162.08C166.618 157.24 161.778 154.232 156.937 155.362L89.263 171.159Z" class="emoji__fill emoji__stroke-path" stroke-linejoin="round"/></g></g></svg></div></div></div></div><header class="header"><a href="#reasoning" class="logo">immerser</a></header><div id="reasoning" class="grid" data-immerser-layer data-immerser-layer-config='{"logo": "logo--contrast-lg", "pager": "pager--contrast-lg", "language": "language--contrast-lg"}'><div class="grid__col grid__col--alpha background--contrast"></div><div class="grid__col grid__col--beta tall start end background"><div class="grid__content typography"><h1>Why Immerser?</h1><p>Sometimes designers create complex logic and fix parts of&nbsp;the interface. Also they colour page sections contrasted. How to&nbsp;deal with this mess?</p><p>Immerser comes to&nbsp;help you. It&rsquo;s a&nbsp;javascript library to&nbsp;change fixed elements on&nbsp;scroll.</p><p>Immerser fast, because it&nbsp;calculates states once on&nbsp;init. Then it&nbsp;watches the scroll position and schedules redraw document in&nbsp;the next event loop tick with requestAnimationFrame. Script changes transform property, so&nbsp;it&nbsp;uses graphic hardware acceleration.</p><p>Immerser is&nbsp;written on&nbsp;typescript. Only&nbsp;6.63Kb gzipped.</p><h1>Terms</h1><p><code class="highlighter" data-highlighter="[data-immerser]">Immerser root</code>&nbsp;&mdash; is&nbsp;the parent container for your fixed parts <code class="highlighter" data-highlighter="[data-immerser-solid], .emoji">solids</code>. Actually, solids are positioned absolutely to&nbsp;fixed immerser root. The <code class="highlighter" data-highlighter="[data-immerser-layer]">layers</code> are sections of&nbsp;your page. Also you may want to&nbsp;add <code class="highlighter" data-highlighter="[data-immerser-solid='pager']">pager</code> to&nbsp;navigate through layers and indicate active state.</p></div></div><div class="grid__col--gamma background"></div></div><div id="how-to-use" class="grid" data-immerser-layer data-immerser-layer-config='{"pager": "pager--contrast-only-md", "menu": "menu--contrast", "about": "about--contrast"}'><div class="grid__col grid__col--alpha"></div><div class="grid__col grid__col--beta-gamma tall"><div class="grid"><div class="grid__col grid__col--beta start"><div class="grid__content typography"><h1>Install</h1><p>Using npm:</p><p>Using yarn:</p><p>Or if you want to use immerser in browser as global variable:</p></div></div><div class="grid__col grid__col--gamma start background--contrast scroller-x"><div class="as-if-title" aria-hidden="true"></div><div class="grid__content"><div class="code-highlight code-highlight--contrast"><pre><code>npm install immerser

yarn add immerser

</code></pre><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>https://unpkg.com/immerser@5.1.0/dist/immerser.min.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></code></pre></div></div></div></div><div class="grid" id="prepare-your-markup"><div class="grid__col grid__col--beta"><div class="grid__content typography"><h1>Prepare Your Markup</h1><p>First, setup fixed container as&nbsp;the immerser root container, and add the&nbsp;<code>data-immerser</code> attribute.</p><p>Next place absolutely positioned children into the immerser parent and add&nbsp;<code>data-immerser-solid="solid-id"</code> to&nbsp;each.</p><p>Then add&nbsp;<code>data-immerser-layer</code> attribute to&nbsp;each section and pass configuration in <code>data-immerser-layer-config='{"solid-id": "classname-modifier"}'</code>. Otherwise, you can pass configuration as <code>solidClassnameArray</code> option to&nbsp;immerser. Config should contain JSON describing what class should be applied on&nbsp;each solid element, when it's&nbsp;over a&nbsp;section.</p><p>Also feel free to&nbsp;add <code>data-immerser-pager</code> to&nbsp;create a pager for your layers.</p></div></div><div class="grid__col grid__col--gamma background--contrast scroller-x"><div class="as-if-title" aria-hidden="true"></div><div class="grid__content"><div class="code-highlight code-highlight--contrast"><pre><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fixed<span class="token punctuation">"</span></span> <span class="token attr-name">data-immerser</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fixed__pager pager<span class="token punctuation">"</span></span> <span class="token attr-name">data-immerser-pager</span> <span class="token attr-name">data-immerser-solid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pager<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#reasoning<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fixed__logo logo<span class="token punctuation">"</span></span> <span class="token attr-name">data-immerser-solid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>logo<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>immerser<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fixed__menu menu<span class="token punctuation">"</span></span> <span class="token attr-name">data-immerser-solid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>menu<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#reasoning<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>menu__link<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Reasoning<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#how-to-use<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>menu__link<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>How to Use<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#how-it-works<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>menu__link<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>How it Works<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#options<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>menu__link<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Options<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#recipes<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>menu__link<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Recipes<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fixed__language language<span class="token punctuation">"</span></span> <span class="token attr-name">data-immerser-solid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>language<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>language__link<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>english<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/ru.html<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>language__link<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>по-русски<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fixed__about about<span class="token punctuation">"</span></span> <span class="token attr-name">data-immerser-solid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>about<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    &copy; 2025 &mdash; Vladimir Lysov, Chelyabinsk, Russia
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://github.com/dubaua/immerser<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>github<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mailto:dubaua@gmail.com<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>dubaua@gmail.com<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">data-immerser-layer</span> <span class="token attr-name">data-immerser-layer-config</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>{"logo": "logo--contrast", "pager": "pager--contrast", "social": "social--contrast"}<span class="token punctuation">'</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>reasoning<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">data-immerser-layer</span> <span class="token attr-name">data-immerser-layer-config</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>{"menu": "menu--contrast", "about": "about--contrast"}<span class="token punctuation">'</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>how-to-use<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">data-immerser-layer</span> <span class="token attr-name">data-immerser-layer-config</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>{"logo": "logo--contrast", "pager": "pager--contrast", "social": "social--contrast"}<span class="token punctuation">'</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>how-it-works<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">data-immerser-layer</span> <span class="token attr-name">data-immerser-layer-config</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>{"menu": "menu--contrast", "about": "about--contrast"}<span class="token punctuation">'</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>options<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">data-immerser-layer</span> <span class="token attr-name">data-immerser-layer-config</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>{"logo": "logo--contrast", "pager": "pager--contrast", "social": "social--contrast"}<span class="token punctuation">'</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>recipes<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre></div></div></div></div><div class="grid" id="apply-styles"><div class="grid__col grid__col--beta"><div class="grid__content typography"><h1>Apply styles</h1><p>Apply colour and background styles to&nbsp;your layers and solids according to&nbsp;your classname configuration passed in&nbsp;data attribute or&nbsp;options. I&rsquo;m using <a href="https://en.bem.info/methodology/">BEM methodology</a> in&nbsp;this example.</p></div></div><div class="grid__col grid__col--gamma background--contrast scroller-x"><div class="as-if-title" aria-hidden="true"></div><div class="grid__content"><div class="code-highlight code-highlight--contrast"><pre><code class="language-css"><span class="token selector">.fixed</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 2em<span class="token punctuation">;</span>
  <span class="token property">bottom</span><span class="token punctuation">:</span> 3em<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 3em<span class="token punctuation">;</span>
  <span class="token property">right</span><span class="token punctuation">:</span> 3em<span class="token punctuation">;</span>
  <span class="token property">z-index</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.fixed__pager</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> -50%<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.fixed__logo</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.fixed__menu</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.fixed__language</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.fixed__about</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.pager,
.logo,
.menu,
.language,
.about</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> black<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.pager--contrast,
.logo--contrast,
.menu--contrast,
.language--contrast,
.about--contrast</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div></div></div></div><div class="grid" id="initialize-immerser"><div class="grid__col grid__col--beta end"><div class="grid__content typography"><h1>Initialize Immerser</h1><p>Include immerser in&nbsp;your code and create immerser instance with options.</p></div></div><div class="grid__col grid__col--gamma end background--contrast scroller-x"><div class="as-if-title" aria-hidden="true"></div><div class="grid__content"><div class="code-highlight code-highlight--contrast"><pre><code class="language-javascript"><span class="token comment">// You don't have to import immerser</span>
<span class="token comment">// if you're using it in browser as global variable</span>
<span class="token keyword">import</span> Immerser <span class="token keyword">from</span> <span class="token string">'immerser'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> immerserInstance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Immerser</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// this option will be overridden by options</span>
  <span class="token comment">// passed in data-immerser-layer-config attribute in each layer</span>
  <span class="token literal-property property">solidClassnameArray</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">logo</span><span class="token operator">:</span> <span class="token string">'logo--contrast-lg'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">pager</span><span class="token operator">:</span> <span class="token string">'pager--contrast-lg'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">language</span><span class="token operator">:</span> <span class="token string">'language--contrast-lg'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">pager</span><span class="token operator">:</span> <span class="token string">'pager--contrast-only-md'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">menu</span><span class="token operator">:</span> <span class="token string">'menu--contrast'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">about</span><span class="token operator">:</span> <span class="token string">'about--contrast'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">logo</span><span class="token operator">:</span> <span class="token string">'logo--contrast-lg'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">pager</span><span class="token operator">:</span> <span class="token string">'pager--contrast-lg'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">language</span><span class="token operator">:</span> <span class="token string">'language--contrast-lg'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">logo</span><span class="token operator">:</span> <span class="token string">'logo--contrast-only-md'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">pager</span><span class="token operator">:</span> <span class="token string">'pager--contrast-only-md'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">language</span><span class="token operator">:</span> <span class="token string">'language--contrast-only-md'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">menu</span><span class="token operator">:</span> <span class="token string">'menu--contrast'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">about</span><span class="token operator">:</span> <span class="token string">'about--contrast'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">logo</span><span class="token operator">:</span> <span class="token string">'logo--contrast-lg'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">pager</span><span class="token operator">:</span> <span class="token string">'pager--contrast-lg'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">language</span><span class="token operator">:</span> <span class="token string">'language--contrast-lg'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">hasToUpdateHash</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">fromViewportWidth</span><span class="token operator">:</span> <span class="token number">1024</span><span class="token punctuation">,</span>
  <span class="token literal-property property">pagerLinkActiveClassname</span><span class="token operator">:</span> <span class="token string">'pager__link--active'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">scrollAdjustThreshold</span><span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span>
  <span class="token literal-property property">scrollAdjustDelay</span><span class="token operator">:</span> <span class="token number">600</span><span class="token punctuation">,</span>
  <span class="token literal-property property">on</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">init</span><span class="token punctuation">(</span><span class="token parameter">immerser</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// callback on init event</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">bind</span><span class="token punctuation">(</span><span class="token parameter">immerser</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// callback on bind event</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">unbind</span><span class="token punctuation">(</span><span class="token parameter">immerser</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// callback on unbind event</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token parameter">immerser</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// callback on destroy event</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">activeLayerChange</span><span class="token punctuation">(</span><span class="token parameter">activeIndex<span class="token punctuation">,</span> immerser</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// callback on active layer change event</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">layersUpdate</span><span class="token punctuation">(</span><span class="token parameter">layersProgress<span class="token punctuation">,</span> immerser</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// callback on layers update event</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div></div></div></div></div><div id="how-it-works" class="grid" data-immerser-layer data-immerser-layer-config='{"logo": "logo--contrast-lg", "pager": "pager--contrast-lg", "language": "language--contrast-lg"}'><div class="grid__col grid__col--alpha background--contrast"></div><div class="tall start end grid__col grid__col--beta"><div class="grid__content typography"><h1>How it Works</h1><p>First, immerser gathers information about the layers, solids, window and document. Then it&nbsp;creates a&nbsp;statemap for each layer, containing all necessary information, when the layer is&nbsp;partially and fully in&nbsp;viewport.</p><p>After that immerser modifies DOM, cloning all solids into mask containers for each layer and applying the classnames given in&nbsp;configuration. If&nbsp;you have added a&nbsp;pager, immerser also creates links for layers.</p><p>Finally, immerser binds listeners to&nbsp;scroll and resize events. On&nbsp;resize, it&nbsp;will meter layers, the window and document heights again and recalculate the statemap.</p><p>On&nbsp;scroll, immerser moves a&nbsp;mask of&nbsp;solids to&nbsp;show part of&nbsp;each solid group according to&nbsp;the layer below.</p></div></div><div class="grid__col grid__col--gamma"></div></div><div id="options" class="grid" data-immerser-layer data-immerser-layer-config='{"logo": "logo--contrast-only-md", "pager": "pager--contrast-only-md", "language": "language--contrast-only-md", "menu": "menu--contrast", "about": "about--contrast"}'><div class="grid__col grid__col--alpha"></div><div class="grid__col grid__col--beta-gamma tall start end background--contrast scroller-x"><div class="grid"><div class="grid__col grid__col--beta"><div class="grid__content typography"><h1>Options</h1><p>You can pass options to immerser as data-attributes on layers or as object as function parameter. Data-attributes are processed last, so they override the options passed to the function.</p></div></div><div class="grid__col grid__col--gamma"></div></div><div class="grid"><div class="grid__col grid__col--beta-gamma"><div class="grid__content typography"><div class="code-highlight code-highlight--contrast code-highlight--inline"><table><thead><tr><th class="token property">option</th><th class="token property">type</th><th class="token property">default</th><th class="token property">description</th></tr></thead><tbody><tr><td>solidClassnameArray</td><td class="token keyword">array</td><td class="token punctuation">[]</td><td>Array of layer class configurations. Overriding by config passed in data-immerser-layer-config for corresponding layer. Configuration example <a href="#initialize-immerser">is shown above</a></td></tr><tr><td>fromViewportWidth</td><td class="token keyword">number</td><td class="token number">0</td><td>A viewport width, from which immerser will init</td></tr><tr><td>pagerThreshold</td><td class="token keyword">number</td><td class="token number">0.5</td><td>How much next layer should be in viewport to trigger pager</td></tr><tr><td>hasToUpdateHash</td><td class="token keyword">boolean</td><td class="token boolean">false</td><td>Flag to control changing hash on pager active state change</td></tr><tr><td>scrollAdjustThreshold</td><td class="token keyword">number</td><td class="token number">0</td><td>A distance from the viewport top or bottom to the section top or bottom edge in pixels. If the current distance is below the threshold, the scroll adjustment will be applied. Will not adjust, if zero passed</td></tr><tr><td>scrollAdjustDelay</td><td class="token keyword">number</td><td class="token number">600</td><td>Delay after user interaction and before scroll adjust</td></tr><tr><td>pagerLinkActiveClassname</td><td class="token keyword">string</td><td class="token string nowrap">pager-link-active</td><td>Added to each pager link pointing to active</td></tr><tr><td>isScrollHandled</td><td class="token keyword">boolean</td><td class="token boolean">true</td><td>Binds scroll listener if true. Set to false if you're using remote scroll controller</td></tr><tr><td>debug</td><td class="token keyword">boolean</td><td class="token boolean">false</td><td>Enables logging warnings and errors. Defaults to true in development, false otherwise</td></tr><tr><td>on</td><td class="token keyword">object</td><td class="token punctuation">{}</td><td>Initial event handlers map keyed by event name</td></tr></tbody></table></div></div></div></div><div class="grid"><div class="grid__col grid__col--beta"><div class="grid__content typography"><h1>Events</h1><p>You can subscribe to events via the <code>on</code> option or by calling the <code>on</code> or <code>once</code> method on an immerser instance.</p></div></div><div class="grid__col grid__col--gamma"></div></div><div class="grid"><div class="grid__col grid__col--beta-gamma"><div class="grid__content typography"><div class="code-highlight code-highlight--contrast code-highlight--inline"><table><thead><tr><th class="token property">event</th><th class="token property">arguments</th><th class="token property">description</th></tr></thead><tbody><tr><td>init</td><td class="nowrap"><span class="token parameter">immerser</span><span class="token operator">:</span> <span class="token class-name">Immerser</span></td><td>Emitted after initialization.</td></tr><tr><td>bind</td><td class="nowrap"><span class="token parameter">immerser</span><span class="token operator">:</span> <span class="token class-name">Immerser</span></td><td>Emitted after binding DOM.</td></tr><tr><td>unbind</td><td class="nowrap"><span class="token parameter">immerser</span><span class="token operator">:</span> <span class="token class-name">Immerser</span></td><td>Emitted after unbinding DOM.</td></tr><tr><td>destroy</td><td class="nowrap"><span class="token parameter">immerser</span><span class="token operator">:</span> <span class="token class-name">Immerser</span></td><td>Emitted after destroy.</td></tr><tr><td>activeLayerChange</td><td class="nowrap"><span class="token parameter">layerIndex</span><span class="token operator">:</span> <span class="token class-name">number</span>, <span class="token parameter">immerser</span><span class="token operator">:</span> <span class="token class-name">Immerser</span></td><td>Emitted after active layer change.</td></tr><tr><td>layersUpdate</td><td class="nowrap"><span class="token parameter">layersProgress</span><span class="token operator">:</span> <span class="token class-name">number[]</span>, <span class="token parameter">immerser</span><span class="token operator">:</span> <span class="token class-name">Immerser</span></td><td>Emitted on each scroll update.</td></tr></tbody></table></div></div></div></div><div class="grid"><div class="grid__col grid__col--beta"><div class="grid__content typography"><h1>Public fields and methods</h1></div></div><div class="grid__col grid__col--gamma"></div></div><div class="grid"><div class="grid__col grid__col--beta-gamma"><div class="grid__content typography"><div class="code-highlight code-highlight--contrast code-highlight--inline"><table><thead><tr><th class="token property">name</th><th class="token property">type</th><th class="token property">description</th></tr></thead><tbody><tr><td>debug</td><td class="token keyword">property</td><td>Controls whether immerser reports warnings and errors</td></tr><tr><td>bind</td><td class="token keyword">method</td><td>Clones markup, attaches listeners, and starts internal logic</td></tr><tr><td>unbind</td><td class="token keyword">method</td><td>Remove generated markup and listeners, keeping the instance reusable</td></tr><tr><td>destroy</td><td class="token keyword">method</td><td>Fully destroys immerser: disables it, removes listeners, restores original markup, and clears internal state</td></tr><tr><td>render</td><td class="token keyword">method</td><td>Recalculates sizes and redraws masks</td></tr><tr><td>syncScroll</td><td class="token keyword">method</td><td>Updates immerser when scroll is controlled externally (requires isScrollHandled = false)</td></tr><tr><td>on</td><td class="token keyword">method</td><td>Registers a persistent immerser event handler</td></tr><tr><td>once</td><td class="token keyword">method</td><td>Registers a one-time immerser event handler that is removed after the first call</td></tr><tr><td>off</td><td class="token keyword">method</td><td>Removes a specific handler for the given immerser event</td></tr><tr><td>activeIndex</td><td class="token keyword">getter</td><td>Index of the currently active layer, calculated from scroll position</td></tr><tr><td>isBound</td><td class="token keyword">getter</td><td>Indicates whether immerser is currently active (markup cloned, listeners attached)</td></tr><tr><td>rootNode</td><td class="token keyword">getter</td><td>Root element the immerser instance is attached to</td></tr><tr><td>layerProgressArray</td><td class="token keyword">getter</td><td>Per-layer progress values (0–1) showing how much each layer is visible in the viewport</td></tr></tbody></table></div></div></div></div></div></div><div id="recipes" class="grid" data-immerser-layer data-immerser-layer-config='{"logo": "logo--contrast-lg", "pager": "pager--contrast-lg", "language": "language--contrast-lg"}'><div class="grid__col grid__col--alpha background--contrast"></div><div class="grid__col grid__col--beta-gamma tall start end"><div class="grid"><div class="grid__col grid__col--beta"><div class="grid__content typography"><h1>Cloning Event Listeners</h1><p>Since immerser cloning nested nodes by&nbsp;default, all event listeners and data bound on&nbsp;nodes will be lost after init. Fortunately, you can markup the&nbsp;immerser yourself. It&nbsp;can be&nbsp;useful when you have event listeners on&nbsp;solids, reactive logic or&nbsp;more than classname switching. All you need is&nbsp;to&nbsp;place the number of&nbsp;nested immerser masks equal to&nbsp;the number of&nbsp;the layers. Look how I change the smiley emoji on&nbsp;the right in&nbsp;this page source.</p></div></div><div class="grid__col grid__col--gamma code-background background scroller-x"><div class="as-if-title" aria-hidden="true"></div><div class="grid__content"><div class="code-highlight"><pre><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fixed<span class="token punctuation">"</span></span> <span class="token attr-name">data-immerser</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">data-immerser-mask</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">data-immerser-mask-inner</span><span class="token punctuation">></span></span>
      <span class="token comment">&lt;!-- your markup --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">data-immerser-mask</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">data-immerser-mask-inner</span><span class="token punctuation">></span></span>
      <span class="token comment">&lt;!-- your markup --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre></div></div></div></div><div class="grid"><div class="grid__col grid__col--beta"><div class="grid__content typography"><h1>Handle Clone Hover</h1><p>As&nbsp;mentioned above, immerser cloning nested nodes to&nbsp;achieve changing on&nbsp;scroll. Therefore if&nbsp;you hover a&nbsp;partially visible element, only the&nbsp;visible part will change. If&nbsp;you want to&nbsp;synchronize all cloned links, just pass <code>data-immerser-synchro-hover="hoverId"</code> attribute. It&nbsp;will share <code>_hover</code> class between all nodes with this <code>hoverId</code> when the mouse is&nbsp;over one of&nbsp;them. Add <code>_hover</code> selector alongside your <code>:hover</code> pseudoselector to&nbsp;style your interactive elements.</p></div></div><div class="grid__col grid__col--gamma code-background background scroller-x"><div class="as-if-title" aria-hidden="true"></div><div class="grid__content"><div class="code-highlight"><pre><code class="language-css"><span class="token selector">a:hover,
a._hover</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> magenta<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div></div></div></div><div class="grid"><div class="grid__col grid__col--beta"><div class="grid__content typography"><h1>Handle DOM change</h1><p>Immerser is not aware of changes in DOM, if you dynamically add or remove nodes. If you change height of the document and want immerser to recalculate and redraw solids, call <code>render</code> method on the immerser instance.</p></div></div><div class="grid__col grid__col--gamma code-background background scroller-x"><div class="as-if-title" aria-hidden="true"></div><div class="grid__content"><div class="code-highlight"><pre><code class="language-javascript"><span class="token comment">// make any manipulations, that changes DOM flow</span>
document<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>someNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>anotherNode<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// then tell immerser redraw things</span>
immerserInstance<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div></div></div><div class="grid"><div class="grid__col grid__col--beta"><div class="grid__content typography"><h1>External Scroll Engine</h1><p>If you drive scrolling with a custom scroll engine, for example Locomotive Scroll, disable immerser scroll listener with <code>isScrollHandled=false</code> flag and call <code>syncScroll</code> method every time the engine updates position. Immerser will only redraw masks without attaching another scroll handler. Keep in mind that immerser will not optimize calls this way, and performance optimization is client responsibility.</p></div></div><div class="grid__col grid__col--gamma code-background background scroller-x"><div class="as-if-title" aria-hidden="true"></div><div class="grid__content"><div class="code-highlight"><pre><code class="language-javascript"><span class="token keyword">import</span> Immerser <span class="token keyword">from</span> <span class="token string">'immerser'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> immerserInstance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Immerser</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// turn off immerser scroll handling when using a custom engine</span>
  <span class="token literal-property property">isScrollHandled</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

customScrollEngine<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'scroll'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// subscribe to engine scroll event to run sync immerser</span>
  immerserInstance<span class="token punctuation">.</span><span class="token function">syncScroll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div></div></div></div></div><footer class="footer"><div class="language"><span class="language__link language__link--active">english</span><a href="./ru.html" class="language__link">по-русски</a></div><div class="about"><a href="https://github.com/dubaua/immerser">github</a> <a href="mailto:dubaua@gmail.com">dubaua@gmail.com</a></div></footer><div class="rulers" id="rulers"></div></body></html>