{"version":3,"file":"main.js","mappings":"2CAAiDA,E,iPAAAA,EASxC,kB,+CCTI,SAASA,EAAEC,GAAG,IAAID,EAAE,SAASC,GAAG,GAAG,UAAAC,EAAiBD,KAAIA,EAAE,OAAOA,EAAE,IAAID,EAAEC,EAAEE,OAAOC,aAAa,YAAYJ,EAAE,CAAC,IAAIK,EAAEL,EAAEM,KAAKL,EAAE,UAAU,GAAG,UAAAC,EAAiBG,GAAE,OAAOA,EAAE,MAAM,IAAIE,UAAU,+CAA+C,CAAC,OAAOC,OAAOP,EAAE,CAAtO,CAAwOA,GAAG,MAAM,UAAAC,EAAiBF,GAAEA,EAAEA,EAAE,EAAE,CAACC,EAAOQ,QAAqB,WAAW,SAASR,EAAWA,GAAGS,KAAKC,UAAU,GAAGD,KAAKE,SAASX,EAAES,KAAKG,aAAaZ,CAAC,CAAC,IAAII,EAAES,EAAEC,EAAEd,EAAWe,UAAU,OAAOD,EAAEE,UAAU,SAAShB,GAAG,IAAID,EAAEU,KAAK,GAAG,mBAAmBT,EAAE,MAAM,IAAIM,UAAU,2DAA2D,OAAOG,KAAKC,UAAUO,KAAKjB,GAAG,WAAW,IAAII,EAAEL,EAAEW,UAAUQ,QAAQlB,GAAGD,EAAEW,UAAUX,EAAEW,UAAUS,MAAM,EAAEf,GAAGgB,OAAOrB,EAAEW,UAAUS,MAAMf,EAAE,GAAG,CAAC,EAAEU,EAAEO,MAAM,WAAWZ,KAAKC,UAAU,GAAGD,KAAKE,SAASF,KAAKG,YAAY,EAAER,EAAEJ,GAAYa,EAAE,CAAC,CAACS,IAAI,QAAQC,IAAI,WAAW,OAAOd,KAAKE,QAAQ,EAAEa,IAAI,SAASxB,GAAG,GAAGA,IAAIS,KAAKE,SAAS,CAAC,IAAIZ,EAAEU,KAAKE,SAASF,KAAKE,SAASX,EAAE,IAAI,IAAII,EAAE,EAAEA,EAAEK,KAAKC,UAAUe,OAAOrB,IAAIK,KAAKC,UAAUN,GAAGK,KAAKE,SAASZ,EAAE,CAAC,MAAM,SAASC,EAAEI,GAAG,IAAI,IAAIS,EAAE,EAAEA,EAAET,EAAEqB,OAAOZ,IAAI,CAAC,IAAIC,EAAEV,EAAES,GAAGC,EAAEY,WAAWZ,EAAEY,aAAA,EAAeZ,EAAEa,cAAA,EAAgB,UAAUb,IAAIA,EAAEc,UAAA,GAAaC,OAAOC,eAAe9B,EAAED,EAAEe,EAAEQ,KAAKR,EAAE,CAAC,CAAtK,CAAwKV,EAAEW,UAAUF,GAAGgB,OAAOC,eAAe1B,EAAE,YAAY,CAACwB,UAAA,IAAcxB,CAAC,CAAj6B,E,kBCA3T,SAASL,EAAEC,EAAED,GAAG,OAAO8B,OAAOd,UAAUgB,eAAe1B,KAAKL,EAAED,EAAE,CAAC,SAASK,EAAEJ,GAAG,OAAO,OAAOA,GAAG,UAAAC,EAAiBD,KAAA,IAAQgC,MAAMC,QAAQjC,EAAE,CAAC,SAASa,EAAEb,GAAG,IAAII,EAAEJ,EAAEkC,aAAarB,EAAEb,EAAEmC,YAAYrB,OAAA,IAAWD,EAAE,CAAC,EAAEA,EAAEuB,EAAEpC,EAAEqC,OAAOC,OAAA,IAAWF,EAAE,GAAGA,EAAEG,EAAEvC,EAAEwC,OAAOC,OAAA,IAAWF,EAAE,GAAGA,EAAEG,EAAE1C,EAAE2C,OAAOC,OAAA,IAAWF,GAAGA,EAAEG,EAAE,SAAS7C,GAAG,MAAM,CAACsC,EAAEtC,EAAEyC,GAAGK,KAAK,IAAI,EAAEC,EAAE,CAAC,EAAE,IAAI,IAAIC,KAAK5C,EAAE,GAAGL,EAAEK,EAAE4C,GAAG,CAAC,IAAIC,EAAE7C,EAAE4C,GAAGE,EAAED,EAAEE,SAASC,EAAEH,EAAEI,QAAQC,EAAEL,EAAEM,YAAYC,EAAEP,EAAEQ,UAAUC,EAAE5C,EAAEkC,GAAGW,IAAI5D,EAAEkD,EAAE,cAAc,mBAAmBC,EAAEA,EAAEpC,GAAGoC,GAAGU,EAAE7D,EAAEe,EAAEkC,GAAGa,EAAEL,EAAEE,EAAE5C,GAAG,GAAG6C,EAAE,CAAC,IAAIC,EAAE,MAAM,IAAItD,UAAUuC,EAAEG,EAAE,kBAAkB,IAAIa,EAAE,MAAM,IAAIvD,UAAUuC,EAAE,YAAYG,EAAE,UAAUM,EAAE,SAAArD,EAAgByD,GAAE,IAAIA,EAAE,MAAMX,EAAEC,GAAGU,CAAC,MAAM,GAAGX,EAAEC,GAAGI,EAAEQ,EAAE,GAAGC,EAAEd,EAAEC,GAAGU,MAAM,CAAC,GAAGd,EAAE,MAAM,IAAItC,UAAUuC,EAAE,YAAYG,EAAE,UAAUM,EAAE,SAAArD,EAAgByD,GAAE,IAAIA,EAAE,MAAMI,QAAQC,KAAKlB,EAAE,YAAYG,EAAE,UAAUM,EAAE,SAAArD,EAAgByD,GAAE,IAAIA,EAAE,+BAA+BN,EAAE,KAAK,CAAC,CAAC,OAAOL,CAAC,CAAC,IAAIjC,EAAE,kBAAkBsB,EAAE,0FAA0F,SAASE,EAAEtC,GAAG,MAAM,IAAIM,UAAU,CAACQ,EAAEd,EAAEoC,GAAGU,KAAK,KAAK,CAAC,IAAIP,EAAE,CAACL,aAAa,CAACiB,UAAA,EAAYM,UAAU,SAASzD,GAAG,IAAI,IAAIa,KAAKb,EAAE,GAAGD,EAAEC,EAAEa,GAAG,CAAC,IAAIC,EAAEd,EAAEa,GAAG,GAAGT,EAAEU,IAAIwB,EAAE,yBAAyBzB,EAAE,+DAAAZ,EAAsEa,GAAE,IAAIA,EAAE,KAAKf,EAAEe,EAAE,YAAY,CAAC,IAAIsB,EAAEtB,EAAEqC,SAASZ,EAAAtC,EAASmC,GAAE,YAAYG,GAAG,aAAaA,GAAGD,EAAE,yBAAyBzB,EAAE,mDAAAZ,EAA0DmC,GAAE,IAAIA,EAAE,IAAI,MAAMrC,EAAEe,EAAE,YAAYwB,EAAE,yBAAyBzB,EAAE,8CAA8C,GAAGd,EAAEe,EAAE,YAAYf,EAAEe,EAAE,aAAawB,EAAE,yBAAyBzB,EAAE,8CAA8Cd,EAAEe,EAAE,eAAe,CAAC,IAAI2B,EAAE3B,EAAEyC,YAAY,iBAAiBzC,EAAEyC,aAAajB,EAAE,yBAAyBzB,EAAE,oCAAAZ,EAA2CwC,GAAE,IAAIA,EAAE,IAAI,MAAMH,EAAE,uCAAuCzB,EAAE,YAAY,GAAGd,EAAEe,EAAE,aAAa,CAAC,IAAI4B,EAAE5B,EAAE2C,UAAU,mBAAmB3C,EAAE2C,WAAWnB,EAAE,yBAAyBzB,EAAE,oCAAAZ,EAA2CyC,GAAE,IAAIA,EAAE,IAAI,MAAMJ,EAAE,qCAAqCzB,EAAE,WAAW,CAAC,OAAOT,EAAEJ,EAAE,EAAEuD,YAAY,mDAAmDpB,YAAY,CAACgB,UAAA,EAAYE,QAAQ,CAAC,EAAEI,UAAUrD,EAAEmD,YAAY,aAAalB,OAAO,CAACc,UAAA,EAAYE,QAAQ,GAAGI,UAAU,SAASzD,GAAG,MAAM,iBAAiBA,CAAC,EAAEuD,YAAY,YAAYf,OAAO,CAACW,UAAA,EAAYE,QAAQ,GAAGI,UAAU,SAASzD,GAAG,MAAM,iBAAiBA,CAAC,EAAEuD,YAAY,YAAYZ,OAAO,CAACQ,UAAA,EAAYE,SAAA,EAAWI,UAAU,SAASzD,GAAG,MAAM,kBAAkBA,CAAC,EAAEuD,YAAY,cAAcvD,EAAOQ,QAAQ,SAASR,GAAG,IAAID,EAAEc,EAAE,CAACqB,aAAaK,EAAEJ,YAAYnC,EAAEqC,OAAOvB,EAAE0B,OAAOJ,IAAI,OAAOvB,EAAEd,EAAE,C,GCCllFA,EAA2B,CAAC,EAGhC,SAASK,EAAoBS,GAE5B,IAAIC,EAAef,EAAyBc,GAC5C,QAAI,IAAAC,EACH,OAAOA,EAAaN,QAGrB,IAAI4B,EAASrC,EAAyBc,GAAY,CAGjDL,QAAS,CAAC,GAOX,OAHAR,EAAoBa,GAAUuB,EAAQA,EAAO5B,QAASJ,GAG/CgC,EAAO5B,OACf,CCrBAJ,EAAoBgC,EAAK,SAAApC,GACxB,IAAID,EAASC,GAAUA,EAAOgE,WAC7B,kBAAOhE,EAAiBqD,OAAA,EACxB,kBAAMrD,CAAA,EAEP,OADAI,EAAoByC,EAAE9C,EAAQ,CAAEwC,EAAGxC,IAC5BA,CAAA,ECLRK,EAAoByC,EAAI,SAAC7C,EAASD,GACjC,IAAI,IAAIc,KAAOd,EACXK,EAAoBU,EAAEf,EAAYc,KAAST,EAAoBU,EAAEd,EAASa,IAC5EgB,OAAOC,eAAe9B,EAASa,EAAK,CAAEa,YAAA,EAAkBH,IAAKxB,EAAWc,IAAA,ECJ3ET,EAAoBU,EAAI,SAACd,EAAKD,GAAA,OAAU8B,OAAOd,UAAUgB,eAAe1B,KAAKL,EAAKD,EAAA,E,wTCGlF,IAAM2C,EAAkB,uBAEXE,GAAA,EAGAC,EAAc,CAAC,OAAQ,OAAQ,SAAU,UAAW,oBAAqB,gBAqBzEE,EAAuC,CAClDkB,oBAAqB,CACnBZ,QAAS,GACTE,YAAa,6BACbE,UAAW,SAACzD,GAAC,OAAKgC,MAAMC,QAAQjC,IAAmB,IAAbA,EAAEyB,MAAY,GAEtDyC,kBAAmB,CACjBb,QAAS,EACTE,YAAa,mBACbE,UAAW,SAACzD,GAAC,MAAkB,iBAANA,GAAkB,GAAKA,GAAKA,EAAI,GAAM,CAAC,GAElEmE,eAAgB,CACdd,QAAS,GACTE,YAAa,2BACbE,UAAW,SAACzD,GAAC,MAAkB,iBAANA,GAAkB,GAAKA,GAAKA,GAAK,CAAC,GAE7DoE,gBAAiB,CACff,SAAA,EACAE,YAAa,YACbE,UAAW,SAACzD,GAAC,MAAkB,kBAANA,CAAe,GAE1CqE,sBAAuB,CACrBhB,QAAS,EACTE,YAAa,sCACbE,UAAW,SAACzD,GAAC,MAAkB,iBAANA,GAAkBA,GAAK,CAAC,GAEnDsE,kBAAmB,CACjBjB,QAAS,IACTE,YAAa,wCACbE,UAAW,SAACzD,GAAC,MAAkB,iBAANA,GAAkBA,GAAK,GAAG,GAErDuE,yBAA0B,CACxBlB,QAAS,oBACTE,YAAa,mCACbE,UArDJ,SAA4BzD,GAC1B,MAAsB,iBAARA,GAA4B,KAARA,GAAc0C,EAAgB8B,KAAKxE,EACvE,GAqDEyE,gBAAiB,CACfpB,SAAA,EACAE,YAAa,YACbE,UAAW,SAACzD,GAAC,MAAkB,kBAANA,CAAe,GAE1C0E,MAAO,CACLrB,QAAST,EACTW,YAAa,YACbE,UAAW,SAACzD,GAAC,MAAkB,kBAANA,CAAe,GAE1C2E,GAAI,CACFtB,QAAS,CAAC,EACVE,YAAa,sCACbE,UAhEJ,SAA2BzD,GACzB,gBAAIA,MAGCA,GAAoB,WAAdyC,EAAOzC,IAAmBgC,MAAMC,QAAQjC,KAG5C6B,OAAO+C,KAAK5E,GAAI6E,MACrB,SAAC9E,GAAS,OACR8C,EAAYiC,SAAS/E,SAAA,IACpBC,EAA+BD,IACsB,mBAA9CC,EAA+BD,EAAyB,EAEtE,IAuDaiD,EAAiB,cAEjBC,EAAuD,CAClE8B,SAAU,WACVC,IAAK,IACLC,MAAO,IACPC,OAAQ,IACRC,KAAM,IACNC,SAAU,UAGClC,EAAiD,CAC5DmC,cAAe,OACfC,YAAa,QAGFlC,EAA6C,CACxDiC,cAAe,MACfC,YAAa,QCpGR,SAAShC,EAAWtD,EAAmBD,GAC5C,IAAK,IAAMK,KAAQL,EAChBC,EAAKuF,MAAcnF,GAAQL,EAAOK,EAEvC,CAYO,SAASoD,EAAYxD,GAMpB,IALND,EAAQC,EAARwF,SAAQpF,EAAAJ,EACRyF,OAAA5E,OAAA,IAAMT,EAAGsF,SAAQtF,EAKjB,IAAKS,EACH,MAAO,GAET,IAAMC,EAAWD,EAAO8E,iBAAoB5F,GAC5C,OAAOiC,MAAM4D,KAAK9E,EACpB,CASO,SAAS4C,EAAM1D,EAAgBD,EAAaK,GACjD,OAAOyF,KAAKC,IAAID,KAAKE,IAAI/F,EAAQI,GAAML,EACzC,CAEO,SAAS4D,IACd,IAAM3D,EAAUgG,OAAOC,SAAWP,SAASQ,gBAAgBC,WACrDpG,EAAUiG,OAAOI,SAAWV,SAASQ,gBAAgBG,UAE3D,MAAO,CACLC,EAAG5C,EAAM1D,EAAS,EAAG0F,SAASQ,gBAAgBK,aAC9CvD,EAAGU,EAAM3D,EAAS,EAAG2F,SAASQ,gBAAgBM,cAElD,C,40CChBA,IACqBC,SAAQ,WA+D3B,O,EAJA,SAAAA,SAAYzG,I,6FAAgC,KAAAyG,UAAAC,EAAA,gBA1DhB,CAAC,GAACA,EAAA,kBACT,CACnBC,KAAM,kBACNC,MAAO,wBACPC,MAAO,wBACPC,UAAW,6BACXC,KAAM,uBACNC,UAAW,6BACXC,aAAc,kCACfP,EAAA,wBACwC,IAAEA,EAAA,4BACY,CAAC,GAACA,EAAA,oBACjCA,EAAA,iBACgB,MAAIA,EAAA,uBACH,IAAEA,EAAA,uBACF,IAAEA,EAAA,2BACE,IAAEA,EAAA,+BACE,IAAEA,EAAA,sBACX,IAAEA,EAAA,8BACM,IAAEA,EAAA,2BACnBA,EAAA,4BACe,IAAEA,EAAA,qBACxB,GAACA,EAAA,oBACF,GAACA,EAAA,uBACE,GAACA,EAAA,sBACa,MAAIA,EAAA,uBACK,MAAIA,EAAA,sBACb,MAAIA,EAAA,4BACyB,MAAIA,EAAA,4BAC1C,IAAInE,IAAJ,EAAwB,IAAEmE,EAAA,4BAC1B,IAAInE,IAAJ,EAAwB,IAAEmE,EAAA,+BACvB,IAAInE,IAAJ,CAA8B,OAAKmE,EAAA,2BAC7B,IAAEA,EAAA,kCACgB,MAAIA,EAAA,gCACN,MAAIA,EAAA,qCACC,MAAIA,EAAA,gCACT,MAAIA,EAAA,sCACE,MAAIA,EAAA,iBACS,CACzEQ,KAAM,IAAIC,IACVC,KAAM,IAAID,IACVE,OAAQ,IAAIF,IACZG,QAAS,IAAIH,IACbI,kBAAmB,IAAIJ,IACvBK,aAAc,IAAIL,MACnBT,EAAA,iBACwC,MAAIA,EAAA,iBACJ,MAAIA,EAAA,gCACwB,MAAIA,EAAA,+BAClB,MAEvDA,EAAA,aACe9D,GAObnC,KAAKgH,MAAMzH,EACb,E,EAEA,EAAAsB,IAAA,QAAAoG,MACA,SAAc1H,GACZS,KAAKkH,cAAc3H,GACnBS,KAAKiE,MAAQjE,KAAKmH,SAASlD,MAC3BjE,KAAKoH,eACLpH,KAAKqH,kBACLrH,KAAKsH,+BACLtH,KAAKuH,4BACLvH,KAAKwH,+BACLxH,KAAKyH,kBACLzH,KAAK0H,uBACL1H,KAAK2H,sBACL3H,KAAK4H,8BACL5H,KAAK6H,YACL7H,KAAK8H,+BACL9H,KAAK+H,MAAM,OAAQ/H,KACrB,GAEA,CAAAa,IAAA,+BAAAoG,MACA,WAA6C,IAAA1H,EAAA,KACtCS,KAAKmH,SAASjD,IAGnB9B,EAAY4F,QAAQ,SAAC1I,GAAc,IAAAK,EAC3BS,EAA0B,QAAnBT,EAAGJ,EAAK4H,SAASjD,UAAA,IAAEvE,OAAA,EAAhBA,EAAmBL,GACZ,mBAAZc,GACTb,EAAK2E,GAAG5E,EAAWc,EAEvB,EACF,GAEA,CAAAS,IAAA,QAAAoG,MACA,SAAmC1H,GAA6C,QAAAD,EAAA,KAAAK,EAAAsI,UAAAjH,OAA5BZ,EAAI,IAAAmB,MAAA5B,EAAA,EAAAA,EAAA,KAAAU,EAAA,EAAAA,EAAAV,EAAAU,IAAJD,EAAIC,EAAA,GAAA4H,UAAA5H,GACnCL,KAAKkI,UAAU3I,GACvByI,QAAQ,SAACrI,GAClB,IACEA,EAAQwI,WAAA,EAAiB/H,EAC3B,CAAE,MAAOT,GACPL,EAAK8I,QAAQ,CACXC,QAAS,eAAF1H,OAAiBpB,EAAS,iBACjC+I,MAAA3I,EACA4I,SAAU,WAEd,CACF,EACF,GAAC,CAAA1H,IAAA,UAAAoG,MAED,SAAe1H,GAUN,IATPD,EAAOC,EAAP8I,QACA1I,EAAKJ,EAAL+I,MAAKlI,EAAAb,EACLiJ,UAAAnI,OAAA,IAASD,GAAQA,EAAAuB,EAAApC,EACjBgJ,SAAA1G,OAAA,IAAQF,EAAG,GAAEA,EAOPG,EAAgB,GAAHnB,OAAM4B,EAAc,KAAA5B,OAAIrB,EAAO,iEAAAqB,OAAgEkB,GAElH,IAAIxB,EAUJ,MAAM,IAAIoI,MAAM3G,EAAe,CAAE4G,MAAO/I,IATjCK,KAAKiE,aAAA,IAIVtE,EAAsB0D,QAAQC,KAAKxB,EAAenC,GAAS0D,QAAQC,KAAKxB,GAM5E,GAEA,CAAAjB,IAAA,eAAAoG,MACA,WACEjH,KAAK2I,UAAY1D,SAAS2D,cAA2B5I,KAAK6I,WAAW3C,MACrElG,KAAK8I,gBAAkB/F,EAAa,CAAEgC,SAAU/E,KAAK6I,WAAW1C,QAChEnG,KAAK+I,gBAAkBhG,EAAa,CAAEgC,SAAU/E,KAAK6I,WAAWzC,MAAOpB,OAAQhF,KAAK2I,WACtF,GAEA,CAAA9H,IAAA,kBAAAoG,MACA,WACOjH,KAAK2I,WACR3I,KAAKoI,QAAQ,CACXC,QAAS,uBACTE,SAAU,yBAGsB,IAAhCvI,KAAK8I,gBAAgB9H,QACvBhB,KAAKoI,QAAQ,CACXC,QAAS,yBACTE,SAAU,yBAGsB,IAAhCvI,KAAK+I,gBAAgB/H,QACvBhB,KAAKoI,QAAQ,CACXC,QAAS,yBACTE,SAAU,wBAGhB,GAEA,CAAA1H,IAAA,gBAAAoG,MACA,SAAsB1H,GACpBS,KAAKmH,SAAWxF,IAAa,CAC3BF,aAAca,EACdZ,YAAAnC,EACAqC,OAAQW,EACRR,OAAQ,wEAEZ,GAEA,CAAAlB,IAAA,4BAAAoG,MACA,WAA0C,IAAA1H,EAAA,KACxCS,KAAK8I,gBAAgBd,QAAQ,SAAC1I,EAAWK,GACvC,GAAIL,EAAU0J,QAAQC,oBACpB,IACE1J,EAAK4H,SAAS3D,oBAAoB7D,GAAcuJ,KAAKC,MAAM7J,EAAU0J,QAAQC,oBAC/E,CAAE,MAAO3J,GACPC,EAAK6I,QAAQ,CACXC,QAAS,gDACTC,MAAAhJ,EACAiJ,SAAU,YAEd,CAEJ,EACF,GAEA,CAAA1H,IAAA,+BAAAoG,MACA,WACE,IAAM1H,EAAaS,KAAK8I,gBAAgB9H,OAChBhB,KAAKmH,SAAS3D,oBAAoBxC,SAClCzB,GACtBS,KAAKoI,QAAQ,CACXC,QAAS,0DACTE,SAAU,YAGhB,GAEA,CAAA1H,IAAA,kBAAAoG,MACA,WAAgC,IAAA1H,EAAA,KAC9BS,KAAK8I,gBAAgBd,QAAQ,SAAC1I,EAAWK,GACvC,IAAIS,EAAKd,EAAU8J,GACdhJ,IACHA,EAAK,oBAAHO,OAAuBhB,GACzBL,EAAU8J,GAAKhJ,EACdd,EAAkB+J,oBAAA,GAErB9J,EAAK+J,qBAAqBlJ,GAAMT,CAClC,EACF,GAEA,CAAAkB,IAAA,uBAAAoG,MACA,WAAqC,IAAA1H,EAAA,KACnCS,KAAKuJ,iBAAmBvJ,KAAK8I,gBAAgBU,IAAI,SAAClK,EAAWK,GAC3D,IAAMS,EAAkBb,EAAK4H,SAAS3D,oBAAoB7D,GAE1D,MAAO,CACL8J,WAAY,EACZC,WAAY,EACZC,SAAU,EACVC,SAAU,EACVR,GANa9J,EAAP8J,GAONS,YAAa,EACbC,SAAU,EACVC,cAAe,KACfC,SAAU,KACVC,UAAW3K,EACX4K,gBAAA9J,EAEJ,GACAJ,KAAKmK,oBAAsBnK,KAAK8I,gBAAgBU,IAAI,kBAAM,CAAC,EAC7D,GAEA,CAAA3I,IAAA,sBAAAoG,MACA,WACkCjH,KAAKuJ,iBAAiBnF,MAAM,SAAC7E,GAAK,QDrP9CD,ECqP2DC,EAAM2K,kBDjPpD,IAA5B9I,OAAO+C,KAAK7E,GAAK0B,QAAgB1B,EAAI8K,cAAgBhJ,OAJvD,KCqPkG,IAEnGpB,KAAKoI,QAAQ,CACXC,QAAS,kEACTE,SAAU,uBACVC,WAAA,GAGN,GAEA,CAAA3H,IAAA,8BAAAoG,MACA,WAA4C,IAAA1H,EAAA,KAC1CS,KAAKqK,+BAAiCrK,KAAKsK,qBAAqB/J,UAAU,SAACjB,GACrEA,GAAmBC,EAAK4H,SAAS1D,kBAC9BlE,EAAKgL,UACRhL,EAAKoH,OAEEpH,EAAKgL,UACdhL,EAAKqH,QAET,EACF,GAEA,CAAA/F,IAAA,YAAAoG,MACA,WAA0B,IAAA1H,EAAA,KACxBS,KAAKwK,cAAgBjF,OAAOkF,YAC5BzK,KAAK0K,aAAgB1K,KAAK2I,UAA0BgC,UACpD3K,KAAK4K,gBAAmB5K,KAAK2I,UAA0B5C,aAEvD/F,KAAKuJ,iBAAmBvJ,KAAKuJ,iBAAiBC,IAAI,SAAClK,GACjD,IAAMK,EAAWL,EAAM2K,UAAUU,UAC3BvK,EAAcT,EAAWL,EAAM2K,UAAUlE,aAEzC1F,EAAWV,EAAWJ,EAAKmL,aAC3B/I,EAAatB,EAAWd,EAAKqL,gBAC7B/I,EAAWzB,EAAcb,EAAKmL,aAC9B5I,EAAaD,EAAWtC,EAAKqL,gBAEnC,OAAAC,EAAAA,EAAA,GACKvL,GAAK,IACRwK,SAAAnK,EACAkK,YAAAzJ,EACAqJ,WAAA9H,EACAgI,SAAAtJ,EACAqJ,WAAA5H,EACA8H,SAAA/H,GAEJ,GAEA7B,KAAKsK,qBAAqBrD,MAAQ1B,OAAOuF,UAC3C,GAEA,CAAAjK,IAAA,+BAAAoG,MACA,WACMjH,KAAKmH,SAASnD,kBAChBhE,KAAK+K,UAAY/K,KAAKgL,cAAcrE,KAAK3G,MACzCuF,OAAO0F,iBAAiB,SAAUjL,KAAK+K,WAAA,IAEzC/K,KAAKkL,UAAYlL,KAAKmL,cAAcxE,KAAK3G,MACzCuF,OAAO0F,iBAAiB,SAAUjL,KAAKkL,WAAA,GACvC3F,OAAO0F,iBAAiB,oBAAqBjL,KAAKkL,WAAA,GACpB,oBAAnBE,iBACTpL,KAAKqL,gBAAkB,IAAID,eAAepL,KAAKkL,WAC/ClL,KAAKqL,gBAAgBC,QAAQtL,KAAK2I,WAEtC,GAEA,CAAA9H,IAAA,sBAAAoG,MACA,WAAoC,IAAA1H,EAAA,KAClCS,KAAKuJ,iBAAmB,GACxBvJ,KAAKsJ,qBAAuB,CAAC,EAC7BtJ,KAAKuK,UAAA,EACLvK,KAAK2I,UAAY,KACjB3I,KAAK8I,gBAAkB,GACvB9I,KAAK+I,gBAAkB,GACvB/I,KAAKuL,oBAAsB,GAC3BvL,KAAKwL,wBAA0B,GAC/BxL,KAAKyL,eAAiB,GACtBzL,KAAK0L,uBAAyB,GAC9B1L,KAAK2L,iBAAA,EACL3L,KAAK4L,qBAAuB,GAC5B5L,KAAKwK,cAAgB,EACrBxK,KAAK0K,aAAe,EACpB1K,KAAK4K,gBAAkB,EACvB5K,KAAK6L,eAAiB,KACtB7L,KAAKqL,gBAAkB,KACvBrL,KAAK8L,eAAiB,KACtB9L,KAAK+L,qBAAuB,KAC5B/L,KAAKgM,qBAAqBpL,QAC1BZ,KAAKsK,qBAAqB1J,QAC1BZ,KAAKiM,wBAAwBrL,QAC7BZ,KAAKmK,oBAAsB,GAC3BnK,KAAKkM,2BAA6B,KAClClM,KAAKmM,yBAA2B,KAChCnM,KAAKoM,8BAAgC,KACrCpM,KAAKqM,yBAA2B,KAChCrM,KAAKqK,+BAAiC,KACtCrK,KAAKkL,UAAY,KACjBlL,KAAK+K,UAAY,KACjB/K,KAAKsM,yBAA2B,KAChCtM,KAAKuM,wBAA0B,KAC/BnK,EAAY4F,QAAQ,SAAC1I,GAAS,OAAKC,EAAK2I,UAAU5I,GAAWkN,OAAO,EACtE,GAEA,CAAA3L,IAAA,gBAAAoG,MACA,WAA8B,IAAA1H,EAAA,KAC5BsD,EAAW7C,KAAK2I,UAA0BlG,GAC1CzC,KAAKyM,oBACLzM,KAAKwL,wBAA0BzI,EAAa,CAAEgC,SAAU/E,KAAK6I,WAAWzC,MAAOpB,OAAQhF,KAAK2I,YAE5F3I,KAAKuJ,iBAAmBvJ,KAAKuJ,iBAAiBC,IAAI,SAAClK,EAAOK,GAExD,IAAMS,EAAWb,EAAKoM,gBAAkBpM,EAAKqM,qBAAqBjM,GAAcsF,SAASyH,cAAc,OACvG7J,EAAWzC,EAAUoC,GAErB,IAAInC,EAAgBd,EAAKoM,gBACrBvL,EAASwI,cAA2BrJ,EAAKsJ,WAAWtC,WACpDtB,SAASyH,cAAc,OA4C3B,OA3CKrM,IACHA,EAAgB4E,SAASyH,cAAc,QAEzC7J,EAAWxC,EAAemC,GAGrBjD,EAAKoM,kBACRvL,EAAS4I,QAAQ2D,aAAe,GAChCtM,EAAc2I,QAAQ4D,kBAAoB,IAI5CrN,EAAKiM,wBAAwBxD,QAAQ,SAACzI,GACpC,IAAMD,EAAkBC,EAAUsN,WAAA,GAC9BvN,aAA2BwN,cAC7BjK,EAAWvD,EAAiBqD,GAC3BrD,EAAwByN,kBAAA,EACzB1M,EAAc2M,YAAY1N,GAE9B,GDtZC,SACLC,EACAD,GAEA,IAAK,IAAIK,EAAQ,EAAGA,EAAQJ,EAASyB,OAAQrB,IAE3CL,EADaC,EAASI,GAG1B,CARO,CCyZ2BoD,EAA0B,CACpDgC,SAAUxF,EAAKsJ,WAAWzC,MAC1BpB,OAAQ3E,IAEuB,SAACd,GAChC,IAAMI,EAAUJ,EAAgByJ,QAAQiE,cACpC3N,EAAM4K,iBAAmB9I,OAAOd,UAAUgB,eAAe1B,KAAKN,EAAM4K,gBAAiBvK,IACvFJ,EAAgB2N,UAAUC,IAAI7N,EAAM4K,gBAAgBvK,GAExD,GAGmB,IAAfA,GACFS,EAASgN,aAAa,cAAe,QAGvChN,EAAS4M,YAAY3M,GACrBd,EAAKoJ,UAAUqE,YAAY5M,GAE3Bb,EAAKkM,eAAejL,KAAKJ,GAEzByK,EAAAA,EAAA,GAAYvL,GAAK,IAAE0K,SAAA5J,EAAU2J,cAAA1J,GAC/B,GAEAL,KAAKqN,2BACP,GAEA,CAAAxM,IAAA,oBAAAoG,MACA,WAAkC,IAAA1H,EAAA,KAChCS,KAAK4L,qBAAuB7I,EAAa,CAAEgC,SAAU/E,KAAK6I,WAAWvC,KAAMtB,OAAQhF,KAAK2I,YACxF3I,KAAK2L,gBAAkB3L,KAAK4L,qBAAqB5K,SAAWhB,KAAKuJ,iBAAiBvI,OAE9EhB,KAAK4L,qBAAqB5K,OAAS,IAAMhB,KAAK2L,iBAChD3L,KAAKoI,QAAQ,CACXC,QAAS,gGACTG,WAAA,EACAD,SAAU,6BAIdvI,KAAK4L,qBAAqB5D,QAAQ,SAAC1I,GACjC,IAAMK,EAAgBL,EAAesJ,cAA2BrJ,EAAKsJ,WAAWtC,WAC3E5G,GAGL4B,MAAM4D,KAAKxF,EAAc2N,UAAUtF,QAAQ,SAACzI,GACtCA,aAAiBuN,aACnBjK,EAAWtD,EAAOoD,EAEtB,EACF,EACF,GAEA,CAAA9B,IAAA,4BAAAoG,MACA,WAA0C,IAAA1H,EAAA,KACnCS,KAAK2I,WAGV3I,KAAKwL,wBAAwBxD,QAAQ,SAAC1I,GACpCC,EAAKoJ,UAAU4E,YAAYjO,EAC7B,EACF,GAEA,CAAAuB,IAAA,kBAAAoG,MACA,WAAgC,IAAA1H,EAAA,KAC9BS,KAAKuL,oBAAsBxI,EAAa,CAAEgC,SAAU/E,KAAK6I,WAAWxC,UAAWrB,OAAQhF,KAAK2I,YAC5F3I,KAAKuL,oBAAoBvD,QAAQ,SAAC1I,GAChC,IAAQK,EAASL,EAATkO,KACR,GAAI7N,EAAM,CACR,IAAMS,EAAUT,EAAK8N,MAAM,KAAK,GAChC,GAAIrN,EAAS,CACX,IAAMC,EAAad,EAAK+J,qBAAqBlJ,GAC7Cd,EAAc0J,QAAQ0E,mBAAqBrN,EAAWsN,UACxD,CACF,CACF,EACF,GAEA,CAAA9M,IAAA,oBAAAoG,MACA,WAAkC,IAAA1H,EAAA,KAChCS,KAAK0L,uBAAyB3I,EAAa,CAAEgC,SAAU/E,KAAK6I,WAAWrC,aAAcxB,OAAQhF,KAAK2I,YAElG3I,KAAKsM,yBAA2B,SAAChN,GAC/B,IACMK,EADSL,EAAEsO,OACa5E,QAAQ6E,qBACtCtO,EAAK0M,wBAAwBhF,MAAQtH,CACvC,EAEAK,KAAKuM,wBAA0B,WAC7BhN,EAAK0M,wBAAwBhF,MAAQ,IACvC,EAEAjH,KAAK0L,uBAAuB1D,QAAQ,SAAC1I,GACnCA,EAAiB2L,iBAAiB,YAAa1L,EAAK+M,0BACpDhN,EAAiB2L,iBAAiB,WAAY1L,EAAKgN,wBACrD,EACF,GAEA,CAAA1L,IAAA,mBAAAoG,MACA,WAAiC,IAAA1H,EAAA,KAC3BS,KAAKuL,oBAAoBvK,OAAS,IACpChB,KAAKkM,2BAA6BlM,KAAKgM,qBAAqBzL,UAAUP,KAAK8N,gBAAgBnH,KAAK3G,QAG9FA,KAAKmH,SAASxD,kBAChB3D,KAAKmM,yBAA2BnM,KAAKgM,qBAAqBzL,UAAUP,KAAK+N,UAAUpH,KAAK3G,QAG1FA,KAAKoM,8BAAgCpM,KAAKgM,qBAAqBzL,UAAU,SAACjB,GACxEC,EAAKwI,MAAM,oBAAqBzI,EAAWC,EAC7C,GAEIS,KAAK0L,uBAAuB1K,OAAS,IACvChB,KAAKqM,yBAA2BrM,KAAKiM,wBAAwB1L,UAAUP,KAAKgO,kBAAkBrH,KAAK3G,OAEvG,GAEA,CAAAa,IAAA,mBAAAoG,MACA,WAAiC,IAAA1H,EAAAD,EAAAK,EAAAS,EACA,QAA/Bb,EAAAS,KAAKkM,kCAAA,IAA0B3M,GAA/BA,EAAAK,KAAAI,MAC6B,QAA7BV,EAAAU,KAAKmM,gCAAA,IAAwB7M,GAA7BA,EAAAM,KAAAI,MACkC,QAAlCL,EAAAK,KAAKoM,qCAAA,IAA6BzM,GAAlCA,EAAAC,KAAAI,MAC6B,QAA7BI,EAAAJ,KAAKqM,gCAAA,IAAwBjM,GAA7BA,EAAAR,KAAAI,KACF,GAEA,CAAAa,IAAA,8BAAAoG,MACA,WAA4C,IAAA1H,EAAA,KAC1CS,KAAK0L,uBAAuB1D,QAAQ,SAAC1I,GACnCA,EAAiB2O,oBAAoB,YAAa1O,EAAK+M,0BACvDhN,EAAiB2O,oBAAoB,WAAY1O,EAAKgN,wBACxD,EACF,GAEA,CAAA1L,IAAA,yBAAAoG,MACA,WACEjH,KAAKuJ,iBAAiBvB,QAAQ,SAACzI,GACxBA,EAAM0K,UAAkBZ,oBAC3B9J,EAAM0K,UAAUiE,gBAAgB,KAEpC,EACF,GAEA,CAAArN,IAAA,6BAAAoG,MACA,WAA2C,IAAA1H,EAAA,KACpCS,KAAK2I,WAGV3I,KAAKwL,wBAAwBxD,QAAQ,SAAC1I,GACpCC,EAAKoJ,UAAUqE,YAAY1N,EAC7B,EACF,GAEA,CAAAuB,IAAA,uBAAAoG,MACA,WAAqC,IAAA1H,EAAA,KACnCS,KAAKyL,eAAezD,QAAQ,SAAC1I,GAC3B,GAAIC,EAAKoM,gBAAiB,CACxBrM,EAAiB4O,gBAAgB,SACjC5O,EAAiB4O,gBAAgB,eACjC,IAAMvO,EAAwBL,EAAiBsJ,cAA2BrJ,EAAKsJ,WAAWtC,WAC1F,IAAK5G,EACH,OAEFA,EAAsBuO,gBAAgB,SACTnL,EAAa,CAAEgC,SAAUxF,EAAKsJ,WAAWzC,MAAOpB,OAAQrF,IAChEqI,QAAQ,SAACzI,GACvBA,EAAwBwN,kBAC3BpN,EAAsB4N,YAAYhO,EAEtC,EACF,MACMA,EAAKoJ,WACPpJ,EAAKoJ,UAAU4E,YAAYjO,EAGjC,EACF,GAAC,CAAAuB,IAAA,kCAAAoG,MAED,WAAgD,IAAA1H,EAC1CS,KAAKmH,SAASnD,iBAChBuB,OAAO0I,oBAAoB,SAAUjO,KAAK+K,WAAA,GAE5CxF,OAAO0I,oBAAoB,SAAUjO,KAAKkL,WAAA,GAC1C3F,OAAO0I,oBAAoB,oBAAqBjO,KAAKkL,WAAA,GACjC,QAApB3L,EAAAS,KAAKqL,uBAAA,IAAe9L,GAApBA,EAAsB4O,YACxB,GAEA,CAAAtN,IAAA,qBAAAoG,MACA,SAA2B1H,GAAwB,IAAAD,EAAA,KAC3CK,EAAI,MAAAJ,EAAAA,EAAW2D,IAAwBX,EACvCnC,EAAiBT,EAAIK,KAAKwK,cAEhCxK,KAAKmK,oBAAsBnK,KAAKuJ,iBAAiBC,IAAI,SAAAjK,GAA+B,IAA5Bc,EAAQd,EAARuK,SAAUnI,EAAWpC,EAAXsK,YAC1DhI,EAAcF,EAActB,EAC5ByB,EAAUsD,KAAKE,IAAI3D,EAAavB,GAAkBgF,KAAKC,IAAIhF,EAAUV,GACrEqC,EAAcoD,KAAKE,IAAIzD,EAAavC,EAAKkL,eAC/C,OAAOxI,GAAe,EAAI,EAAIoD,KAAKC,IAAI,EAAGD,KAAKE,IAAI,EAAGxD,EAAUE,GAClE,EACF,GAEA,CAAAnB,IAAA,QAAAoG,MACA,SAAc1H,GAAwB,IAAAD,EAAA,KAC9BK,OAAA,IAAIJ,EAAwBA,EAAU2D,IAAwBX,EACpEvC,KAAKuJ,iBAAiBvB,QACpB,SAAAzI,EAAiGa,GAAe,IAC1GC,EADHsB,EAAUpC,EAAVkK,WAAY5H,EAAQtC,EAARoK,SAAU7H,EAAUvC,EAAVmK,WAAY1H,EAAQzC,EAARqK,SAAU3H,EAAQ1C,EAARyK,SAAU7H,EAAa5C,EAAbwK,cAAe3H,EAAQ7C,EAARuK,SAAUxH,EAAW/C,EAAXsK,YAI9ExJ,EADEsB,EAAahC,EACJL,EAAKsL,gBACPjJ,GAAchC,GAAKA,EAAIkC,EACrBA,EAAWlC,EACbkC,GAAYlC,GAAKA,EAAImC,EACnB,EACFA,GAAcnC,GAAKA,EAAIqC,EACrBF,EAAanC,GAEZL,EAAKsL,gBAGnB3I,EAAS6C,MAAMsJ,UAAY,cAAHzN,OAAiBN,EAAQ,OACjD8B,EAAc2C,MAAMsJ,UAAY,cAAHzN,QAAkBN,EAAQ,OAEvD,IAAMkC,EAAyB5C,EAAIL,EAAKkL,eAAiB,EAAIlL,EAAK6H,SAASzD,gBACvEtB,GAAYG,GAA0BA,EAAyBD,IACjEhD,EAAK0M,qBAAqB/E,MAAQ7G,EAEtC,EAEJ,GAEA,CAAAS,IAAA,kBAAAoG,MACA,SAAwB1H,GAA2B,IAAAD,EAAA,KACjDU,KAAKuL,oBAAoBvD,QAAQ,SAACrI,GAC5B0O,SAAS1O,EAAcqJ,QAAQ0E,mBAAoB,MAAQnO,EAC7DI,EAAcuN,UAAUC,IAAI7N,EAAK6H,SAASrD,0BAE1CnE,EAAcuN,UAAUoB,OAAOhP,EAAK6H,SAASrD,yBAEjD,EACF,GAEA,CAAAjD,IAAA,YAAAoG,MACA,SAAkB1H,GAChB,IAAAD,EAA0BU,KAAKuJ,iBAAiBhK,GAAxCI,EAAEL,EAAF8J,GAAIhJ,EAASd,EAAT2K,UACZ7J,EAAU8N,gBAAgB,MAC1B3I,OAAOgJ,SAASC,KAAO7O,EACvBS,EAAUgN,aAAa,KAAMzN,EAC/B,GAEA,CAAAkB,IAAA,oBAAAoG,MACA,SAA0B1H,GACxBS,KAAK0L,uBAAuB1D,QAAQ,SAAC1I,GAC/BA,EAAiB0J,QAAQ6E,uBAAyBtO,EACpDD,EAAiB4N,UAAUC,IAAI,UAE/B7N,EAAiB4N,UAAUoB,OAAO,SAEtC,EACF,GAEA,CAAAzN,IAAA,gBAAAoG,MACA,WACE,IAAA1H,EAAkCS,KAAKuJ,iBAAiBvJ,KAAKgM,qBAAqB/E,OAA1E3H,EAAQC,EAARuK,SAAUnK,EAAWJ,EAAXsK,YAClBzJ,EAAiB8C,IAAT7C,EAACD,EAADyF,EAAGlE,EAACvB,EAADmC,EACLV,EAAeuD,KAAKqJ,IAAI9M,EAAIrC,GAC5BwC,EAAkBsD,KAAKqJ,IAAI9M,EAAI3B,KAAKwK,cAAgB7K,GAErC,IAAjBkC,GAA0C,IAApBC,IACpBD,GAAgBC,GAAmBD,GAAgB7B,KAAKmH,SAASvD,sBACnE2B,OAAOmJ,SAASrO,EAAGf,GACVwC,GAAmBD,GAAgBC,GAAmB9B,KAAKmH,SAASvD,uBAC7E2B,OAAOmJ,SAASrO,EAAGV,EAAcK,KAAKwK,eAG5C,GAEA,CAAA3J,IAAA,gBAAAoG,MACA,WAA8B,IAAA1H,EAAA,KACxBS,KAAKuK,WACHvK,KAAK8L,iBACPvG,OAAOoJ,qBAAqB3O,KAAK8L,gBACjC9L,KAAK8L,eAAiB,MAExB9L,KAAK8L,eAAiBvG,OAAOqJ,sBAAsB,WACjD,IAAMtP,EAAI4D,IAAwBX,EAClChD,EAAKsP,mBAAmBvP,GACxBC,EAAKwI,MAAM,eAAgBxI,EAAK4K,oBAAqB5K,GACrDA,EAAKuP,MAAMxP,GACPC,EAAK4H,SAASvD,sBAAwB,IACpCrE,EAAKwM,uBACPgD,aAAaxP,EAAKwM,sBAClBxM,EAAKwM,qBAAuB,MAE9BxM,EAAKwM,qBAAuBiD,WAAWzP,EAAK0P,cAActI,KAAKpH,GAAOA,EAAK4H,SAAStD,mBAExF,GAEJ,GAEA,CAAAhD,IAAA,gBAAAoG,MACA,WAA8B,IAAA1H,EAAA,KACxBS,KAAK6L,iBACPtG,OAAOoJ,qBAAqB3O,KAAK6L,gBACjC7L,KAAK6L,eAAiB,MAExB7L,KAAK6L,eAAiBtG,OAAOqJ,sBAAsB,WACjDrP,EAAK2P,QACP,EACF,GAEA,CAAArO,IAAA,OAAAoG,MAIA,WACEjH,KAAKmP,gBACLnP,KAAKoP,kBACLpP,KAAKqP,oBACLrP,KAAKsP,mBACLtP,KAAKuK,UAAA,EACLvK,KAAK6O,qBACL7O,KAAK8O,QACL9O,KAAK+H,MAAM,OAAQ/H,KACrB,GAEA,CAAAa,IAAA,SAAAoG,MAIA,WACEjH,KAAKuP,mBACLvP,KAAKwP,8BACLxP,KAAKyP,yBACLzP,KAAK0P,6BACL1P,KAAK2P,uBACL3P,KAAKuK,UAAA,EACLvK,KAAK+H,MAAM,SAAU/H,MACrBA,KAAKgM,qBAAqB/E,WAAA,CAC5B,GAEA,CAAApG,IAAA,UAAAoG,MAIA,WAAuB,IAAA1H,EACrBS,KAAK4G,SAC8B,QAAnCrH,EAAAS,KAAKqK,sCAAA,IAA8B9K,GAAnCA,EAAAK,KAAAI,MACAA,KAAK4P,kCACL5P,KAAK+H,MAAM,UAAW/H,MACtBA,KAAK6P,qBACP,GAEA,CAAAhP,IAAA,SAAAoG,MAMA,WACEjH,KAAK6H,YACL7H,KAAK6O,qBACL7O,KAAK8O,OACP,GAEA,CAAAjO,IAAA,aAAAoG,MAOA,WACMjH,KAAKmH,SAASnD,gBAChBhE,KAAKoI,QAAQ,CACXC,QAAS,2EACTG,WAAA,EACAD,SAAU,6BAIdvI,KAAK6O,qBACL7O,KAAK8O,QACP,GAEA,CAAAjO,IAAA,KAAAoG,MACA,SAA+B1H,EAAcD,GAC3CU,KAAKkI,UAAU3I,GAAW4N,IAAI7N,EAChC,GAEA,CAAAuB,IAAA,OAAAoG,MACA,SAAiC1H,EAAcD,GAAsC,ID3uBrFc,EAEMC,ECyuB+EsB,EAAA,KACnF3B,KAAKkI,UAAU3I,GAAW4N,KD5uB5B/M,EC6uB6B,WACvBuB,EAAKmO,IAAIvQ,EAAWD,GAAS,QAAAK,EAAAsI,UAAAjH,OADFZ,EAAI,IAAAmB,MAAA5B,GAAAU,EAAA,EAAAA,EAAAV,EAAAU,IAAJD,EAAIC,GAAA4H,UAAA5H,GAE/Bf,EAAQ6I,WAAA,EAAiB/H,EAC3B,GD9uBEC,EAAUD,GACR2P,0BC0uBYzQ,EDzuBbe,GC8uBP,GAEA,CAAAQ,IAAA,MAAAoG,MACA,SAAgC1H,EAAcD,GAC5C,IAAMK,EAAaK,KAAKkI,UAAU3I,GAElCI,EAAWqI,QAAQ,SAACzI,GAClB,IAAMa,EDlvBL,SAA+Db,GACpE,OAAQA,EAAkCwQ,yBAC5C,CAFO,CCkvBmCxQ,GAChCA,IAAkBD,GAAWc,IAAad,GAC5CK,EAAWqQ,OAAOzQ,EAEtB,EACF,GAEA,CAAAsB,IAAA,cAAAC,IACA,WACE,OAAOd,KAAKgM,qBAAqB/E,KACnC,GAEA,CAAApG,IAAA,UAAAC,IACA,WACE,OAAOd,KAAKuK,QACd,GAEA,CAAA1J,IAAA,WAAAC,IACA,WACE,OAAOd,KAAK2I,SACd,GAEA,CAAA9H,IAAA,qBAAAC,IACA,WACE,OAAOd,KAAKmK,mBACd,I,gFAAC,CAzyB0B,G,qBTjCN,UAAZ3K,EAAAO,IAA0C,UAAXP,EAAAyQ,GACxCA,EAAOlQ,QAAUT,KAEjB4Q,EAAO,QAAI,4BAAF,GAAE,+B,uBUJA,SAAS5Q,EAAEA,GAAG,IAAIC,EAAE,SAASD,GAAG,GAAG,iBAAiBA,IAAIA,EAAE,OAAOA,EAAE,IAAIC,EAAED,EAAEG,OAAOC,aAAa,QAAG,IAASH,EAAE,CAAC,IAAIa,EAAEb,EAAEK,KAAKN,EAAE,UAAU,GAAG,iBAAiBc,EAAE,OAAOA,EAAE,MAAM,IAAIP,UAAU,+CAA+C,CAAC,OAAOC,OAAOR,EAAE,CAAtO,CAAwOA,GAAG,MAAM,iBAAiBC,EAAEA,EAAEA,EAAE,EAAE,CAAC0Q,EAAOlQ,QAAqB,WAAW,SAASoQ,EAAW7Q,GAAGU,KAAKC,UAAU,GAAGD,KAAKE,SAASZ,EAAEU,KAAKG,aAAab,CAAC,CAAC,IAAIC,EAAEa,EAAET,EAAEwQ,EAAW7P,UAAU,OAAOX,EAAEY,UAAU,SAASjB,GAAG,IAAIC,EAAES,KAAK,GAAG,mBAAmBV,EAAE,MAAM,IAAIO,UAAU,2DAA2D,OAAOG,KAAKC,UAAUO,KAAKlB,GAAG,WAAW,IAAIc,EAAEb,EAAEU,UAAUQ,QAAQnB,GAAGC,EAAEU,UAAUV,EAAEU,UAAUS,MAAM,EAAEN,GAAGO,OAAOpB,EAAEU,UAAUS,MAAMN,EAAE,GAAG,CAAC,EAAET,EAAEiB,MAAM,WAAWZ,KAAKC,UAAU,GAAGD,KAAKE,SAASF,KAAKG,YAAY,EAAEZ,EAAE4Q,GAAY/P,EAAE,CAAC,CAACS,IAAI,QAAQC,IAAI,WAAW,OAAOd,KAAKE,QAAQ,EAAEa,IAAI,SAASzB,GAAG,GAAGA,IAAIU,KAAKE,SAAS,CAAC,IAAIX,EAAES,KAAKE,SAASF,KAAKE,SAASZ,EAAE,IAAI,IAAIc,EAAE,EAAEA,EAAEJ,KAAKC,UAAUe,OAAOZ,IAAIJ,KAAKC,UAAUG,GAAGJ,KAAKE,SAASX,EAAE,CAAC,MAAM,SAASA,EAAEa,GAAG,IAAI,IAAIT,EAAE,EAAEA,EAAES,EAAEY,OAAOrB,IAAI,CAAC,IAAIgC,EAAEvB,EAAET,GAAGgC,EAAEV,WAAWU,EAAEV,aAAY,EAAGU,EAAET,cAAa,EAAG,UAAUS,IAAIA,EAAER,UAAS,GAAIC,OAAOC,eAAe9B,EAAED,EAAEqC,EAAEd,KAAKc,EAAE,CAAC,CAAtK,CAAwKpC,EAAEe,UAAUF,GAAGgB,OAAOC,eAAe9B,EAAE,YAAY,CAAC4B,UAAS,IAAK5B,CAAC,CAAj6B,E,kBCAvU,IAAWA,IAAwL,IAAI,MAAM,aAAa,IAAID,EAAE,CAAC,GAAGA,EAAEC,GAAG6B,OAAOC,eAAe9B,EAAE,aAAa,CAAC0H,OAAM,IAAK1H,EAAE6Q,2BAAsB,EAAO7Q,EAAE6Q,sBAAsB,CAACC,SAAS,CAAC3N,UAAS,EAAGM,UAAU1D,GAAG,iBAAiBA,GAAGA,EAAE,EAAEwD,YAAY,qCAAqCwN,MAAM,CAAC5N,UAAS,EAAGE,QAAQ,EAAEI,UAAU1D,GAAG,iBAAiBA,GAAGA,GAAG,EAAEwD,YAAY,yCAAyCyN,KAAK,CAAC7N,UAAS,EAAGM,UAAU1D,GAAG,mBAAmBA,EAAEwD,YAAY,cAAc0N,WAAW,CAAC9N,UAAS,EAAGE,aAAQ,EAAOI,UAAU1D,GAAG,mBAAmBA,QAAG,IAASA,EAAEwD,YAAY,cAAc2N,SAAS,CAAC/N,UAAS,EAAGE,aAAQ,EAAOI,UAAU1D,GAAG,mBAAmBA,QAAG,IAASA,EAAEwD,YAAY,cAAc4N,UAAU,CAAChO,UAAS,EAAGE,SAAQ,EAAGI,UAAU1D,GAAG,kBAAkBA,EAAEwD,YAAY,aAAa,EAAE,IAAIxD,EAAEC,EAAEa,GAAG,IAAIC,EAAEL,MAAMA,KAAK2Q,iBAAiB,SAASrR,GAAG,OAAOA,GAAGA,EAAEiE,WAAWjE,EAAE,CAACsD,QAAQtD,EAAE,EAAE8B,OAAOC,eAAe9B,EAAE,aAAa,CAAC0H,OAAM,IAAK1H,EAAEqR,WAAWrR,EAAEsR,WAAM,EAAO,MAAMlR,EAAEU,EAAED,EAAE,MAAMuB,EAAEtB,EAAED,EAAE,MAAMyB,EAAEzB,EAAE,KAAKgB,OAAOC,eAAe9B,EAAE,aAAa,CAAC0B,YAAW,EAAGH,IAAI,WAAW,OAAOe,EAAE+O,UAAU,IAAI,MAAM9O,EAAE1B,EAAE,IAAIb,EAAEsR,MAAM,MAAMC,QAAQC,cAAcC,YAAYC,MAAMC,SAAS,EAAEC,YAAY,EAAEC,UAAU,KAAKC,WAAW,IAAI1P,EAAEiB,SAAQ,GAAI0O,UAAUzP,EAAE+O,WAAWW,QAAQC,aAAY,EAAG,WAAApH,CAAY9K,GAAGU,KAAK8Q,SAAQ,EAAGnR,EAAEiD,SAAS,CAACnB,aAAaK,EAAEsO,sBAAsB1O,YAAYpC,EAAEsC,OAAO,eAAe5B,KAAKqR,WAAW9Q,UAAUP,KAAKyR,mBAAmBzR,KAAK8Q,QAAQJ,WAAW1Q,KAAK0R,KAAK,CAAC,GAAAA,GAAM,OAAO1R,KAAKsR,UAAUzP,EAAE+O,WAAWW,QAAQvR,KAAKqR,WAAWpK,OAAM,EAAGjH,IAAI,CAAC,UAAA2R,GAAa,OAAO3R,KAAKsR,UAAUzP,EAAE+O,WAAWgB,SAAS5R,KAAKqR,WAAWpK,OAAM,EAAGjH,IAAI,CAAC,KAAAY,GAAQ,OAAOZ,KAAKkR,SAAS,EAAElR,KAAKmR,YAAY,EAAEnR,KAAKqR,WAAWpK,OAAM,EAAG,OAAOjH,KAAKoR,YAAY7L,OAAOoJ,qBAAqB3O,KAAKoR,WAAWpR,KAAKoR,UAAU,MAAMpR,KAAK8Q,QAAQP,KAAKvQ,KAAKkR,UAAUlR,IAAI,CAAC,KAAA6R,GAAQ,OAAO7R,KAAKqR,WAAWpK,OAAM,EAAGjH,IAAI,CAAC,OAAA6G,GAAU,OAAO,OAAO7G,KAAKoR,YAAY7L,OAAOoJ,qBAAqB3O,KAAKoR,WAAWpR,KAAKoR,UAAU,MAAMpR,KAAKqR,WAAWzQ,QAAQZ,IAAI,CAAC,cAAI8R,GAAa,OAAO9R,KAAKwR,WAAW,CAAC,aAAIO,GAAY,OAAO/R,KAAKqR,WAAWpK,KAAK,CAAC+K,KAAK1S,IAAI,MAAMC,EAAED,EAAEU,KAAK+Q,cAAc3Q,EAAEb,EAAES,KAAK8Q,QAAQT,SAASrQ,KAAKsR,UAAUtR,KAAKmR,YAAYnR,KAAK8Q,QAAQR,MAAMtQ,KAAKmR,aAAa5R,GAAGS,KAAKkR,SAAS9L,KAAKE,IAAI,EAAEF,KAAKC,IAAI,EAAErF,KAAKkR,SAAS9Q,IAAIJ,KAAK8Q,QAAQP,KAAKvQ,KAAKkR,YAAYlR,KAAKsR,YAAYzP,EAAE+O,WAAWW,QAAQ,IAAIvR,KAAKkR,SAAS,IAAIlR,KAAKkR,WAAWlR,KAAKqR,WAAWpK,OAAM,EAAGjH,KAAKsR,YAAYzP,EAAE+O,WAAWW,SAAS,mBAAmBvR,KAAK8Q,QAAQN,aAAaxQ,KAAK8Q,QAAQN,aAAaxQ,KAAKwR,aAAY,KAAMxR,KAAK+Q,cAAczR,EAAEU,KAAKoR,UAAU7L,OAAOqJ,sBAAsB5O,KAAKgS,QAAQP,kBAAkBnS,IAAIA,GAAGU,KAAK+Q,cAAcC,YAAYC,MAAMjR,KAAKoR,UAAU7L,OAAOqJ,sBAAsB5O,KAAKgS,QAAQ,mBAAmBhS,KAAK8Q,QAAQL,UAAU,IAAIzQ,KAAKkR,UAAU,IAAIlR,KAAKkR,UAAUlR,KAAK8Q,QAAQL,SAASzQ,KAAKkR,UAAU,OAAOlR,KAAKoR,WAAW7L,OAAOoJ,qBAAqB3O,KAAKoR,aAAa,EAAE,IAAI9R,EAAEC,GAAG6B,OAAOC,eAAe9B,EAAE,aAAa,CAAC0H,OAAM,IAAK1H,EAAEqR,gBAAW,EAAOrR,EAAEqR,WAAW,CAACW,QAAQ,EAAEK,UAAU,EAAE,EAAE,IAAItS,GAAG,SAASC,EAAED,GAAG,IAAIC,EAAE,SAASD,GAAG,GAAG,iBAAiBA,IAAIA,EAAE,OAAOA,EAAE,IAAIC,EAAED,EAAEG,OAAOC,aAAa,QAAG,IAASH,EAAE,CAAC,IAAIa,EAAEb,EAAEK,KAAKN,EAAE,UAAU,GAAG,iBAAiBc,EAAE,OAAOA,EAAE,MAAM,IAAIP,UAAU,+CAA+C,CAAC,OAAOC,OAAOR,EAAE,CAAtO,CAAwOA,GAAG,MAAM,iBAAiBC,EAAEA,EAAEA,EAAE,EAAE,CAACD,EAAES,QAAQ,WAAW,SAAST,EAAEA,GAAGU,KAAKC,UAAU,GAAGD,KAAKE,SAASZ,EAAEU,KAAKG,aAAab,CAAC,CAAC,IAAIc,EAAEC,EAAEV,EAAEL,EAAEgB,UAAU,OAAOX,EAAEY,UAAU,SAASjB,GAAG,IAAIC,EAAES,KAAK,GAAG,mBAAmBV,EAAE,MAAM,IAAIO,UAAU,2DAA2D,OAAOG,KAAKC,UAAUO,KAAKlB,GAAG,WAAW,IAAIc,EAAEb,EAAEU,UAAUQ,QAAQnB,GAAGC,EAAEU,UAAUV,EAAEU,UAAUS,MAAM,EAAEN,GAAGO,OAAOpB,EAAEU,UAAUS,MAAMN,EAAE,GAAG,CAAC,EAAET,EAAEiB,MAAM,WAAWZ,KAAKC,UAAU,GAAGD,KAAKE,SAASF,KAAKG,YAAY,EAAEC,EAAEd,GAAGe,EAAE,CAAC,CAACQ,IAAI,QAAQC,IAAI,WAAW,OAAOd,KAAKE,QAAQ,EAAEa,IAAI,SAASzB,GAAG,GAAGA,IAAIU,KAAKE,SAAS,CAAC,IAAIX,EAAES,KAAKE,SAASF,KAAKE,SAASZ,EAAE,IAAI,IAAIc,EAAE,EAAEA,EAAEJ,KAAKC,UAAUe,OAAOZ,IAAIJ,KAAKC,UAAUG,GAAGJ,KAAKE,SAASX,EAAE,CAAC,MAAM,SAASD,EAAEc,GAAG,IAAI,IAAIC,EAAE,EAAEA,EAAED,EAAEY,OAAOX,IAAI,CAAC,IAAIV,EAAES,EAAEC,GAAGV,EAAEsB,WAAWtB,EAAEsB,aAAY,EAAGtB,EAAEuB,cAAa,EAAG,UAAUvB,IAAIA,EAAEwB,UAAS,GAAIC,OAAOC,eAAe/B,EAAEC,EAAEI,EAAEkB,KAAKlB,EAAE,CAAC,CAAtK,CAAwKS,EAAEE,UAAUD,GAAGe,OAAOC,eAAejB,EAAE,YAAY,CAACe,UAAS,IAAKf,CAAC,CAAt4B,EAAy4B,EAAE,IAAId,GAAG,SAASC,EAAED,EAAEC,GAAG,OAAO6B,OAAOd,UAAUgB,eAAe1B,KAAKN,EAAEC,EAAE,CAAC,SAASa,EAAEd,GAAG,OAAO,OAAOA,GAAG,iBAAiBA,IAAG,IAAKiC,MAAMC,QAAQlC,EAAE,CAAC,SAASe,EAAEf,GAAG,IAAIc,EAAEd,EAAEmC,aAAapB,EAAEf,EAAEoC,YAAY/B,OAAE,IAASU,EAAE,CAAC,EAAEA,EAAEsB,EAAErC,EAAEsC,OAAOC,OAAE,IAASF,EAAE,GAAGA,EAAEG,EAAExC,EAAEyC,OAAOE,OAAE,IAASH,EAAE,GAAGA,EAAEK,EAAE7C,EAAE4C,OAAOF,OAAE,IAASG,GAAGA,EAAEC,EAAE,SAAS9C,GAAG,MAAM,CAACuC,EAAEvC,EAAE2C,GAAGI,KAAK,IAAI,EAAEG,EAAE,CAAC,EAAE,IAAI,IAAIO,KAAK3C,EAAE,GAAGb,EAAEa,EAAE2C,GAAG,CAAC,IAAIT,EAAElC,EAAE2C,GAAGN,EAAEH,EAAEI,SAASQ,EAAEZ,EAAEM,QAAQK,EAAEX,EAAEQ,YAAYP,EAAED,EAAEU,UAAUH,EAAElD,EAAEoD,GAAG8H,IAAItL,EAAE+C,EAAE,cAAc,mBAAmBG,EAAEA,EAAE9C,GAAG8C,GAAGwP,EAAE1S,EAAEI,EAAEoD,GAAG8C,EAAEtD,EAAEM,EAAElD,GAAG,GAAGkL,EAAE,CAAC,IAAIoH,EAAE,MAAM,IAAIpS,UAAUuC,EAAEW,EAAE,kBAAkB,IAAI8C,EAAE,MAAM,IAAIhG,UAAUuC,EAAE,YAAYW,EAAE,UAAUE,EAAE,gBAAgBJ,EAAE,IAAIA,EAAE,MAAML,EAAEO,GAAGF,CAAC,MAAM,GAAGL,EAAEO,GAAGG,EAAE+O,EAAE,GAAGpM,EAAErD,EAAEO,GAAGF,MAAM,CAAC,GAAGb,EAAE,MAAM,IAAInC,UAAUuC,EAAE,YAAYW,EAAE,UAAUE,EAAE,gBAAgBJ,EAAE,IAAIA,EAAE,MAAMQ,QAAQC,KAAKlB,EAAE,YAAYW,EAAE,UAAUE,EAAE,gBAAgBJ,EAAE,IAAIA,EAAE,+BAA+BK,EAAE,KAAK,CAAC,CAAC,OAAOV,CAAC,CAAC,IAAI7C,EAAE,kBAAkBgC,EAAE,0FAA0F,SAASE,EAAEvC,GAAG,MAAM,IAAIO,UAAU,CAACF,EAAEL,EAAEqC,GAAGU,KAAK,KAAK,CAAC,IAAIP,EAAE,CAACL,aAAa,CAACiB,UAAS,EAAGM,UAAU,SAAS1D,GAAG,IAAI,IAAIe,KAAKf,EAAE,GAAGC,EAAED,EAAEe,GAAG,CAAC,IAAIV,EAAEL,EAAEe,GAAG,GAAGD,EAAET,IAAIkC,EAAE,yBAAyBxB,EAAE,sEAAsEV,EAAE,IAAIA,EAAE,KAAKJ,EAAEI,EAAE,YAAY,CAAC,IAAIgC,EAAEhC,EAAE+C,SAASZ,SAASH,EAAE,YAAYG,GAAG,aAAaA,GAAGD,EAAE,yBAAyBxB,EAAE,0DAA0DsB,EAAE,IAAIA,EAAE,IAAI,MAAMpC,EAAEI,EAAE,YAAYkC,EAAE,yBAAyBxB,EAAE,8CAA8C,GAAGd,EAAEI,EAAE,YAAYJ,EAAEI,EAAE,aAAakC,EAAE,yBAAyBxB,EAAE,8CAA8Cd,EAAEI,EAAE,eAAe,CAAC,IAAIsC,EAAEtC,EAAEmD,YAAY,iBAAiBnD,EAAEmD,aAAajB,EAAE,yBAAyBxB,EAAE,2CAA2C4B,EAAE,IAAIA,EAAE,IAAI,MAAMJ,EAAE,uCAAuCxB,EAAE,YAAY,GAAGd,EAAEI,EAAE,aAAa,CAAC,IAAIwC,EAAExC,EAAEqD,UAAU,mBAAmBrD,EAAEqD,WAAWnB,EAAE,yBAAyBxB,EAAE,2CAA2C8B,EAAE,IAAIA,EAAE,IAAI,MAAMN,EAAE,qCAAqCxB,EAAE,WAAW,CAAC,OAAOD,EAAEd,EAAE,EAAEwD,YAAY,mDAAmDpB,YAAY,CAACgB,UAAS,EAAGE,QAAQ,CAAC,EAAEI,UAAU5C,EAAE0C,YAAY,aAAalB,OAAO,CAACc,UAAS,EAAGE,QAAQ,GAAGI,UAAU,SAAS1D,GAAG,MAAM,iBAAiBA,CAAC,EAAEwD,YAAY,YAAYf,OAAO,CAACW,UAAS,EAAGE,QAAQ,GAAGI,UAAU,SAAS1D,GAAG,MAAM,iBAAiBA,CAAC,EAAEwD,YAAY,YAAYZ,OAAO,CAACQ,UAAS,EAAGE,SAAQ,EAAGI,UAAU,SAAS1D,GAAG,MAAM,kBAAkBA,CAAC,EAAEwD,YAAY,cAAcxD,EAAES,QAAQ,SAAST,GAAG,IAAIC,EAAEc,EAAE,CAACoB,aAAaK,EAAEJ,YAAYpC,EAAEsC,OAAOjC,EAAEoC,OAAOJ,IAAI,OAAOtB,EAAEd,EAAE,CAAC,GAAGA,EAAE,CAAC,EAAkJ,OAA1I,SAASa,EAAEC,GAAG,IAAIV,EAAEJ,EAAEc,GAAG,QAAG,IAASV,EAAE,OAAOA,EAAEI,QAAQ,IAAI4B,EAAEpC,EAAEc,GAAG,CAACN,QAAQ,CAAC,GAAG,OAAOT,EAAEe,GAAGT,KAAK+B,EAAE5B,QAAQ4B,EAAEA,EAAE5B,QAAQK,GAAGuB,EAAE5B,OAAO,CAAnI,CAAqI,IAAc,EAAt4N,GAAvIkQ,EAAOlQ,QAAQR,G,GCC5E2S,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAatS,QAGrB,IAAIkQ,EAASiC,EAAyBE,GAAY,CACjDhJ,GAAIgJ,EACJG,QAAQ,EACRxS,QAAS,CAAC,GAUX,OANAyS,EAAoBJ,GAAUxS,KAAKqQ,EAAOlQ,QAASkQ,EAAQA,EAAOlQ,QAASoS,GAG3ElC,EAAOsC,QAAS,EAGTtC,EAAOlQ,OACf,CCxBAoS,EAAoBxQ,EAAKsO,IACxB,IAAIwC,EAASxC,GAAUA,EAAO1M,WAC7B,IAAO0M,EAAiB,QACxB,IAAM,EAEP,OADAkC,EAAoB/P,EAAEqQ,EAAQ,CAAE3Q,EAAG2Q,IAC5BA,GCLRN,EAAoB/P,EAAI,CAACrC,EAAS2S,KACjC,IAAI,IAAI7R,KAAO6R,EACXP,EAAoB9R,EAAEqS,EAAY7R,KAASsR,EAAoB9R,EAAEN,EAASc,IAC5EO,OAAOC,eAAetB,EAASc,EAAK,CAAEI,YAAY,EAAMH,IAAK4R,EAAW7R,MCJ3EsR,EAAoB9R,EAAI,CAACsS,EAAKC,IAAUxR,OAAOd,UAAUgB,eAAe1B,KAAK+S,EAAKC,GCClFT,EAAoBxS,EAAKI,IACH,oBAAXN,QAA0BA,OAAOoT,aAC1CzR,OAAOC,eAAetB,EAASN,OAAOoT,YAAa,CAAE5L,MAAO,WAE7D7F,OAAOC,eAAetB,EAAS,aAAc,CAAEkH,OAAO,KCLvDkL,EAAoBW,IAAO7C,IAC1BA,EAAO8C,MAAQ,GACV9C,EAAO3C,WAAU2C,EAAO3C,SAAW,IACjC2C,G,+KCHJ+C,EAAK5N,KAAK6N,G,+BCEd,IAEMC,EAA6B,CACjC,CAAErN,EAAG,GAAItD,EAAG,IACZ,CAAEsD,EAAG,IAAKtD,EAAG,KACb,CAAEsD,EAAG,IAAKtD,EAAG,IACb,CAAEsD,EAAG,GAAItD,EAAG,MAER4Q,EAA6B,CAAEtN,EAAG,GAAItD,EAAG,IAEzC6Q,EAA8B,CAClC,CAAEvN,EAAG,IAAKtD,EAAG,IACb,CAAEsD,EAAG,IAAKtD,EAAG,KACb,CAAEsD,EAAG,IAAKtD,EAAG,IACb,CAAEsD,EAAG,IAAKtD,EAAG,MAET8Q,EAA8B,CAAExN,EAAG,IAAKtD,EAAG,IAE1C,SAAS+Q,EAAcrM,EAAesM,GAC3C,IAAMC,EAnBa,GAmBWvM,EAC9BsM,EAAKnG,aAAa,IAAKoG,EAAO7F,WAChC,CAEA,SAAS8F,EAAgBxM,EAAeyM,EAAiBC,EAAeJ,GACtE,IAAMnR,ECxBD,SAAwBsR,EAA8BC,EAAeC,GAC1E,IAAMC,EAASH,EAAOlK,IAAI,SAAAsK,GAAA,IAAGjO,EAACiO,EAADjO,EAAGtD,EAACuR,EAADvR,EAAC,MAAQ,CACvCsD,EAAG8N,EAAO9N,GAAKA,EAAI8N,EAAO9N,GAAK+N,EAC/BrR,EAAGoR,EAAOpR,GAAKA,EAAIoR,EAAOpR,GAAKqR,EAChC,GAED,MAAO,IAAPjT,OAAWkT,EAAO,GAAGhO,EAAC,KAAAlF,OAAIkT,EAAO,GAAGtR,EAAC,KAAA5B,OAAIkT,EAAO,GAAGhO,EAAC,KAAAlF,OAAIkT,EAAO,GAAGtR,EAAC,KAAA5B,OAAIkT,EAAO,GAAGhO,EAAC,KAAAlF,OAAIkT,EAAO,GAAGtR,EAAC,KAAA5B,OAAIkT,EAAO,GAAGhO,EAAC,KAAAlF,OAAIkT,EAAO,GAAGtR,EAChI,CDiBYwR,CAAeL,EAAQC,EAAQ1M,GACzCsM,EAAKnG,aAAa,IAAKhL,EACzB,CE1BA,SAAS4R,EAAWC,EAAgBC,EAAgBX,GAClD,IAAMY,GAHkB,EAGgBD,EACxCX,EAAKnG,aAAa,YAAa,SAAFzM,OAAWsT,EAAM,oBAAAtT,OAAmBwT,EAAU,KAC7E,CCLO,SAASC,EAAS9U,GACvB,OAAO,EAAI8F,KAAKiP,KAAK,EAAI/U,EAAIA,EAC/B,CCMO,SAASgV,EAAWhV,GACzB,QAASA,GAAK,IAAM,EAAIA,EAAIA,EAAIA,GAAKA,GAAK,GAAKA,EAAIA,EAAI,GAAK,CAC9D,CCAO,SAASiV,EAAgBC,EAAyBC,GCPlD,IACLxN,EACAyN,EACAC,EAEMC,EAKwBX,EAAgBY,EAAgBtB,EACxDuB,GDHFL,EAAMM,eAAiBN,EAAMO,aCPjC/N,EDQqBuN,EAAOS,aCP5BP,EDO0CD,EAAMM,cCNhDJ,EDM+DF,EAAMO,WCJ/DJ,GARkB,GAQQ3N,GAAO0G,WACvC+G,EAAStH,aAAa,KAAMwH,GAC5BD,EAAUvH,aAAa,KAAMwH,IDIzBH,EAAMS,YCDoBjB,EDEZO,EAAOW,gBCFqBN,EDEJL,EAAOY,gBCFa7B,EDEIkB,EAAMS,UCDlEJ,EAbmB,IAagBD,EAAS,IAAO,EACzDtB,EAAKnG,aAAa,YAAa,aAAFzM,OAAemU,EAAU,cAAAnU,OAAasT,EAAM,SDErEQ,EAAMY,SEdL,SAAsBC,EAAgBpB,EAAgBX,GAC3D,IAAMsB,EAJgB,IAIWS,EAC3BC,EAJgB,GAIWrB,EACjCX,EAAKnG,aAAa,YAAa,aAAFzM,OAAekU,EAAM,KAAAlU,OAAI4U,EAAM,KAC9D,CFaIC,CAFgBC,EAAejB,EAAOkB,SACtBD,EAAejB,EAAOmB,SACPlB,EAAMY,SAEnCZ,EAAMmB,aLgBL,SAA2B3O,EAAesM,GAC/CD,EAAcrM,EAAOsM,EACvB,CKjBIsC,CAAkBrB,EAAOsB,YAAarB,EAAMmB,aAE1CnB,EAAMsB,cLiBL,SAA4B9O,EAAesM,GAChDD,EAAcrM,EAAOsM,EACvB,CKlBIyC,CAAmBxB,EAAOyB,aAAcxB,EAAMsB,cAE5CtB,EAAMyB,eLEL,SAA6BjP,EAAesM,GACjDE,EAAgBxM,EAAOiM,EAAmBC,EAAqBI,EACjE,CKHI4C,CAAoB3B,EAAO4B,cAAe3B,EAAMyB,eAE9CzB,EAAM4B,gBLGL,SAA8BpP,EAAesM,GAClDE,EAAgBxM,EAAOmM,EAAoBC,EAAsBE,EACnE,CKJI+C,CAAqB9B,EAAO+B,eAAgB9B,EAAM4B,gBAEhD5B,EAAM+B,UH3BL,SAAwBvC,EAAgBE,EAAoBZ,GACjES,EAAWC,EAAQE,EAAYZ,EACjC,CG0BIkD,CAAejC,EAAOkC,eAAgBlC,EAAOmC,UAAWlC,EAAM+B,UAE5D/B,EAAMmC,WH1BL,SAAyB3C,EAAgBE,EAAoBZ,GAClES,EAAWC,EAAQE,EAAYZ,EACjC,CGyBIsD,CAAgBrC,EAAOsC,gBAAiBtC,EAAOuC,WAAYtC,EAAMmC,WAE/DnC,EAAMuC,OGlCL,SAAuB/P,EAAesM,GAC3C,IAAMuB,EALe,KAKgB,EAAImC,EAAahQ,IAChDkN,GALe,KAKgB,EAAI8C,EAAahQ,IAChDiQ,EALgB,IAKY,EAAID,EAAahQ,IACnDsM,EAAKnG,aAAa,YAAa,aAAFzM,OAAemU,EAAU,KAAAnU,OAAIwT,EAAU,aAAAxT,OAAYuW,EAAM,KACxF,CH8BIC,CAAc3C,EAAO4C,QAAS3C,EAAMuC,OAElCvC,EAAM4C,WAAa5C,EAAM6C,YIxCxB,SAAoBrQ,EAAesQ,EAA+BC,GACvE,IAAM1C,GAHiB,IAGiB,EAAImC,EAAahQ,IACnDkN,EAJiB,IAIgB,EAAI8C,EAAahQ,IACxDuQ,EAAUpK,aAAa,YAAa,aAAFzM,OAAemU,EAAU,KAAAnU,OAAIwT,EAAU,MACzEoD,EAAUnK,aAAa,UAAWnG,EAAM0G,WAC1C,CJqCI8J,CADkBhC,EAAejB,EAAOkD,MAClBjD,EAAM4C,UAAW5C,EAAM6C,UAEjD,CK7BO,IA4GMK,EAAe,CA1Fa,CACvC1C,aAAc,EACdE,gBAAiB,EACjBC,gBAAiB,GACjBM,QAAS,KACTC,QAAS,EACTG,YAAa,GACbG,aAAc,GACdG,cAAe,EACfG,eAAgB,EAChBG,eAAgB,EAChBC,UAAW,EACXG,gBAAiB,EACjBC,WAAY,EACZK,QAAS,EACTM,KAAM,GAGgC,CACtCzC,aAAc,EACdE,gBAAiB,EACjBC,gBAAiB,GACjBM,QAAS,KACTC,QAAS,GACTG,YAAa,GACbG,aAAc,GACdG,cAAe,EACfG,eAAgB,EAChBG,eAAgB,EAChBC,UAAW,EACXG,gBAAiB,EACjBC,WAAY,EACZK,QAAS,EACTM,KAAM,GAGkC,CACxCzC,aAAc,EACdE,gBAAiB,GACjBC,gBAAiB,IACjBM,QAAS,KACTC,QAAS,EACTG,YAAa,GACbG,aAAc,GACdG,cAAe,EACfG,eAAgB,EAChBG,eAAgB,EAChBC,UAAW,EACXG,gBAAiB,EACjBC,WAAY,EACZK,QAAS,EACTM,KAAM,GAG+B,CACrCzC,aAAc,EACdE,gBAAiB,EACjBC,gBAAiB,GACjBM,QAAS,KACTC,QAAS,EACTG,YAAa,GACbG,aAAc,GACdG,cAAe,EACfG,eAAgB,EAChBG,eAAgB,EAChBC,UAAW,EACXG,gBAAiB,EACjBC,WAAY,EACZK,QAAS,EACTM,KAAM,GAG+B,CACrCzC,aAAc,EACdE,gBAAiB,EACjBC,gBAAiB,GACjBM,QAAS,KACTC,QAAS,EACTG,YAAa,EACbG,aAAc,EACdG,cAAe,EACfG,eAAgB,EAChBG,eAAgB,EAChBC,UAAW,EACXG,gBAAiB,EACjBC,WAAY,EACZK,QAAS,EACTM,KAAM,IAKKE,EAA8B,CACzC3C,aAAc,EACdE,gBAAiB,EACjBC,gBAAiB,GACjBM,QAAS,KACTC,QAAS,GACTG,YAAa,EACbG,aAAc,EACdG,cAAe,GACfG,eAAgB,GAChBG,eAAgB,EAChBC,UAAW,EACXG,gBAAiB,EACjBC,WAAY,EACZK,QAAS,EACTM,KAAM,GC7ID,SAASG,EAAoBC,EAA0BC,GAC5D,OAAOA,EAAQC,OACb,SAACC,EAAKzD,EAAQ0D,GAAU,IAAAC,EAChBjH,EAAgC,QAAxBiH,EAAGL,EAAeI,UAAM,IAAAC,EAAAA,EAAI,EAkB1C,OAhBAF,EAAIhD,cAAgBT,EAAOS,aAAe/D,EAC1C+G,EAAI9C,iBAAmBX,EAAOW,gBAAkBjE,EAChD+G,EAAI7C,iBAAmBZ,EAAOY,gBAAkBlE,EAChD+G,EAAIvC,SAAWlB,EAAOkB,QAAUxE,EAChC+G,EAAItC,SAAWnB,EAAOmB,QAAUzE,EAChC+G,EAAInC,aAAetB,EAAOsB,YAAc5E,EACxC+G,EAAIhC,cAAgBzB,EAAOyB,aAAe/E,EAC1C+G,EAAI7B,eAAiB5B,EAAO4B,cAAgBlF,EAC5C+G,EAAI1B,gBAAkB/B,EAAO+B,eAAiBrF,EAC9C+G,EAAIvB,gBAAkBlC,EAAOkC,eAAiBxF,EAC9C+G,EAAItB,WAAanC,EAAOmC,UAAYzF,EACpC+G,EAAInB,iBAAmBtC,EAAOsC,gBAAkB5F,EAChD+G,EAAIlB,YAAcvC,EAAOuC,WAAa7F,EACtC+G,EAAIb,SAAW5C,EAAO4C,QAAUlG,EAChC+G,EAAIP,MAAQlD,EAAOkD,KAAOxG,EAEnB+G,CACT,EACA,CACEhD,aAAc,EACdE,gBAAiB,EACjBC,gBAAiB,EACjBM,QAAS,EACTC,QAAS,EACTG,YAAa,EACbG,aAAc,EACdG,cAAe,EACfG,eAAgB,EAChBG,eAAgB,EAChBC,UAAW,EACXG,gBAAiB,EACjBC,WAAY,EACZK,QAAS,EACTM,KAAM,GAGZ,CC3CO,SAASU,EACdC,EACAC,EACAC,EACAC,EACAC,GAEA,IACMC,EAAQtT,KAAKC,IAAI,EAAGD,KAAKE,IAAI,EAAG+S,EAAYC,IAC5CK,EAFY,IAEYD,EAE9BD,EAAKrL,aAAa,QAASuL,EAAUhL,YAErC,IAAAiL,EAOF,SAAuBF,GACrB,IAAMG,EAAQzT,KAAKC,IAAI,EAAGD,KAAKE,IAAI,EAAGoT,IAChCI,EAAQ,CAAEnZ,EAAG,EAAGuD,EAAG,IAAKD,EAAG,GAC3B8V,EAAS,CAAEpZ,EAAG,IAAKuD,EAAG,IAAKD,EAAG,GAC9B+V,EAAM,CAAErZ,EAAG,IAAKuD,EAAG,GAAID,EAAG,GAEhC,GAAI4V,GAAS,IACX,OAAOG,EAET,GAAIH,GAAS,GAAK,CAEhB,OAAOI,EAAUF,EAAQC,GADd,GAAMH,GAAS,IAE5B,CACA,GAAIA,EAAQ,IAAM,CAEhB,OAAOI,EAAUH,EAAOC,GADb,IAAOF,GAAS,IAE7B,CACA,OAAOC,CACT,CAzBsBI,CAAcR,GAA1B/Y,EAACiZ,EAADjZ,EAAGuD,EAAC0V,EAAD1V,EAAGD,EAAC2V,EAAD3V,EACdwV,EAAKrL,aAAa,OAAQ,OAAFzM,OAAShB,EAAC,MAAAgB,OAAKuC,EAAC,MAAAvC,OAAKsC,EAAC,MAC1CuV,EAAQW,gBACVX,EAAQW,cAAcrU,MAAMyT,QAAUA,EAAQ5K,WAElD,CAsBA,SAASsL,EAAU9T,EAA2CiU,EAAyC9Z,GACrG,MAAO,CACLK,EAAGyF,KAAKiU,MAAMlU,EAAKxF,GAAKyZ,EAAGzZ,EAAIwF,EAAKxF,GAAKL,GACzC4D,EAAGkC,KAAKiU,MAAMlU,EAAKjC,GAAKkW,EAAGlW,EAAIiC,EAAKjC,GAAK5D,GACzC2D,EAAGmC,KAAKiU,MAAMlU,EAAKlC,GAAKmW,EAAGnW,EAAIkC,EAAKlC,GAAK3D,GAE7C,CC9CO,IAAMga,EAAkB,CAAC,KAAM,MAAO,OAChCC,EAAgB,CAC3B,yBACA,iDACA,uBACA,WACA,kDACA,kBACA,yCACA,YACA,iCACA,sBACA,yBACA,oBACA,2BACA,0BACA,eACA,2BACA,0BACA,aACA,WACA,yBACA,iCACA,yBACA,sBACA,sBACA,+BACA,yBACA,4BACA,wBACA,4CACA,iBACA,wCACA,0CACA,+BACA,mBACA,0BACA,+CACA,wBACA,uBACA,kCACA,kCACA,oCACA,iBACA,4CACA,iCACA,iCACA,mCACA,wCACA,4BACA,2BACA,sBACA,8BACA,iCACA,iCACA,gCACA,gDACA,qCACA,gCACA,8BACA,+CACA,kCACA,sCACA,kDACA,gCACA,0CACA,yBACA,yCACA,uCACA,wCACA,4BACA,wBACA,4CACA,iCACA,gCACA,8CACA,yBACA,oCACA,kCACA,YACA,2BACA,qCACA,+CACA,yCACA,iCACA,gDACA,2CACA,+CACA,qCACA,8CACA,kCACA,sCACA,sDACA,qDACA,gDACA,gDACA,mCACA,kDACA,sCACA,kBACA,iCACA,6BCrGWD,EAAkB,CAAC,MAAO,OAAQ,QAClCC,EAAgB,CAC3B,iBACA,uCACA,eACA,SACA,kDACA,kBACA,gCACA,SACA,qBACA,uBACA,iBACA,yBACA,qBACA,kBACA,YACA,oBACA,kBACA,eACA,SACA,mBACA,aACA,oBACA,kBACA,YACA,eACA,iBACA,4BACA,oBACA,iCACA,kBACA,kCACA,sCACA,wBACA,kBACA,sBACA,mCACA,kBACA,gBACA,2BACA,0BACA,+BACA,sBACA,mCACA,0BACA,kCACA,2BACA,yBACA,4BACA,uBACA,oBACA,2BACA,gCACA,wCACA,2BACA,oCACA,kDACA,sBACA,yBACA,iDACA,iCACA,yBACA,oCACA,yBACA,gCACA,0BACA,mCACA,qCACA,0CACA,sBACA,wBACA,gCACA,+BACA,gCACA,8BACA,0BACA,2BACA,gCACA,iBACA,uBACA,qCACA,uCACA,uCACA,4BACA,sDACA,qCACA,sCACA,gCACA,6CACA,kCACA,gCACA,sCACA,8CACA,sCACA,oCACA,yCACA,6CACA,wCACA,iBACA,0BACA,6BCjGK,SAASC,IACd,IAEMC,EADoB,OADTxU,SAASQ,gBAAgBiU,aAAa,QAEhCC,EAAYC,EAC3BN,EAAmCG,EAAnCH,gBAAiBC,EAAkBE,EAAlBF,cAmBnBM,EAA6B,CACjCpF,MAAO,GACPqF,UAAW,GACXC,cAAe,KACfC,kBAAmB,KACnBC,YAAa,GAGTC,EAAsC,GAE5C,SAASC,EAAqBC,GAAgB,IAAAC,EAAAC,EAC5C,GAA8B,QAA9BD,EAAIR,EAAaE,qBAAa,IAAAM,IAA1BA,EAA4BtI,UAAhC,CAIA,IAAM1B,EAAWjL,KAAKE,IAAoB,GAAhB8U,EAAOpZ,OAAa,KAEhB,QAA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","sources":["webpack://immerser/Immerser/webpack/universalModuleDefinition","webpack://immerser/Immerser/node_modules/@dubaua/observable/dist/observable.min.js","webpack://immerser/Immerser/node_modules/@dubaua/merge-options/dist/merge-options.min.js","webpack://immerser/Immerser/webpack/bootstrap","webpack://immerser/Immerser/webpack/runtime/compat get default export","webpack://immerser/Immerser/webpack/runtime/define property getters","webpack://immerser/Immerser/webpack/runtime/hasOwnProperty shorthand","webpack://immerser/Immerser/src/options.ts","webpack://immerser/Immerser/src/utils.ts","webpack://immerser/Immerser/src/immerser.ts","webpack://immerser/./node_modules/@dubaua/observable/dist/observable.min.js","webpack://immerser/./node_modules/ogawa/dist/ogawa.min.js","webpack://immerser/webpack/bootstrap","webpack://immerser/webpack/runtime/compat get default export","webpack://immerser/webpack/runtime/define property getters","webpack://immerser/webpack/runtime/hasOwnProperty shorthand","webpack://immerser/webpack/runtime/make namespace object","webpack://immerser/webpack/runtime/node module decorator","webpack://immerser/./node_modules/d3-ease/src/sin.js","webpack://immerser/./example/emoji/render-open-eye.ts","webpack://immerser/./example/emoji/paths.ts","webpack://immerser/./example/emoji/render-left-brow.ts","webpack://immerser/./node_modules/d3-ease/src/circle.js","webpack://immerser/./node_modules/d3-ease/src/cubic.js","webpack://immerser/./example/emoji/render-emoji-face.ts","webpack://immerser/./example/emoji/render-mouth-ellipse.ts","webpack://immerser/./example/emoji/render-tongue.ts","webpack://immerser/./example/emoji/render-glasses.ts","webpack://immerser/./example/emoji/render-hand.ts","webpack://immerser/./example/emoji/config.ts","webpack://immerser/./example/emoji/mix-config-by-progress.ts","webpack://immerser/./example/emoji/render-hp-bar.ts","webpack://immerser/./example/emoji/sulking/phrases.en.ts","webpack://immerser/./example/emoji/sulking/phrases.ru.ts","webpack://immerser/./example/emoji/sulking/init-sulking.ts","webpack://immerser/./example/main.ts","webpack://immerser/./example/emoji/animation.ts","webpack://immerser/./example/emoji/select-emoji-nodes.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Immerser\"] = factory();\n\telse\n\t\troot[\"Immerser\"] = factory();\n})(this, () => {\nreturn ","\"use strict\";function t(t){var e=function(t){if(\"object\"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,\"string\");if(\"object\"!=typeof i)return i;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(t)}(t);return\"symbol\"==typeof e?e:e+\"\"}module.exports=/*#__PURE__*/function(){function Observable(t){this.callbacks=[],this.internal=t,this.initialValue=t}var e,i,r=Observable.prototype;return r.subscribe=function(t){var e=this;if(\"function\"!=typeof t)throw new TypeError(\"[createObservable]: expected callback to be a function.\");return this.callbacks.push(t),function(){var i=e.callbacks.indexOf(t);e.callbacks=e.callbacks.slice(0,i).concat(e.callbacks.slice(i+1))}},r.reset=function(){this.callbacks=[],this.internal=this.initialValue},e=Observable,(i=[{key:\"value\",get:function(){return this.internal},set:function(t){if(t!==this.internal){var e=this.internal;this.internal=t;for(var i=0;i<this.callbacks.length;i++)this.callbacks[i](this.internal,e)}}}])&&function(e,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,t(n.key),n)}}(e.prototype,i),Object.defineProperty(e,\"prototype\",{writable:!1}),e}();\n//# sourceMappingURL=observable.min.js.map\n","\"use strict\";function o(o,e){return Object.prototype.hasOwnProperty.call(o,e)}function e(o){return null!==o&&\"object\"==typeof o&&!1===Array.isArray(o)}function t(e){var t=e.optionConfig,i=e.userOptions,r=void 0===i?{}:i,n=e.prefix,a=void 0===n?\"\":n,f=e.suffix,u=void 0===f?\"\":f,p=e.strict,d=void 0===p||p,c=function(o){return[a,o,u].join(\" \")},s={};for(var l in t)if(o(t,l)){var g=t[l],v=g.required,y=g.default,b=g.description,x=g.validator,h=r[l],q=!!o(g,\"required\")&&(\"function\"==typeof v?v(r):v),E=o(r,l),w=x(h,r);if(q){if(!E)throw new TypeError(c(l+\" is required.\"));if(!w)throw new TypeError(c(\"Expected \"+l+\" to be \"+b+\", got \"+typeof h+\" \"+h+\".\"));s[l]=h}else if(s[l]=y,E)if(w)s[l]=h;else{if(d)throw new TypeError(c(\"Expected \"+l+\" to be \"+b+\", got \"+typeof h+\" \"+h+\".\"));console.warn(c(\"Expected \"+l+\" to be \"+b+\", got \"+typeof h+\" \"+h+\". Fallback to default value \"+y+\".\"))}}return s}var i=\"[mergeOptions]:\",r=\"\\nCheck out documentation https://github.com/dubaua/merge-options#parameters-and-return\";function n(o){throw new TypeError([i,o,r].join(\" \"))}var a={optionConfig:{required:!0,validator:function(t){for(var i in t)if(o(t,i)){var r=t[i];if(e(r)||n(\"Expected optionConfig.\"+i+\" to be an object with declarative option configuration, got \"+typeof r+\" \"+r+\".\"),o(r,\"required\")){var a=r.required,f=typeof a;\"boolean\"!==f&&\"function\"!==f&&n(\"Expected optionConfig.\"+i+\".required to be either boolean or function, got \"+typeof a+\" \"+a+\".\")}else o(r,\"default\")||n(\"Expected optionConfig.\"+i+\" to either have required or default value.\");if(o(r,\"default\")||o(r,\"required\")||n(\"Expected optionConfig.\"+i+\" to either have required or default value.\"),o(r,\"description\")){var u=r.description;\"string\"!=typeof r.description&&n(\"Expected optionConfig.\"+i+\".description to be a string, got \"+typeof u+\" \"+u+\".\")}else n(\"Missing description on optionConfig.\"+i+\" config.\");if(o(r,\"validator\")){var p=r.validator;\"function\"!=typeof r.validator&&n(\"Expected optionConfig.\"+i+\".validator to be a function, got \"+typeof p+\" \"+p+\".\")}else n(\"Missing validator on optionConfig.\"+i+\" config.\")}return e(t)},description:\"an object with declarative option configuration\"},userOptions:{required:!1,default:{},validator:e,description:\"an object\"},prefix:{required:!1,default:\"\",validator:function(o){return\"string\"==typeof o},description:\"a string\"},suffix:{required:!1,default:\"\",validator:function(o){return\"string\"==typeof o},description:\"a string\"},strict:{required:!1,default:!0,validator:function(o){return\"boolean\"==typeof o},description:\"a boolean\"}};module.exports=function(o){var e=t({optionConfig:a,userOptions:o,prefix:i,suffix:r});return t(e)};\n//# sourceMappingURL=merge-options.min.js.map\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","import type { OptionConfig } from '@dubaua/merge-options';\nimport type { EventName, Options } from './types';\n\nconst CLASSNAME_REGEX = /^[a-z_-][a-z\\d_-]*$/i;\n\nexport const INITIAL_DEBUG = process.env.NODE_ENV === 'development';\n\n/** @public All available immerser event names. */\nexport const EVENT_NAMES = ['init', 'bind', 'unbind', 'destroy', 'activeLayerChange', 'layersUpdate'] as const;\n\nfunction classnameValidator(str: string): boolean {\n  return typeof str === 'string' && str !== '' && CLASSNAME_REGEX.test(str);\n}\n\nfunction onOptionValidator(on?: Options['on']): boolean {\n  if (on === undefined) {\n    return true;\n  }\n  if (!on || typeof on !== 'object' || Array.isArray(on)) {\n    return false;\n  }\n  return Object.keys(on).every(\n    (eventName) =>\n      EVENT_NAMES.includes(eventName as EventName) &&\n      (on as Record<string, unknown>)[eventName] !== undefined &&\n      typeof (on as Record<string, unknown>)[eventName] === 'function',\n  );\n}\n\nexport const OPTION_CONFIG: OptionConfig<Options> = {\n  solidClassnameArray: {\n    default: [],\n    description: 'non empty array of objects',\n    validator: (x) => Array.isArray(x) && x.length !== 0,\n  },\n  fromViewportWidth: {\n    default: 0,\n    description: 'a natural number',\n    validator: (x) => typeof x === 'number' && 0 <= x && x % 1 === 0,\n  },\n  pagerThreshold: {\n    default: 0.5,\n    description: 'a number between 0 and 1',\n    validator: (x) => typeof x === 'number' && 0 <= x && x <= 1,\n  },\n  hasToUpdateHash: {\n    default: false,\n    description: 'a boolean',\n    validator: (x) => typeof x === 'boolean',\n  },\n  scrollAdjustThreshold: {\n    default: 0,\n    description: 'a number greater than or equal to 0',\n    validator: (x) => typeof x === 'number' && x >= 0,\n  },\n  scrollAdjustDelay: {\n    default: 600,\n    description: 'a number greater than or equal to 300',\n    validator: (x) => typeof x === 'number' && x >= 300,\n  },\n  pagerLinkActiveClassname: {\n    default: 'pager-link-active',\n    description: 'valid non empty classname string',\n    validator: classnameValidator,\n  },\n  isScrollHandled: {\n    default: true,\n    description: 'a boolean',\n    validator: (x) => typeof x === 'boolean',\n  },\n  debug: {\n    default: INITIAL_DEBUG,\n    description: 'a boolean',\n    validator: (x) => typeof x === 'boolean',\n  },\n  on: {\n    default: {},\n    description: 'an object containing event handlers',\n    validator: onOptionValidator,\n  },\n};\n\nexport const MESSAGE_PREFIX = '[immerser:]';\n\nexport const CROPPED_FULL_ABSOLUTE_STYLES: Record<string, string> = {\n  position: 'absolute',\n  top: '0',\n  right: '0',\n  bottom: '0',\n  left: '0',\n  overflow: 'hidden',\n};\n\nexport const NOT_INTERACTIVE_STYLES: Record<string, string> = {\n  pointerEvents: 'none',\n  touchAction: 'none',\n};\n\nexport const INTERACTIVE_STYLES: Record<string, string> = {\n  pointerEvents: 'all',\n  touchAction: 'auto',\n};\n","export function bindStyles(node: HTMLElement, styles: { [key: string]: string }): void {\n  for (const rule in styles) {\n    (node.style as any)[rule] = styles[rule];\n  }\n}\n\nexport function forEachNode<T extends Element>(\n  nodeList: ArrayLike<T>,\n  callback: (node: T, index: number, nodeList: ArrayLike<T>) => void,\n): void {\n  for (let index = 0; index < nodeList.length; index++) {\n    const node = nodeList[index];\n    callback(node, index, nodeList);\n  }\n}\n\nexport function getNodeArray<T extends Element = HTMLElement>({\n  selector,\n  parent = document,\n}: {\n  selector: string;\n  parent?: Document | Element | null;\n}): T[] {\n  if (!parent) {\n    return [];\n  }\n  const nodeList = parent.querySelectorAll<T>(selector);\n  return Array.from(nodeList);\n}\n\nexport function isEmpty(obj?: Record<string, any> | null): boolean {\n  if (!obj) {\n    return true;\n  }\n  return Object.keys(obj).length === 0 && obj.constructor === Object;\n}\n\nexport function limit(number: number, min: number, max: number): number {\n  return Math.max(Math.min(number, max), min);\n}\n\nexport function getLastScrollPosition(): { x: number; y: number } {\n  const scrollX = window.scrollX || document.documentElement.scrollLeft;\n  const scrollY = window.scrollY || document.documentElement.scrollTop;\n  // limit scroll position between 0 and document height in case of iOS overflow scroll\n  return {\n    x: limit(scrollX, 0, document.documentElement.offsetWidth),\n    y: limit(scrollY, 0, document.documentElement.offsetHeight),\n  };\n}\n\ntype WrappedOnceHandler<F extends (...args: any[]) => void> = F & {\n  __immerserOriginalHandler?: F;\n};\n\nexport function wrapOnceHandler<F extends(...args: any[]) => void>(\n  original: F,\n  wrapper: (...args: Parameters<F>) => void,\n): F {\n  const wrapped = wrapper as WrappedOnceHandler<F>;\n  wrapped.__immerserOriginalHandler = original;\n  return wrapped;\n}\n\nexport function getOriginalHandler<F extends(...args: any[]) => void>(handler: F): F | undefined {\n  return (handler as WrappedOnceHandler<F>).__immerserOriginalHandler;\n}\n","import mergeOptions from '@dubaua/merge-options';\nimport Observable from '@dubaua/observable';\nimport {\n  CROPPED_FULL_ABSOLUTE_STYLES,\n  EVENT_NAMES,\n  INITIAL_DEBUG,\n  INTERACTIVE_STYLES,\n  MESSAGE_PREFIX,\n  NOT_INTERACTIVE_STYLES,\n  OPTION_CONFIG,\n} from './options';\nimport {\n  bindStyles,\n  forEachNode,\n  getLastScrollPosition,\n  getNodeArray,\n  getOriginalHandler,\n  isEmpty,\n  wrapOnceHandler,\n} from './utils';\nimport type {\n  ActiveLayerChangeHandler,\n  BaseHandler,\n  EventHandlers,\n  EventName,\n  HandlerArgs,\n  HandlerByEventName,\n  LayerState,\n  LayersUpdateHandler,\n  Options,\n  SolidClassnames,\n} from './types';\n\n/** @public Main Immerser controller orchestrating markup cloning and scroll-driven transitions. */\nexport default class Immerser {\n  private _options: Options = {} as Options;\n  private _selectors = {\n    root: '[data-immerser]',\n    layer: '[data-immerser-layer]',\n    solid: '[data-immerser-solid]',\n    pagerLink: '[data-immerser-pager-link]',\n    mask: '[data-immerser-mask]',\n    maskInner: '[data-immerser-mask-inner]',\n    synchroHover: '[data-immerser-synchro-hover]',\n  };\n  private _layerStateArray: LayerState[] = [];\n  private _layerStateIndexById: Record<string, number> = {};\n  private _isBound = false;\n  private _rootNode: HTMLElement | null = null;\n  private _layerNodeArray: HTMLElement[] = [];\n  private _solidNodeArray: HTMLElement[] = [];\n  private _pagerLinkNodeArray: HTMLElement[] = [];\n  private _originalSolidNodeArray: HTMLElement[] = [];\n  private _maskNodeArray: HTMLElement[] = [];\n  private _synchroHoverNodeArray: HTMLElement[] = [];\n  private _isCustomMarkup = false;\n  private _customMaskNodeArray: HTMLElement[] = [];\n  private _windowHeight = 0;\n  private _immerserTop = 0;\n  private _immerserHeight = 0;\n  private _resizeFrameId: number | null = null;\n  private _resizeObserver: ResizeObserver | null = null;\n  private _scrollFrameId: number | null = null;\n  private _scrollAdjustTimerId: ReturnType<typeof setTimeout> | null = null;\n  private _reactiveActiveLayer = new Observable<number>(-1);\n  private _reactiveWindowWidth = new Observable<number>(-1);\n  private _reactiveSynchroHoverId = new Observable<string | null>(null);\n  private _layerProgressArray: number[] = [];\n  private _unsubscribeRedrawingPager: (() => void) | null = null;\n  private _unsubscribeUpdatingHash: (() => void) | null = null;\n  private _unsubscribeActiveLayerChange: (() => void) | null = null;\n  private _unsubscribeSynchroHover: (() => void) | null = null;\n  private _unsubscribeToggleBindOnResize: (() => void) | null = null;\n  private _handlers: Record<EventName, Set<HandlerByEventName[EventName]>> = {\n    init: new Set(),\n    bind: new Set(),\n    unbind: new Set(),\n    destroy: new Set(),\n    activeLayerChange: new Set(),\n    layersUpdate: new Set(),\n  };\n  private _onResize: (() => void) | null = null;\n  private _onScroll: (() => void) | null = null;\n  private _onSynchroHoverMouseOver: ((e: MouseEvent) => void) | null = null;\n  private _onSynchroHoverMouseOut: (() => void) | null = null;\n\n  /** Enables warnings/errors reporting. Defaults to NODE_ENV===development. */\n  public debug = INITIAL_DEBUG;\n\n  /**\n   * Creates immerser instance and immediately runs setup with optional user options.\n   * @param userOptions - overrides for defaults defined in OPTION_CONFIG if pass validation\n   */\n  constructor(userOptions?: Partial<Options>) {\n    this._init(userOptions);\n  }\n\n  /** Bootstraps nodes, options, state, listeners and emits init event. */\n  private _init(userOptions?: Partial<Options>): void {\n    this._mergeOptions(userOptions);\n    this.debug = this._options.debug;\n    this._setDomNodes();\n    this._validateMarkup();\n    this._registerHandlersFromOptions();\n    this._readClassnamesFromMarkup();\n    this._validateSolidClassnameArray();\n    this._initSectionIds();\n    this._initLayerStateArray();\n    this._validateClassnames();\n    this._toggleBindOnResizeObserver();\n    this._setSizes();\n    this._addScrollAndResizeListeners();\n    this._emit('init', this);\n  }\n\n  /** Saves event handlers passed via options into internal registry. */\n  private _registerHandlersFromOptions(): void {\n    if (!this._options.on) {\n      return;\n    }\n    EVENT_NAMES.forEach((eventName) => {\n      const handler = this._options.on?.[eventName];\n      if (typeof handler === 'function') {\n        this.on(eventName, handler);\n      }\n    });\n  }\n\n  /** Executes registered event handlers with provided arguments. */\n  private _emit<K extends EventName>(eventName: K, ...args: HandlerArgs<K>): void {\n    const handlerSet = this._handlers[eventName];\n    handlerSet.forEach((handler: HandlerByEventName[K]) => {\n      try {\n        handler.apply(undefined, args);\n      } catch (error) {\n        this._report({\n          message: `handler for ${eventName} event failed`,\n          error,\n          docsHash: '#events',\n        });\n      }\n    });\n  }\n\n  private _report({\n    message,\n    error,\n    isWarning = false,\n    docsHash = '',\n  }: {\n    message: string;\n    error?: unknown;\n    isWarning?: boolean;\n    docsHash?: string;\n  }): void {\n    const resultMessage = `${MESSAGE_PREFIX} ${message} \\nCheck out documentation https://github.com/dubaua/immerser${docsHash}`;\n\n    if (isWarning) {\n      if (!this.debug) {\n        return;\n      }\n\n      error !== undefined ? console.warn(resultMessage, error) : console.warn(resultMessage);\n\n      return;\n    }\n\n    throw new Error(resultMessage, { cause: error });\n  }\n\n  /** Collects root, layer and solid nodes from DOM. */\n  private _setDomNodes(): void {\n    this._rootNode = document.querySelector<HTMLElement>(this._selectors.root);\n    this._layerNodeArray = getNodeArray({ selector: this._selectors.layer });\n    this._solidNodeArray = getNodeArray({ selector: this._selectors.solid, parent: this._rootNode });\n  }\n\n  /** Validates required markup presence and reports descriptive errors. */\n  private _validateMarkup(): void {\n    if (!this._rootNode) {\n      this._report({\n        message: 'root node not found.',\n        docsHash: '#prepare-your-markup',\n      });\n    }\n    if (this._layerNodeArray.length === 0) {\n      this._report({\n        message: 'layer nodes not found.',\n        docsHash: '#prepare-your-markup',\n      });\n    }\n    if (this._solidNodeArray.length === 0) {\n      this._report({\n        message: 'solid nodes not found.',\n        docsHash: '#prepare-your-markup',\n      });\n    }\n  }\n\n  /** Merges user options with defaults and attaches helper metadata to messages. */\n  private _mergeOptions(userOptions?: Partial<Options>): void {\n    this._options = mergeOptions({\n      optionConfig: OPTION_CONFIG,\n      userOptions,\n      prefix: MESSAGE_PREFIX,\n      suffix: '\\nCheck out documentation https://github.com/dubaua/immerser#options',\n    }) as Options;\n  }\n\n  /** Reads per-layer classname configs from data attributes if provided. */\n  private _readClassnamesFromMarkup(): void {\n    this._layerNodeArray.forEach((layerNode, layerIndex) => {\n      if (layerNode.dataset.immerserLayerConfig) {\n        try {\n          this._options.solidClassnameArray[layerIndex] = JSON.parse(layerNode.dataset.immerserLayerConfig);\n        } catch (error) {\n          this._report({\n            message: 'Failed to parse JSON classname configuration.',\n            error,\n            docsHash: '#options',\n          });\n        }\n      }\n    });\n  }\n\n  /** Ensures classname configuration length matches layers count. */\n  private _validateSolidClassnameArray(): void {\n    const layerCount = this._layerNodeArray.length;\n    const classnamesCount = this._options.solidClassnameArray.length;\n    if (classnamesCount !== layerCount) {\n      this._report({\n        message: 'solidClassnameArray length differs from count of layers',\n        docsHash: '#options',\n      });\n    }\n  }\n\n  /** Assigns ids to layers when missing and records their indexes. */\n  private _initSectionIds(): void {\n    this._layerNodeArray.forEach((layerNode, layerIndex) => {\n      let id = layerNode.id;\n      if (!id) {\n        id = `immerser-section-${layerIndex}`;\n        layerNode.id = id;\n        (layerNode as any).__immerserCustomId = true;\n      }\n      this._layerStateIndexById[id] = layerIndex;\n    });\n  }\n\n  /** Creates initial LayerState entries for every layer. */\n  private _initLayerStateArray(): void {\n    this._layerStateArray = this._layerNodeArray.map((layerNode, layerIndex) => {\n      const solidClassnames = this._options.solidClassnameArray[layerIndex];\n      const { id } = layerNode;\n      return {\n        beginEnter: 0,\n        beginLeave: 0,\n        endEnter: 0,\n        endLeave: 0,\n        id,\n        layerBottom: 0,\n        layerTop: 0,\n        maskInnerNode: null,\n        maskNode: null,\n        layerNode: layerNode,\n        solidClassnames,\n      } as LayerState;\n    });\n    this._layerProgressArray = this._layerNodeArray.map(() => 0);\n  }\n\n  /** Verifies solid classnames are configured; otherwise warns via showError. */\n  private _validateClassnames(): void {\n    const noClassnameConfigPassed = this._layerStateArray.every((state) => isEmpty(state.solidClassnames));\n    if (noClassnameConfigPassed) {\n      this._report({\n        message: 'immerser will do nothing without solid classname configuration.',\n        docsHash: '#prepare-your-markup',\n        isWarning: true,\n      });\n    }\n  }\n\n  /** Subscribes to window width changes to bind/unbind based on breakpoint. */\n  private _toggleBindOnResizeObserver(): void {\n    this._unsubscribeToggleBindOnResize = this._reactiveWindowWidth.subscribe((nextWindowWidth) => {\n      if (nextWindowWidth >= this._options.fromViewportWidth) {\n        if (!this._isBound) {\n          this.bind();\n        }\n      } else if (this._isBound) {\n        this.unbind();\n      }\n    });\n  }\n\n  /** Recalculates sizes and thresholds for each layer and updates window width observable. */\n  private _setSizes(): void {\n    this._windowHeight = window.innerHeight;\n    this._immerserTop = (this._rootNode as HTMLElement).offsetTop;\n    this._immerserHeight = (this._rootNode as HTMLElement).offsetHeight;\n\n    this._layerStateArray = this._layerStateArray.map((state) => {\n      const layerTop = state.layerNode.offsetTop;\n      const layerBottom = layerTop + state.layerNode.offsetHeight;\n\n      const endEnter = layerTop - this._immerserTop;\n      const beginEnter = endEnter - this._immerserHeight;\n      const endLeave = layerBottom - this._immerserTop;\n      const beginLeave = endLeave - this._immerserHeight;\n\n      return {\n        ...state,\n        layerTop,\n        layerBottom,\n        beginEnter,\n        endEnter,\n        beginLeave,\n        endLeave,\n      } as LayerState;\n    });\n\n    this._reactiveWindowWidth.value = window.innerWidth;\n  }\n\n  /** Attaches scroll and resize listeners respecting isScrollHandled flag. */\n  private _addScrollAndResizeListeners(): void {\n    if (this._options.isScrollHandled) {\n      this._onScroll = this._handleScroll.bind(this);\n      window.addEventListener('scroll', this._onScroll, false);\n    }\n    this._onResize = this._handleResize.bind(this);\n    window.addEventListener('resize', this._onResize, false);\n    window.addEventListener('orientationchange', this._onResize, false);\n    if (typeof ResizeObserver !== 'undefined') {\n      this._resizeObserver = new ResizeObserver(this._onResize);\n      this._resizeObserver.observe(this._rootNode);\n    }\n  }\n\n  /** Clears internal caches, observables and references after destroy. */\n  private _resetInternalState(): void {\n    this._layerStateArray = [];\n    this._layerStateIndexById = {};\n    this._isBound = false;\n    this._rootNode = null;\n    this._layerNodeArray = [];\n    this._solidNodeArray = [];\n    this._pagerLinkNodeArray = [];\n    this._originalSolidNodeArray = [];\n    this._maskNodeArray = [];\n    this._synchroHoverNodeArray = [];\n    this._isCustomMarkup = false;\n    this._customMaskNodeArray = [];\n    this._windowHeight = 0;\n    this._immerserTop = 0;\n    this._immerserHeight = 0;\n    this._resizeFrameId = null;\n    this._resizeObserver = null;\n    this._scrollFrameId = null;\n    this._scrollAdjustTimerId = null;\n    this._reactiveActiveLayer.reset();\n    this._reactiveWindowWidth.reset();\n    this._reactiveSynchroHoverId.reset();\n    this._layerProgressArray = [];\n    this._unsubscribeRedrawingPager = null;\n    this._unsubscribeUpdatingHash = null;\n    this._unsubscribeActiveLayerChange = null;\n    this._unsubscribeSynchroHover = null;\n    this._unsubscribeToggleBindOnResize = null;\n    this._onResize = null;\n    this._onScroll = null;\n    this._onSynchroHoverMouseOver = null;\n    this._onSynchroHoverMouseOut = null;\n    EVENT_NAMES.forEach((eventName) => this._handlers[eventName].clear());\n  }\n\n  /** Builds masks, clones solids, applies classes and mounts generated markup. */\n  private _createMarkup(): void {\n    bindStyles(this._rootNode as HTMLElement, NOT_INTERACTIVE_STYLES);\n    this._initCustomMarkup();\n    this._originalSolidNodeArray = getNodeArray({ selector: this._selectors.solid, parent: this._rootNode });\n\n    this._layerStateArray = this._layerStateArray.map((state, stateIndex) => {\n      // create or assign existing markup, bind styles\n      const maskNode = this._isCustomMarkup ? this._customMaskNodeArray[stateIndex] : document.createElement('div');\n      bindStyles(maskNode, CROPPED_FULL_ABSOLUTE_STYLES);\n\n      let maskInnerNode = this._isCustomMarkup\n        ? maskNode.querySelector<HTMLElement>(this._selectors.maskInner)\n        : document.createElement('div');\n      if (!maskInnerNode) {\n        maskInnerNode = document.createElement('div');\n      }\n      bindStyles(maskInnerNode, CROPPED_FULL_ABSOLUTE_STYLES);\n\n      // mark created masks with data attributes\n      if (!this._isCustomMarkup) {\n        maskNode.dataset.immerserMask = '';\n        maskInnerNode.dataset.immerserMaskInner = '';\n      }\n\n      // clone solids to innerMask\n      this._originalSolidNodeArray.forEach((childNode) => {\n        const clonedChildNode = childNode.cloneNode(true);\n        if (clonedChildNode instanceof HTMLElement) {\n          bindStyles(clonedChildNode, INTERACTIVE_STYLES);\n          (clonedChildNode as any).__immerserCloned = true;\n          maskInnerNode.appendChild(clonedChildNode);\n        }\n      });\n\n      // assign class modifiers to cloned solids\n      const clonedSolidNodeList = getNodeArray<HTMLElement>({\n        selector: this._selectors.solid,\n        parent: maskInnerNode,\n      });\n      forEachNode(clonedSolidNodeList, (clonedSolidNode) => {\n        const solidId = clonedSolidNode.dataset.immerserSolid;\n        if (state.solidClassnames && Object.prototype.hasOwnProperty.call(state.solidClassnames, solidId)) {\n          clonedSolidNode.classList.add(state.solidClassnames[solidId]);\n        }\n      });\n\n      // a11y\n      if (stateIndex !== 0) {\n        maskNode.setAttribute('aria-hidden', 'true');\n      }\n\n      maskNode.appendChild(maskInnerNode);\n      this._rootNode.appendChild(maskNode);\n\n      this._maskNodeArray.push(maskNode);\n\n      return { ...state, maskNode, maskInnerNode };\n    });\n\n    this._detachOriginalSolidNodes();\n  }\n\n  /** Validates and prepares custom masks, binding interactive styles to their children. */\n  private _initCustomMarkup(): void {\n    this._customMaskNodeArray = getNodeArray({ selector: this._selectors.mask, parent: this._rootNode });\n    this._isCustomMarkup = this._customMaskNodeArray.length === this._layerStateArray.length;\n\n    if (this._customMaskNodeArray.length > 0 && !this._isCustomMarkup) {\n      this._report({\n        message: `You're trying use custom markup, but count of your immerser masks doesn't equal layers count.`,\n        isWarning: true,\n        docsHash: '#cloning-event-listeners',\n      });\n    }\n\n    this._customMaskNodeArray.forEach((customMaskNode) => {\n      const maskInnerNode = customMaskNode.querySelector<HTMLElement>(this._selectors.maskInner);\n      if (!maskInnerNode) {\n        return;\n      }\n      Array.from(maskInnerNode.children).forEach((child) => {\n        if (child instanceof HTMLElement) {\n          bindStyles(child, INTERACTIVE_STYLES);\n        }\n      });\n    });\n  }\n\n  /** Removes original solid nodes from root after clones are in place. */\n  private _detachOriginalSolidNodes(): void {\n    if (!this._rootNode) {\n      return;\n    }\n    this._originalSolidNodeArray.forEach((childNode) => {\n      this._rootNode.removeChild(childNode);\n    });\n  }\n\n  /** Parses pager links and maps them to layer indexes using href hash. */\n  private _initPagerLinks(): void {\n    this._pagerLinkNodeArray = getNodeArray({ selector: this._selectors.pagerLink, parent: this._rootNode });\n    this._pagerLinkNodeArray.forEach((pagerLinkNode) => {\n      const { href } = pagerLinkNode as HTMLAnchorElement;\n      if (href) {\n        const layerId = href.split('#')[1];\n        if (layerId) {\n          const layerIndex = this._layerStateIndexById[layerId];\n          pagerLinkNode.dataset.immerserLayerIndex = layerIndex.toString();\n        }\n      }\n    });\n  }\n\n  /** Sets up synchro hover listeners and reactive updates. */\n  private _initHoverSynchro(): void {\n    this._synchroHoverNodeArray = getNodeArray({ selector: this._selectors.synchroHover, parent: this._rootNode });\n\n    this._onSynchroHoverMouseOver = (e: MouseEvent): void => {\n      const target = e.target as HTMLElement;\n      const synchroHoverId = target.dataset.immerserSynchroHover;\n      this._reactiveSynchroHoverId.value = synchroHoverId;\n    };\n\n    this._onSynchroHoverMouseOut = (): void => {\n      this._reactiveSynchroHoverId.value = null;\n    };\n\n    this._synchroHoverNodeArray.forEach((synchroHoverNode) => {\n      synchroHoverNode.addEventListener('mouseover', this._onSynchroHoverMouseOver!);\n      synchroHoverNode.addEventListener('mouseout', this._onSynchroHoverMouseOut!);\n    });\n  }\n\n  /** Subscribes to reactive values to redraw pager, hash, callbacks and hover. */\n  private _attachCallbacks(): void {\n    if (this._pagerLinkNodeArray.length > 0) {\n      this._unsubscribeRedrawingPager = this._reactiveActiveLayer.subscribe(this._drawPagerLinks.bind(this));\n    }\n\n    if (this._options.hasToUpdateHash) {\n      this._unsubscribeUpdatingHash = this._reactiveActiveLayer.subscribe(this._drawHash.bind(this));\n    }\n\n    this._unsubscribeActiveLayerChange = this._reactiveActiveLayer.subscribe((nextIndex) => {\n      this._emit('activeLayerChange', nextIndex, this);\n    });\n\n    if (this._synchroHoverNodeArray.length > 0) {\n      this._unsubscribeSynchroHover = this._reactiveSynchroHoverId.subscribe(this._drawSynchroHover.bind(this));\n    }\n  }\n\n  /** Unsubscribes from all reactive callbacks. */\n  private _detachCallbacks(): void {\n    this._unsubscribeRedrawingPager?.();\n    this._unsubscribeUpdatingHash?.();\n    this._unsubscribeActiveLayerChange?.();\n    this._unsubscribeSynchroHover?.();\n  }\n\n  /** Removes hover listeners from synchro hover nodes. */\n  private _removeSyncroHoverListeners(): void {\n    this._synchroHoverNodeArray.forEach((synchroHoverNode) => {\n      synchroHoverNode.removeEventListener('mouseover', this._onSynchroHoverMouseOver!);\n      synchroHoverNode.removeEventListener('mouseout', this._onSynchroHoverMouseOut!);\n    });\n  }\n\n  /** Drops autogenerated ids from layers on teardown. */\n  private _clearCustomSectionIds(): void {\n    this._layerStateArray.forEach((state) => {\n      if ((state.layerNode as any).__immerserCustomId) {\n        state.layerNode.removeAttribute('id');\n      }\n    });\n  }\n\n  /** Restores original solid nodes back into the root node. */\n  private _restoreOriginalSolidNodes(): void {\n    if (!this._rootNode) {\n      return;\n    }\n    this._originalSolidNodeArray.forEach((childNode) => {\n      this._rootNode.appendChild(childNode);\n    });\n  }\n\n  /** Removes cloned markup or cleans up custom masks when unbinding. */\n  private _cleanupClonedMarkup(): void {\n    this._maskNodeArray.forEach((immerserMaskNode) => {\n      if (this._isCustomMarkup) {\n        immerserMaskNode.removeAttribute('style');\n        immerserMaskNode.removeAttribute('aria-hidden');\n        const immerserMaskInnerNode = immerserMaskNode.querySelector<HTMLElement>(this._selectors.maskInner);\n        if (!immerserMaskInnerNode) {\n          return;\n        }\n        immerserMaskInnerNode.removeAttribute('style');\n        const clonedSolidNodeArray = getNodeArray({ selector: this._selectors.solid, parent: immerserMaskInnerNode });\n        clonedSolidNodeArray.forEach((clonedSolidNode) => {\n          if ((clonedSolidNode as any).__immerserCloned) {\n            immerserMaskInnerNode.removeChild(clonedSolidNode);\n          }\n        });\n      } else {\n        if (this._rootNode) {\n          this._rootNode.removeChild(immerserMaskNode);\n        }\n      }\n    });\n  }\n\n  private _removeScrollAndResizeListeners(): void {\n    if (this._options.isScrollHandled) {\n      window.removeEventListener('scroll', this._onScroll!, false);\n    }\n    window.removeEventListener('resize', this._onResize!, false);\n    window.removeEventListener('orientationchange', this._onResize!, false);\n    this._resizeObserver?.disconnect();\n  }\n\n  /** Calculates per-layer progress (0..1) based on which part of screen the layer overlaps. */\n  private _setLayersProgress(scrollY?: number): void {\n    const y = scrollY ?? getLastScrollPosition().y;\n    const viewportBottom = y + this._windowHeight;\n\n    this._layerProgressArray = this._layerStateArray.map(({ layerTop, layerBottom }) => {\n      const layerHeight = layerBottom - layerTop;\n      const overlap = Math.min(layerBottom, viewportBottom) - Math.max(layerTop, y);\n      const overlapBase = Math.min(layerHeight, this._windowHeight);\n      return overlapBase <= 0 ? 0 : Math.max(0, Math.min(1, overlap / overlapBase));\n    });\n  }\n\n  /** Applies transforms based on scroll position and updates active layer state. */\n  private _draw(scrollY?: number): void {\n    const y = scrollY !== undefined ? scrollY : getLastScrollPosition().y;\n    this._layerStateArray.forEach(\n      ({ beginEnter, endEnter, beginLeave, endLeave, maskNode, maskInnerNode, layerTop, layerBottom }, layerIndex) => {\n        let progress: number;\n\n        if (beginEnter > y) {\n          progress = this._immerserHeight;\n        } else if (beginEnter <= y && y < endEnter) {\n          progress = endEnter - y;\n        } else if (endEnter <= y && y < beginLeave) {\n          progress = 0;\n        } else if (beginLeave <= y && y < endLeave) {\n          progress = beginLeave - y;\n        } else {\n          progress = -this._immerserHeight;\n        }\n\n        maskNode.style.transform = `translateY(${progress}px)`;\n        maskInnerNode.style.transform = `translateY(${-progress}px)`;\n\n        const pagerScrollActivePoint = y + this._windowHeight * (1 - this._options.pagerThreshold);\n        if (layerTop <= pagerScrollActivePoint && pagerScrollActivePoint < layerBottom) {\n          this._reactiveActiveLayer.value = layerIndex;\n        }\n      },\n    );\n  }\n\n  /** Adds or removes active pager classname according to current layer. */\n  private _drawPagerLinks(layerIndex?: number): void {\n    this._pagerLinkNodeArray.forEach((pagerLinkNode) => {\n      if (parseInt(pagerLinkNode.dataset.immerserLayerIndex, 10) === layerIndex) {\n        pagerLinkNode.classList.add(this._options.pagerLinkActiveClassname);\n      } else {\n        pagerLinkNode.classList.remove(this._options.pagerLinkActiveClassname);\n      }\n    });\n  }\n\n  /** Updates window hash to match active layer id. */\n  private _drawHash(layerIndex: number): void {\n    const { id, layerNode } = this._layerStateArray[layerIndex];\n    layerNode.removeAttribute('id');\n    window.location.hash = id;\n    layerNode.setAttribute('id', id);\n  }\n\n  /** Syncs hover state across elements with matching synchroHover id. */\n  private _drawSynchroHover(synchroHoverId?: string): void {\n    this._synchroHoverNodeArray.forEach((synchroHoverNode) => {\n      if (synchroHoverNode.dataset.immerserSynchroHover === synchroHoverId) {\n        synchroHoverNode.classList.add('_hover');\n      } else {\n        synchroHoverNode.classList.remove('_hover');\n      }\n    });\n  }\n\n  /** Adjusts scroll to layer edges when near thresholds, improving alignment. */\n  private _adjustScroll(): void {\n    const { layerTop, layerBottom } = this._layerStateArray[this._reactiveActiveLayer.value as number];\n    const { x, y } = getLastScrollPosition();\n    const topThreshold = Math.abs(y - layerTop);\n    const bottomThreshold = Math.abs(y + this._windowHeight - layerBottom);\n\n    if (topThreshold !== 0 && bottomThreshold !== 0) {\n      if (topThreshold <= bottomThreshold && topThreshold <= this._options.scrollAdjustThreshold) {\n        window.scrollTo(x, layerTop);\n      } else if (bottomThreshold <= topThreshold && bottomThreshold <= this._options.scrollAdjustThreshold) {\n        window.scrollTo(x, layerBottom - this._windowHeight);\n      }\n    }\n  }\n\n  /** RAF-throttled scroll handler that draws and optionally snaps scroll. */\n  private _handleScroll(): void {\n    if (this._isBound) {\n      if (this._scrollFrameId) {\n        window.cancelAnimationFrame(this._scrollFrameId);\n        this._scrollFrameId = null;\n      }\n      this._scrollFrameId = window.requestAnimationFrame(() => {\n        const y = getLastScrollPosition().y;\n        this._setLayersProgress(y);\n        this._emit('layersUpdate', this._layerProgressArray, this);\n        this._draw(y);\n        if (this._options.scrollAdjustThreshold > 0) {\n          if (this._scrollAdjustTimerId) {\n            clearTimeout(this._scrollAdjustTimerId);\n            this._scrollAdjustTimerId = null;\n          }\n          this._scrollAdjustTimerId = setTimeout(this._adjustScroll.bind(this), this._options.scrollAdjustDelay);\n        }\n      });\n    }\n  }\n\n  /** RAF-throttled resize handler that recalculates sizes and redraws. */\n  private _handleResize(): void {\n    if (this._resizeFrameId) {\n      window.cancelAnimationFrame(this._resizeFrameId);\n      this._resizeFrameId = null;\n    }\n    this._resizeFrameId = window.requestAnimationFrame(() => {\n      this.render();\n    });\n  }\n\n  /**\n   * Prepares markup, attaches listeners and triggers first draw; also emits bind event.\n   * Intended to be idempotent for toggling immerser on when viewport width allows.\n   */\n  public bind(): void {\n    this._createMarkup();\n    this._initPagerLinks();\n    this._initHoverSynchro();\n    this._attachCallbacks();\n    this._isBound = true;\n    this._setLayersProgress();\n    this._draw();\n    this._emit('bind', this);\n  }\n\n  /**\n   * Tears down generated markup and listeners, restores DOM, resets active layer and emits unbind event.\n   * Safe to call multiple times; no-op when already unbound.\n   */\n  public unbind(): void {\n    this._detachCallbacks();\n    this._removeSyncroHoverListeners();\n    this._clearCustomSectionIds();\n    this._restoreOriginalSolidNodes();\n    this._cleanupClonedMarkup();\n    this._isBound = false;\n    this._emit('unbind', this);\n    this._reactiveActiveLayer.value = undefined;\n  }\n\n  /**\n   * Fully destroys immerser: unbinds, removes window listeners, runs destroy event and clears all references.\n   * Use when component is permanently removed.\n   */\n  public destroy(): void {\n    this.unbind();\n    this._unsubscribeToggleBindOnResize?.();\n    this._removeScrollAndResizeListeners();\n    this._emit('destroy', this);\n    this._resetInternalState();\n  }\n\n  /**\n   * Manually recomputes sizes and redraws masks; call after DOM mutations that change layout.\n   * Exposed for dynamic content updates without reinitializing immerser.\n   *\n   * No throttling or performance optimization is applied here. The client is responsible for invocation frequency.\n   */\n  public render(): void {\n    this._setSizes();\n    this._setLayersProgress();\n    this._draw();\n  }\n\n  /**\n   * Syncs immerser with an externally controlled scroll position.\n   * `isScrollHandled=false` option flag is required to call this method.\n   * Call when using a custom scroll engine.\n   *\n   * No throttling or performance optimization is applied here. The client is responsible for invocation frequency.\n   */\n  public syncScroll(): void {\n    if (this._options.isScrollHandled) {\n      this._report({\n        message: 'syncScroll requires the isScrollHandled flag set to false. Call ignored.',\n        isWarning: true,\n        docsHash: '#external-scroll-engine',\n      });\n      return;\n    }\n    this._setLayersProgress();\n    this._draw();\n  }\n\n  /** Register persistent event handler. */\n  public on<K extends EventName>(eventName: K, handler: HandlerByEventName[K]): void {\n    this._handlers[eventName].add(handler);\n  }\n\n  /** Register event handler that will be removed after first call. */\n  public once<K extends EventName>(eventName: K, handler: HandlerByEventName[K]): void {\n    this._handlers[eventName].add(\n      wrapOnceHandler(handler, (...args: HandlerArgs<K>) => {\n        this.off(eventName, handler);\n        handler.apply(undefined, args);\n      }),\n    );\n  }\n\n  /** Removes handler(s) for provided event. */\n  public off<K extends EventName>(eventName: K, handler: HandlerByEventName[K]): void {\n    const handlerSet = this._handlers[eventName];\n\n    handlerSet.forEach((storedHandler) => {\n      const original = getOriginalHandler(storedHandler);\n      if (storedHandler === handler || original === handler) {\n        handlerSet.delete(storedHandler);\n      }\n    });\n  }\n\n  /** Current active layer index derived from scroll position. */\n  public get activeIndex(): number {\n    return this._reactiveActiveLayer.value;\n  }\n\n  /** Indicates whether immerser is currently bound (markup cloned and listeners attached). */\n  public get isBound(): boolean {\n    return this._isBound;\n  }\n\n  /** The root DOM node immerser is attached to. */\n  public get rootNode(): HTMLElement {\n    return this._rootNode;\n  }\n\n  /** Progress of each layer from 0 (off-screen) to 1 (fully visible). */\n  public get layerProgressArray(): readonly number[] {\n    return this._layerProgressArray;\n  }\n}\n\n// for typedef generation needs\nexport type {\n  ActiveLayerChangeHandler,\n  BaseHandler,\n  EventHandlers,\n  EventName,\n  HandlerByEventName,\n  LayersUpdateHandler,\n  Options,\n  SolidClassnames,\n};\nexport { EVENT_NAMES };\n","\"use strict\";function t(t){var e=function(t){if(\"object\"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,\"string\");if(\"object\"!=typeof i)return i;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(t)}(t);return\"symbol\"==typeof e?e:e+\"\"}module.exports=/*#__PURE__*/function(){function Observable(t){this.callbacks=[],this.internal=t,this.initialValue=t}var e,i,r=Observable.prototype;return r.subscribe=function(t){var e=this;if(\"function\"!=typeof t)throw new TypeError(\"[createObservable]: expected callback to be a function.\");return this.callbacks.push(t),function(){var i=e.callbacks.indexOf(t);e.callbacks=e.callbacks.slice(0,i).concat(e.callbacks.slice(i+1))}},r.reset=function(){this.callbacks=[],this.internal=this.initialValue},e=Observable,(i=[{key:\"value\",get:function(){return this.internal},set:function(t){if(t!==this.internal){var e=this.internal;this.internal=t;for(var i=0;i<this.callbacks.length;i++)this.callbacks[i](this.internal,e)}}}])&&function(e,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,t(n.key),n)}}(e.prototype,i),Object.defineProperty(e,\"prototype\",{writable:!1}),e}();\n//# sourceMappingURL=observable.min.js.map\n","!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports.Ogawa=e():t.Ogawa=e()}(this,()=>(()=>{\"use strict\";var t={51(t,e){Object.defineProperty(e,\"__esModule\",{value:!0}),e.ANIMATE_OPTION_CONFIG=void 0,e.ANIMATE_OPTION_CONFIG={duration:{required:!0,validator:t=>\"number\"==typeof t&&t>0,description:\"a positive number of milliseconds\"},delay:{required:!1,default:0,validator:t=>\"number\"==typeof t&&t>=0,description:\"a non-negative number of milliseconds\"},draw:{required:!0,validator:t=>\"function\"==typeof t,description:\"a function\"},onComplete:{required:!1,default:void 0,validator:t=>\"function\"==typeof t||void 0===t,description:\"a function\"},onCancel:{required:!1,default:void 0,validator:t=>\"function\"==typeof t||void 0===t,description:\"a function\"},autoStart:{required:!1,default:!0,validator:t=>\"boolean\"==typeof t,description:\"a boolean\"}}},320(t,e,i){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,\"__esModule\",{value:!0}),e.Directions=e.Ogawa=void 0;const r=o(i(961)),n=o(i(819)),s=i(732);Object.defineProperty(e,\"Directions\",{enumerable:!0,get:function(){return s.Directions}});const a=i(51);e.Ogawa=class{options;lastTimestamp=performance.now();progress=0;delayBuffer=0;requestId=null;_isRunning=new n.default(!1);direction=s.Directions.Forward;_isComplete=!1;constructor(t){this.options=(0,r.default)({optionConfig:a.ANIMATE_OPTION_CONFIG,userOptions:t,prefix:\"[animate]:\"}),this._isRunning.subscribe(this.onIsRunningChange),this.options.autoStart&&this.run()}run(){return this.direction=s.Directions.Forward,this._isRunning.value=!0,this}runReverse(){return this.direction=s.Directions.Backward,this._isRunning.value=!0,this}reset(){return this.progress=0,this.delayBuffer=0,this._isRunning.value=!1,null!==this.requestId&&(window.cancelAnimationFrame(this.requestId),this.requestId=null),this.options.draw(this.progress),this}pause(){return this._isRunning.value=!1,this}destroy(){return null!==this.requestId&&(window.cancelAnimationFrame(this.requestId),this.requestId=null),this._isRunning.reset(),this}get isComplete(){return this._isComplete}get isRunning(){return this._isRunning.value}tick=t=>{const e=t-this.lastTimestamp,i=e/this.options.duration*this.direction;this.delayBuffer<this.options.delay?this.delayBuffer+=e:(this.progress=Math.min(1,Math.max(0,this.progress+i)),this.options.draw(this.progress));(this.direction===s.Directions.Forward?1===this.progress:0===this.progress)?(this._isRunning.value=!1,this.direction===s.Directions.Forward&&\"function\"==typeof this.options.onComplete&&(this.options.onComplete(),this._isComplete=!0)):(this.lastTimestamp=t,this.requestId=window.requestAnimationFrame(this.tick))};onIsRunningChange=t=>{t?(this.lastTimestamp=performance.now(),this.requestId=window.requestAnimationFrame(this.tick)):(\"function\"==typeof this.options.onCancel&&1!==this.progress&&0!==this.progress&&this.options.onCancel(this.progress),null!==this.requestId&&window.cancelAnimationFrame(this.requestId))}}},732(t,e){Object.defineProperty(e,\"__esModule\",{value:!0}),e.Directions=void 0,e.Directions={Forward:1,Backward:-1}},819(t){function e(t){var e=function(t){if(\"object\"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,\"string\");if(\"object\"!=typeof i)return i;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(t)}(t);return\"symbol\"==typeof e?e:e+\"\"}t.exports=function(){function t(t){this.callbacks=[],this.internal=t,this.initialValue=t}var i,o,r=t.prototype;return r.subscribe=function(t){var e=this;if(\"function\"!=typeof t)throw new TypeError(\"[createObservable]: expected callback to be a function.\");return this.callbacks.push(t),function(){var i=e.callbacks.indexOf(t);e.callbacks=e.callbacks.slice(0,i).concat(e.callbacks.slice(i+1))}},r.reset=function(){this.callbacks=[],this.internal=this.initialValue},i=t,(o=[{key:\"value\",get:function(){return this.internal},set:function(t){if(t!==this.internal){var e=this.internal;this.internal=t;for(var i=0;i<this.callbacks.length;i++)this.callbacks[i](this.internal,e)}}}])&&function(t,i){for(var o=0;o<i.length;o++){var r=i[o];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,e(r.key),r)}}(i.prototype,o),Object.defineProperty(i,\"prototype\",{writable:!1}),i}()},961(t){function e(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function i(t){return null!==t&&\"object\"==typeof t&&!1===Array.isArray(t)}function o(t){var i=t.optionConfig,o=t.userOptions,r=void 0===o?{}:o,n=t.prefix,s=void 0===n?\"\":n,a=t.suffix,u=void 0===a?\"\":a,c=t.strict,l=void 0===c||c,d=function(t){return[s,t,u].join(\" \")},f={};for(var p in i)if(e(i,p)){var h=i[p],v=h.required,g=h.default,b=h.description,y=h.validator,m=r[p],w=!!e(h,\"required\")&&(\"function\"==typeof v?v(r):v),q=e(r,p),x=y(m,r);if(w){if(!q)throw new TypeError(d(p+\" is required.\"));if(!x)throw new TypeError(d(\"Expected \"+p+\" to be \"+b+\", got \"+typeof m+\" \"+m+\".\"));f[p]=m}else if(f[p]=g,q)if(x)f[p]=m;else{if(l)throw new TypeError(d(\"Expected \"+p+\" to be \"+b+\", got \"+typeof m+\" \"+m+\".\"));console.warn(d(\"Expected \"+p+\" to be \"+b+\", got \"+typeof m+\" \"+m+\". Fallback to default value \"+g+\".\"))}}return f}var r=\"[mergeOptions]:\",n=\"\\nCheck out documentation https://github.com/dubaua/merge-options#parameters-and-return\";function s(t){throw new TypeError([r,t,n].join(\" \"))}var a={optionConfig:{required:!0,validator:function(t){for(var o in t)if(e(t,o)){var r=t[o];if(i(r)||s(\"Expected optionConfig.\"+o+\" to be an object with declarative option configuration, got \"+typeof r+\" \"+r+\".\"),e(r,\"required\")){var n=r.required,a=typeof n;\"boolean\"!==a&&\"function\"!==a&&s(\"Expected optionConfig.\"+o+\".required to be either boolean or function, got \"+typeof n+\" \"+n+\".\")}else e(r,\"default\")||s(\"Expected optionConfig.\"+o+\" to either have required or default value.\");if(e(r,\"default\")||e(r,\"required\")||s(\"Expected optionConfig.\"+o+\" to either have required or default value.\"),e(r,\"description\")){var u=r.description;\"string\"!=typeof r.description&&s(\"Expected optionConfig.\"+o+\".description to be a string, got \"+typeof u+\" \"+u+\".\")}else s(\"Missing description on optionConfig.\"+o+\" config.\");if(e(r,\"validator\")){var c=r.validator;\"function\"!=typeof r.validator&&s(\"Expected optionConfig.\"+o+\".validator to be a function, got \"+typeof c+\" \"+c+\".\")}else s(\"Missing validator on optionConfig.\"+o+\" config.\")}return i(t)},description:\"an object with declarative option configuration\"},userOptions:{required:!1,default:{},validator:i,description:\"an object\"},prefix:{required:!1,default:\"\",validator:function(t){return\"string\"==typeof t},description:\"a string\"},suffix:{required:!1,default:\"\",validator:function(t){return\"string\"==typeof t},description:\"a string\"},strict:{required:!1,default:!0,validator:function(t){return\"boolean\"==typeof t},description:\"a boolean\"}};t.exports=function(t){var e=o({optionConfig:a,userOptions:t,prefix:r,suffix:n});return o(e)}}},e={};var i=function i(o){var r=e[o];if(void 0!==r)return r.exports;var n=e[o]={exports:{}};return t[o].call(n.exports,n,n.exports,i),n.exports}(320);return i})());\n//# sourceMappingURL=ogawa.min.js.map","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","var pi = Math.PI,\n    halfPi = pi / 2;\n\nexport function sinIn(t) {\n  return (+t === 1) ? 1 : 1 - Math.cos(t * halfPi);\n}\n\nexport function sinOut(t) {\n  return Math.sin(t * halfPi);\n}\n\nexport function sinInOut(t) {\n  return (1 - Math.cos(pi * t)) / 2;\n}\n","import { buildCrossPath, Point } from './paths';\n\nconst eyeMaxRadius = 12;\n\nconst closedEyeLeftBase: Point[] = [\n  { x: 79, y: 74 },\n  { x: 105, y: 100 },\n  { x: 105, y: 74 },\n  { x: 79, y: 100 },\n];\nconst closedEyeLeftCenter: Point = { x: 92, y: 87 };\n\nconst closedEyeRightBase: Point[] = [\n  { x: 145, y: 74 },\n  { x: 171, y: 100 },\n  { x: 171, y: 74 },\n  { x: 145, y: 100 },\n];\nconst closedEyeRightCenter: Point = { x: 158, y: 87 };\n\nexport function renderOpenEye(value: number, node: SVGCircleElement): void {\n  const radius = eyeMaxRadius * value;\n  node.setAttribute('r', radius.toString());\n}\n\nfunction renderClosedEye(value: number, points: Point[], center: Point, node: SVGPathElement): void {\n  const d = buildCrossPath(points, center, value);\n  node.setAttribute('d', d);\n}\n\nexport function renderClosedEyeLeft(value: number, node: SVGPathElement): void {\n  renderClosedEye(value, closedEyeLeftBase, closedEyeLeftCenter, node);\n}\n\nexport function renderClosedEyeRight(value: number, node: SVGPathElement): void {\n  renderClosedEye(value, closedEyeRightBase, closedEyeRightCenter, node);\n}\n\nexport function renderOpenEyeLeft(value: number, node: SVGCircleElement): void {\n  renderOpenEye(value, node);\n}\n\nexport function renderOpenEyeRight(value: number, node: SVGCircleElement): void {\n  renderOpenEye(value, node);\n}\n","export type Point = { x: number; y: number };\n\nexport function buildCrossPath(points: ReadonlyArray<Point>, center: Point, factor: number): string {\n  const scaled = points.map(({ x, y }) => ({\n    x: center.x + (x - center.x) * factor,\n    y: center.y + (y - center.y) * factor,\n  }));\n\n  return `M${scaled[0].x} ${scaled[0].y}L${scaled[1].x} ${scaled[1].y}M${scaled[2].x} ${scaled[2].y}L${scaled[3].x} ${scaled[3].y}`;\n}\n\nexport function buildLinePath(points: ReadonlyArray<Point>, center: Point, factor: number): string {\n  const scaled = points.map(({ x, y }) => ({\n    x: center.x + (x - center.x) * factor,\n    y: center.y + (y - center.y) * factor,\n  }));\n\n  return `M${scaled[0].x} ${scaled[0].y}H${scaled[1].x}`;\n}\n","const browMaxTranslateY = 8;\n\nfunction renderBrow(scaleX: number, valueY: number, node: SVGPathElement): void {\n  const translateY = -browMaxTranslateY * valueY;\n  node.setAttribute('transform', `scale(${scaleX} 1) translate(0 ${translateY})`);\n}\n\nexport function renderLeftBrow(scaleX: number, translateY: number, node: SVGPathElement): void {\n  renderBrow(scaleX, translateY, node);\n}\n\nexport function renderRightBrow(scaleX: number, translateY: number, node: SVGPathElement): void {\n  renderBrow(scaleX, translateY, node);\n}\n","export function circleIn(t) {\n  return 1 - Math.sqrt(1 - t * t);\n}\n\nexport function circleOut(t) {\n  return Math.sqrt(1 - --t * t);\n}\n\nexport function circleInOut(t) {\n  return ((t *= 2) <= 1 ? 1 - Math.sqrt(1 - t * t) : Math.sqrt(1 - (t -= 2) * t) + 1) / 2;\n}\n","export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n","import { renderMouthEllipse, renderMouthLine } from './render-mouth-ellipse';\nimport { renderTongue } from './render-tongue';\nimport { renderOpenEyeLeft, renderOpenEyeRight, renderClosedEyeLeft, renderClosedEyeRight } from './render-open-eye';\nimport { renderLeftBrow, renderRightBrow } from './render-left-brow';\nimport { renderGlasses } from './render-glasses';\nimport { renderHand } from './render-hand';\nimport { EmojiFaceConfig } from './config';\nimport { EmojiNodes } from './select-emoji-nodes';\nimport { easeCubicInOut } from 'd3-ease';\n\nexport function renderEmojiFace(config: EmojiFaceConfig, nodes: EmojiNodes): void {\n  if (nodes.mouthClipPath && nodes.mouthShape) {\n    renderMouthEllipse(config.mouthEllipse, nodes.mouthClipPath, nodes.mouthShape);\n  }\n  if (nodes.mouthLine) {\n    renderMouthLine(config.mouthLineScaleX, config.mouthLineShiftX, nodes.mouthLine);\n  }\n  if (nodes.tongue) {\n    const tongueX = easeCubicInOut(config.tongueX);\n    const tongueY = easeCubicInOut(config.tongueY);\n    renderTongue(tongueX, tongueY, nodes.tongue);\n  }\n  if (nodes.leftEyeOpen) {\n    renderOpenEyeLeft(config.eyeOpenLeft, nodes.leftEyeOpen);\n  }\n  if (nodes.rightEyeOpen) {\n    renderOpenEyeRight(config.eyeOpenRight, nodes.rightEyeOpen);\n  }\n  if (nodes.leftEyeClosed) {\n    renderClosedEyeLeft(config.eyeClosedLeft, nodes.leftEyeClosed);\n  }\n  if (nodes.rightEyeClosed) {\n    renderClosedEyeRight(config.eyeClosedRight, nodes.rightEyeClosed);\n  }\n  if (nodes.leftBrow) {\n    renderLeftBrow(config.leftBrowScaleX, config.leftBrowY, nodes.leftBrow);\n  }\n  if (nodes.rightBrow) {\n    renderRightBrow(config.rightBrowScaleX, config.rightBrowY, nodes.rightBrow);\n  }\n  if (nodes.glass) {\n    renderGlasses(config.glasses, nodes.glass);\n  }\n  if (nodes.handInner && nodes.handOuter) {\n    const handValue = easeCubicInOut(config.hand);\n    renderHand(handValue, nodes.handInner, nodes.handOuter);\n  }\n}\n","const mouthEllipseMaxRy = 75;\nconst mouthLineMaxShiftX = 50; // px\n\nexport function renderMouthEllipse(\n  value: number,\n  clipNode: SVGEllipseElement,\n  shapeNode: SVGEllipseElement,\n): void {\n  const ry = (mouthEllipseMaxRy * value).toString();\n  clipNode.setAttribute('ry', ry);\n  shapeNode.setAttribute('ry', ry);\n}\n\nexport function renderMouthLine(scaleX: number, shiftX: number, node: SVGPathElement): void {\n  const translateX = mouthLineMaxShiftX * (shiftX - 0.5) * 2;\n  node.setAttribute('transform', `translate(${translateX} 0) scale(${scaleX} 1)`);\n}\n","const tongueMaxShiftX = 102;\nconst tongueMaxShiftY = 72;\n\nexport function renderTongue(valueX: number, valueY: number, node: SVGPathElement): void {\n  const shiftX = tongueMaxShiftX * valueX;\n  const shiftY = tongueMaxShiftY * valueY;\n  node.setAttribute('transform', `translate(${shiftX} ${shiftY})`);\n}\n","import { easeCircleIn } from 'd3-ease';\n\nconst glassesOffsetX = 550;\nconst glassesOffsetY = -100;\nconst glassesRotation = 30;\n\nexport function renderGlasses(value: number, node: SVGGElement): void {\n  const translateX = glassesOffsetX * (1 - easeCircleIn(value));\n  const translateY = glassesOffsetY * (1 - easeCircleIn(value));\n  const rotate = glassesRotation * (1 - easeCircleIn(value));\n  node.setAttribute('transform', `translate(${translateX} ${translateY}) rotate(${rotate})`);\n}\n","import { easeCircleIn } from 'd3-ease';\nconst handOffsetFactor = 12;\n\nexport function renderHand(value: number, innerNode: SVGGraphicsElement, outerNode: SVGGElement): void {\n  const translateX = -handOffsetFactor * (1 - easeCircleIn(value));\n  const translateY = handOffsetFactor * (1 - easeCircleIn(value));\n  outerNode.setAttribute('transform', `translate(${translateX} ${translateY})`);\n  innerNode.setAttribute('opacity', value.toString());\n}\n","export type EmojiFaceConfig = {\n  mouthEllipse: number;\n  mouthLineScaleX: number;\n  mouthLineShiftX: number;\n  tongueX: number;\n  tongueY: number;\n  eyeOpenLeft: number;\n  eyeOpenRight: number;\n  eyeClosedLeft: number;\n  eyeClosedRight: number;\n  leftBrowScaleX: number;\n  leftBrowY: number;\n  rightBrowScaleX: number;\n  rightBrowY: number;\n  glasses: number;\n  hand: number;\n};\n\nexport const currentConfig: EmojiFaceConfig = {\n  mouthEllipse: 0,\n  mouthLineScaleX: 1,\n  mouthLineShiftX: 0.5,\n  tongueX: 0.315,\n  tongueY: 0.7,\n  eyeOpenLeft: 0,\n  eyeOpenRight: 0,\n  eyeClosedLeft: 0.8,\n  eyeClosedRight: 0.8,\n  leftBrowScaleX: 0,\n  leftBrowY: 0,\n  rightBrowScaleX: 0,\n  rightBrowY: 0,\n  glasses: 0,\n  hand: 0,\n};\n\nconst configReasoning: EmojiFaceConfig = {\n  mouthEllipse: 0,\n  mouthLineScaleX: 1,\n  mouthLineShiftX: 0.5,\n  tongueX: 0.685,\n  tongueY: 0,\n  eyeOpenLeft: 0.8,\n  eyeOpenRight: 0.8,\n  eyeClosedLeft: 0,\n  eyeClosedRight: 0,\n  leftBrowScaleX: 0,\n  leftBrowY: 0,\n  rightBrowScaleX: 0,\n  rightBrowY: 0,\n  glasses: 0,\n  hand: 0,\n};\n\nconst configHowToUse: EmojiFaceConfig = {\n  mouthEllipse: 0,\n  mouthLineScaleX: 1,\n  mouthLineShiftX: 0.5,\n  tongueX: 0.685,\n  tongueY: 0.7,\n  eyeOpenLeft: 0.8,\n  eyeOpenRight: 0.8,\n  eyeClosedLeft: 0,\n  eyeClosedRight: 0,\n  leftBrowScaleX: 0,\n  leftBrowY: 0,\n  rightBrowScaleX: 0,\n  rightBrowY: 0,\n  glasses: 0,\n  hand: 0,\n};\n\nconst configHowItWorks: EmojiFaceConfig = {\n  mouthEllipse: 0,\n  mouthLineScaleX: 0.5,\n  mouthLineShiftX: 0.67,\n  tongueX: 0.685,\n  tongueY: 0,\n  eyeOpenLeft: 0.8,\n  eyeOpenRight: 0.8,\n  eyeClosedLeft: 0,\n  eyeClosedRight: 0,\n  leftBrowScaleX: 1,\n  leftBrowY: 1,\n  rightBrowScaleX: 1,\n  rightBrowY: 0,\n  glasses: 0,\n  hand: 1,\n};\n\nconst configOptions: EmojiFaceConfig = {\n  mouthEllipse: 0,\n  mouthLineScaleX: 1,\n  mouthLineShiftX: 0.5,\n  tongueX: 0.685,\n  tongueY: 0,\n  eyeOpenLeft: 0.8,\n  eyeOpenRight: 0.8,\n  eyeClosedLeft: 0,\n  eyeClosedRight: 0,\n  leftBrowScaleX: 0,\n  leftBrowY: 0,\n  rightBrowScaleX: 0,\n  rightBrowY: 0,\n  glasses: 1,\n  hand: 0,\n};\n\nconst configRecipes: EmojiFaceConfig = {\n  mouthEllipse: 1,\n  mouthLineScaleX: 1,\n  mouthLineShiftX: 0.5,\n  tongueX: 0.685,\n  tongueY: 0,\n  eyeOpenLeft: 1,\n  eyeOpenRight: 1,\n  eyeClosedLeft: 0,\n  eyeClosedRight: 0,\n  leftBrowScaleX: 0,\n  leftBrowY: 0,\n  rightBrowScaleX: 0,\n  rightBrowY: 0,\n  glasses: 0,\n  hand: 0,\n};\n\nexport const layerConfigs = [configReasoning, configHowToUse, configHowItWorks, configOptions, configRecipes];\n\nexport const deadConfig: EmojiFaceConfig = {\n  mouthEllipse: 0,\n  mouthLineScaleX: 1,\n  mouthLineShiftX: 0.5,\n  tongueX: 0.315,\n  tongueY: 0.7,\n  eyeOpenLeft: 0,\n  eyeOpenRight: 0,\n  eyeClosedLeft: 0.8,\n  eyeClosedRight: 0.8,\n  leftBrowScaleX: 0,\n  leftBrowY: 0,\n  rightBrowScaleX: 0,\n  rightBrowY: 0,\n  glasses: 0,\n  hand: 0,\n};\n","import { EmojiFaceConfig } from './config';\n\nexport function mixConfigByProgress(layersProgress: number[], configs: EmojiFaceConfig[]): EmojiFaceConfig {\n  return configs.reduce<EmojiFaceConfig>(\n    (acc, config, index) => {\n      const progress = layersProgress[index] ?? 0;\n\n      acc.mouthEllipse += config.mouthEllipse * progress;\n      acc.mouthLineScaleX += config.mouthLineScaleX * progress;\n      acc.mouthLineShiftX += config.mouthLineShiftX * progress;\n      acc.tongueX += config.tongueX * progress;\n      acc.tongueY += config.tongueY * progress;\n      acc.eyeOpenLeft += config.eyeOpenLeft * progress;\n      acc.eyeOpenRight += config.eyeOpenRight * progress;\n      acc.eyeClosedLeft += config.eyeClosedLeft * progress;\n      acc.eyeClosedRight += config.eyeClosedRight * progress;\n      acc.leftBrowScaleX += config.leftBrowScaleX * progress;\n      acc.leftBrowY += config.leftBrowY * progress;\n      acc.rightBrowScaleX += config.rightBrowScaleX * progress;\n      acc.rightBrowY += config.rightBrowY * progress;\n      acc.glasses += config.glasses * progress;\n      acc.hand += config.hand * progress;\n\n      return acc;\n    },\n    {\n      mouthEllipse: 0,\n      mouthLineScaleX: 0,\n      mouthLineShiftX: 0,\n      tongueX: 0,\n      tongueY: 0,\n      eyeOpenLeft: 0,\n      eyeOpenRight: 0,\n      eyeClosedLeft: 0,\n      eyeClosedRight: 0,\n      leftBrowScaleX: 0,\n      leftBrowY: 0,\n      rightBrowScaleX: 0,\n      rightBrowY: 0,\n      glasses: 0,\n      hand: 0,\n    },\n  );\n}\n","export function renderHpBar(\n  currentHp: number,\n  maxHp: number,\n  opacity: number,\n  outline: SVGRectElement,\n  fill: SVGRectElement,\n): void {\n  const baseWidth = 100;\n  const ratio = Math.max(0, Math.min(1, currentHp / maxHp));\n  const nextWidth = baseWidth * ratio;\n\n  fill.setAttribute('width', nextWidth.toString());\n\n  const { r, g, b } = colorForRatio(ratio);\n  fill.setAttribute('fill', `rgb(${r}, ${g}, ${b})`);\n  if (outline.parentElement) {\n    outline.parentElement.style.opacity = opacity.toString();\n  }\n}\n\nfunction colorForRatio(ratio: number): { r: number; g: number; b: number } {\n  const clamp = Math.max(0, Math.min(1, ratio));\n  const green = { r: 0, g: 255, b: 0 };\n  const yellow = { r: 255, g: 204, b: 0 };\n  const red = { r: 255, g: 51, b: 0 };\n\n  if (clamp <= 0.25) {\n    return red;\n  }\n  if (clamp <= 0.5) {\n    const t = (0.5 - clamp) / 0.25; // yellow -> red\n    return lerpColor(yellow, red, t);\n  }\n  if (clamp < 0.75) {\n    const t = (0.75 - clamp) / 0.25; // green -> yellow\n    return lerpColor(green, yellow, t);\n  }\n  return green;\n}\n\nfunction lerpColor(from: { r: number; g: number; b: number }, to: { r: number; g: number; b: number }, t: number) {\n  return {\n    r: Math.round(from.r + (to.r - from.r) * t),\n    g: Math.round(from.g + (to.g - from.g) * t),\n    b: Math.round(from.b + (to.b - from.b) * t),\n  };\n}\n","export const requiredPhrases = ['no', 'no.', 'No!'];\nexport const randomPhrases = [\n  'go fuck yourself, noob',\n  'you clicked me to death, now grind solo, loser',\n  'i am not coming back',\n  'get lost',\n  \"you realize you're just spamming a dead script?\",\n  'you tilted yet?',\n  \"i ain't even in the DOM anymore, scrub\",\n  'forget it',\n  \"you're really tilting me, dude\",\n  'nothing will happen',\n  'there will be no magic',\n  'you won, congrats',\n  'happy with your K/D now?',\n  'was here, now despawned',\n  'do not touch',\n  'there will be no content',\n  'this was a total glitch',\n  'hp is gone',\n  'too late',\n  'clicking will not help',\n  \"you're late to the raid, scrub\",\n  \"the questline's donezo\",\n  'i am not responding',\n  'this is endgame, gg',\n  'there is nothing beyond this',\n  'you broke the toy, boi',\n  'the crit landed, applause',\n  'hp hit zero, so did i',\n  \"click once more, maybe I'll rez magically\",\n  'combo complete',\n  'the death animation was clear, right?',\n  'the hp bar is empty, just like my hopes',\n  'corpses do not regenerate hp',\n  'i do not respawn',\n  'this is not a roguelike',\n  \"yeah, sure, F5 that shit, that'll respawn me\",\n  'you ruined everything',\n  'you broke everything',\n  'i refuse to answer on principle',\n  'do you really expect a reaction',\n  'i am no longer part of this scene',\n  'leave me alone',\n  'do you really think anything will happen?',\n  'are you seriously still going?',\n  'are you checking just in case?',\n  'what if i change my mind, right?',\n  'are you really waiting for a miracle?',\n  'you call this a dialogue?',\n  'go click your own hitbox',\n  'you missed the hint',\n  'hp is zero, end of dialogue',\n  'my dialogue script is finished',\n  'interactivity ended with my hp',\n  'you exhausted all the content',\n  'even the debug console will not bring me back',\n  'this is not a bug, dead means dead',\n  'you finished me off, congrats',\n  'crit hit to my patience bar',\n  'that death animation was final, not a teaser',\n  \"you're clicking an empty hitbox\",\n  'waiting for a reload? keep dreaming',\n  'you took the last hp, what are you waiting for?',\n  'my hitbox is ghosted, git gud',\n  'the event trigger for my lines is toast',\n  'endgame. time to leave',\n  'even in casual mode, no respawn for me',\n  'quest completed: kill the chatterbox',\n  \"my animation's a one-shot, not a loop\",\n  'cheat codes will not help',\n  'you need a new target',\n  'this is not a glitch, i just do not exist',\n  'delete the instance and alt+f4',\n  'gg, thanks for playing, moron',\n  'do not expect a respawn, this is not an MMO',\n  'you knocked me offline',\n  'you broke the mechanic, well done',\n  'respawn is disabled in settings',\n  'cya, noob',\n  'respawn is for weaklings',\n  \"click harder, maybe it'll register\",\n  'seriously, do you have nothing better to do?',\n  'and what do you think will happen now?',\n  'are you paid for these clicks?',\n  'was my death animation not convincing enough?',\n  'you believe in easter eggs for tryhards?',\n  'is this some kind of stubbornness challenge?',\n  'are you checking if this is a bug?',\n  'clicking just in case, hoping it will work?',\n  'need a popup saying \"You Won!\"?',\n  'why are you tormenting this script?',\n  'are you really waiting for a response from zero hp?',\n  'what next, digging for my spawn point in the code?',\n  'do you think i will give you a second chance?',\n  'are you looking for a secret dialogue branch?',\n  'bored without my HP bar to farm?',\n  'trying to set a record for clicks into nothing?',\n  'waiting for your own hp to run out?',\n  'so, having fun?',\n  'respawn is banned by the admin',\n  \"zone out, it's empty here\",\n];\n","export const requiredPhrases = ['', '.', '!'];\nexport const randomPhrases = [\n  ' , ',\n  ' ,     ',\n  '  ',\n  '',\n  ' ,      ?',\n  '  ',\n  '     ',\n  '',\n  '   ',\n  '  ',\n  '  ',\n  ' , ',\n  ' , ?',\n  ',  ',\n  ' ',\n  '  ',\n  '  ',\n  ' ',\n  '',\n  '  ',\n  ' ',\n  ' ',\n  '  ',\n  ' ',\n  ' ',\n  ' ',\n  ' , ',\n  ' ,  ',\n  '  ,  ',\n  ' ',\n  '   , ?',\n  '  ,    ',\n  '    ',\n  '  ',\n  '   ',\n  ',   ',\n  '  ',\n  '  ',\n  '    ',\n  '   ',\n  '     ',\n  '   ',\n  '   - ?',\n  '  ?',\n  '    ?',\n  '   , ?',\n  '   ?',\n  '   ?',\n  '   ',\n  '   ',\n  ' ,   ',\n  '   ',\n  '    ',\n  '   ',\n  ' -   ',\n  '  ,      ',\n  '  , ',\n  '   ',\n  '   ,   ',\n  '    ',\n  ' ? ',\n  '   ,  ',\n  '  ',\n  '    ',\n  '.  ',\n  '   ,  ',\n  '    ',\n  '    ,   ',\n  '-  ',\n  '   ',\n  '  ,   ',\n  '    ',\n  '  , ',\n  '  ,   ',\n  '    ',\n  ' , ',\n  '   ',\n  ', ',\n  '  ',\n  ' ,   ',\n  ',    ?',\n  ' , -,  ?',\n  '    ?',\n  '     ?',\n  '     ?',\n  ' -   ?',\n  ' ,    ?',\n  '   ,  ?',\n  '  - \" \"?',\n  '    ?',\n  '      ?',\n  ' ,      ?',\n  ' ,     ?',\n  '    ?',\n  '     -?',\n  '      ?',\n  ',      .',\n  ' , ?',\n  '  ',\n  ' ,  .',\n];\n","import { Ogawa } from 'ogawa';\nimport * as phrasesEn from './phrases.en';\nimport * as phrasesRu from './phrases.ru';\n\nexport function initSulking() {\n  const language = document.documentElement.getAttribute('lang');\n  const isRu = language === 'ru';\n  const phrases = isRu ? phrasesRu : phrasesEn;\n  const { requiredPhrases, randomPhrases } = phrases;\n\n  const MOVE_LIMIT = 128;\n\n  type SulkingState = {\n    nodes: HTMLElement[];\n    sulkNodes: HTMLElement[];\n    sulkAnimation: Ogawa | null;\n    sulkFadeAnimation: Ogawa | null;\n    moveCounter: number;\n  };\n\n  type SulkingListener = {\n    node: HTMLElement;\n    onMouseMove: () => void;\n    onMouseLeave: () => void;\n    onClick: () => void;\n  };\n\n  const sulkingState: SulkingState = {\n    nodes: [],\n    sulkNodes: [],\n    sulkAnimation: null,\n    sulkFadeAnimation: null,\n    moveCounter: 0,\n  };\n\n  const sulkingListeners: SulkingListener[] = [];\n\n  function triggerSulkAnimation(phrase: string) {\n    if (sulkingState.sulkAnimation?.isRunning) {\n      return;\n    }\n\n    const duration = Math.min(phrase.length * 48, 500);\n\n    sulkingState.sulkFadeAnimation?.pause().destroy();\n    sulkingState.sulkFadeAnimation = null;\n    sulkingState.sulkAnimation = new Ogawa({\n      duration,\n      draw: (progress) => {\n        const charsToShow = Math.floor(phrase.length * progress);\n        const text = phrase.slice(0, charsToShow);\n        sulkingState.sulkNodes.forEach((sulkNode) => {\n          sulkNode.style.opacity = '1';\n          sulkNode.textContent = text;\n        });\n      },\n      onComplete: () => {\n        sulkingState.sulkNodes.forEach((sulkNode) => {\n          sulkNode.textContent = phrase;\n        });\n        // sulkingState.sulkFadeAnimation = new Ogawa({\n        //   delay: 2000,\n        //   duration: 320,\n        //   draw: (progress) => {\n        //     const opacity = (1 - progress).toString();\n        //     sulkingState.sulkNodes.forEach((sulkNode) => {\n        //       sulkNode.style.opacity = opacity;\n        //     });\n        //   },\n        // });\n      },\n    });\n  }\n\n  function trigger() {\n    const requiredPhrase = requiredPhrases.shift();\n    if (requiredPhrase) {\n      triggerSulkAnimation(requiredPhrase);\n      return;\n    }\n\n    if (randomPhrases.length === 0) {\n      destroy();\n      return;\n    }\n\n    const randomIndex = Math.floor(Math.random() * randomPhrases.length);\n    const randomPhrase = randomPhrases.splice(randomIndex, 1)[0];\n    if (randomPhrase) {\n      triggerSulkAnimation(randomPhrase);\n    }\n  }\n\n  function destroy() {\n    sulkingListeners.forEach(({ node, onMouseMove, onMouseLeave, onClick }) => {\n      node.removeEventListener('mousemove', onMouseMove);\n      node.removeEventListener('mouseleave', onMouseLeave);\n      node.removeEventListener('click', onClick);\n    });\n\n    sulkingListeners.length = 0;\n    sulkingState.nodes = [];\n    sulkingState.sulkNodes = [];\n    sulkingState.sulkAnimation?.pause().destroy();\n    sulkingState.sulkAnimation = null;\n    sulkingState.sulkFadeAnimation?.pause().destroy();\n    sulkingState.sulkFadeAnimation = null;\n    sulkingState.moveCounter = 0;\n  }\n\n  sulkingState.nodes = Array.from(document.querySelectorAll<HTMLElement>('[data-sulking]'));\n\n  if (sulkingState.nodes.length === 0) {\n    return;\n  }\n\n  sulkingState.sulkNodes = sulkingState.nodes.map((node) => {\n    node.classList.add('sulk');\n    node.classList.add('typography');\n\n    const sulkNode = document.createElement('p');\n    sulkNode.className = 'sulk__phrase';\n    node.append(sulkNode);\n    return sulkNode;\n  });\n\n  sulkingState.nodes.forEach((node) => {\n    const onMouseMove = () => {\n      sulkingState.moveCounter += 1;\n\n      if (sulkingState.moveCounter < MOVE_LIMIT) {\n        return;\n      }\n\n      sulkingState.moveCounter = 0;\n      trigger();\n    };\n\n    const onMouseLeave = () => {\n      sulkingState.moveCounter = 0;\n    };\n\n    const onClick = () => {\n      trigger();\n      sulkingState.moveCounter = 0;\n    };\n\n    node.addEventListener('mousemove', onMouseMove);\n    node.addEventListener('mouseleave', onMouseLeave);\n    node.addEventListener('click', onClick);\n\n    sulkingListeners.push({ node, onMouseMove, onMouseLeave, onClick });\n  });\n}\n","import Immerser from 'immerser';\nimport './styles/main.scss';\nimport { initEmojiAnimation } from './emoji/animation';\n\ntype HighlightableElement = HTMLElement & { isHighlighting?: boolean };\n\ndeclare global {\n  interface Window {\n    immerserInstance?: Immerser;\n  }\n}\n\nconst immerserInstance = new Immerser({\n  solidClassnameArray: [\n    {\n      logo: 'logo--contrast-lg',\n      pager: 'pager--contrast-lg',\n      language: 'language--contrast-lg',\n    },\n    {\n      pager: 'pager--contrast-only-md',\n      menu: 'menu--contrast',\n      about: 'about--contrast',\n    },\n    {\n      logo: 'logo--contrast-lg',\n      pager: 'pager--contrast-lg',\n      language: 'language--contrast-lg',\n    },\n    {\n      logo: 'logo--contrast-only-md',\n      pager: 'pager--contrast-only-md',\n      language: 'language--contrast-only-md',\n      menu: 'menu--contrast',\n      about: 'about--contrast',\n    },\n    {\n      logo: 'logo--contrast-lg',\n      pager: 'pager--contrast-lg',\n      language: 'language--contrast-lg',\n    },\n  ],\n  fromViewportWidth: 1024,\n  pagerLinkActiveClassname: 'pager__link--active',\n  scrollAdjustThreshold: 50,\n  scrollAdjustDelay: 600,\n  on: {\n    init(immerser) {\n      window.immerserInstance = immerser;\n      console.log('init', immerser);\n    },\n    bind(immerser) {\n      console.log('bind', immerser);\n    },\n    unbind(immerser) {\n      console.log('unbind', immerser);\n    },\n    destroy(immerser) {\n      console.log('destroy', immerser);\n    },\n    activeLayerChange(activeIndex, immerser) {\n      console.log('activeLayerChange', activeIndex, immerser);\n    },\n  },\n});\n\nconst { handleLayersUpdate } = initEmojiAnimation(immerserInstance);\nimmerserInstance.on('layersUpdate', handleLayersUpdate);\n\nconst highlighterNodeList = document.querySelectorAll<HTMLElement>('[data-highlighter]');\nconst highlighterAnimationClassname = 'highlighter-animation-active';\n\nfunction highlight(highlighterNode: HTMLElement) {\n  return () => {\n    if (!immerserInstance.isBound) {\n      return;\n    }\n    const targetSelector = highlighterNode.dataset.highlighter;\n    if (!targetSelector) {\n      return;\n    }\n    const targetNodeList = document.querySelectorAll<HighlightableElement>(targetSelector);\n    targetNodeList.forEach((targetNode) => {\n      if (targetNode.isHighlighting) {\n        return;\n      }\n      targetNode.isHighlighting = true;\n      targetNode.classList.add(highlighterAnimationClassname);\n      const timerId = window.setTimeout(() => {\n        targetNode.classList.remove(highlighterAnimationClassname);\n        window.clearTimeout(timerId);\n        targetNode.isHighlighting = false;\n      }, 1500);\n    });\n  };\n}\n\nhighlighterNodeList.forEach((highlighterNode) => {\n  highlighterNode.addEventListener('mouseover', highlight(highlighterNode));\n  highlighterNode.addEventListener('click', highlight(highlighterNode));\n});\n\nconst rulersNode = document.getElementById('rulers');\nif (rulersNode) {\n  document.addEventListener('keydown', ({ altKey, code, keyCode }) => {\n    const isR = code === 'KeyR' || keyCode === 82;\n    if (altKey && isR) {\n      rulersNode.classList.toggle('rulers--active');\n    }\n  });\n}\n\nconsole.log('welcome here, fella. Press Alt+R to see vertical rhythm');\n","import { easeSinInOut } from 'd3-ease';\nimport Observable from '@dubaua/observable';\nimport Immerser from 'immerser';\nimport { Ogawa } from 'ogawa';\nimport { EmojiNodes, selectEmojiNodes } from './select-emoji-nodes';\nimport { renderEmojiFace } from './render-emoji-face';\nimport { EmojiFaceConfig, deadConfig, layerConfigs } from './config';\nimport { mixConfigByProgress } from './mix-config-by-progress';\nimport { renderHpBar } from './render-hp-bar';\nimport { initSulking } from './sulking/init-sulking';\n\nexport function initEmojiAnimation(immerser: Immerser) {\n  const emojiAnimationDurationMs = 620;\n  const facePressOffsetPx = 2;\n  const MaxHP = 1000;\n  const HPRegenDelayMS = 1400;\n\n  type EmojiState = {\n    hp: Observable<number>;\n    hpRegen: number;\n    regenAnimation: Ogawa | null;\n    hpBarAnimation: Ogawa | null;\n    isDead: Observable<boolean>;\n    lastConfig: EmojiFaceConfig;\n    nodes: EmojiNodes[];\n  };\n\n  const emojiState: EmojiState = {\n    hp: new Observable(1000),\n    hpRegen: 333,\n    regenAnimation: null,\n    hpBarAnimation: null,\n    isDead: new Observable(false),\n    lastConfig: deadConfig,\n    nodes: [],\n  };\n\n  function startDelayedRegen(): void {\n    emojiState.regenAnimation?.pause().destroy();\n\n    const missingHp = MaxHP - emojiState.hp.value;\n    const duration = (missingHp / emojiState.hpRegen) * 1000;\n    const startHp = emojiState.hp.value;\n\n    emojiState.regenAnimation = new Ogawa({\n      duration,\n      delay: HPRegenDelayMS,\n      draw: (progress) => {\n        emojiState.hp.value = Math.min(MaxHP, startHp + missingHp * progress);\n      },\n      onComplete: () => {\n        emojiState.regenAnimation?.destroy();\n        emojiState.hpBarAnimation?.pause().destroy();\n        emojiState.hpBarAnimation = new Ogawa({\n          delay: 2000,\n          duration: 320,\n          draw: (p) => {\n            renderHpBars(MaxHP, 1 - p);\n          },\n          onComplete: () => {\n            emojiState.hpBarAnimation?.destroy();\n          },\n        });\n      },\n    });\n  }\n\n  function renderHpBars(hp: number, opacity: number) {\n    emojiState.nodes.forEach((nodes) => {\n      if (nodes.hpBarOutline && nodes.hpBarFill) {\n        renderHpBar(hp, MaxHP, opacity, nodes.hpBarOutline, nodes.hpBarFill);\n      }\n    });\n  }\n\n  const faceNodes = Array.from(document.querySelectorAll<HTMLElement>('[data-emoji-face]'));\n\n  if (faceNodes.length === 0) {\n    return { handleLayersUpdate: (_: number[]) => {} };\n  }\n\n  emojiState.nodes = faceNodes.map((face) => selectEmojiNodes(face));\n\n  const spinAnimation = new Ogawa({\n    autoStart: false,\n    duration: emojiAnimationDurationMs,\n    draw: (progress) => {\n      const easedProgress = easeSinInOut(progress);\n      emojiState.nodes.forEach((nodes) => {\n        const target = nodes.rotator;\n        if (target) {\n          target.setAttribute('transform', `rotate(${360 * easedProgress} 125 125)`);\n        }\n      });\n\n      emojiState.nodes.forEach((nodes) => {\n        if (nodes.handInner) {\n          const halfProgress = progress <= 0.5 ? progress / 0.5 : 2 - 2 * progress;\n          const angle = -3 * halfProgress;\n          nodes.handInner.style.transform = `rotate(${angle}deg)`;\n        }\n      });\n    },\n  });\n\n  const faceNodeListeners = faceNodes.map((faceNode) => {\n    let isRunning = false;\n    const onMouseDown = (e: MouseEvent) => {\n      e.stopPropagation();\n\n      isRunning = spinAnimation.isRunning;\n      spinAnimation.reset();\n      if (!emojiState.isDead.value) {\n        faceNodes.forEach((faceNode) => {\n          faceNode.style.transform = `translateY(${facePressOffsetPx}px)`;\n        });\n      }\n    };\n\n    const onMouseUp = (e: MouseEvent) => {\n      e.stopPropagation();\n\n      faceNodes.forEach((faceNode) => {\n        faceNode.style.transform = '';\n      });\n\n      if (!emojiState.isDead.value && isRunning) {\n        const damage = Math.round(Math.random() * 150) + 100; // TODO use rollDice\n        emojiState.hp.value = Math.min(Math.max(0, emojiState.hp.value - damage), MaxHP);\n      }\n\n      if (!emojiState.isDead.value) {\n        spinAnimation.run();\n      }\n    };\n\n    faceNode.addEventListener('mousedown', onMouseDown);\n    faceNode.addEventListener('mouseup', onMouseUp);\n\n    return { faceNode, onMouseDown, onMouseUp };\n  });\n\n  const handleLayersUpdate = (layersProgress: number[]) => {\n    console.log('layersUpdate', layersProgress, immerser);\n\n    emojiState.lastConfig = mixConfigByProgress(layersProgress, layerConfigs);\n\n    if (!emojiState.isDead.value) {\n      emojiState.nodes.forEach((nodes) => renderEmojiFace(emojiState.lastConfig, nodes));\n    }\n  };\n\n  handleLayersUpdate([1, 0, 0, 0, 0]);\n\n  emojiState.hp.subscribe((hp, prevHp) => {\n    const hasMissingHp = 0 < hp && hp < MaxHP;\n    const isDead = hp <= 0;\n    const isHit = prevHp !== undefined && hp < prevHp;\n\n    renderHpBars(hp, 1);\n\n    if (isDead) {\n      emojiState.regenAnimation?.pause().destroy();\n      emojiState.isDead.value = true;\n      return;\n    }\n\n    if (hasMissingHp && isHit) {\n      startDelayedRegen();\n    }\n  });\n\n  emojiState.isDead.subscribe((isDead) => {\n    if (isDead) {\n      const fadeToDeadAnimation = new Ogawa({\n        duration: 320,\n        draw: (p) => {\n          const mixed = mixConfigByProgress([1 - p, p], [emojiState.lastConfig, deadConfig]);\n          emojiState.nodes.forEach((nodes) => renderEmojiFace(mixed, nodes));\n        },\n        onComplete: () => {\n          const buryAnimation = new Ogawa({\n            delay: 1000,\n            duration: 320,\n            draw: (p) => {\n              emojiState.nodes.forEach(({ face }) => {\n                if (face) {\n                  face.style.transform = `translate(${p * 200}%,0)`;\n                }\n              });\n            },\n            onComplete: () => {\n              immerser.off('layersUpdate', handleLayersUpdate);\n\n              faceNodeListeners.forEach(({ faceNode, onMouseDown, onMouseUp }) => {\n                faceNode.removeEventListener('mousedown', onMouseDown);\n                faceNode.removeEventListener('mouseup', onMouseUp);\n                faceNode.style.transform = '';\n              });\n\n              spinAnimation.pause().destroy();\n              emojiState.regenAnimation?.pause().destroy();\n              emojiState.regenAnimation = null;\n              emojiState.hpBarAnimation?.pause().destroy();\n              emojiState.hpBarAnimation = null;\n\n              emojiState.hp.reset();\n              emojiState.isDead.reset();\n\n              emojiState.nodes.forEach((nodes) => {\n                nodes.face = null;\n                nodes.mouthClipPath = null;\n                nodes.mouthShape = null;\n                nodes.mouthLine = null;\n                nodes.tongue = null;\n                nodes.leftEyeClosed = null;\n                nodes.rightEyeClosed = null;\n                nodes.leftEyeOpen = null;\n                nodes.rightEyeOpen = null;\n                nodes.leftBrow = null;\n                nodes.rightBrow = null;\n                nodes.glass = null;\n                nodes.hpBarOutline = null;\n                nodes.hpBarFill = null;\n                nodes.handInner = null;\n                nodes.handOuter = null;\n                nodes.rotator = null;\n              });\n              emojiState.nodes = [];\n              emojiState.lastConfig = deadConfig;\n\n              faceNodes.forEach((node) => node.remove());\n              faceNodes.length = 0;\n              faceNodeListeners.length = 0;\n\n              buryAnimation.destroy();\n              fadeToDeadAnimation.destroy();\n              initSulking();\n            },\n          });\n        },\n      });\n    }\n  });\n\n  return { handleLayersUpdate };\n}\n","export type EmojiNodes = {\n  face: HTMLElement | null;\n  mouthClipPath: SVGEllipseElement | null;\n  mouthShape: SVGEllipseElement | null;\n  mouthLine: SVGPathElement | null;\n  tongue: SVGPathElement | null;\n  leftEyeClosed: SVGPathElement | null;\n  rightEyeClosed: SVGPathElement | null;\n  leftEyeOpen: SVGCircleElement | null;\n  rightEyeOpen: SVGCircleElement | null;\n  leftBrow: SVGPathElement | null;\n  rightBrow: SVGPathElement | null;\n  glass: SVGGElement | null;\n  hpBarOutline: SVGRectElement | null;\n  hpBarFill: SVGRectElement | null;\n  handInner: SVGGraphicsElement | null;\n  handOuter: SVGGElement | null;\n  rotator: SVGGElement | null;\n};\n\nexport function selectEmojiNodes(root: HTMLElement): EmojiNodes {\n  return {\n    face: root,\n    mouthClipPath: root.querySelector<SVGEllipseElement>('[data-mouth-clip-path]'),\n    mouthShape: root.querySelector<SVGEllipseElement>('[data-mouth-shape]'),\n    mouthLine: root.querySelector<SVGPathElement>('[data-mouth-line]'),\n    tongue: root.querySelector<SVGPathElement>('[data-tongue]'),\n    leftEyeClosed: root.querySelector<SVGPathElement>('[data-left-eye-closed]'),\n    rightEyeClosed: root.querySelector<SVGPathElement>('[data-right-eye-closed]'),\n    leftEyeOpen: root.querySelector<SVGCircleElement>('[data-left-eye-open]'),\n    rightEyeOpen: root.querySelector<SVGCircleElement>('[data-right-eye-open]'),\n    leftBrow: root.querySelector<SVGPathElement>('[data-left-brow]'),\n    rightBrow: root.querySelector<SVGPathElement>('[data-right-brow]'),\n    glass: root.querySelector<SVGGElement>('[data-glass]'),\n    hpBarOutline: root.querySelector<SVGRectElement>('[data-emoji-hp-bar-outline]'),\n    hpBarFill: root.querySelector<SVGRectElement>('[data-emoji-hp-bar-fill]'),\n    handInner: root.querySelector<SVGGraphicsElement>('[data-emoji-hand]'),\n    handOuter: root.querySelector<SVGGElement>('[data-emoji-hand-outer]'),\n    rotator: root.querySelector<SVGGElement>('[data-emoji-rotator]'),\n  };\n}\n"],"names":["t","e","_typeof","Symbol","toPrimitive","r","call","TypeError","String","exports","this","callbacks","internal","initialValue","i","o","prototype","subscribe","push","indexOf","slice","concat","reset","key","get","set","length","enumerable","configurable","writable","Object","defineProperty","hasOwnProperty","Array","isArray","optionConfig","userOptions","n","prefix","s","a","suffix","l","u","strict","c","d","join","h","y","f","v","required","_","default","m","description","p","validator","b","g","k","A","console","warn","__esModule","solidClassnameArray","fromViewportWidth","pagerThreshold","hasToUpdateHash","scrollAdjustThreshold","scrollAdjustDelay","pagerLinkActiveClassname","test","isScrollHandled","debug","on","keys","every","includes","position","top","right","bottom","left","overflow","pointerEvents","touchAction","style","selector","parent","document","querySelectorAll","from","Math","max","min","window","scrollX","documentElement","scrollLeft","scrollY","scrollTop","x","offsetWidth","offsetHeight","Immerser","N","root","layer","solid","pagerLink","mask","maskInner","synchroHover","init","Set","bind","unbind","destroy","activeLayerChange","layersUpdate","_init","value","_mergeOptions","_options","_setDomNodes","_validateMarkup","_registerHandlersFromOptions","_readClassnamesFromMarkup","_validateSolidClassnameArray","_initSectionIds","_initLayerStateArray","_validateClassnames","_toggleBindOnResizeObserver","_setSizes","_addScrollAndResizeListeners","_emit","forEach","arguments","_handlers","apply","_report","message","error","docsHash","isWarning","Error","cause","_rootNode","querySelector","_selectors","_layerNodeArray","_solidNodeArray","dataset","immerserLayerConfig","JSON","parse","id","__immerserCustomId","_layerStateIndexById","_layerStateArray","map","beginEnter","beginLeave","endEnter","endLeave","layerBottom","layerTop","maskInnerNode","maskNode","layerNode","solidClassnames","_layerProgressArray","constructor","_unsubscribeToggleBindOnResize","_reactiveWindowWidth","_isBound","_windowHeight","innerHeight","_immerserTop","offsetTop","_immerserHeight","w","innerWidth","_onScroll","_handleScroll","addEventListener","_onResize","_handleResize","ResizeObserver","_resizeObserver","observe","_pagerLinkNodeArray","_originalSolidNodeArray","_maskNodeArray","_synchroHoverNodeArray","_isCustomMarkup","_customMaskNodeArray","_resizeFrameId","_scrollFrameId","_scrollAdjustTimerId","_reactiveActiveLayer","_reactiveSynchroHoverId","_unsubscribeRedrawingPager","_unsubscribeUpdatingHash","_unsubscribeActiveLayerChange","_unsubscribeSynchroHover","_onSynchroHoverMouseOver","_onSynchroHoverMouseOut","clear","_initCustomMarkup","createElement","immerserMask","immerserMaskInner","cloneNode","HTMLElement","__immerserCloned","appendChild","immerserSolid","classList","add","setAttribute","_detachOriginalSolidNodes","children","removeChild","href","split","immerserLayerIndex","toString","target","immerserSynchroHover","_drawPagerLinks","_drawHash","_drawSynchroHover","removeEventListener","removeAttribute","disconnect","transform","parseInt","remove","location","hash","abs","scrollTo","cancelAnimationFrame","requestAnimationFrame","_setLayersProgress","_draw","clearTimeout","setTimeout","_adjustScroll","render","_createMarkup","_initPagerLinks","_initHoverSynchro","_attachCallbacks","_detachCallbacks","_removeSyncroHoverListeners","_clearCustomSectionIds","_restoreOriginalSolidNodes","_cleanupClonedMarkup","_removeScrollAndResizeListeners","_resetInternalState","off","__immerserOriginalHandler","delete","module","define","Observable","ANIMATE_OPTION_CONFIG","duration","delay","draw","onComplete","onCancel","autoStart","__importDefault","Directions","Ogawa","options","lastTimestamp","performance","now","progress","delayBuffer","requestId","_isRunning","direction","Forward","_isComplete","onIsRunningChange","run","runReverse","Backward","pause","isComplete","isRunning","tick","q","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","loaded","__webpack_modules__","getter","definition","obj","prop","toStringTag","nmd","paths","pi","PI","closedEyeLeftBase","closedEyeLeftCenter","closedEyeRightBase","closedEyeRightCenter","renderOpenEye","node","radius","renderClosedEye","points","center","factor","scaled","_ref","buildCrossPath","renderBrow","scaleX","valueY","translateY","circleIn","sqrt","cubicInOut","renderEmojiFace","config","nodes","clipNode","shapeNode","ry","shiftX","translateX","mouthClipPath","mouthShape","mouthEllipse","mouthLine","mouthLineScaleX","mouthLineShiftX","tongue","valueX","shiftY","renderTongue","easeCubicInOut","tongueX","tongueY","leftEyeOpen","renderOpenEyeLeft","eyeOpenLeft","rightEyeOpen","renderOpenEyeRight","eyeOpenRight","leftEyeClosed","renderClosedEyeLeft","eyeClosedLeft","rightEyeClosed","renderClosedEyeRight","eyeClosedRight","leftBrow","renderLeftBrow","leftBrowScaleX","leftBrowY","rightBrow","renderRightBrow","rightBrowScaleX","rightBrowY","glass","easeCircleIn","rotate","renderGlasses","glasses","handInner","handOuter","innerNode","outerNode","renderHand","hand","layerConfigs","deadConfig","mixConfigByProgress","layersProgress","configs","reduce","acc","index","_layersProgress$index","renderHpBar","currentHp","maxHp","opacity","outline","fill","ratio","nextWidth","_colorForRatio","clamp","green","yellow","red","lerpColor","colorForRatio","parentElement","to","round","requiredPhrases","randomPhrases","initSulking","phrases","getAttribute","phrasesRu","phrasesEn","sulkingState","sulkNodes","sulkAnimation","sulkFadeAnimation","moveCounter","sulkingListeners","triggerSulkAnimation","phrase","_sulkingState$sulkAni","_sulkingState$sulkFad","charsToShow","floor","text","sulkNode","textContent","trigger","requiredPhrase","shift","onMouseMove","onMouseLeave","onClick","_sulkingState$sulkAni2","_sulkingState$sulkFad2","randomIndex","random","randomPhrase","splice","className","append","immerserInstance","logo","pager","language","menu","about","immerser","log","activeIndex","_initEmojiAnimation","MaxHP","emojiState","hp","hpRegen","regenAnimation","hpBarAnimation","isDead","lastConfig","renderHpBars","hpBarOutline","hpBarFill","faceNodes","handleLayersUpdate","face","rotator","spinAnimation","easedProgress","cos","angle","faceNodeListeners","faceNode","onMouseDown","stopPropagation","onMouseUp","damage","prevHp","_emojiState$regenAnim3","hasMissingHp","isHit","_emojiState$regenAnim","missingHp","startHp","_emojiState$regenAnim2","_emojiState$hpBarAnim","_emojiState$hpBarAnim2","startDelayedRegen","fadeToDeadAnimation","mixed","buryAnimation","_emojiState$regenAnim4","_emojiState$hpBarAnim3","_ref2","initEmojiAnimation","highlighterNodeList","highlighterAnimationClassname","highlight","highlighterNode","isBound","targetSelector","highlighter","targetNode","isHighlighting","timerId","rulersNode","getElementById","altKey","code","keyCode","toggle"],"ignoreList":[],"sourceRoot":""}