{"version":3,"file":"main.js","mappings":"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","sources":["webpack://immerser/Immerser/webpack/universalModuleDefinition","webpack://immerser/Immerser/node_modules/@dubaua/observable/dist/observable.min.js","webpack://immerser/Immerser/node_modules/@dubaua/merge-options/dist/merge-options.min.js","webpack://immerser/Immerser/webpack/bootstrap","webpack://immerser/Immerser/webpack/runtime/compat get default export","webpack://immerser/Immerser/webpack/runtime/define property getters","webpack://immerser/Immerser/webpack/runtime/hasOwnProperty shorthand","webpack://immerser/Immerser/src/options.ts","webpack://immerser/Immerser/src/utils.ts","webpack://immerser/Immerser/src/immerser.ts","webpack://immerser/./node_modules/@dubaua/observable/dist/observable.min.js","webpack://immerser/./node_modules/ogawa/dist/ogawa.min.js","webpack://immerser/webpack/bootstrap","webpack://immerser/webpack/runtime/compat get default export","webpack://immerser/webpack/runtime/define property getters","webpack://immerser/webpack/runtime/hasOwnProperty shorthand","webpack://immerser/webpack/runtime/node module decorator","webpack://immerser/./node_modules/d3-ease/src/sin.js","webpack://immerser/./example/emoji/render-open-eye.ts","webpack://immerser/./example/emoji/paths.ts","webpack://immerser/./example/emoji/render-left-brow.ts","webpack://immerser/./node_modules/d3-ease/src/circle.js","webpack://immerser/./node_modules/d3-ease/src/cubic.js","webpack://immerser/./example/emoji/render-emoji-face.ts","webpack://immerser/./example/emoji/render-mouth-ellipse.ts","webpack://immerser/./example/emoji/render-tongue.ts","webpack://immerser/./example/emoji/render-glasses.ts","webpack://immerser/./example/emoji/render-hand.ts","webpack://immerser/./example/emoji/config.ts","webpack://immerser/./example/emoji/mix-config-by-progress.ts","webpack://immerser/./example/emoji/render-hp-bar.ts","webpack://immerser/./example/emoji/animation.ts","webpack://immerser/./example/main.ts","webpack://immerser/./example/emoji/select-emoji-nodes.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Immerser\"] = factory();\n\telse\n\t\troot[\"Immerser\"] = factory();\n})(this, () => {\nreturn ","\"use strict\";function t(t){var e=function(t){if(\"object\"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,\"string\");if(\"object\"!=typeof i)return i;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(t)}(t);return\"symbol\"==typeof e?e:e+\"\"}module.exports=/*#__PURE__*/function(){function Observable(t){this.callbacks=[],this.internal=t,this.initialValue=t}var e,i,r=Observable.prototype;return r.subscribe=function(t){var e=this;if(\"function\"!=typeof t)throw new TypeError(\"[createObservable]: expected callback to be a function.\");return this.callbacks.push(t),function(){var i=e.callbacks.indexOf(t);e.callbacks=e.callbacks.slice(0,i).concat(e.callbacks.slice(i+1))}},r.reset=function(){this.callbacks=[],this.internal=this.initialValue},e=Observable,(i=[{key:\"value\",get:function(){return this.internal},set:function(t){if(t!==this.internal){var e=this.internal;this.internal=t;for(var i=0;i<this.callbacks.length;i++)this.callbacks[i](this.internal,e)}}}])&&function(e,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,t(n.key),n)}}(e.prototype,i),Object.defineProperty(e,\"prototype\",{writable:!1}),e}();\n//# sourceMappingURL=observable.min.js.map\n","\"use strict\";function o(o,e){return Object.prototype.hasOwnProperty.call(o,e)}function e(o){return null!==o&&\"object\"==typeof o&&!1===Array.isArray(o)}function t(e){var t=e.optionConfig,i=e.userOptions,r=void 0===i?{}:i,n=e.prefix,a=void 0===n?\"\":n,f=e.suffix,u=void 0===f?\"\":f,p=e.strict,d=void 0===p||p,c=function(o){return[a,o,u].join(\" \")},s={};for(var l in t)if(o(t,l)){var g=t[l],v=g.required,y=g.default,b=g.description,x=g.validator,h=r[l],q=!!o(g,\"required\")&&(\"function\"==typeof v?v(r):v),E=o(r,l),w=x(h,r);if(q){if(!E)throw new TypeError(c(l+\" is required.\"));if(!w)throw new TypeError(c(\"Expected \"+l+\" to be \"+b+\", got \"+typeof h+\" \"+h+\".\"));s[l]=h}else if(s[l]=y,E)if(w)s[l]=h;else{if(d)throw new TypeError(c(\"Expected \"+l+\" to be \"+b+\", got \"+typeof h+\" \"+h+\".\"));console.warn(c(\"Expected \"+l+\" to be \"+b+\", got \"+typeof h+\" \"+h+\". Fallback to default value \"+y+\".\"))}}return s}var i=\"[mergeOptions]:\",r=\"\\nCheck out documentation https://github.com/dubaua/merge-options#parameters-and-return\";function n(o){throw new TypeError([i,o,r].join(\" \"))}var a={optionConfig:{required:!0,validator:function(t){for(var i in t)if(o(t,i)){var r=t[i];if(e(r)||n(\"Expected optionConfig.\"+i+\" to be an object with declarative option configuration, got \"+typeof r+\" \"+r+\".\"),o(r,\"required\")){var a=r.required,f=typeof a;\"boolean\"!==f&&\"function\"!==f&&n(\"Expected optionConfig.\"+i+\".required to be either boolean or function, got \"+typeof a+\" \"+a+\".\")}else o(r,\"default\")||n(\"Expected optionConfig.\"+i+\" to either have required or default value.\");if(o(r,\"default\")||o(r,\"required\")||n(\"Expected optionConfig.\"+i+\" to either have required or default value.\"),o(r,\"description\")){var u=r.description;\"string\"!=typeof r.description&&n(\"Expected optionConfig.\"+i+\".description to be a string, got \"+typeof u+\" \"+u+\".\")}else n(\"Missing description on optionConfig.\"+i+\" config.\");if(o(r,\"validator\")){var p=r.validator;\"function\"!=typeof r.validator&&n(\"Expected optionConfig.\"+i+\".validator to be a function, got \"+typeof p+\" \"+p+\".\")}else n(\"Missing validator on optionConfig.\"+i+\" config.\")}return e(t)},description:\"an object with declarative option configuration\"},userOptions:{required:!1,default:{},validator:e,description:\"an object\"},prefix:{required:!1,default:\"\",validator:function(o){return\"string\"==typeof o},description:\"a string\"},suffix:{required:!1,default:\"\",validator:function(o){return\"string\"==typeof o},description:\"a string\"},strict:{required:!1,default:!0,validator:function(o){return\"boolean\"==typeof o},description:\"a boolean\"}};module.exports=function(o){var e=t({optionConfig:a,userOptions:o,prefix:i,suffix:r});return t(e)};\n//# sourceMappingURL=merge-options.min.js.map\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","import type { OptionConfig } from '@dubaua/merge-options';\nimport type { EventName, Options } from './types';\n\nconst CLASSNAME_REGEX = /^[a-z_-][a-z\\d_-]*$/i;\n\n/** @public All available immerser event names. */\nexport const EVENT_NAMES = ['init', 'bind', 'unbind', 'destroy', 'activeLayerChange', 'layersUpdate'] as const;\n\nfunction classnameValidator(str: string): boolean {\n  return typeof str === 'string' && str !== '' && CLASSNAME_REGEX.test(str);\n}\n\nfunction onOptionValidator(on?: Options['on']): boolean {\n  if (on === undefined) {\n    return true;\n  }\n  if (!on || typeof on !== 'object' || Array.isArray(on)) {\n    return false;\n  }\n  return Object.keys(on).every(\n    (eventName) =>\n      EVENT_NAMES.includes(eventName as EventName) &&\n      (on as Record<string, unknown>)[eventName] !== undefined &&\n      typeof (on as Record<string, unknown>)[eventName] === 'function',\n  );\n}\n\nexport const OPTION_CONFIG: OptionConfig<Options> = {\n  solidClassnameArray: {\n    default: [],\n    description: 'non empty array of objects',\n    validator: (x) => Array.isArray(x) && x.length !== 0,\n  },\n  fromViewportWidth: {\n    default: 0,\n    description: 'a natural number',\n    validator: (x) => typeof x === 'number' && 0 <= x && x % 1 === 0,\n  },\n  pagerThreshold: {\n    default: 0.5,\n    description: 'a number between 0 and 1',\n    validator: (x) => typeof x === 'number' && 0 <= x && x <= 1,\n  },\n  hasToUpdateHash: {\n    default: false,\n    description: 'a boolean',\n    validator: (x) => typeof x === 'boolean',\n  },\n  scrollAdjustThreshold: {\n    default: 0,\n    description: 'a number greater than or equal to 0',\n    validator: (x) => typeof x === 'number' && x >= 0,\n  },\n  scrollAdjustDelay: {\n    default: 600,\n    description: 'a number greater than or equal to 300',\n    validator: (x) => typeof x === 'number' && x >= 300,\n  },\n  pagerLinkActiveClassname: {\n    default: 'pager-link-active',\n    description: 'valid non empty classname string',\n    validator: classnameValidator,\n  },\n  isScrollHandled: {\n    default: true,\n    description: 'a boolean',\n    validator: (x) => typeof x === 'boolean',\n  },\n  on: {\n    default: {},\n    description: 'an object containing event handlers',\n    validator: onOptionValidator,\n  },\n};\n\nexport const MESSAGE_PREFIX = '[immerser:]';\n\nexport const CROPPED_FULL_ABSOLUTE_STYLES: Record<string, string> = {\n  position: 'absolute',\n  top: '0',\n  right: '0',\n  bottom: '0',\n  left: '0',\n  overflow: 'hidden',\n};\n\nexport const NOT_INTERACTIVE_STYLES: Record<string, string> = {\n  pointerEvents: 'none',\n  touchAction: 'none',\n};\n\nexport const INTERACTIVE_STYLES: Record<string, string> = {\n  pointerEvents: 'all',\n  touchAction: 'auto',\n};\n","import { MESSAGE_PREFIX } from './options';\n\nexport function bindStyles(node: HTMLElement, styles: { [key: string]: string }): void {\n  for (const rule in styles) {\n    (node.style as any)[rule] = styles[rule];\n  }\n}\n\nexport function forEachNode<T extends Element>(\n  nodeList: ArrayLike<T>,\n  callback: (node: T, index: number, nodeList: ArrayLike<T>) => void,\n): void {\n  for (let index = 0; index < nodeList.length; index++) {\n    const node = nodeList[index];\n    callback(node, index, nodeList);\n  }\n}\n\nexport function getNodeArray<T extends Element = HTMLElement>({\n  selector,\n  parent = document,\n}: {\n  selector: string;\n  parent?: Document | Element | null;\n}): T[] {\n  if (!parent) {\n    return [];\n  }\n  const nodeList = parent.querySelectorAll<T>(selector);\n  return Array.from(nodeList);\n}\n\nexport function showMessageWithDocumentationLink({\n  message,\n  error,\n  isWarning = false,\n  docsHash = '',\n}: {\n  message: string;\n  error?: unknown;\n  isWarning?: boolean;\n  docsHash?: string;\n}): void {\n  const resultMessage = `${MESSAGE_PREFIX} ${message} \\nCheck out documentation https://github.com/dubaua/immerser${docsHash}`;\n  if (isWarning) {\n    if (error !== undefined) {\n      console.warn(resultMessage, error);\n    } else {\n      console.warn(resultMessage);\n    }\n  } else {\n    throw new Error(resultMessage, { cause: error });\n  }\n}\n\nexport function isEmpty(obj?: Record<string, any> | null): boolean {\n  if (!obj) {\n    return true;\n  }\n  return Object.keys(obj).length === 0 && obj.constructor === Object;\n}\n\nexport function limit(number: number, min: number, max: number): number {\n  return Math.max(Math.min(number, max), min);\n}\n\nexport function getLastScrollPosition(): { x: number; y: number } {\n  const scrollX = window.scrollX || document.documentElement.scrollLeft;\n  const scrollY = window.scrollY || document.documentElement.scrollTop;\n  // limit scroll position between 0 and document height in case of iOS overflow scroll\n  return {\n    x: limit(scrollX, 0, document.documentElement.offsetWidth),\n    y: limit(scrollY, 0, document.documentElement.offsetHeight),\n  };\n}\n\ntype WrappedOnceHandler<F extends (...args: any[]) => void> = F & {\n  __immerserOriginalHandler?: F;\n};\n\nexport function wrapOnceHandler<F extends(...args: any[]) => void>(\n  original: F,\n  wrapper: (...args: Parameters<F>) => void,\n): F {\n  const wrapped = wrapper as WrappedOnceHandler<F>;\n  wrapped.__immerserOriginalHandler = original;\n  return wrapped;\n}\n\nexport function getOriginalHandler<F extends(...args: any[]) => void>(handler: F): F | undefined {\n  return (handler as WrappedOnceHandler<F>).__immerserOriginalHandler;\n}\n","import mergeOptions from '@dubaua/merge-options';\nimport Observable from '@dubaua/observable';\nimport {\n  CROPPED_FULL_ABSOLUTE_STYLES,\n  EVENT_NAMES,\n  INTERACTIVE_STYLES,\n  MESSAGE_PREFIX,\n  NOT_INTERACTIVE_STYLES,\n  OPTION_CONFIG,\n} from './options';\nimport {\n  bindStyles,\n  forEachNode,\n  getLastScrollPosition,\n  getNodeArray,\n  getOriginalHandler,\n  isEmpty,\n  showMessageWithDocumentationLink,\n  wrapOnceHandler,\n} from './utils';\nimport type {\n  ActiveLayerChangeHandler,\n  BaseHandler,\n  EventHandlers,\n  EventName,\n  HandlerArgs,\n  HandlerByEventName,\n  LayerState,\n  LayersUpdateHandler,\n  Options,\n  SolidClassnames,\n} from './types';\n\n/** @public Main Immerser controller orchestrating markup cloning and scroll-driven transitions. */\nexport default class Immerser {\n  private _options: Options = {} as Options;\n  private _selectors = {\n    root: '[data-immerser]',\n    layer: '[data-immerser-layer]',\n    solid: '[data-immerser-solid]',\n    pagerLink: '[data-immerser-pager-link]',\n    mask: '[data-immerser-mask]',\n    maskInner: '[data-immerser-mask-inner]',\n    synchroHover: '[data-immerser-synchro-hover]',\n  };\n  private _layerStateArray: LayerState[] = [];\n  private _layerStateIndexById: Record<string, number> = {};\n  private _isBound = false;\n  private _rootNode: HTMLElement | null = null;\n  private _layerNodeArray: HTMLElement[] = [];\n  private _solidNodeArray: HTMLElement[] = [];\n  private _pagerLinkNodeArray: HTMLElement[] = [];\n  private _originalSolidNodeArray: HTMLElement[] = [];\n  private _maskNodeArray: HTMLElement[] = [];\n  private _synchroHoverNodeArray: HTMLElement[] = [];\n  private _isCustomMarkup = false;\n  private _customMaskNodeArray: HTMLElement[] = [];\n  private _windowHeight = 0;\n  private _immerserTop = 0;\n  private _immerserHeight = 0;\n  private _resizeFrameId: number | null = null;\n  private _resizeObserver: ResizeObserver | null = null;\n  private _scrollFrameId: number | null = null;\n  private _scrollAdjustTimerId: ReturnType<typeof setTimeout> | null = null;\n  private _reactiveActiveLayer = new Observable<number>(-1);\n  private _reactiveWindowWidth = new Observable<number>(-1);\n  private _reactiveSynchroHoverId = new Observable<string | null>(null);\n  private _layerProgressArray: number[] = [];\n  private _unsubscribeRedrawingPager: (() => void) | null = null;\n  private _unsubscribeUpdatingHash: (() => void) | null = null;\n  private _unsubscribeActiveLayerChange: (() => void) | null = null;\n  private _unsubscribeSynchroHover: (() => void) | null = null;\n  private _unsubscribeToggleBindOnResize: (() => void) | null = null;\n  private _handlers: Record<EventName, Set<HandlerByEventName[EventName]>> = {\n    init: new Set(),\n    bind: new Set(),\n    unbind: new Set(),\n    destroy: new Set(),\n    activeLayerChange: new Set(),\n    layersUpdate: new Set(),\n  };\n  private _onResize: (() => void) | null = null;\n  private _onScroll: (() => void) | null = null;\n  private _onSynchroHoverMouseOver: ((e: MouseEvent) => void) | null = null;\n  private _onSynchroHoverMouseOut: (() => void) | null = null;\n\n  /**\n   * Creates immerser instance and immediately runs setup with optional user options.\n   * @param userOptions - overrides for defaults defined in OPTION_CONFIG if pass validation\n   */\n  constructor(userOptions?: Partial<Options>) {\n    this._init(userOptions);\n  }\n\n  /** Bootstraps nodes, options, state, listeners and emits init event. */\n  private _init(userOptions?: Partial<Options>): void {\n    this._setDomNodes();\n    this._validateMarkup();\n    this._mergeOptions(userOptions);\n    this._registerHandlersFromOptions();\n    this._readClassnamesFromMarkup();\n    this._validateSolidClassnameArray();\n    this._initSectionIds();\n    this._initLayerStateArray();\n    this._validateClassnames();\n    this._toggleBindOnResizeObserver();\n    this._setSizes();\n    this._addScrollAndResizeListeners();\n    this._emit('init', this);\n  }\n\n  /** Saves event handlers passed via options into internal registry. */\n  private _registerHandlersFromOptions(): void {\n    if (!this._options.on) {\n      return;\n    }\n    EVENT_NAMES.forEach((eventName) => {\n      const handler = this._options.on?.[eventName];\n      if (typeof handler === 'function') {\n        this.on(eventName, handler);\n      }\n    });\n  }\n\n  /** Executes registered event handlers with provided arguments. */\n  private _emit<K extends EventName>(eventName: K, ...args: HandlerArgs<K>): void {\n    const handlerSet = this._handlers[eventName];\n    handlerSet.forEach((handler: HandlerByEventName[K]) => {\n      try {\n        handler.apply(undefined, args);\n      } catch (error) {\n        if (process.env.NODE_ENV !== 'production') {\n          showMessageWithDocumentationLink({\n            message: `handler for ${eventName} event failed`,\n            error,\n            docsHash: '#events',\n          });\n        }\n      }\n    });\n  }\n\n  /** Collects root, layer and solid nodes from DOM. */\n  private _setDomNodes(): void {\n    this._rootNode = document.querySelector<HTMLElement>(this._selectors.root);\n    this._layerNodeArray = getNodeArray({ selector: this._selectors.layer });\n    this._solidNodeArray = getNodeArray({ selector: this._selectors.solid, parent: this._rootNode });\n  }\n\n  /** Validates required markup presence and reports descriptive errors. */\n  private _validateMarkup(): void {\n    if (!this._rootNode) {\n      showMessageWithDocumentationLink({\n        message: 'root node not found.',\n        docsHash: '#prepare-your-markup',\n      });\n    }\n    if (this._layerNodeArray.length === 0) {\n      showMessageWithDocumentationLink({\n        message: 'layer nodes not found.',\n        docsHash: '#prepare-your-markup',\n      });\n    }\n    if (this._solidNodeArray.length === 0) {\n      showMessageWithDocumentationLink({\n        message: 'solid nodes not found.',\n        docsHash: '#prepare-your-markup',\n      });\n    }\n  }\n\n  /** Merges user options with defaults and attaches helper metadata to messages. */\n  private _mergeOptions(userOptions?: Partial<Options>): void {\n    this._options = mergeOptions({\n      optionConfig: OPTION_CONFIG,\n      userOptions,\n      prefix: MESSAGE_PREFIX,\n      suffix: '\\nCheck out documentation https://github.com/dubaua/immerser#options',\n    }) as Options;\n  }\n\n  /** Reads per-layer classname configs from data attributes if provided. */\n  private _readClassnamesFromMarkup(): void {\n    this._layerNodeArray.forEach((layerNode, layerIndex) => {\n      if (layerNode.dataset.immerserLayerConfig) {\n        try {\n          this._options.solidClassnameArray[layerIndex] = JSON.parse(layerNode.dataset.immerserLayerConfig);\n        } catch (error) {\n          showMessageWithDocumentationLink({\n            message: 'Failed to parse JSON classname configuration.',\n            error,\n            docsHash: '#options',\n          });\n        }\n      }\n    });\n  }\n\n  /** Ensures classname configuration length matches layers count. */\n  private _validateSolidClassnameArray(): void {\n    const layerCount = this._layerNodeArray.length;\n    const classnamesCount = this._options.solidClassnameArray.length;\n    if (classnamesCount !== layerCount) {\n      showMessageWithDocumentationLink({\n        message: 'solidClassnameArray length differs from count of layers',\n        docsHash: '#options',\n      });\n    }\n  }\n\n  /** Assigns ids to layers when missing and records their indexes. */\n  private _initSectionIds(): void {\n    this._layerNodeArray.forEach((layerNode, layerIndex) => {\n      let id = layerNode.id;\n      if (!id) {\n        id = `immerser-section-${layerIndex}`;\n        layerNode.id = id;\n        (layerNode as any).__immerserCustomId = true;\n      }\n      this._layerStateIndexById[id] = layerIndex;\n    });\n  }\n\n  /** Creates initial LayerState entries for every layer. */\n  private _initLayerStateArray(): void {\n    this._layerStateArray = this._layerNodeArray.map((layerNode, layerIndex) => {\n      const solidClassnames = this._options.solidClassnameArray[layerIndex];\n      const { id } = layerNode;\n      return {\n        beginEnter: 0,\n        beginLeave: 0,\n        endEnter: 0,\n        endLeave: 0,\n        id,\n        layerBottom: 0,\n        layerTop: 0,\n        maskInnerNode: null,\n        maskNode: null,\n        layerNode: layerNode,\n        solidClassnames,\n      } as LayerState;\n    });\n    this._layerProgressArray = this._layerNodeArray.map(() => 0);\n  }\n\n  /** Verifies solid classnames are configured; otherwise warns via showError. */\n  private _validateClassnames(): void {\n    const noClassnameConfigPassed = this._layerStateArray.every((state) => isEmpty(state.solidClassnames));\n    if (noClassnameConfigPassed) {\n      showMessageWithDocumentationLink({\n        message: 'immerser will do nothing without solid classname configuration.',\n        docsHash: '#prepare-your-markup',\n      });\n    }\n  }\n\n  /** Subscribes to window width changes to bind/unbind based on breakpoint. */\n  private _toggleBindOnResizeObserver(): void {\n    this._unsubscribeToggleBindOnResize = this._reactiveWindowWidth.subscribe((nextWindowWidth) => {\n      if (nextWindowWidth >= this._options.fromViewportWidth) {\n        if (!this._isBound) {\n          this.bind();\n        }\n      } else if (this._isBound) {\n        this.unbind();\n      }\n    });\n  }\n\n  /** Recalculates sizes and thresholds for each layer and updates window width observable. */\n  private _setSizes(): void {\n    this._windowHeight = window.innerHeight;\n    this._immerserTop = (this._rootNode as HTMLElement).offsetTop;\n    this._immerserHeight = (this._rootNode as HTMLElement).offsetHeight;\n\n    this._layerStateArray = this._layerStateArray.map((state) => {\n      const layerTop = state.layerNode.offsetTop;\n      const layerBottom = layerTop + state.layerNode.offsetHeight;\n\n      const endEnter = layerTop - this._immerserTop;\n      const beginEnter = endEnter - this._immerserHeight;\n      const endLeave = layerBottom - this._immerserTop;\n      const beginLeave = endLeave - this._immerserHeight;\n\n      return {\n        ...state,\n        layerTop,\n        layerBottom,\n        beginEnter,\n        endEnter,\n        beginLeave,\n        endLeave,\n      } as LayerState;\n    });\n\n    this._reactiveWindowWidth.value = window.innerWidth;\n  }\n\n  /** Attaches scroll and resize listeners respecting isScrollHandled flag. */\n  private _addScrollAndResizeListeners(): void {\n    if (this._options.isScrollHandled) {\n      this._onScroll = this._handleScroll.bind(this);\n      window.addEventListener('scroll', this._onScroll, false);\n    }\n    this._onResize = this._handleResize.bind(this);\n    window.addEventListener('resize', this._onResize, false);\n    window.addEventListener('orientationchange', this._onResize, false);\n    if (typeof ResizeObserver !== 'undefined') {\n      this._resizeObserver = new ResizeObserver(this._onResize);\n      this._resizeObserver.observe(this._rootNode);\n    }\n  }\n\n  /** Clears internal caches, observables and references after destroy. */\n  private _resetInternalState(): void {\n    this._layerStateArray = [];\n    this._layerStateIndexById = {};\n    this._isBound = false;\n    this._rootNode = null;\n    this._layerNodeArray = [];\n    this._solidNodeArray = [];\n    this._pagerLinkNodeArray = [];\n    this._originalSolidNodeArray = [];\n    this._maskNodeArray = [];\n    this._synchroHoverNodeArray = [];\n    this._isCustomMarkup = false;\n    this._customMaskNodeArray = [];\n    this._windowHeight = 0;\n    this._immerserTop = 0;\n    this._immerserHeight = 0;\n    this._resizeFrameId = null;\n    this._resizeObserver = null;\n    this._scrollFrameId = null;\n    this._scrollAdjustTimerId = null;\n    this._reactiveActiveLayer.reset();\n    this._reactiveWindowWidth.reset();\n    this._reactiveSynchroHoverId.reset();\n    this._layerProgressArray = [];\n    this._unsubscribeRedrawingPager = null;\n    this._unsubscribeUpdatingHash = null;\n    this._unsubscribeActiveLayerChange = null;\n    this._unsubscribeSynchroHover = null;\n    this._unsubscribeToggleBindOnResize = null;\n    this._onResize = null;\n    this._onScroll = null;\n    this._onSynchroHoverMouseOver = null;\n    this._onSynchroHoverMouseOut = null;\n    EVENT_NAMES.forEach((eventName) => this._handlers[eventName].clear());\n  }\n\n  /** Builds masks, clones solids, applies classes and mounts generated markup. */\n  private _createMarkup(): void {\n    bindStyles(this._rootNode as HTMLElement, NOT_INTERACTIVE_STYLES);\n    this._initCustomMarkup();\n    this._originalSolidNodeArray = getNodeArray({ selector: this._selectors.solid, parent: this._rootNode });\n\n    this._layerStateArray = this._layerStateArray.map((state, stateIndex) => {\n      // create or assign existing markup, bind styles\n      const maskNode = this._isCustomMarkup ? this._customMaskNodeArray[stateIndex] : document.createElement('div');\n      bindStyles(maskNode, CROPPED_FULL_ABSOLUTE_STYLES);\n\n      let maskInnerNode = this._isCustomMarkup\n        ? maskNode.querySelector<HTMLElement>(this._selectors.maskInner)\n        : document.createElement('div');\n      if (!maskInnerNode) {\n        maskInnerNode = document.createElement('div');\n      }\n      bindStyles(maskInnerNode, CROPPED_FULL_ABSOLUTE_STYLES);\n\n      // mark created masks with data attributes\n      if (!this._isCustomMarkup) {\n        maskNode.dataset.immerserMask = '';\n        maskInnerNode.dataset.immerserMaskInner = '';\n      }\n\n      // clone solids to innerMask\n      this._originalSolidNodeArray.forEach((childNode) => {\n        const clonedChildNode = childNode.cloneNode(true);\n        if (clonedChildNode instanceof HTMLElement) {\n          bindStyles(clonedChildNode, INTERACTIVE_STYLES);\n          (clonedChildNode as any).__immerserCloned = true;\n          maskInnerNode.appendChild(clonedChildNode);\n        }\n      });\n\n      // assign class modifiers to cloned solids\n      const clonedSolidNodeList = getNodeArray<HTMLElement>({\n        selector: this._selectors.solid,\n        parent: maskInnerNode,\n      });\n      forEachNode(clonedSolidNodeList, (clonedSolidNode) => {\n        const solidId = clonedSolidNode.dataset.immerserSolid;\n        if (state.solidClassnames && Object.prototype.hasOwnProperty.call(state.solidClassnames, solidId)) {\n          clonedSolidNode.classList.add(state.solidClassnames[solidId]);\n        }\n      });\n\n      // a11y\n      if (stateIndex !== 0) {\n        maskNode.setAttribute('aria-hidden', 'true');\n      }\n\n      maskNode.appendChild(maskInnerNode);\n      this._rootNode.appendChild(maskNode);\n\n      this._maskNodeArray.push(maskNode);\n\n      return { ...state, maskNode, maskInnerNode };\n    });\n\n    this._detachOriginalSolidNodes();\n  }\n\n  /** Validates and prepares custom masks, binding interactive styles to their children. */\n  private _initCustomMarkup(): void {\n    this._customMaskNodeArray = getNodeArray({ selector: this._selectors.mask, parent: this._rootNode });\n    this._isCustomMarkup = this._customMaskNodeArray.length === this._layerStateArray.length;\n\n    if (this._customMaskNodeArray.length > 0 && !this._isCustomMarkup) {\n      showMessageWithDocumentationLink({\n        message: `You're trying use custom markup, but count of your immerser masks doesn't equal layers count.`,\n        isWarning: true,\n        docsHash: '#cloning-event-listeners',\n      });\n    }\n\n    this._customMaskNodeArray.forEach((customMaskNode) => {\n      const maskInnerNode = customMaskNode.querySelector<HTMLElement>(this._selectors.maskInner);\n      if (!maskInnerNode) {\n        return;\n      }\n      Array.from(maskInnerNode.children).forEach((child) => {\n        if (child instanceof HTMLElement) {\n          bindStyles(child, INTERACTIVE_STYLES);\n        }\n      });\n    });\n  }\n\n  /** Removes original solid nodes from root after clones are in place. */\n  private _detachOriginalSolidNodes(): void {\n    if (!this._rootNode) {\n      return;\n    }\n    this._originalSolidNodeArray.forEach((childNode) => {\n      this._rootNode.removeChild(childNode);\n    });\n  }\n\n  /** Parses pager links and maps them to layer indexes using href hash. */\n  private _initPagerLinks(): void {\n    this._pagerLinkNodeArray = getNodeArray({ selector: this._selectors.pagerLink, parent: this._rootNode });\n    this._pagerLinkNodeArray.forEach((pagerLinkNode) => {\n      const { href } = pagerLinkNode as HTMLAnchorElement;\n      if (href) {\n        const layerId = href.split('#')[1];\n        if (layerId) {\n          const layerIndex = this._layerStateIndexById[layerId];\n          pagerLinkNode.dataset.immerserLayerIndex = layerIndex.toString();\n        }\n      }\n    });\n  }\n\n  /** Sets up synchro hover listeners and reactive updates. */\n  private _initHoverSynchro(): void {\n    this._synchroHoverNodeArray = getNodeArray({ selector: this._selectors.synchroHover, parent: this._rootNode });\n\n    this._onSynchroHoverMouseOver = (e: MouseEvent): void => {\n      const target = e.target as HTMLElement;\n      const synchroHoverId = target.dataset.immerserSynchroHover;\n      this._reactiveSynchroHoverId.value = synchroHoverId;\n    };\n\n    this._onSynchroHoverMouseOut = (): void => {\n      this._reactiveSynchroHoverId.value = null;\n    };\n\n    this._synchroHoverNodeArray.forEach((synchroHoverNode) => {\n      synchroHoverNode.addEventListener('mouseover', this._onSynchroHoverMouseOver!);\n      synchroHoverNode.addEventListener('mouseout', this._onSynchroHoverMouseOut!);\n    });\n  }\n\n  /** Subscribes to reactive values to redraw pager, hash, callbacks and hover. */\n  private _attachCallbacks(): void {\n    if (this._pagerLinkNodeArray.length > 0) {\n      this._unsubscribeRedrawingPager = this._reactiveActiveLayer.subscribe(this._drawPagerLinks.bind(this));\n    }\n\n    if (this._options.hasToUpdateHash) {\n      this._unsubscribeUpdatingHash = this._reactiveActiveLayer.subscribe(this._drawHash.bind(this));\n    }\n\n    this._unsubscribeActiveLayerChange = this._reactiveActiveLayer.subscribe((nextIndex) => {\n      this._emit('activeLayerChange', nextIndex, this);\n    });\n\n    if (this._synchroHoverNodeArray.length > 0) {\n      this._unsubscribeSynchroHover = this._reactiveSynchroHoverId.subscribe(this._drawSynchroHover.bind(this));\n    }\n  }\n\n  /** Unsubscribes from all reactive callbacks. */\n  private _detachCallbacks(): void {\n    this._unsubscribeRedrawingPager?.();\n    this._unsubscribeUpdatingHash?.();\n    this._unsubscribeActiveLayerChange?.();\n    this._unsubscribeSynchroHover?.();\n  }\n\n  /** Removes hover listeners from synchro hover nodes. */\n  private _removeSyncroHoverListeners(): void {\n    this._synchroHoverNodeArray.forEach((synchroHoverNode) => {\n      synchroHoverNode.removeEventListener('mouseover', this._onSynchroHoverMouseOver!);\n      synchroHoverNode.removeEventListener('mouseout', this._onSynchroHoverMouseOut!);\n    });\n  }\n\n  /** Drops autogenerated ids from layers on teardown. */\n  private _clearCustomSectionIds(): void {\n    this._layerStateArray.forEach((state) => {\n      if ((state.layerNode as any).__immerserCustomId) {\n        state.layerNode.removeAttribute('id');\n      }\n    });\n  }\n\n  /** Restores original solid nodes back into the root node. */\n  private _restoreOriginalSolidNodes(): void {\n    if (!this._rootNode) {\n      return;\n    }\n    this._originalSolidNodeArray.forEach((childNode) => {\n      this._rootNode.appendChild(childNode);\n    });\n  }\n\n  /** Removes cloned markup or cleans up custom masks when unbinding. */\n  private _cleanupClonedMarkup(): void {\n    this._maskNodeArray.forEach((immerserMaskNode) => {\n      if (this._isCustomMarkup) {\n        immerserMaskNode.removeAttribute('style');\n        immerserMaskNode.removeAttribute('aria-hidden');\n        const immerserMaskInnerNode = immerserMaskNode.querySelector<HTMLElement>(this._selectors.maskInner);\n        if (!immerserMaskInnerNode) {\n          return;\n        }\n        immerserMaskInnerNode.removeAttribute('style');\n        const clonedSolidNodeArray = getNodeArray({ selector: this._selectors.solid, parent: immerserMaskInnerNode });\n        clonedSolidNodeArray.forEach((clonedSolidNode) => {\n          if ((clonedSolidNode as any).__immerserCloned) {\n            immerserMaskInnerNode.removeChild(clonedSolidNode);\n          }\n        });\n      } else {\n        if (this._rootNode) {\n          this._rootNode.removeChild(immerserMaskNode);\n        }\n      }\n    });\n  }\n\n  private _removeScrollAndResizeListeners(): void {\n    if (this._options.isScrollHandled) {\n      window.removeEventListener('scroll', this._onScroll!, false);\n    }\n    window.removeEventListener('resize', this._onResize!, false);\n    window.removeEventListener('orientationchange', this._onResize!, false);\n    this._resizeObserver?.disconnect();\n  }\n\n  /** Calculates per-layer progress (0..1) based on which part of screen the layer overlaps. */\n  private _setLayersProgress(scrollY?: number): void {\n    const y = scrollY ?? getLastScrollPosition().y;\n    const viewportBottom = y + this._windowHeight;\n\n    this._layerProgressArray = this._layerStateArray.map(({ layerTop, layerBottom }) => {\n      const layerHeight = layerBottom - layerTop;\n      const overlap = Math.min(layerBottom, viewportBottom) - Math.max(layerTop, y);\n      const overlapBase = Math.min(layerHeight, this._windowHeight);\n      return overlapBase <= 0 ? 0 : Math.max(0, Math.min(1, overlap / overlapBase));\n    });\n  }\n\n  /** Applies transforms based on scroll position and updates active layer state. */\n  private _draw(scrollY?: number): void {\n    const y = scrollY !== undefined ? scrollY : getLastScrollPosition().y;\n    this._layerStateArray.forEach(\n      ({ beginEnter, endEnter, beginLeave, endLeave, maskNode, maskInnerNode, layerTop, layerBottom }, layerIndex) => {\n        let progress: number;\n\n        if (beginEnter > y) {\n          progress = this._immerserHeight;\n        } else if (beginEnter <= y && y < endEnter) {\n          progress = endEnter - y;\n        } else if (endEnter <= y && y < beginLeave) {\n          progress = 0;\n        } else if (beginLeave <= y && y < endLeave) {\n          progress = beginLeave - y;\n        } else {\n          progress = -this._immerserHeight;\n        }\n\n        maskNode.style.transform = `translateY(${progress}px)`;\n        maskInnerNode.style.transform = `translateY(${-progress}px)`;\n\n        const pagerScrollActivePoint = y + this._windowHeight * (1 - this._options.pagerThreshold);\n        if (layerTop <= pagerScrollActivePoint && pagerScrollActivePoint < layerBottom) {\n          this._reactiveActiveLayer.value = layerIndex;\n        }\n      },\n    );\n  }\n\n  /** Adds or removes active pager classname according to current layer. */\n  private _drawPagerLinks(layerIndex?: number): void {\n    this._pagerLinkNodeArray.forEach((pagerLinkNode) => {\n      if (parseInt(pagerLinkNode.dataset.immerserLayerIndex, 10) === layerIndex) {\n        pagerLinkNode.classList.add(this._options.pagerLinkActiveClassname);\n      } else {\n        pagerLinkNode.classList.remove(this._options.pagerLinkActiveClassname);\n      }\n    });\n  }\n\n  /** Updates window hash to match active layer id. */\n  private _drawHash(layerIndex: number): void {\n    const { id, layerNode } = this._layerStateArray[layerIndex];\n    layerNode.removeAttribute('id');\n    window.location.hash = id;\n    layerNode.setAttribute('id', id);\n  }\n\n  /** Syncs hover state across elements with matching synchroHover id. */\n  private _drawSynchroHover(synchroHoverId?: string): void {\n    this._synchroHoverNodeArray.forEach((synchroHoverNode) => {\n      if (synchroHoverNode.dataset.immerserSynchroHover === synchroHoverId) {\n        synchroHoverNode.classList.add('_hover');\n      } else {\n        synchroHoverNode.classList.remove('_hover');\n      }\n    });\n  }\n\n  /** Adjusts scroll to layer edges when near thresholds, improving alignment. */\n  private _adjustScroll(): void {\n    const { layerTop, layerBottom } = this._layerStateArray[this._reactiveActiveLayer.value as number];\n    const { x, y } = getLastScrollPosition();\n    const topThreshold = Math.abs(y - layerTop);\n    const bottomThreshold = Math.abs(y + this._windowHeight - layerBottom);\n\n    if (topThreshold !== 0 && bottomThreshold !== 0) {\n      if (topThreshold <= bottomThreshold && topThreshold <= this._options.scrollAdjustThreshold) {\n        window.scrollTo(x, layerTop);\n      } else if (bottomThreshold <= topThreshold && bottomThreshold <= this._options.scrollAdjustThreshold) {\n        window.scrollTo(x, layerBottom - this._windowHeight);\n      }\n    }\n  }\n\n  /** RAF-throttled scroll handler that draws and optionally snaps scroll. */\n  private _handleScroll(): void {\n    if (this._isBound) {\n      if (this._scrollFrameId) {\n        window.cancelAnimationFrame(this._scrollFrameId);\n        this._scrollFrameId = null;\n      }\n      this._scrollFrameId = window.requestAnimationFrame(() => {\n        const y = getLastScrollPosition().y;\n        this._setLayersProgress(y);\n        this._emit('layersUpdate', this._layerProgressArray, this);\n        this._draw(y);\n        if (this._options.scrollAdjustThreshold > 0) {\n          if (this._scrollAdjustTimerId) {\n            clearTimeout(this._scrollAdjustTimerId);\n            this._scrollAdjustTimerId = null;\n          }\n          this._scrollAdjustTimerId = setTimeout(this._adjustScroll.bind(this), this._options.scrollAdjustDelay);\n        }\n      });\n    }\n  }\n\n  /** RAF-throttled resize handler that recalculates sizes and redraws. */\n  private _handleResize(): void {\n    if (this._resizeFrameId) {\n      window.cancelAnimationFrame(this._resizeFrameId);\n      this._resizeFrameId = null;\n    }\n    this._resizeFrameId = window.requestAnimationFrame(() => {\n      this.render();\n    });\n  }\n\n  /**\n   * Prepares markup, attaches listeners and triggers first draw; also emits bind event.\n   * Intended to be idempotent for toggling immerser on when viewport width allows.\n   */\n  public bind(): void {\n    this._createMarkup();\n    this._initPagerLinks();\n    this._initHoverSynchro();\n    this._attachCallbacks();\n    this._isBound = true;\n    this._setLayersProgress();\n    this._draw();\n    this._emit('bind', this);\n  }\n\n  /**\n   * Tears down generated markup and listeners, restores DOM, resets active layer and emits unbind event.\n   * Safe to call multiple times; no-op when already unbound.\n   */\n  public unbind(): void {\n    this._detachCallbacks();\n    this._removeSyncroHoverListeners();\n    this._clearCustomSectionIds();\n    this._restoreOriginalSolidNodes();\n    this._cleanupClonedMarkup();\n    this._isBound = false;\n    this._emit('unbind', this);\n    this._reactiveActiveLayer.value = undefined;\n  }\n\n  /**\n   * Fully destroys immerser: unbinds, removes window listeners, runs destroy event and clears all references.\n   * Use when component is permanently removed.\n   */\n  public destroy(): void {\n    this.unbind();\n    this._unsubscribeToggleBindOnResize?.();\n    this._removeScrollAndResizeListeners();\n    this._emit('destroy', this);\n    this._resetInternalState();\n  }\n\n  /**\n   * Manually recomputes sizes and redraws masks; call after DOM mutations that change layout.\n   * Exposed for dynamic content updates without reinitializing immerser.\n   *\n   * No throttling or performance optimization is applied here. The client is responsible for invocation frequency.\n   */\n  public render(): void {\n    this._setSizes();\n    this._setLayersProgress();\n    this._draw();\n  }\n\n  /**\n   * Syncs immerser with an externally controlled scroll position.\n   * `isScrollHandled=false` option flag is required to call this method.\n   * Call when using a custom scroll engine.\n   *\n   * No throttling or performance optimization is applied here. The client is responsible for invocation frequency.\n   */\n  public syncScroll(): void {\n    if (this._options.isScrollHandled) {\n      if (process.env.NODE_ENV !== 'production') {\n        showMessageWithDocumentationLink({\n          message: 'syncScroll requires the isScrollHandled flag set to false. Call ignored.',\n          isWarning: true,\n          docsHash: '#external-scroll-engine',\n        });\n      }\n      return;\n    }\n    this._setLayersProgress();\n    this._draw();\n  }\n\n  /** Register persistent event handler. */\n  public on<K extends EventName>(eventName: K, handler: HandlerByEventName[K]): void {\n    this._handlers[eventName].add(handler);\n  }\n\n  /** Register event handler that will be removed after first call. */\n  public once<K extends EventName>(eventName: K, handler: HandlerByEventName[K]): void {\n    this._handlers[eventName].add(\n      wrapOnceHandler(handler, (...args: HandlerArgs<K>) => {\n        this.off(eventName, handler);\n        handler.apply(undefined, args);\n      }),\n    );\n  }\n\n  /** Removes handler(s) for provided event. */\n  public off<K extends EventName>(eventName: K, handler: HandlerByEventName[K]): void {\n    const handlerSet = this._handlers[eventName];\n\n    handlerSet.forEach((storedHandler) => {\n      const original = getOriginalHandler(storedHandler);\n      if (storedHandler === handler || original === handler) {\n        handlerSet.delete(storedHandler);\n      }\n    });\n  }\n\n  /** Current active layer index derived from scroll position. */\n  public get activeIndex(): number {\n    return this._reactiveActiveLayer.value;\n  }\n\n  /** Indicates whether immerser is currently bound (markup cloned and listeners attached). */\n  public get isBound(): boolean {\n    return this._isBound;\n  }\n\n  /** The root DOM node immerser is attached to. */\n  public get rootNode(): HTMLElement {\n    return this._rootNode;\n  }\n\n  /** Progress of each layer from 0 (off-screen) to 1 (fully visible). */\n  public get layerProgressArray(): readonly number[] {\n    return this._layerProgressArray;\n  }\n}\n\n// for typedef generation needs\nexport type {\n  ActiveLayerChangeHandler,\n  BaseHandler,\n  EventHandlers,\n  EventName,\n  HandlerByEventName,\n  LayersUpdateHandler,\n  Options,\n  SolidClassnames,\n};\nexport { EVENT_NAMES };\n","\"use strict\";function t(t){var e=function(t){if(\"object\"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,\"string\");if(\"object\"!=typeof i)return i;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(t)}(t);return\"symbol\"==typeof e?e:e+\"\"}module.exports=/*#__PURE__*/function(){function Observable(t){this.callbacks=[],this.internal=t,this.initialValue=t}var e,i,r=Observable.prototype;return r.subscribe=function(t){var e=this;if(\"function\"!=typeof t)throw new TypeError(\"[createObservable]: expected callback to be a function.\");return this.callbacks.push(t),function(){var i=e.callbacks.indexOf(t);e.callbacks=e.callbacks.slice(0,i).concat(e.callbacks.slice(i+1))}},r.reset=function(){this.callbacks=[],this.internal=this.initialValue},e=Observable,(i=[{key:\"value\",get:function(){return this.internal},set:function(t){if(t!==this.internal){var e=this.internal;this.internal=t;for(var i=0;i<this.callbacks.length;i++)this.callbacks[i](this.internal,e)}}}])&&function(e,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,t(n.key),n)}}(e.prototype,i),Object.defineProperty(e,\"prototype\",{writable:!1}),e}();\n//# sourceMappingURL=observable.min.js.map\n","!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports.Ogawa=e():t.Ogawa=e()}(this,()=>(()=>{\"use strict\";var t={51(t,e){Object.defineProperty(e,\"__esModule\",{value:!0}),e.ANIMATE_OPTION_CONFIG=void 0,e.ANIMATE_OPTION_CONFIG={duration:{required:!0,validator:t=>\"number\"==typeof t&&t>0,description:\"a positive number of milliseconds\"},delay:{required:!1,default:0,validator:t=>\"number\"==typeof t&&t>=0,description:\"a non-negative number of milliseconds\"},draw:{required:!0,validator:t=>\"function\"==typeof t,description:\"a function\"},onComplete:{required:!1,default:void 0,validator:t=>\"function\"==typeof t||void 0===t,description:\"a function\"},onCancel:{required:!1,default:void 0,validator:t=>\"function\"==typeof t||void 0===t,description:\"a function\"},autoStart:{required:!1,default:!0,validator:t=>\"boolean\"==typeof t,description:\"a boolean\"}}},320(t,e,i){var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,\"__esModule\",{value:!0}),e.Directions=e.Ogawa=void 0;const r=o(i(961)),n=o(i(819)),s=i(732);Object.defineProperty(e,\"Directions\",{enumerable:!0,get:function(){return s.Directions}});const a=i(51);e.Ogawa=class{options;lastTimestamp=performance.now();progress=0;delayBuffer=0;requestId=null;_isRunning=new n.default(!1);direction=s.Directions.Forward;_isComplete=!1;constructor(t){this.options=(0,r.default)({optionConfig:a.ANIMATE_OPTION_CONFIG,userOptions:t,prefix:\"[animate]:\"}),this._isRunning.subscribe(this.onIsRunningChange),this.options.autoStart&&this.run()}run(){return this.direction=s.Directions.Forward,this._isRunning.value=!0,this}runReverse(){return this.direction=s.Directions.Backward,this._isRunning.value=!0,this}reset(){return this.progress=0,this.delayBuffer=0,this._isRunning.value=!1,null!==this.requestId&&(window.cancelAnimationFrame(this.requestId),this.requestId=null),this.options.draw(this.progress),this}pause(){return this._isRunning.value=!1,this}destroy(){return null!==this.requestId&&(window.cancelAnimationFrame(this.requestId),this.requestId=null),this._isRunning.reset(),this}get isComplete(){return this._isComplete}get isRunning(){return this._isRunning.value}tick=t=>{const e=t-this.lastTimestamp,i=e/this.options.duration*this.direction;this.delayBuffer<this.options.delay?this.delayBuffer+=e:(this.progress=Math.min(1,Math.max(0,this.progress+i)),this.options.draw(this.progress));(this.direction===s.Directions.Forward?1===this.progress:0===this.progress)?(this._isRunning.value=!1,this.direction===s.Directions.Forward&&\"function\"==typeof this.options.onComplete&&(this.options.onComplete(),this._isComplete=!0)):(this.lastTimestamp=t,this.requestId=window.requestAnimationFrame(this.tick))};onIsRunningChange=t=>{t?(this.lastTimestamp=performance.now(),this.requestId=window.requestAnimationFrame(this.tick)):(\"function\"==typeof this.options.onCancel&&1!==this.progress&&0!==this.progress&&this.options.onCancel(this.progress),null!==this.requestId&&window.cancelAnimationFrame(this.requestId))}}},732(t,e){Object.defineProperty(e,\"__esModule\",{value:!0}),e.Directions=void 0,e.Directions={Forward:1,Backward:-1}},819(t){function e(t){var e=function(t){if(\"object\"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,\"string\");if(\"object\"!=typeof i)return i;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(t)}(t);return\"symbol\"==typeof e?e:e+\"\"}t.exports=function(){function t(t){this.callbacks=[],this.internal=t,this.initialValue=t}var i,o,r=t.prototype;return r.subscribe=function(t){var e=this;if(\"function\"!=typeof t)throw new TypeError(\"[createObservable]: expected callback to be a function.\");return this.callbacks.push(t),function(){var i=e.callbacks.indexOf(t);e.callbacks=e.callbacks.slice(0,i).concat(e.callbacks.slice(i+1))}},r.reset=function(){this.callbacks=[],this.internal=this.initialValue},i=t,(o=[{key:\"value\",get:function(){return this.internal},set:function(t){if(t!==this.internal){var e=this.internal;this.internal=t;for(var i=0;i<this.callbacks.length;i++)this.callbacks[i](this.internal,e)}}}])&&function(t,i){for(var o=0;o<i.length;o++){var r=i[o];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,e(r.key),r)}}(i.prototype,o),Object.defineProperty(i,\"prototype\",{writable:!1}),i}()},961(t){function e(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function i(t){return null!==t&&\"object\"==typeof t&&!1===Array.isArray(t)}function o(t){var i=t.optionConfig,o=t.userOptions,r=void 0===o?{}:o,n=t.prefix,s=void 0===n?\"\":n,a=t.suffix,u=void 0===a?\"\":a,c=t.strict,l=void 0===c||c,d=function(t){return[s,t,u].join(\" \")},f={};for(var p in i)if(e(i,p)){var h=i[p],v=h.required,g=h.default,b=h.description,y=h.validator,m=r[p],w=!!e(h,\"required\")&&(\"function\"==typeof v?v(r):v),q=e(r,p),x=y(m,r);if(w){if(!q)throw new TypeError(d(p+\" is required.\"));if(!x)throw new TypeError(d(\"Expected \"+p+\" to be \"+b+\", got \"+typeof m+\" \"+m+\".\"));f[p]=m}else if(f[p]=g,q)if(x)f[p]=m;else{if(l)throw new TypeError(d(\"Expected \"+p+\" to be \"+b+\", got \"+typeof m+\" \"+m+\".\"));console.warn(d(\"Expected \"+p+\" to be \"+b+\", got \"+typeof m+\" \"+m+\". Fallback to default value \"+g+\".\"))}}return f}var r=\"[mergeOptions]:\",n=\"\\nCheck out documentation https://github.com/dubaua/merge-options#parameters-and-return\";function s(t){throw new TypeError([r,t,n].join(\" \"))}var a={optionConfig:{required:!0,validator:function(t){for(var o in t)if(e(t,o)){var r=t[o];if(i(r)||s(\"Expected optionConfig.\"+o+\" to be an object with declarative option configuration, got \"+typeof r+\" \"+r+\".\"),e(r,\"required\")){var n=r.required,a=typeof n;\"boolean\"!==a&&\"function\"!==a&&s(\"Expected optionConfig.\"+o+\".required to be either boolean or function, got \"+typeof n+\" \"+n+\".\")}else e(r,\"default\")||s(\"Expected optionConfig.\"+o+\" to either have required or default value.\");if(e(r,\"default\")||e(r,\"required\")||s(\"Expected optionConfig.\"+o+\" to either have required or default value.\"),e(r,\"description\")){var u=r.description;\"string\"!=typeof r.description&&s(\"Expected optionConfig.\"+o+\".description to be a string, got \"+typeof u+\" \"+u+\".\")}else s(\"Missing description on optionConfig.\"+o+\" config.\");if(e(r,\"validator\")){var c=r.validator;\"function\"!=typeof r.validator&&s(\"Expected optionConfig.\"+o+\".validator to be a function, got \"+typeof c+\" \"+c+\".\")}else s(\"Missing validator on optionConfig.\"+o+\" config.\")}return i(t)},description:\"an object with declarative option configuration\"},userOptions:{required:!1,default:{},validator:i,description:\"an object\"},prefix:{required:!1,default:\"\",validator:function(t){return\"string\"==typeof t},description:\"a string\"},suffix:{required:!1,default:\"\",validator:function(t){return\"string\"==typeof t},description:\"a string\"},strict:{required:!1,default:!0,validator:function(t){return\"boolean\"==typeof t},description:\"a boolean\"}};t.exports=function(t){var e=o({optionConfig:a,userOptions:t,prefix:r,suffix:n});return o(e)}}},e={};var i=function i(o){var r=e[o];if(void 0!==r)return r.exports;var n=e[o]={exports:{}};return t[o].call(n.exports,n,n.exports,i),n.exports}(320);return i})());\n//# sourceMappingURL=ogawa.min.js.map","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","var pi = Math.PI,\n    halfPi = pi / 2;\n\nexport function sinIn(t) {\n  return (+t === 1) ? 1 : 1 - Math.cos(t * halfPi);\n}\n\nexport function sinOut(t) {\n  return Math.sin(t * halfPi);\n}\n\nexport function sinInOut(t) {\n  return (1 - Math.cos(pi * t)) / 2;\n}\n","import { buildCrossPath, Point } from './paths';\n\nconst eyeMaxRadius = 12;\n\nconst closedEyeLeftBase: Point[] = [\n  { x: 79, y: 74 },\n  { x: 105, y: 100 },\n  { x: 105, y: 74 },\n  { x: 79, y: 100 },\n];\nconst closedEyeLeftCenter: Point = { x: 92, y: 87 };\n\nconst closedEyeRightBase: Point[] = [\n  { x: 145, y: 74 },\n  { x: 171, y: 100 },\n  { x: 171, y: 74 },\n  { x: 145, y: 100 },\n];\nconst closedEyeRightCenter: Point = { x: 158, y: 87 };\n\nexport function renderOpenEye(value: number, node: SVGCircleElement): void {\n  const radius = eyeMaxRadius * value;\n  node.setAttribute('r', radius.toString());\n}\n\nfunction renderClosedEye(value: number, points: Point[], center: Point, node: SVGPathElement): void {\n  const d = buildCrossPath(points, center, value);\n  node.setAttribute('d', d);\n}\n\nexport function renderClosedEyeLeft(value: number, node: SVGPathElement): void {\n  renderClosedEye(value, closedEyeLeftBase, closedEyeLeftCenter, node);\n}\n\nexport function renderClosedEyeRight(value: number, node: SVGPathElement): void {\n  renderClosedEye(value, closedEyeRightBase, closedEyeRightCenter, node);\n}\n\nexport function renderOpenEyeLeft(value: number, node: SVGCircleElement): void {\n  renderOpenEye(value, node);\n}\n\nexport function renderOpenEyeRight(value: number, node: SVGCircleElement): void {\n  renderOpenEye(value, node);\n}\n","export type Point = { x: number; y: number };\n\nexport function buildCrossPath(points: ReadonlyArray<Point>, center: Point, factor: number): string {\n  const scaled = points.map(({ x, y }) => ({\n    x: center.x + (x - center.x) * factor,\n    y: center.y + (y - center.y) * factor,\n  }));\n\n  return `M${scaled[0].x} ${scaled[0].y}L${scaled[1].x} ${scaled[1].y}M${scaled[2].x} ${scaled[2].y}L${scaled[3].x} ${scaled[3].y}`;\n}\n\nexport function buildLinePath(points: ReadonlyArray<Point>, center: Point, factor: number): string {\n  const scaled = points.map(({ x, y }) => ({\n    x: center.x + (x - center.x) * factor,\n    y: center.y + (y - center.y) * factor,\n  }));\n\n  return `M${scaled[0].x} ${scaled[0].y}H${scaled[1].x}`;\n}\n","const browMaxTranslateY = 8;\n\nfunction renderBrow(scaleX: number, valueY: number, node: SVGPathElement): void {\n  const translateY = -browMaxTranslateY * valueY;\n  node.setAttribute('transform', `scale(${scaleX} 1) translate(0 ${translateY})`);\n}\n\nexport function renderLeftBrow(scaleX: number, translateY: number, node: SVGPathElement): void {\n  renderBrow(scaleX, translateY, node);\n}\n\nexport function renderRightBrow(scaleX: number, translateY: number, node: SVGPathElement): void {\n  renderBrow(scaleX, translateY, node);\n}\n","export function circleIn(t) {\n  return 1 - Math.sqrt(1 - t * t);\n}\n\nexport function circleOut(t) {\n  return Math.sqrt(1 - --t * t);\n}\n\nexport function circleInOut(t) {\n  return ((t *= 2) <= 1 ? 1 - Math.sqrt(1 - t * t) : Math.sqrt(1 - (t -= 2) * t) + 1) / 2;\n}\n","export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n","import { renderMouthEllipse, renderMouthLine } from './render-mouth-ellipse';\nimport { renderTongue } from './render-tongue';\nimport { renderOpenEyeLeft, renderOpenEyeRight, renderClosedEyeLeft, renderClosedEyeRight } from './render-open-eye';\nimport { renderLeftBrow, renderRightBrow } from './render-left-brow';\nimport { renderGlasses } from './render-glasses';\nimport { renderHand } from './render-hand';\nimport { EmojiFaceConfig } from './config';\nimport { EmojiNodes } from './select-emoji-nodes';\nimport { easeCubicInOut } from 'd3-ease';\n\nexport function renderEmojiFace(config: EmojiFaceConfig, nodes: EmojiNodes): void {\n  if (nodes.mouthClipPath && nodes.mouthShape) {\n    renderMouthEllipse(config.mouthEllipse, nodes.mouthClipPath, nodes.mouthShape);\n  }\n  if (nodes.mouthLine) {\n    renderMouthLine(config.mouthLineScaleX, config.mouthLineShiftX, nodes.mouthLine);\n  }\n  if (nodes.tongue) {\n    const tongueX = easeCubicInOut(config.tongueX);\n    const tongueY = easeCubicInOut(config.tongueY);\n    renderTongue(tongueX, tongueY, nodes.tongue);\n  }\n  if (nodes.leftEyeOpen) {\n    renderOpenEyeLeft(config.eyeOpenLeft, nodes.leftEyeOpen);\n  }\n  if (nodes.rightEyeOpen) {\n    renderOpenEyeRight(config.eyeOpenRight, nodes.rightEyeOpen);\n  }\n  if (nodes.leftEyeClosed) {\n    renderClosedEyeLeft(config.eyeClosedLeft, nodes.leftEyeClosed);\n  }\n  if (nodes.rightEyeClosed) {\n    renderClosedEyeRight(config.eyeClosedRight, nodes.rightEyeClosed);\n  }\n  if (nodes.leftBrow) {\n    renderLeftBrow(config.leftBrowScaleX, config.leftBrowY, nodes.leftBrow);\n  }\n  if (nodes.rightBrow) {\n    renderRightBrow(config.rightBrowScaleX, config.rightBrowY, nodes.rightBrow);\n  }\n  if (nodes.glass) {\n    renderGlasses(config.glasses, nodes.glass);\n  }\n  if (nodes.handInner && nodes.handOuter) {\n    const handValue = easeCubicInOut(config.hand);\n    renderHand(handValue, nodes.handInner, nodes.handOuter);\n  }\n}\n","const mouthEllipseMaxRy = 75;\nconst mouthLineMaxShiftX = 50; // px\n\nexport function renderMouthEllipse(\n  value: number,\n  clipNode: SVGEllipseElement,\n  shapeNode: SVGEllipseElement,\n): void {\n  const ry = (mouthEllipseMaxRy * value).toString();\n  clipNode.setAttribute('ry', ry);\n  shapeNode.setAttribute('ry', ry);\n}\n\nexport function renderMouthLine(scaleX: number, shiftX: number, node: SVGPathElement): void {\n  const translateX = mouthLineMaxShiftX * (shiftX - 0.5) * 2;\n  node.setAttribute('transform', `translate(${translateX} 0) scale(${scaleX} 1)`);\n}\n","const tongueMaxShiftX = 102;\nconst tongueMaxShiftY = 72;\n\nexport function renderTongue(valueX: number, valueY: number, node: SVGPathElement): void {\n  const shiftX = tongueMaxShiftX * valueX;\n  const shiftY = tongueMaxShiftY * valueY;\n  node.setAttribute('transform', `translate(${shiftX} ${shiftY})`);\n}\n","import { easeCircleIn } from 'd3-ease';\n\nconst glassesOffsetX = 550;\nconst glassesOffsetY = -100;\nconst glassesRotation = 30;\n\nexport function renderGlasses(value: number, node: SVGGElement): void {\n  const translateX = glassesOffsetX * (1 - easeCircleIn(value));\n  const translateY = glassesOffsetY * (1 - easeCircleIn(value));\n  const rotate = glassesRotation * (1 - easeCircleIn(value));\n  node.setAttribute('transform', `translate(${translateX} ${translateY}) rotate(${rotate})`);\n}\n","import { easeCircleIn } from 'd3-ease';\nconst handOffsetFactor = 12;\n\nexport function renderHand(value: number, innerNode: SVGGraphicsElement, outerNode: SVGGElement): void {\n  const translateX = -handOffsetFactor * (1 - easeCircleIn(value));\n  const translateY = handOffsetFactor * (1 - easeCircleIn(value));\n  outerNode.setAttribute('transform', `translate(${translateX} ${translateY})`);\n  innerNode.setAttribute('opacity', value.toString());\n}\n","export type EmojiFaceConfig = {\n  mouthEllipse: number;\n  mouthLineScaleX: number;\n  mouthLineShiftX: number;\n  tongueX: number;\n  tongueY: number;\n  eyeOpenLeft: number;\n  eyeOpenRight: number;\n  eyeClosedLeft: number;\n  eyeClosedRight: number;\n  leftBrowScaleX: number;\n  leftBrowY: number;\n  rightBrowScaleX: number;\n  rightBrowY: number;\n  glasses: number;\n  hand: number;\n};\n\nexport const currentConfig: EmojiFaceConfig = {\n  mouthEllipse: 0,\n  mouthLineScaleX: 1,\n  mouthLineShiftX: 0.5,\n  tongueX: 0.315,\n  tongueY: 0.7,\n  eyeOpenLeft: 0,\n  eyeOpenRight: 0,\n  eyeClosedLeft: 0.8,\n  eyeClosedRight: 0.8,\n  leftBrowScaleX: 0,\n  leftBrowY: 0,\n  rightBrowScaleX: 0,\n  rightBrowY: 0,\n  glasses: 0,\n  hand: 0,\n};\n\nconst configReasoning: EmojiFaceConfig = {\n  mouthEllipse: 0,\n  mouthLineScaleX: 1,\n  mouthLineShiftX: 0.5,\n  tongueX: 0.685,\n  tongueY: 0,\n  eyeOpenLeft: 0.8,\n  eyeOpenRight: 0.8,\n  eyeClosedLeft: 0,\n  eyeClosedRight: 0,\n  leftBrowScaleX: 0,\n  leftBrowY: 0,\n  rightBrowScaleX: 0,\n  rightBrowY: 0,\n  glasses: 0,\n  hand: 0,\n};\n\nconst configHowToUse: EmojiFaceConfig = {\n  mouthEllipse: 0,\n  mouthLineScaleX: 1,\n  mouthLineShiftX: 0.5,\n  tongueX: 0.685,\n  tongueY: 0.7,\n  eyeOpenLeft: 0.8,\n  eyeOpenRight: 0.8,\n  eyeClosedLeft: 0,\n  eyeClosedRight: 0,\n  leftBrowScaleX: 0,\n  leftBrowY: 0,\n  rightBrowScaleX: 0,\n  rightBrowY: 0,\n  glasses: 0,\n  hand: 0,\n};\n\nconst configHowItWorks: EmojiFaceConfig = {\n  mouthEllipse: 0,\n  mouthLineScaleX: 0.5,\n  mouthLineShiftX: 0.67,\n  tongueX: 0.685,\n  tongueY: 0,\n  eyeOpenLeft: 0.8,\n  eyeOpenRight: 0.8,\n  eyeClosedLeft: 0,\n  eyeClosedRight: 0,\n  leftBrowScaleX: 1,\n  leftBrowY: 1,\n  rightBrowScaleX: 1,\n  rightBrowY: 0,\n  glasses: 0,\n  hand: 1,\n};\n\nconst configOptions: EmojiFaceConfig = {\n  mouthEllipse: 0,\n  mouthLineScaleX: 1,\n  mouthLineShiftX: 0.5,\n  tongueX: 0.685,\n  tongueY: 0,\n  eyeOpenLeft: 0.8,\n  eyeOpenRight: 0.8,\n  eyeClosedLeft: 0,\n  eyeClosedRight: 0,\n  leftBrowScaleX: 0,\n  leftBrowY: 0,\n  rightBrowScaleX: 0,\n  rightBrowY: 0,\n  glasses: 1,\n  hand: 0,\n};\n\nconst configRecipes: EmojiFaceConfig = {\n  mouthEllipse: 1,\n  mouthLineScaleX: 1,\n  mouthLineShiftX: 0.5,\n  tongueX: 0.685,\n  tongueY: 0,\n  eyeOpenLeft: 1,\n  eyeOpenRight: 1,\n  eyeClosedLeft: 0,\n  eyeClosedRight: 0,\n  leftBrowScaleX: 0,\n  leftBrowY: 0,\n  rightBrowScaleX: 0,\n  rightBrowY: 0,\n  glasses: 0,\n  hand: 0,\n};\n\nexport const layerConfigs = [configReasoning, configHowToUse, configHowItWorks, configOptions, configRecipes];\n\nexport const deadConfig: EmojiFaceConfig = {\n  mouthEllipse: 0,\n  mouthLineScaleX: 1,\n  mouthLineShiftX: 0.5,\n  tongueX: 0.315,\n  tongueY: 0.7,\n  eyeOpenLeft: 0,\n  eyeOpenRight: 0,\n  eyeClosedLeft: 0.8,\n  eyeClosedRight: 0.8,\n  leftBrowScaleX: 0,\n  leftBrowY: 0,\n  rightBrowScaleX: 0,\n  rightBrowY: 0,\n  glasses: 0,\n  hand: 0,\n};\n","import { EmojiFaceConfig } from './config';\n\nexport function mixConfigByProgress(layersProgress: number[], configs: EmojiFaceConfig[]): EmojiFaceConfig {\n  return configs.reduce<EmojiFaceConfig>(\n    (acc, config, index) => {\n      const progress = layersProgress[index] ?? 0;\n\n      acc.mouthEllipse += config.mouthEllipse * progress;\n      acc.mouthLineScaleX += config.mouthLineScaleX * progress;\n      acc.mouthLineShiftX += config.mouthLineShiftX * progress;\n      acc.tongueX += config.tongueX * progress;\n      acc.tongueY += config.tongueY * progress;\n      acc.eyeOpenLeft += config.eyeOpenLeft * progress;\n      acc.eyeOpenRight += config.eyeOpenRight * progress;\n      acc.eyeClosedLeft += config.eyeClosedLeft * progress;\n      acc.eyeClosedRight += config.eyeClosedRight * progress;\n      acc.leftBrowScaleX += config.leftBrowScaleX * progress;\n      acc.leftBrowY += config.leftBrowY * progress;\n      acc.rightBrowScaleX += config.rightBrowScaleX * progress;\n      acc.rightBrowY += config.rightBrowY * progress;\n      acc.glasses += config.glasses * progress;\n      acc.hand += config.hand * progress;\n\n      return acc;\n    },\n    {\n      mouthEllipse: 0,\n      mouthLineScaleX: 0,\n      mouthLineShiftX: 0,\n      tongueX: 0,\n      tongueY: 0,\n      eyeOpenLeft: 0,\n      eyeOpenRight: 0,\n      eyeClosedLeft: 0,\n      eyeClosedRight: 0,\n      leftBrowScaleX: 0,\n      leftBrowY: 0,\n      rightBrowScaleX: 0,\n      rightBrowY: 0,\n      glasses: 0,\n      hand: 0,\n    },\n  );\n}\n","export function renderHpBar(\n  currentHp: number,\n  maxHp: number,\n  opacity: number,\n  outline: SVGRectElement,\n  fill: SVGRectElement,\n): void {\n  const baseWidth = 100;\n  const ratio = Math.max(0, Math.min(1, currentHp / maxHp));\n  const nextWidth = baseWidth * ratio;\n\n  fill.setAttribute('width', nextWidth.toString());\n\n  const { r, g, b } = colorForRatio(ratio);\n  fill.setAttribute('fill', `rgb(${r}, ${g}, ${b})`);\n  if (outline.parentElement) {\n    outline.parentElement.style.opacity = opacity.toString();\n  }\n}\n\nfunction colorForRatio(ratio: number): { r: number; g: number; b: number } {\n  const clamp = Math.max(0, Math.min(1, ratio));\n  const green = { r: 0, g: 255, b: 0 };\n  const yellow = { r: 255, g: 204, b: 0 };\n  const red = { r: 255, g: 51, b: 0 };\n\n  if (clamp <= 0.25) {\n    return red;\n  }\n  if (clamp <= 0.5) {\n    const t = (0.5 - clamp) / 0.25; // yellow -> red\n    return lerpColor(yellow, red, t);\n  }\n  if (clamp < 0.75) {\n    const t = (0.75 - clamp) / 0.25; // green -> yellow\n    return lerpColor(green, yellow, t);\n  }\n  return green;\n}\n\nfunction lerpColor(from: { r: number; g: number; b: number }, to: { r: number; g: number; b: number }, t: number) {\n  return {\n    r: Math.round(from.r + (to.r - from.r) * t),\n    g: Math.round(from.g + (to.g - from.g) * t),\n    b: Math.round(from.b + (to.b - from.b) * t),\n  };\n}\n","import { easeSinInOut } from 'd3-ease';\nimport Observable from '@dubaua/observable';\nimport Immerser from 'immerser';\nimport { Ogawa } from 'ogawa';\nimport { EmojiNodes, selectEmojiNodes } from './select-emoji-nodes';\nimport { renderEmojiFace } from './render-emoji-face';\nimport { EmojiFaceConfig, deadConfig, layerConfigs } from './config';\nimport { mixConfigByProgress } from './mix-config-by-progress';\nimport { renderHpBar } from './render-hp-bar';\n\nconst emojiAnimationDurationMs = 620;\nconst facePressOffsetPx = 2;\nconst MaxHP = 1000;\nconst HPRegenDelayMS = 1400;\n\ntype EmojiState = {\n  hp: Observable<number>;\n  hpRegen: number;\n  regenAnimation: Ogawa | null;\n  hpBarAnimation: Ogawa | null;\n  isDead: Observable<boolean>;\n  lastConfig: EmojiFaceConfig;\n  nodes: EmojiNodes[];\n};\n\nconst emojiState: EmojiState = {\n  hp: new Observable(1000),\n  hpRegen: 333,\n  regenAnimation: null,\n  hpBarAnimation: null,\n  isDead: new Observable(false),\n  lastConfig: deadConfig,\n  nodes: [],\n};\n\nfunction startDelayedRegen(): void {\n  emojiState.regenAnimation?.pause().destroy();\n\n  const missingHp = MaxHP - emojiState.hp.value;\n  const duration = (missingHp / emojiState.hpRegen) * 1000;\n  const startHp = emojiState.hp.value;\n\n  emojiState.regenAnimation = new Ogawa({\n    duration,\n    delay: HPRegenDelayMS,\n    draw: (progress) => {\n      emojiState.hp.value = Math.min(MaxHP, startHp + missingHp * progress);\n    },\n    onComplete: () => {\n      emojiState.regenAnimation?.destroy();\n      emojiState.hpBarAnimation = new Ogawa({\n        delay: 2000,\n        duration: 320,\n        draw: (p) => {\n          renderHpBars(MaxHP, 1 - p);\n        },\n        onComplete: () => {\n          emojiState.regenAnimation?.destroy();\n        },\n      });\n    },\n  });\n}\n\nfunction renderHpBars(hp: number, opacity: number) {\n  emojiState.nodes.forEach((nodes) => {\n    if (nodes.hpBarOutline && nodes.hpBarFill) {\n      renderHpBar(hp, MaxHP, opacity, nodes.hpBarOutline, nodes.hpBarFill);\n    }\n  });\n}\n\nexport function initEmojiAnimation(immerser: Immerser) {\n  const faceNodes = Array.from(document.querySelectorAll<HTMLElement>('[data-emoji-face]'));\n\n  if (faceNodes.length === 0) {\n    return { handleLayersUpdate: (_: number[]) => {} };\n  }\n\n  emojiState.nodes = faceNodes.map((face) => selectEmojiNodes(face));\n\n  const spinAnimation = new Ogawa({\n    autoStart: false,\n    duration: emojiAnimationDurationMs,\n    draw: (progress) => {\n      const easedProgress = easeSinInOut(progress);\n      emojiState.nodes.forEach((nodes) => {\n        const target = nodes.rotator;\n        if (target) {\n          target.setAttribute('transform', `rotate(${360 * easedProgress} 125 125)`);\n        }\n      });\n\n      emojiState.nodes.forEach((nodes) => {\n        if (nodes.handInner) {\n          const halfProgress = progress <= 0.5 ? progress / 0.5 : 2 - 2 * progress;\n          const angle = -3 * halfProgress;\n          nodes.handInner.style.transform = `rotate(${angle}deg)`;\n        }\n      });\n    },\n  });\n\n  const faceNodeListeners = faceNodes.map((faceNode) => {\n    let isRunning = false;\n    const onMouseDown = (e: MouseEvent) => {\n      e.stopPropagation();\n\n      isRunning = spinAnimation.isRunning;\n      spinAnimation.reset();\n      if (!emojiState.isDead.value) {\n        faceNodes.forEach((faceNode) => {\n          faceNode.style.transform = `translateY(${facePressOffsetPx}px)`;\n        });\n      }\n    };\n\n    const onMouseUp = (e: MouseEvent) => {\n      e.stopPropagation();\n\n      faceNodes.forEach((faceNode) => {\n        faceNode.style.transform = '';\n      });\n\n      if (!emojiState.isDead.value && isRunning) {\n        const damage = Math.round(Math.random() * 150) + 100; // TODO use rollDice\n        emojiState.hp.value = Math.min(Math.max(0, emojiState.hp.value - damage), MaxHP);\n      }\n\n      if (!emojiState.isDead.value) {\n        spinAnimation.run();\n      }\n    };\n\n    faceNode.addEventListener('mousedown', onMouseDown);\n    faceNode.addEventListener('mouseup', onMouseUp);\n\n    return { faceNode, onMouseDown, onMouseUp };\n  });\n\n  const handleLayersUpdate = (layersProgress: number[]) => {\n    console.log('layersUpdate', layersProgress, immerser);\n\n    emojiState.lastConfig = mixConfigByProgress(layersProgress, layerConfigs);\n\n    if (!emojiState.isDead.value) {\n      emojiState.nodes.forEach((nodes) => renderEmojiFace(emojiState.lastConfig, nodes));\n    }\n  };\n\n  handleLayersUpdate([1, 0, 0, 0, 0]);\n\n  emojiState.hp.subscribe((hp, prevHp) => {\n    const hasMissingHp = 0 < hp && hp < MaxHP;\n    const isDead = hp <= 0;\n    const isHit = prevHp !== undefined && hp < prevHp;\n\n    renderHpBars(hp, 1);\n\n    if (isDead) {\n      emojiState.regenAnimation?.pause().destroy();\n      emojiState.isDead.value = true;\n      return;\n    }\n\n    if (hasMissingHp && isHit) {\n      startDelayedRegen();\n    }\n  });\n\n  emojiState.isDead.subscribe((isDead) => {\n    if (isDead) {\n      const fadeToDeadAnimation = new Ogawa({\n        duration: 320,\n        draw: (p) => {\n          const mixed = mixConfigByProgress([1 - p, p], [emojiState.lastConfig, deadConfig]);\n          emojiState.nodes.forEach((nodes) => renderEmojiFace(mixed, nodes));\n        },\n        onComplete: () => {\n          const buryAnimation = new Ogawa({\n            delay: 1000,\n            duration: 320,\n            draw: (p) => {\n              emojiState.nodes.forEach(({ face }) => {\n                if (face) {\n                  face.style.transform = `translate(${p * 200}%,0)`;\n                }\n              });\n            },\n            onComplete: () => {\n              immerser.off('layersUpdate', handleLayersUpdate);\n\n              faceNodeListeners.forEach(({ faceNode, onMouseDown, onMouseUp }) => {\n                faceNode.removeEventListener('mousedown', onMouseDown);\n                faceNode.removeEventListener('mouseup', onMouseUp);\n                faceNode.style.transform = '';\n              });\n\n              spinAnimation.pause().destroy();\n              emojiState.regenAnimation?.pause().destroy();\n              emojiState.regenAnimation = null;\n              emojiState.hpBarAnimation?.pause().destroy();\n              emojiState.hpBarAnimation = null;\n\n              emojiState.hp.reset();\n              emojiState.isDead.reset();\n\n              emojiState.nodes.forEach((nodes) => {\n                nodes.face = null;\n                nodes.mouthClipPath = null;\n                nodes.mouthShape = null;\n                nodes.mouthLine = null;\n                nodes.tongue = null;\n                nodes.leftEyeClosed = null;\n                nodes.rightEyeClosed = null;\n                nodes.leftEyeOpen = null;\n                nodes.rightEyeOpen = null;\n                nodes.leftBrow = null;\n                nodes.rightBrow = null;\n                nodes.glass = null;\n                nodes.hpBarOutline = null;\n                nodes.hpBarFill = null;\n                nodes.handInner = null;\n                nodes.handOuter = null;\n                nodes.rotator = null;\n              });\n              emojiState.nodes = [];\n              emojiState.lastConfig = deadConfig;\n\n              faceNodes.forEach((node) => node.remove());\n              faceNodes.length = 0;\n              faceNodeListeners.length = 0;\n\n              buryAnimation.destroy();\n              fadeToDeadAnimation.destroy();\n            },\n          });\n        },\n      });\n    }\n  });\n\n  return { handleLayersUpdate };\n}\n","import Immerser from 'immerser';\nimport './styles/main.scss';\nimport { initEmojiAnimation } from './emoji/animation';\n\ntype HighlightableElement = HTMLElement & { isHighlighting?: boolean };\n\ndeclare global {\n  interface Window {\n    immerserInstance?: Immerser;\n  }\n}\n\nconst immerserInstance = new Immerser({\n  solidClassnameArray: [\n    {\n      logo: 'logo--contrast-lg',\n      pager: 'pager--contrast-lg',\n      language: 'language--contrast-lg',\n    },\n    {\n      pager: 'pager--contrast-only-md',\n      menu: 'menu--contrast',\n      about: 'about--contrast',\n    },\n    {\n      logo: 'logo--contrast-lg',\n      pager: 'pager--contrast-lg',\n      language: 'language--contrast-lg',\n    },\n    {\n      logo: 'logo--contrast-only-md',\n      pager: 'pager--contrast-only-md',\n      language: 'language--contrast-only-md',\n      menu: 'menu--contrast',\n      about: 'about--contrast',\n    },\n    {\n      logo: 'logo--contrast-lg',\n      pager: 'pager--contrast-lg',\n      language: 'language--contrast-lg',\n    },\n  ],\n  fromViewportWidth: 1024,\n  pagerLinkActiveClassname: 'pager__link--active',\n  scrollAdjustThreshold: 50,\n  scrollAdjustDelay: 600,\n  on: {\n    init(immerser) {\n      window.immerserInstance = immerser;\n      console.log('init', immerser);\n    },\n    bind(immerser) {\n      console.log('bind', immerser);\n    },\n    unbind(immerser) {\n      console.log('unbind', immerser);\n    },\n    destroy(immerser) {\n      console.log('destroy', immerser);\n    },\n    activeLayerChange(activeIndex, immerser) {\n      console.log('activeLayerChange', activeIndex, immerser);\n    },\n  },\n});\n\nconst { handleLayersUpdate } = initEmojiAnimation(immerserInstance);\nimmerserInstance.on('layersUpdate', handleLayersUpdate);\n\nconst highlighterNodeList = document.querySelectorAll<HTMLElement>('[data-highlighter]');\nconst highlighterAnimationClassname = 'highlighter-animation-active';\n\nfunction highlight(highlighterNode: HTMLElement) {\n  return () => {\n    if (!immerserInstance.isBound) {\n      return;\n    }\n    const targetSelector = highlighterNode.dataset.highlighter;\n    if (!targetSelector) {\n      return;\n    }\n    const targetNodeList = document.querySelectorAll<HighlightableElement>(targetSelector);\n    targetNodeList.forEach((targetNode) => {\n      if (targetNode.isHighlighting) {\n        return;\n      }\n      targetNode.isHighlighting = true;\n      targetNode.classList.add(highlighterAnimationClassname);\n      const timerId = window.setTimeout(() => {\n        targetNode.classList.remove(highlighterAnimationClassname);\n        window.clearTimeout(timerId);\n        targetNode.isHighlighting = false;\n      }, 1500);\n    });\n  };\n}\n\nhighlighterNodeList.forEach((highlighterNode) => {\n  highlighterNode.addEventListener('mouseover', highlight(highlighterNode));\n  highlighterNode.addEventListener('click', highlight(highlighterNode));\n});\n\nconst rulersNode = document.getElementById('rulers');\nif (rulersNode) {\n  document.addEventListener('keydown', ({ altKey, code, keyCode }) => {\n    const isR = code === 'KeyR' || keyCode === 82;\n    if (altKey && isR) {\n      rulersNode.classList.toggle('rulers--active');\n    }\n  });\n}\n\nconsole.log('welcome here, fella. Press Alt+R to see vertical rhythm');\n","export type EmojiNodes = {\n  face: HTMLElement | null;\n  mouthClipPath: SVGEllipseElement | null;\n  mouthShape: SVGEllipseElement | null;\n  mouthLine: SVGPathElement | null;\n  tongue: SVGPathElement | null;\n  leftEyeClosed: SVGPathElement | null;\n  rightEyeClosed: SVGPathElement | null;\n  leftEyeOpen: SVGCircleElement | null;\n  rightEyeOpen: SVGCircleElement | null;\n  leftBrow: SVGPathElement | null;\n  rightBrow: SVGPathElement | null;\n  glass: SVGGElement | null;\n  hpBarOutline: SVGRectElement | null;\n  hpBarFill: SVGRectElement | null;\n  handInner: SVGGraphicsElement | null;\n  handOuter: SVGGElement | null;\n  rotator: SVGGElement | null;\n};\n\nexport function selectEmojiNodes(root: HTMLElement): EmojiNodes {\n  return {\n    face: root,\n    mouthClipPath: root.querySelector<SVGEllipseElement>('[data-mouth-clip-path]'),\n    mouthShape: root.querySelector<SVGEllipseElement>('[data-mouth-shape]'),\n    mouthLine: root.querySelector<SVGPathElement>('[data-mouth-line]'),\n    tongue: root.querySelector<SVGPathElement>('[data-tongue]'),\n    leftEyeClosed: root.querySelector<SVGPathElement>('[data-left-eye-closed]'),\n    rightEyeClosed: root.querySelector<SVGPathElement>('[data-right-eye-closed]'),\n    leftEyeOpen: root.querySelector<SVGCircleElement>('[data-left-eye-open]'),\n    rightEyeOpen: root.querySelector<SVGCircleElement>('[data-right-eye-open]'),\n    leftBrow: root.querySelector<SVGPathElement>('[data-left-brow]'),\n    rightBrow: root.querySelector<SVGPathElement>('[data-right-brow]'),\n    glass: root.querySelector<SVGGElement>('[data-glass]'),\n    hpBarOutline: root.querySelector<SVGRectElement>('[data-emoji-hp-bar-outline]'),\n    hpBarFill: root.querySelector<SVGRectElement>('[data-emoji-hp-bar-fill]'),\n    handInner: root.querySelector<SVGGraphicsElement>('[data-emoji-hand]'),\n    handOuter: root.querySelector<SVGGElement>('[data-emoji-hand-outer]'),\n    rotator: root.querySelector<SVGGElement>('[data-emoji-rotator]'),\n  };\n}\n"],"names":["t","e","_typeof","Symbol","toPrimitive","r","call","TypeError","String","exports","this","callbacks","internal","initialValue","i","o","prototype","subscribe","push","indexOf","slice","concat","reset","key","get","set","length","enumerable","configurable","writable","Object","defineProperty","hasOwnProperty","Array","isArray","optionConfig","userOptions","n","prefix","s","a","suffix","l","u","strict","c","d","join","h","y","f","v","required","_","default","m","description","p","validator","b","g","k","A","console","warn","__esModule","solidClassnameArray","fromViewportWidth","pagerThreshold","hasToUpdateHash","scrollAdjustThreshold","scrollAdjustDelay","pagerLinkActiveClassname","test","isScrollHandled","on","keys","every","includes","position","top","right","bottom","left","overflow","pointerEvents","touchAction","style","selector","parent","document","querySelectorAll","from","message","error","isWarning","docsHash","Error","cause","Math","max","min","window","scrollX","documentElement","scrollLeft","scrollY","scrollTop","x","offsetWidth","offsetHeight","Immerser","N","root","layer","solid","pagerLink","mask","maskInner","synchroHover","init","Set","bind","unbind","destroy","activeLayerChange","layersUpdate","_init","value","_setDomNodes","_validateMarkup","_mergeOptions","_registerHandlersFromOptions","_readClassnamesFromMarkup","_validateSolidClassnameArray","_initSectionIds","_initLayerStateArray","_validateClassnames","_toggleBindOnResizeObserver","_setSizes","_addScrollAndResizeListeners","_emit","_options","forEach","arguments","_handlers","apply","_rootNode","querySelector","_selectors","_layerNodeArray","_solidNodeArray","dataset","immerserLayerConfig","JSON","parse","id","__immerserCustomId","_layerStateIndexById","_layerStateArray","map","beginEnter","beginLeave","endEnter","endLeave","layerBottom","layerTop","maskInnerNode","maskNode","layerNode","solidClassnames","_layerProgressArray","constructor","_unsubscribeToggleBindOnResize","_reactiveWindowWidth","_isBound","_windowHeight","innerHeight","_immerserTop","offsetTop","_immerserHeight","w","innerWidth","_onScroll","_handleScroll","addEventListener","_onResize","_handleResize","ResizeObserver","_resizeObserver","observe","_pagerLinkNodeArray","_originalSolidNodeArray","_maskNodeArray","_synchroHoverNodeArray","_isCustomMarkup","_customMaskNodeArray","_resizeFrameId","_scrollFrameId","_scrollAdjustTimerId","_reactiveActiveLayer","_reactiveSynchroHoverId","_unsubscribeRedrawingPager","_unsubscribeUpdatingHash","_unsubscribeActiveLayerChange","_unsubscribeSynchroHover","_onSynchroHoverMouseOver","_onSynchroHoverMouseOut","clear","_initCustomMarkup","createElement","immerserMask","immerserMaskInner","cloneNode","HTMLElement","__immerserCloned","appendChild","immerserSolid","classList","add","setAttribute","_detachOriginalSolidNodes","children","removeChild","href","split","immerserLayerIndex","toString","target","immerserSynchroHover","_drawPagerLinks","_drawHash","_drawSynchroHover","removeEventListener","removeAttribute","disconnect","transform","parseInt","remove","location","hash","abs","scrollTo","cancelAnimationFrame","requestAnimationFrame","_setLayersProgress","_draw","clearTimeout","setTimeout","_adjustScroll","render","_createMarkup","_initPagerLinks","_initHoverSynchro","_attachCallbacks","_detachCallbacks","_removeSyncroHoverListeners","_clearCustomSectionIds","_restoreOriginalSolidNodes","_cleanupClonedMarkup","_removeScrollAndResizeListeners","_resetInternalState","off","__immerserOriginalHandler","delete","module","define","Observable","ANIMATE_OPTION_CONFIG","duration","delay","draw","onComplete","onCancel","autoStart","__importDefault","Directions","Ogawa","options","lastTimestamp","performance","now","progress","delayBuffer","requestId","_isRunning","direction","Forward","_isComplete","onIsRunningChange","run","runReverse","Backward","pause","isComplete","isRunning","tick","q","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","loaded","__webpack_modules__","getter","definition","obj","prop","nmd","paths","pi","PI","closedEyeLeftBase","closedEyeLeftCenter","closedEyeRightBase","closedEyeRightCenter","renderOpenEye","node","radius","renderClosedEye","points","center","factor","scaled","_ref","buildCrossPath","renderBrow","scaleX","valueY","translateY","circleIn","sqrt","cubicInOut","renderEmojiFace","config","nodes","clipNode","shapeNode","ry","shiftX","translateX","mouthClipPath","mouthShape","mouthEllipse","mouthLine","mouthLineScaleX","mouthLineShiftX","tongue","valueX","shiftY","renderTongue","easeCubicInOut","tongueX","tongueY","leftEyeOpen","renderOpenEyeLeft","eyeOpenLeft","rightEyeOpen","renderOpenEyeRight","eyeOpenRight","leftEyeClosed","renderClosedEyeLeft","eyeClosedLeft","rightEyeClosed","renderClosedEyeRight","eyeClosedRight","leftBrow","renderLeftBrow","leftBrowScaleX","leftBrowY","rightBrow","renderRightBrow","rightBrowScaleX","rightBrowY","glass","easeCircleIn","rotate","renderGlasses","glasses","handInner","handOuter","innerNode","outerNode","renderHand","hand","layerConfigs","deadConfig","mixConfigByProgress","layersProgress","configs","reduce","acc","index","_layersProgress$index","renderHpBar","currentHp","maxHp","opacity","outline","fill","ratio","nextWidth","_colorForRatio","clamp","green","yellow","red","lerpColor","colorForRatio","parentElement","to","round","MaxHP","emojiState","hp","hpRegen","regenAnimation","hpBarAnimation","isDead","lastConfig","renderHpBars","hpBarOutline","hpBarFill","immerserInstance","logo","pager","language","menu","about","immerser","log","activeIndex","_initEmojiAnimation","faceNodes","handleLayersUpdate","face","rotator","spinAnimation","easedProgress","cos","angle","faceNodeListeners","faceNode","onMouseDown","stopPropagation","onMouseUp","damage","random","prevHp","_emojiState$regenAnim4","hasMissingHp","isHit","_emojiState$regenAnim","missingHp","startHp","_emojiState$regenAnim2","_emojiState$regenAnim3","startDelayedRegen","fadeToDeadAnimation","mixed","buryAnimation","_emojiState$regenAnim5","_emojiState$hpBarAnim","_ref2","initEmojiAnimation","highlighterNodeList","highlighterAnimationClassname","highlight","highlighterNode","isBound","targetSelector","highlighter","targetNode","isHighlighting","timerId","rulersNode","getElementById","altKey","code","keyCode","toggle"],"ignoreList":[],"sourceRoot":""}