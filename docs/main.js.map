{"version":3,"file":"main.js","mappings":"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","sources":["webpack://immerser/../ogawa/node_modules/@dubaua/observable/dist/observable.min.js","webpack://immerser/../ogawa/node_modules/@dubaua/merge-options/dist/merge-options.min.js","webpack://immerser/./node_modules/@dubaua/observable/dist/observable.min.js","webpack://immerser/./node_modules/@dubaua/merge-options/dist/merge-options.min.js","webpack://immerser/webpack/bootstrap","webpack://immerser/webpack/runtime/compat get default export","webpack://immerser/webpack/runtime/define property getters","webpack://immerser/webpack/runtime/hasOwnProperty shorthand","webpack://immerser/./src/options.ts","webpack://immerser/./src/utils.ts","webpack://immerser/./src/immerser.ts","webpack://immerser/./node_modules/d3-ease/src/sin.js","webpack://immerser/../ogawa/src/types.ts","webpack://immerser/../ogawa/src/options.ts","webpack://immerser/../ogawa/src/animate.ts","webpack://immerser/./example/emoji/render-open-eye.ts","webpack://immerser/./example/emoji/paths.ts","webpack://immerser/./example/emoji/render-left-brow.ts","webpack://immerser/./node_modules/d3-ease/src/circle.js","webpack://immerser/./node_modules/d3-ease/src/cubic.js","webpack://immerser/./example/emoji/render-emoji-face.ts","webpack://immerser/./example/emoji/render-mouth-ellipse.ts","webpack://immerser/./example/emoji/render-tongue.ts","webpack://immerser/./example/emoji/render-glasses.ts","webpack://immerser/./example/emoji/render-hand.ts","webpack://immerser/./example/emoji/config.ts","webpack://immerser/./example/emoji/mix-config-by-progress.ts","webpack://immerser/./example/emoji/render-hp-bar.ts","webpack://immerser/./example/emoji/animation.ts","webpack://immerser/./example/main.ts","webpack://immerser/./example/emoji/select-emoji-nodes.ts"],"sourcesContent":["\"use strict\";function t(t){var e=function(t){if(\"object\"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,\"string\");if(\"object\"!=typeof i)return i;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(t)}(t);return\"symbol\"==typeof e?e:e+\"\"}module.exports=/*#__PURE__*/function(){function Observable(t){this.callbacks=[],this.internal=t,this.initialValue=t}var e,i,r=Observable.prototype;return r.subscribe=function(t){var e=this;if(\"function\"!=typeof t)throw new TypeError(\"[createObservable]: expected callback to be a function.\");return this.callbacks.push(t),function(){var i=e.callbacks.indexOf(t);e.callbacks=e.callbacks.slice(0,i).concat(e.callbacks.slice(i+1))}},r.reset=function(){this.callbacks=[],this.internal=this.initialValue},e=Observable,(i=[{key:\"value\",get:function(){return this.internal},set:function(t){if(t!==this.internal){var e=this.internal;this.internal=t;for(var i=0;i<this.callbacks.length;i++)this.callbacks[i](this.internal,e)}}}])&&function(e,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,t(n.key),n)}}(e.prototype,i),Object.defineProperty(e,\"prototype\",{writable:!1}),e}();\n//# sourceMappingURL=observable.min.js.map\n","\"use strict\";function o(o,e){return Object.prototype.hasOwnProperty.call(o,e)}function e(o){return null!==o&&\"object\"==typeof o&&!1===Array.isArray(o)}function t(e){var t=e.optionConfig,i=e.userOptions,r=void 0===i?{}:i,n=e.prefix,a=void 0===n?\"\":n,f=e.suffix,u=void 0===f?\"\":f,p=e.strict,d=void 0===p||p,c=function(o){return[a,o,u].join(\" \")},s={};for(var l in t)if(o(t,l)){var g=t[l],v=g.required,y=g.default,b=g.description,x=g.validator,h=r[l],q=!!o(g,\"required\")&&(\"function\"==typeof v?v(r):v),E=o(r,l),w=x(h,r);if(q){if(!E)throw new TypeError(c(l+\" is required.\"));if(!w)throw new TypeError(c(\"Expected \"+l+\" to be \"+b+\", got \"+typeof h+\" \"+h+\".\"));s[l]=h}else if(s[l]=y,E)if(w)s[l]=h;else{if(d)throw new TypeError(c(\"Expected \"+l+\" to be \"+b+\", got \"+typeof h+\" \"+h+\".\"));console.warn(c(\"Expected \"+l+\" to be \"+b+\", got \"+typeof h+\" \"+h+\". Fallback to default value \"+y+\".\"))}}return s}var i=\"[mergeOptions]:\",r=\"\\nCheck out documentation https://github.com/dubaua/merge-options#parameters-and-return\";function n(o){throw new TypeError([i,o,r].join(\" \"))}var a={optionConfig:{required:!0,validator:function(t){for(var i in t)if(o(t,i)){var r=t[i];if(e(r)||n(\"Expected optionConfig.\"+i+\" to be an object with declarative option configuration, got \"+typeof r+\" \"+r+\".\"),o(r,\"required\")){var a=r.required,f=typeof a;\"boolean\"!==f&&\"function\"!==f&&n(\"Expected optionConfig.\"+i+\".required to be either boolean or function, got \"+typeof a+\" \"+a+\".\")}else o(r,\"default\")||n(\"Expected optionConfig.\"+i+\" to either have required or default value.\");if(o(r,\"default\")||o(r,\"required\")||n(\"Expected optionConfig.\"+i+\" to either have required or default value.\"),o(r,\"description\")){var u=r.description;\"string\"!=typeof r.description&&n(\"Expected optionConfig.\"+i+\".description to be a string, got \"+typeof u+\" \"+u+\".\")}else n(\"Missing description on optionConfig.\"+i+\" config.\");if(o(r,\"validator\")){var p=r.validator;\"function\"!=typeof r.validator&&n(\"Expected optionConfig.\"+i+\".validator to be a function, got \"+typeof p+\" \"+p+\".\")}else n(\"Missing validator on optionConfig.\"+i+\" config.\")}return e(t)},description:\"an object with declarative option configuration\"},userOptions:{required:!1,default:{},validator:e,description:\"an object\"},prefix:{required:!1,default:\"\",validator:function(o){return\"string\"==typeof o},description:\"a string\"},suffix:{required:!1,default:\"\",validator:function(o){return\"string\"==typeof o},description:\"a string\"},strict:{required:!1,default:!0,validator:function(o){return\"boolean\"==typeof o},description:\"a boolean\"}};module.exports=function(o){var e=t({optionConfig:a,userOptions:o,prefix:i,suffix:r});return t(e)};\n//# sourceMappingURL=merge-options.min.js.map\n","\"use strict\";function t(t){var e=function(t){if(\"object\"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,\"string\");if(\"object\"!=typeof i)return i;throw new TypeError(\"@@toPrimitive must return a primitive value.\")}return String(t)}(t);return\"symbol\"==typeof e?e:e+\"\"}module.exports=/*#__PURE__*/function(){function Observable(t){this.callbacks=[],this.internal=t,this.initialValue=t}var e,i,r=Observable.prototype;return r.subscribe=function(t){var e=this;if(\"function\"!=typeof t)throw new TypeError(\"[createObservable]: expected callback to be a function.\");return this.callbacks.push(t),function(){var i=e.callbacks.indexOf(t);e.callbacks=e.callbacks.slice(0,i).concat(e.callbacks.slice(i+1))}},r.reset=function(){this.callbacks=[],this.internal=this.initialValue},e=Observable,(i=[{key:\"value\",get:function(){return this.internal},set:function(t){if(t!==this.internal){var e=this.internal;this.internal=t;for(var i=0;i<this.callbacks.length;i++)this.callbacks[i](this.internal,e)}}}])&&function(e,i){for(var r=0;r<i.length;r++){var n=i[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,t(n.key),n)}}(e.prototype,i),Object.defineProperty(e,\"prototype\",{writable:!1}),e}();\n//# sourceMappingURL=observable.min.js.map\n","\"use strict\";function o(o,e){return Object.prototype.hasOwnProperty.call(o,e)}function e(o){return null!==o&&\"object\"==typeof o&&!1===Array.isArray(o)}function t(e){var t=e.optionConfig,i=e.userOptions,r=void 0===i?{}:i,n=e.prefix,a=void 0===n?\"\":n,f=e.suffix,u=void 0===f?\"\":f,p=e.strict,d=void 0===p||p,c=function(o){return[a,o,u].join(\" \")},s={};for(var l in t)if(o(t,l)){var g=t[l],v=g.required,y=g.default,b=g.description,x=g.validator,h=r[l],q=!!o(g,\"required\")&&(\"function\"==typeof v?v(r):v),E=o(r,l),w=x(h,r);if(q){if(!E)throw new TypeError(c(l+\" is required.\"));if(!w)throw new TypeError(c(\"Expected \"+l+\" to be \"+b+\", got \"+typeof h+\" \"+h+\".\"));s[l]=h}else if(s[l]=y,E)if(w)s[l]=h;else{if(d)throw new TypeError(c(\"Expected \"+l+\" to be \"+b+\", got \"+typeof h+\" \"+h+\".\"));console.warn(c(\"Expected \"+l+\" to be \"+b+\", got \"+typeof h+\" \"+h+\". Fallback to default value \"+y+\".\"))}}return s}var i=\"[mergeOptions]:\",r=\"\\nCheck out documentation https://github.com/dubaua/merge-options#parameters-and-return\";function n(o){throw new TypeError([i,o,r].join(\" \"))}var a={optionConfig:{required:!0,validator:function(t){for(var i in t)if(o(t,i)){var r=t[i];if(e(r)||n(\"Expected optionConfig.\"+i+\" to be an object with declarative option configuration, got \"+typeof r+\" \"+r+\".\"),o(r,\"required\")){var a=r.required,f=typeof a;\"boolean\"!==f&&\"function\"!==f&&n(\"Expected optionConfig.\"+i+\".required to be either boolean or function, got \"+typeof a+\" \"+a+\".\")}else o(r,\"default\")||n(\"Expected optionConfig.\"+i+\" to either have required or default value.\");if(o(r,\"default\")||o(r,\"required\")||n(\"Expected optionConfig.\"+i+\" to either have required or default value.\"),o(r,\"description\")){var u=r.description;\"string\"!=typeof r.description&&n(\"Expected optionConfig.\"+i+\".description to be a string, got \"+typeof u+\" \"+u+\".\")}else n(\"Missing description on optionConfig.\"+i+\" config.\");if(o(r,\"validator\")){var p=r.validator;\"function\"!=typeof r.validator&&n(\"Expected optionConfig.\"+i+\".validator to be a function, got \"+typeof p+\" \"+p+\".\")}else n(\"Missing validator on optionConfig.\"+i+\" config.\")}return e(t)},description:\"an object with declarative option configuration\"},userOptions:{required:!1,default:{},validator:e,description:\"an object\"},prefix:{required:!1,default:\"\",validator:function(o){return\"string\"==typeof o},description:\"a string\"},suffix:{required:!1,default:\"\",validator:function(o){return\"string\"==typeof o},description:\"a string\"},strict:{required:!1,default:!0,validator:function(o){return\"boolean\"==typeof o},description:\"a boolean\"}};module.exports=function(o){var e=t({optionConfig:a,userOptions:o,prefix:i,suffix:r});return t(e)};\n//# sourceMappingURL=merge-options.min.js.map\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","import type { OptionConfig } from '@dubaua/merge-options';\nimport type { EventName, Options } from './types';\n\nconst CLASSNAME_REGEX = /^[a-z_-][a-z\\d_-]*$/i;\n\n/** @public All available immerser event names. */\nexport const EVENT_NAMES = ['init', 'bind', 'unbind', 'destroy', 'activeLayerChange', 'layersUpdate'] as const;\n\nfunction classnameValidator(str: string): boolean {\n  return typeof str === 'string' && str !== '' && CLASSNAME_REGEX.test(str);\n}\n\nfunction onOptionValidator(on?: Options['on']): boolean {\n  if (on === undefined) {\n    return true;\n  }\n  if (!on || typeof on !== 'object' || Array.isArray(on)) {\n    return false;\n  }\n  return Object.keys(on).every(\n    (eventName) =>\n      EVENT_NAMES.includes(eventName as EventName) &&\n      (on as Record<string, unknown>)[eventName] !== undefined &&\n      typeof (on as Record<string, unknown>)[eventName] === 'function',\n  );\n}\n\nexport const OPTION_CONFIG: OptionConfig<Options> = {\n  solidClassnameArray: {\n    default: [],\n    description: 'non empty array of objects',\n    validator: (x) => Array.isArray(x) && x.length !== 0,\n  },\n  fromViewportWidth: {\n    default: 0,\n    description: 'a natural number',\n    validator: (x) => typeof x === 'number' && 0 <= x && x % 1 === 0,\n  },\n  pagerThreshold: {\n    default: 0.5,\n    description: 'a number between 0 and 1',\n    validator: (x) => typeof x === 'number' && 0 <= x && x <= 1,\n  },\n  hasToUpdateHash: {\n    default: false,\n    description: 'a boolean',\n    validator: (x) => typeof x === 'boolean',\n  },\n  scrollAdjustThreshold: {\n    default: 0,\n    description: 'a number greater than or equal to 0',\n    validator: (x) => typeof x === 'number' && x >= 0,\n  },\n  scrollAdjustDelay: {\n    default: 600,\n    description: 'a number greater than or equal to 300',\n    validator: (x) => typeof x === 'number' && x >= 300,\n  },\n  pagerLinkActiveClassname: {\n    default: 'pager-link-active',\n    description: 'valid non empty classname string',\n    validator: classnameValidator,\n  },\n  isScrollHandled: {\n    default: true,\n    description: 'a boolean',\n    validator: (x) => typeof x === 'boolean',\n  },\n  on: {\n    default: {},\n    description: 'an object containing event handlers',\n    validator: onOptionValidator,\n  },\n};\n\nexport const MESSAGE_PREFIX = '[immerser:]';\n\nexport const CROPPED_FULL_ABSOLUTE_STYLES: Record<string, string> = {\n  position: 'absolute',\n  top: '0',\n  right: '0',\n  bottom: '0',\n  left: '0',\n  overflow: 'hidden',\n};\n\nexport const NOT_INTERACTIVE_STYLES: Record<string, string> = {\n  pointerEvents: 'none',\n  touchAction: 'none',\n};\n\nexport const INTERACTIVE_STYLES: Record<string, string> = {\n  pointerEvents: 'all',\n  touchAction: 'auto',\n};\n","import { MESSAGE_PREFIX } from './options';\n\nexport function bindStyles(node: HTMLElement, styles: { [key: string]: string }): void {\n  for (const rule in styles) {\n    (node.style as any)[rule] = styles[rule];\n  }\n}\n\nexport function forEachNode<T extends Element>(\n  nodeList: ArrayLike<T>,\n  callback: (node: T, index: number, nodeList: ArrayLike<T>) => void,\n): void {\n  for (let index = 0; index < nodeList.length; index++) {\n    const node = nodeList[index];\n    callback(node, index, nodeList);\n  }\n}\n\nexport function getNodeArray<T extends Element = HTMLElement>({\n  selector,\n  parent = document,\n}: {\n  selector: string;\n  parent?: Document | Element | null;\n}): T[] {\n  if (!parent) {\n    return [];\n  }\n  const nodeList = parent.querySelectorAll<T>(selector);\n  return Array.from(nodeList);\n}\n\nexport function showMessageWithDocumentationLink({\n  message,\n  error,\n  isWarning = false,\n  docsHash = '',\n}: {\n  message: string;\n  error?: unknown;\n  isWarning?: boolean;\n  docsHash?: string;\n}): void {\n  const resultMessage = `${MESSAGE_PREFIX} ${message} \\nCheck out documentation https://github.com/dubaua/immerser${docsHash}`;\n  if (isWarning) {\n    if (error !== undefined) {\n      console.warn(resultMessage, error);\n    } else {\n      console.warn(resultMessage);\n    }\n  } else {\n    throw new Error(resultMessage, { cause: error });\n  }\n}\n\nexport function isEmpty(obj?: Record<string, any> | null): boolean {\n  if (!obj) {\n    return true;\n  }\n  return Object.keys(obj).length === 0 && obj.constructor === Object;\n}\n\nexport function limit(number: number, min: number, max: number): number {\n  return Math.max(Math.min(number, max), min);\n}\n\nexport function getLastScrollPosition(): { x: number; y: number } {\n  const scrollX = window.scrollX || document.documentElement.scrollLeft;\n  const scrollY = window.scrollY || document.documentElement.scrollTop;\n  // limit scroll position between 0 and document height in case of iOS overflow scroll\n  return {\n    x: limit(scrollX, 0, document.documentElement.offsetWidth),\n    y: limit(scrollY, 0, document.documentElement.offsetHeight),\n  };\n}\n\ntype WrappedOnceHandler<F extends (...args: any[]) => void> = F & {\n  __immerserOriginalHandler?: F;\n};\n\nexport function wrapOnceHandler<F extends(...args: any[]) => void>(\n  original: F,\n  wrapper: (...args: Parameters<F>) => void,\n): F {\n  const wrapped = wrapper as WrappedOnceHandler<F>;\n  wrapped.__immerserOriginalHandler = original;\n  return wrapped;\n}\n\nexport function getOriginalHandler<F extends(...args: any[]) => void>(handler: F): F | undefined {\n  return (handler as WrappedOnceHandler<F>).__immerserOriginalHandler;\n}\n","import mergeOptions from '@dubaua/merge-options';\nimport Observable from '@dubaua/observable';\nimport {\n  CROPPED_FULL_ABSOLUTE_STYLES,\n  EVENT_NAMES,\n  INTERACTIVE_STYLES,\n  MESSAGE_PREFIX,\n  NOT_INTERACTIVE_STYLES,\n  OPTION_CONFIG,\n} from './options';\nimport {\n  bindStyles,\n  forEachNode,\n  getLastScrollPosition,\n  getNodeArray,\n  getOriginalHandler,\n  isEmpty,\n  showMessageWithDocumentationLink,\n  wrapOnceHandler,\n} from './utils';\nimport type {\n  ActiveLayerChangeHandler,\n  BaseHandler,\n  EventHandlers,\n  EventName,\n  HandlerArgs,\n  HandlerByEventName,\n  LayerState,\n  LayersUpdateHandler,\n  Options,\n  SolidClassnames,\n} from './types';\n\n/** @public Main Immerser controller orchestrating markup cloning and scroll-driven transitions. */\nexport default class Immerser {\n  private _options: Options = {} as Options;\n  private _selectors = {\n    root: '[data-immerser]',\n    layer: '[data-immerser-layer]',\n    solid: '[data-immerser-solid]',\n    pagerLink: '[data-immerser-pager-link]',\n    mask: '[data-immerser-mask]',\n    maskInner: '[data-immerser-mask-inner]',\n    synchroHover: '[data-immerser-synchro-hover]',\n  };\n  private _layerStateArray: LayerState[] = [];\n  private _layerStateIndexById: Record<string, number> = {};\n  private _isBound = false;\n  private _rootNode: HTMLElement | null = null;\n  private _layerNodeArray: HTMLElement[] = [];\n  private _solidNodeArray: HTMLElement[] = [];\n  private _pagerLinkNodeArray: HTMLElement[] = [];\n  private _originalSolidNodeArray: HTMLElement[] = [];\n  private _maskNodeArray: HTMLElement[] = [];\n  private _synchroHoverNodeArray: HTMLElement[] = [];\n  private _isCustomMarkup = false;\n  private _customMaskNodeArray: HTMLElement[] = [];\n  private _windowHeight = 0;\n  private _immerserTop = 0;\n  private _immerserHeight = 0;\n  private _resizeFrameId: number | null = null;\n  private _resizeObserver: ResizeObserver | null = null;\n  private _scrollFrameId: number | null = null;\n  private _scrollAdjustTimerId: ReturnType<typeof setTimeout> | null = null;\n  private _reactiveActiveLayer = new Observable<number>(-1);\n  private _reactiveWindowWidth = new Observable<number>(-1);\n  private _reactiveSynchroHoverId = new Observable<string | null>(null);\n  private _layerProgressArray: number[] = [];\n  private _unsubscribeRedrawingPager: (() => void) | null = null;\n  private _unsubscribeUpdatingHash: (() => void) | null = null;\n  private _unsubscribeActiveLayerChange: (() => void) | null = null;\n  private _unsubscribeSynchroHover: (() => void) | null = null;\n  private _unsubscribeToggleBindOnResize: (() => void) | null = null;\n  private _handlers: Record<EventName, Set<HandlerByEventName[EventName]>> = {\n    init: new Set(),\n    bind: new Set(),\n    unbind: new Set(),\n    destroy: new Set(),\n    activeLayerChange: new Set(),\n    layersUpdate: new Set(),\n  };\n  private _onResize: (() => void) | null = null;\n  private _onScroll: (() => void) | null = null;\n  private _onSynchroHoverMouseOver: ((e: MouseEvent) => void) | null = null;\n  private _onSynchroHoverMouseOut: (() => void) | null = null;\n\n  /**\n   * Creates immerser instance and immediately runs setup with optional user options.\n   * @param userOptions - overrides for defaults defined in OPTION_CONFIG if pass validation\n   */\n  constructor(userOptions?: Partial<Options>) {\n    this._init(userOptions);\n  }\n\n  /** Bootstraps nodes, options, state, listeners and emits init event. */\n  private _init(userOptions?: Partial<Options>): void {\n    this._setDomNodes();\n    this._validateMarkup();\n    this._mergeOptions(userOptions);\n    this._registerHandlersFromOptions();\n    this._readClassnamesFromMarkup();\n    this._validateSolidClassnameArray();\n    this._initSectionIds();\n    this._initLayerStateArray();\n    this._validateClassnames();\n    this._toggleBindOnResizeObserver();\n    this._setSizes();\n    this._addScrollAndResizeListeners();\n    this._emit('init', this);\n  }\n\n  /** Saves event handlers passed via options into internal registry. */\n  private _registerHandlersFromOptions(): void {\n    if (!this._options.on) {\n      return;\n    }\n    EVENT_NAMES.forEach((eventName) => {\n      const handler = this._options.on?.[eventName];\n      if (typeof handler === 'function') {\n        this.on(eventName, handler);\n      }\n    });\n  }\n\n  /** Executes registered event handlers with provided arguments. */\n  private _emit<K extends EventName>(eventName: K, ...args: HandlerArgs<K>): void {\n    const handlerSet = this._handlers[eventName];\n    handlerSet.forEach((handler: HandlerByEventName[K]) => {\n      try {\n        handler.apply(undefined, args);\n      } catch (error) {\n        if (process.env.NODE_ENV !== 'production') {\n          console.error(`${MESSAGE_PREFIX} handler for ${eventName} event failed`, error);\n        }\n      }\n    });\n  }\n\n  /** Collects root, layer and solid nodes from DOM. */\n  private _setDomNodes(): void {\n    this._rootNode = document.querySelector<HTMLElement>(this._selectors.root);\n    this._layerNodeArray = getNodeArray({ selector: this._selectors.layer });\n    this._solidNodeArray = getNodeArray({ selector: this._selectors.solid, parent: this._rootNode });\n  }\n\n  /** Validates required markup presence and reports descriptive errors. */\n  private _validateMarkup(): void {\n    if (!this._rootNode) {\n      showMessageWithDocumentationLink({\n        message: 'root node not found.',\n        docsHash: '#prepare-your-markup',\n      });\n    }\n    if (this._layerNodeArray.length === 0) {\n      showMessageWithDocumentationLink({\n        message: 'layer nodes not found.',\n        docsHash: '#prepare-your-markup',\n      });\n    }\n    if (this._solidNodeArray.length === 0) {\n      showMessageWithDocumentationLink({\n        message: 'solid nodes not found.',\n        docsHash: '#prepare-your-markup',\n      });\n    }\n  }\n\n  /** Merges user options with defaults and attaches helper metadata to messages. */\n  private _mergeOptions(userOptions?: Partial<Options>): void {\n    this._options = mergeOptions({\n      optionConfig: OPTION_CONFIG,\n      userOptions,\n      prefix: MESSAGE_PREFIX,\n      suffix: '\\nCheck out documentation https://github.com/dubaua/immerser#options',\n    }) as Options;\n  }\n\n  /** Reads per-layer classname configs from data attributes if provided. */\n  private _readClassnamesFromMarkup(): void {\n    this._layerNodeArray.forEach((layerNode, layerIndex) => {\n      if (layerNode.dataset.immerserLayerConfig) {\n        try {\n          this._options.solidClassnameArray[layerIndex] = JSON.parse(layerNode.dataset.immerserLayerConfig);\n        } catch (error) {\n          showMessageWithDocumentationLink({\n            message: 'Failed to parse JSON classname configuration.',\n            error,\n            docsHash: '#options',\n          });\n        }\n      }\n    });\n  }\n\n  /** Ensures classname configuration length matches layers count. */\n  private _validateSolidClassnameArray(): void {\n    const layerCount = this._layerNodeArray.length;\n    const classnamesCount = this._options.solidClassnameArray.length;\n    if (classnamesCount !== layerCount) {\n      showMessageWithDocumentationLink({\n        message: 'solidClassnameArray length differs from count of layers',\n        docsHash: '#options',\n      });\n    }\n  }\n\n  /** Assigns ids to layers when missing and records their indexes. */\n  private _initSectionIds(): void {\n    this._layerNodeArray.forEach((layerNode, layerIndex) => {\n      let id = layerNode.id;\n      if (!id) {\n        id = `immerser-section-${layerIndex}`;\n        layerNode.id = id;\n        (layerNode as any).__immerserCustomId = true;\n      }\n      this._layerStateIndexById[id] = layerIndex;\n    });\n  }\n\n  /** Creates initial LayerState entries for every layer. */\n  private _initLayerStateArray(): void {\n    this._layerStateArray = this._layerNodeArray.map((layerNode, layerIndex) => {\n      const solidClassnames = this._options.solidClassnameArray[layerIndex];\n      const { id } = layerNode;\n      return {\n        beginEnter: 0,\n        beginLeave: 0,\n        endEnter: 0,\n        endLeave: 0,\n        id,\n        layerBottom: 0,\n        layerTop: 0,\n        maskInnerNode: null,\n        maskNode: null,\n        layerNode: layerNode,\n        solidClassnames,\n      } as LayerState;\n    });\n    this._layerProgressArray = this._layerNodeArray.map(() => 0);\n  }\n\n  /** Verifies solid classnames are configured; otherwise warns via showError. */\n  private _validateClassnames(): void {\n    const noClassnameConfigPassed = this._layerStateArray.every((state) => isEmpty(state.solidClassnames));\n    if (noClassnameConfigPassed) {\n      showMessageWithDocumentationLink({\n        message: 'immerser will do nothing without solid classname configuration.',\n        docsHash: '#prepare-your-markup',\n      });\n    }\n  }\n\n  /** Subscribes to window width changes to bind/unbind based on breakpoint. */\n  private _toggleBindOnResizeObserver(): void {\n    this._unsubscribeToggleBindOnResize = this._reactiveWindowWidth.subscribe((nextWindowWidth) => {\n      if (nextWindowWidth >= this._options.fromViewportWidth) {\n        if (!this._isBound) {\n          this.bind();\n        }\n      } else if (this._isBound) {\n        this.unbind();\n      }\n    });\n  }\n\n  /** Recalculates sizes and thresholds for each layer and updates window width observable. */\n  private _setSizes(): void {\n    this._windowHeight = window.innerHeight;\n    this._immerserTop = (this._rootNode as HTMLElement).offsetTop;\n    this._immerserHeight = (this._rootNode as HTMLElement).offsetHeight;\n\n    this._layerStateArray = this._layerStateArray.map((state) => {\n      const layerTop = state.layerNode.offsetTop;\n      const layerBottom = layerTop + state.layerNode.offsetHeight;\n\n      const endEnter = layerTop - this._immerserTop;\n      const beginEnter = endEnter - this._immerserHeight;\n      const endLeave = layerBottom - this._immerserTop;\n      const beginLeave = endLeave - this._immerserHeight;\n\n      return {\n        ...state,\n        layerTop,\n        layerBottom,\n        beginEnter,\n        endEnter,\n        beginLeave,\n        endLeave,\n      } as LayerState;\n    });\n\n    this._reactiveWindowWidth.value = window.innerWidth;\n  }\n\n  /** Attaches scroll and resize listeners respecting isScrollHandled flag. */\n  private _addScrollAndResizeListeners(): void {\n    if (this._options.isScrollHandled) {\n      this._onScroll = this._handleScroll.bind(this);\n      window.addEventListener('scroll', this._onScroll, false);\n    }\n    this._onResize = this._handleResize.bind(this);\n    window.addEventListener('resize', this._onResize, false);\n    window.addEventListener('orientationchange', this._onResize, false);\n    if (typeof ResizeObserver !== 'undefined') {\n      this._resizeObserver = new ResizeObserver(this._onResize);\n      this._resizeObserver.observe(this._rootNode);\n    }\n  }\n\n  /** Clears internal caches, observables and references after destroy. */\n  private _resetInternalState(): void {\n    this._layerStateArray = [];\n    this._layerStateIndexById = {};\n    this._isBound = false;\n    this._rootNode = null;\n    this._layerNodeArray = [];\n    this._solidNodeArray = [];\n    this._pagerLinkNodeArray = [];\n    this._originalSolidNodeArray = [];\n    this._maskNodeArray = [];\n    this._synchroHoverNodeArray = [];\n    this._isCustomMarkup = false;\n    this._customMaskNodeArray = [];\n    this._windowHeight = 0;\n    this._immerserTop = 0;\n    this._immerserHeight = 0;\n    this._resizeFrameId = null;\n    this._resizeObserver = null;\n    this._scrollFrameId = null;\n    this._scrollAdjustTimerId = null;\n    this._reactiveActiveLayer.reset();\n    this._reactiveWindowWidth.reset();\n    this._reactiveSynchroHoverId.reset();\n    this._layerProgressArray = [];\n    this._unsubscribeRedrawingPager = null;\n    this._unsubscribeUpdatingHash = null;\n    this._unsubscribeActiveLayerChange = null;\n    this._unsubscribeSynchroHover = null;\n    this._unsubscribeToggleBindOnResize = null;\n    this._onResize = null;\n    this._onScroll = null;\n    this._onSynchroHoverMouseOver = null;\n    this._onSynchroHoverMouseOut = null;\n    EVENT_NAMES.forEach((eventName) => this._handlers[eventName].clear());\n  }\n\n  /** Builds masks, clones solids, applies classes and mounts generated markup. */\n  private _createMarkup(): void {\n    bindStyles(this._rootNode as HTMLElement, NOT_INTERACTIVE_STYLES);\n    this._initCustomMarkup();\n    this._originalSolidNodeArray = getNodeArray({ selector: this._selectors.solid, parent: this._rootNode });\n\n    this._layerStateArray = this._layerStateArray.map((state, stateIndex) => {\n      // create or assign existing markup, bind styles\n      const maskNode = this._isCustomMarkup ? this._customMaskNodeArray[stateIndex] : document.createElement('div');\n      bindStyles(maskNode, CROPPED_FULL_ABSOLUTE_STYLES);\n\n      let maskInnerNode = this._isCustomMarkup\n        ? maskNode.querySelector<HTMLElement>(this._selectors.maskInner)\n        : document.createElement('div');\n      if (!maskInnerNode) {\n        maskInnerNode = document.createElement('div');\n      }\n      bindStyles(maskInnerNode, CROPPED_FULL_ABSOLUTE_STYLES);\n\n      // mark created masks with data attributes\n      if (!this._isCustomMarkup) {\n        maskNode.dataset.immerserMask = '';\n        maskInnerNode.dataset.immerserMaskInner = '';\n      }\n\n      // clone solids to innerMask\n      this._originalSolidNodeArray.forEach((childNode) => {\n        const clonedChildNode = childNode.cloneNode(true);\n        if (clonedChildNode instanceof HTMLElement) {\n          bindStyles(clonedChildNode, INTERACTIVE_STYLES);\n          (clonedChildNode as any).__immerserCloned = true;\n          maskInnerNode.appendChild(clonedChildNode);\n        }\n      });\n\n      // assign class modifiers to cloned solids\n      const clonedSolidNodeList = getNodeArray<HTMLElement>({\n        selector: this._selectors.solid,\n        parent: maskInnerNode,\n      });\n      forEachNode(clonedSolidNodeList, (clonedSolidNode) => {\n        const solidId = clonedSolidNode.dataset.immerserSolid;\n        if (state.solidClassnames && Object.prototype.hasOwnProperty.call(state.solidClassnames, solidId)) {\n          clonedSolidNode.classList.add(state.solidClassnames[solidId]);\n        }\n      });\n\n      // a11y\n      if (stateIndex !== 0) {\n        maskNode.setAttribute('aria-hidden', 'true');\n      }\n\n      maskNode.appendChild(maskInnerNode);\n      this._rootNode.appendChild(maskNode);\n\n      this._maskNodeArray.push(maskNode);\n\n      return { ...state, maskNode, maskInnerNode };\n    });\n\n    this._detachOriginalSolidNodes();\n  }\n\n  /** Validates and prepares custom masks, binding interactive styles to their children. */\n  private _initCustomMarkup(): void {\n    this._customMaskNodeArray = getNodeArray({ selector: this._selectors.mask, parent: this._rootNode });\n    this._isCustomMarkup = this._customMaskNodeArray.length === this._layerStateArray.length;\n\n    if (this._customMaskNodeArray.length > 0 && !this._isCustomMarkup) {\n      showMessageWithDocumentationLink({\n        message: `You're trying use custom markup, but count of your immerser masks doesn't equal layers count.`,\n        isWarning: true,\n        docsHash: '#cloning-event-listeners',\n      });\n    }\n\n    this._customMaskNodeArray.forEach((customMaskNode) => {\n      const maskInnerNode = customMaskNode.querySelector<HTMLElement>(this._selectors.maskInner);\n      if (!maskInnerNode) {\n        return;\n      }\n      Array.from(maskInnerNode.children).forEach((child) => {\n        if (child instanceof HTMLElement) {\n          bindStyles(child, INTERACTIVE_STYLES);\n        }\n      });\n    });\n  }\n\n  /** Removes original solid nodes from root after clones are in place. */\n  private _detachOriginalSolidNodes(): void {\n    if (!this._rootNode) {\n      return;\n    }\n    this._originalSolidNodeArray.forEach((childNode) => {\n      this._rootNode.removeChild(childNode);\n    });\n  }\n\n  /** Parses pager links and maps them to layer indexes using href hash. */\n  private _initPagerLinks(): void {\n    this._pagerLinkNodeArray = getNodeArray({ selector: this._selectors.pagerLink, parent: this._rootNode });\n    this._pagerLinkNodeArray.forEach((pagerLinkNode) => {\n      const { href } = pagerLinkNode as HTMLAnchorElement;\n      if (href) {\n        const layerId = href.split('#')[1];\n        if (layerId) {\n          const layerIndex = this._layerStateIndexById[layerId];\n          pagerLinkNode.dataset.immerserLayerIndex = layerIndex.toString();\n        }\n      }\n    });\n  }\n\n  /** Sets up synchro hover listeners and reactive updates. */\n  private _initHoverSynchro(): void {\n    this._synchroHoverNodeArray = getNodeArray({ selector: this._selectors.synchroHover, parent: this._rootNode });\n\n    this._onSynchroHoverMouseOver = (e: MouseEvent): void => {\n      const target = e.target as HTMLElement;\n      const synchroHoverId = target.dataset.immerserSynchroHover;\n      this._reactiveSynchroHoverId.value = synchroHoverId;\n    };\n\n    this._onSynchroHoverMouseOut = (): void => {\n      this._reactiveSynchroHoverId.value = null;\n    };\n\n    this._synchroHoverNodeArray.forEach((synchroHoverNode) => {\n      synchroHoverNode.addEventListener('mouseover', this._onSynchroHoverMouseOver!);\n      synchroHoverNode.addEventListener('mouseout', this._onSynchroHoverMouseOut!);\n    });\n  }\n\n  /** Subscribes to reactive values to redraw pager, hash, callbacks and hover. */\n  private _attachCallbacks(): void {\n    if (this._pagerLinkNodeArray.length > 0) {\n      this._unsubscribeRedrawingPager = this._reactiveActiveLayer.subscribe(this._drawPagerLinks.bind(this));\n    }\n\n    if (this._options.hasToUpdateHash) {\n      this._unsubscribeUpdatingHash = this._reactiveActiveLayer.subscribe(this._drawHash.bind(this));\n    }\n\n    this._unsubscribeActiveLayerChange = this._reactiveActiveLayer.subscribe((nextIndex) => {\n      this._emit('activeLayerChange', nextIndex, this);\n    });\n\n    if (this._synchroHoverNodeArray.length > 0) {\n      this._unsubscribeSynchroHover = this._reactiveSynchroHoverId.subscribe(this._drawSynchroHover.bind(this));\n    }\n  }\n\n  /** Unsubscribes from all reactive callbacks. */\n  private _detachCallbacks(): void {\n    this._unsubscribeRedrawingPager?.();\n    this._unsubscribeUpdatingHash?.();\n    this._unsubscribeActiveLayerChange?.();\n    this._unsubscribeSynchroHover?.();\n  }\n\n  /** Removes hover listeners from synchro hover nodes. */\n  private _removeSyncroHoverListeners(): void {\n    this._synchroHoverNodeArray.forEach((synchroHoverNode) => {\n      synchroHoverNode.removeEventListener('mouseover', this._onSynchroHoverMouseOver!);\n      synchroHoverNode.removeEventListener('mouseout', this._onSynchroHoverMouseOut!);\n    });\n  }\n\n  /** Drops autogenerated ids from layers on teardown. */\n  private _clearCustomSectionIds(): void {\n    this._layerStateArray.forEach((state) => {\n      if ((state.layerNode as any).__immerserCustomId) {\n        state.layerNode.removeAttribute('id');\n      }\n    });\n  }\n\n  /** Restores original solid nodes back into the root node. */\n  private _restoreOriginalSolidNodes(): void {\n    if (!this._rootNode) {\n      return;\n    }\n    this._originalSolidNodeArray.forEach((childNode) => {\n      this._rootNode.appendChild(childNode);\n    });\n  }\n\n  /** Removes cloned markup or cleans up custom masks when unbinding. */\n  private _cleanupClonedMarkup(): void {\n    this._maskNodeArray.forEach((immerserMaskNode) => {\n      if (this._isCustomMarkup) {\n        immerserMaskNode.removeAttribute('style');\n        immerserMaskNode.removeAttribute('aria-hidden');\n        const immerserMaskInnerNode = immerserMaskNode.querySelector<HTMLElement>(this._selectors.maskInner);\n        if (!immerserMaskInnerNode) {\n          return;\n        }\n        immerserMaskInnerNode.removeAttribute('style');\n        const clonedSolidNodeArray = getNodeArray({ selector: this._selectors.solid, parent: immerserMaskInnerNode });\n        clonedSolidNodeArray.forEach((clonedSolidNode) => {\n          if ((clonedSolidNode as any).__immerserCloned) {\n            immerserMaskInnerNode.removeChild(clonedSolidNode);\n          }\n        });\n      } else {\n        if (this._rootNode) {\n          this._rootNode.removeChild(immerserMaskNode);\n        }\n      }\n    });\n  }\n\n  private _removeScrollAndResizeListeners(): void {\n    if (this._options.isScrollHandled) {\n      window.removeEventListener('scroll', this._onScroll!, false);\n    }\n    window.removeEventListener('resize', this._onResize!, false);\n    window.removeEventListener('orientationchange', this._onResize!, false);\n    this._resizeObserver?.disconnect();\n  }\n\n  /** Calculates per-layer progress (0..1) based on which part of screen the layer overlaps. */\n  private _setLayersProgress(scrollY?: number): void {\n    const y = scrollY ?? getLastScrollPosition().y;\n    const viewportBottom = y + this._windowHeight;\n\n    this._layerProgressArray = this._layerStateArray.map(({ layerTop, layerBottom }) => {\n      const layerHeight = layerBottom - layerTop;\n      const overlap = Math.min(layerBottom, viewportBottom) - Math.max(layerTop, y);\n      const overlapBase = Math.min(layerHeight, this._windowHeight);\n      return overlapBase <= 0 ? 0 : Math.max(0, Math.min(1, overlap / overlapBase));\n    });\n  }\n\n  /** Applies transforms based on scroll position and updates active layer state. */\n  private _draw(scrollY?: number): void {\n    const y = scrollY !== undefined ? scrollY : getLastScrollPosition().y;\n    this._layerStateArray.forEach(\n      ({ beginEnter, endEnter, beginLeave, endLeave, maskNode, maskInnerNode, layerTop, layerBottom }, layerIndex) => {\n        let progress: number;\n\n        if (beginEnter > y) {\n          progress = this._immerserHeight;\n        } else if (beginEnter <= y && y < endEnter) {\n          progress = endEnter - y;\n        } else if (endEnter <= y && y < beginLeave) {\n          progress = 0;\n        } else if (beginLeave <= y && y < endLeave) {\n          progress = beginLeave - y;\n        } else {\n          progress = -this._immerserHeight;\n        }\n\n        maskNode.style.transform = `translateY(${progress}px)`;\n        maskInnerNode.style.transform = `translateY(${-progress}px)`;\n\n        const pagerScrollActivePoint = y + this._windowHeight * (1 - this._options.pagerThreshold);\n        if (layerTop <= pagerScrollActivePoint && pagerScrollActivePoint < layerBottom) {\n          this._reactiveActiveLayer.value = layerIndex;\n        }\n      },\n    );\n  }\n\n  /** Adds or removes active pager classname according to current layer. */\n  private _drawPagerLinks(layerIndex?: number): void {\n    this._pagerLinkNodeArray.forEach((pagerLinkNode) => {\n      if (parseInt(pagerLinkNode.dataset.immerserLayerIndex, 10) === layerIndex) {\n        pagerLinkNode.classList.add(this._options.pagerLinkActiveClassname);\n      } else {\n        pagerLinkNode.classList.remove(this._options.pagerLinkActiveClassname);\n      }\n    });\n  }\n\n  /** Updates window hash to match active layer id. */\n  private _drawHash(layerIndex: number): void {\n    const { id, layerNode } = this._layerStateArray[layerIndex];\n    layerNode.removeAttribute('id');\n    window.location.hash = id;\n    layerNode.setAttribute('id', id);\n  }\n\n  /** Syncs hover state across elements with matching synchroHover id. */\n  private _drawSynchroHover(synchroHoverId?: string): void {\n    this._synchroHoverNodeArray.forEach((synchroHoverNode) => {\n      if (synchroHoverNode.dataset.immerserSynchroHover === synchroHoverId) {\n        synchroHoverNode.classList.add('_hover');\n      } else {\n        synchroHoverNode.classList.remove('_hover');\n      }\n    });\n  }\n\n  /** Adjusts scroll to layer edges when near thresholds, improving alignment. */\n  private _adjustScroll(): void {\n    const { layerTop, layerBottom } = this._layerStateArray[this._reactiveActiveLayer.value as number];\n    const { x, y } = getLastScrollPosition();\n    const topThreshold = Math.abs(y - layerTop);\n    const bottomThreshold = Math.abs(y + this._windowHeight - layerBottom);\n\n    if (topThreshold !== 0 && bottomThreshold !== 0) {\n      if (topThreshold <= bottomThreshold && topThreshold <= this._options.scrollAdjustThreshold) {\n        window.scrollTo(x, layerTop);\n      } else if (bottomThreshold <= topThreshold && bottomThreshold <= this._options.scrollAdjustThreshold) {\n        window.scrollTo(x, layerBottom - this._windowHeight);\n      }\n    }\n  }\n\n  /** RAF-throttled scroll handler that draws and optionally snaps scroll. */\n  private _handleScroll(): void {\n    if (this._isBound) {\n      if (this._scrollFrameId) {\n        window.cancelAnimationFrame(this._scrollFrameId);\n        this._scrollFrameId = null;\n      }\n      this._scrollFrameId = window.requestAnimationFrame(() => {\n        const y = getLastScrollPosition().y;\n        this._setLayersProgress(y);\n        this._emit('layersUpdate', this._layerProgressArray, this);\n        this._draw(y);\n        if (this._options.scrollAdjustThreshold > 0) {\n          if (this._scrollAdjustTimerId) {\n            clearTimeout(this._scrollAdjustTimerId);\n            this._scrollAdjustTimerId = null;\n          }\n          this._scrollAdjustTimerId = setTimeout(this._adjustScroll.bind(this), this._options.scrollAdjustDelay);\n        }\n      });\n    }\n  }\n\n  /** RAF-throttled resize handler that recalculates sizes and redraws. */\n  private _handleResize(): void {\n    if (this._resizeFrameId) {\n      window.cancelAnimationFrame(this._resizeFrameId);\n      this._resizeFrameId = null;\n    }\n    this._resizeFrameId = window.requestAnimationFrame(() => {\n      this.render();\n    });\n  }\n\n  /**\n   * Prepares markup, attaches listeners and triggers first draw; also emits bind event.\n   * Intended to be idempotent for toggling immerser on when viewport width allows.\n   */\n  public bind(): void {\n    this._createMarkup();\n    this._initPagerLinks();\n    this._initHoverSynchro();\n    this._attachCallbacks();\n    this._isBound = true;\n    this._setLayersProgress();\n    this._draw();\n    this._emit('bind', this);\n  }\n\n  /**\n   * Tears down generated markup and listeners, restores DOM, resets active layer and emits unbind event.\n   * Safe to call multiple times; no-op when already unbound.\n   */\n  public unbind(): void {\n    this._detachCallbacks();\n    this._removeSyncroHoverListeners();\n    this._clearCustomSectionIds();\n    this._restoreOriginalSolidNodes();\n    this._cleanupClonedMarkup();\n    this._isBound = false;\n    this._emit('unbind', this);\n    this._reactiveActiveLayer.value = undefined;\n  }\n\n  /**\n   * Fully destroys immerser: unbinds, removes window listeners, runs destroy event and clears all references.\n   * Use when component is permanently removed.\n   */\n  public destroy(): void {\n    this.unbind();\n    this._unsubscribeToggleBindOnResize?.();\n    this._removeScrollAndResizeListeners();\n    this._emit('destroy', this);\n    this._resetInternalState();\n  }\n\n  /**\n   * Manually recomputes sizes and redraws masks; call after DOM mutations that change layout.\n   * Exposed for dynamic content updates without reinitializing immerser.\n   *\n   * No throttling or performance optimization is applied here. The client is responsible for invocation frequency.\n   */\n  public render(): void {\n    this._setSizes();\n    this._setLayersProgress();\n    this._draw();\n  }\n\n  /**\n   * Syncs immerser with an externally controlled scroll position.\n   * `isScrollHandled=false` option flag is required to call this method.\n   * Call when using a custom scroll engine.\n   *\n   * No throttling or performance optimization is applied here. The client is responsible for invocation frequency.\n   */\n  public syncScroll(): void {\n    if (this._options.isScrollHandled) {\n      if (process.env.NODE_ENV !== 'production') {\n        showMessageWithDocumentationLink({\n          message: 'syncScroll requires the isScrollHandled flag set to false. Call ignored.',\n          isWarning: true,\n          docsHash: '#external-scroll-engine',\n        });\n      }\n      return;\n    }\n    this._setLayersProgress();\n    this._draw();\n  }\n\n  /** Register persistent event handler. */\n  public on<K extends EventName>(eventName: K, handler: HandlerByEventName[K]): void {\n    this._handlers[eventName].add(handler);\n  }\n\n  /** Register event handler that will be removed after first call. */\n  public once<K extends EventName>(eventName: K, handler: HandlerByEventName[K]): void {\n    this._handlers[eventName].add(\n      wrapOnceHandler(handler, (...args: HandlerArgs<K>) => {\n        this.off(eventName, handler);\n        handler.apply(undefined, args);\n      }),\n    );\n  }\n\n  /** Removes handler(s) for provided event. */\n  public off<K extends EventName>(eventName: K, handler: HandlerByEventName[K]): void {\n    const handlerSet = this._handlers[eventName];\n\n    handlerSet.forEach((storedHandler) => {\n      const original = getOriginalHandler(storedHandler);\n      if (storedHandler === handler || original === handler) {\n        handlerSet.delete(storedHandler);\n      }\n    });\n  }\n\n  /** Current active layer index derived from scroll position. */\n  public get activeIndex(): number {\n    return this._reactiveActiveLayer.value;\n  }\n\n  /** Indicates whether immerser is currently bound (markup cloned and listeners attached). */\n  public get isBound(): boolean {\n    return this._isBound;\n  }\n\n  /** The root DOM node immerser is attached to. */\n  public get rootNode(): HTMLElement {\n    return this._rootNode;\n  }\n\n  /** Progress of each layer from 0 (off-screen) to 1 (fully visible). */\n  public get layerProgressArray(): readonly number[] {\n    return this._layerProgressArray;\n  }\n}\n\n// for typedef generation needs\nexport type {\n  ActiveLayerChangeHandler,\n  BaseHandler,\n  EventHandlers,\n  EventName,\n  HandlerByEventName,\n  LayersUpdateHandler,\n  Options,\n  SolidClassnames,\n};\nexport { EVENT_NAMES };\n","var pi = Math.PI,\n    halfPi = pi / 2;\n\nexport function sinIn(t) {\n  return (+t === 1) ? 1 : 1 - Math.cos(t * halfPi);\n}\n\nexport function sinOut(t) {\n  return Math.sin(t * halfPi);\n}\n\nexport function sinInOut(t) {\n  return (1 - Math.cos(pi * t)) / 2;\n}\n","import { ExtractLiteralMapUnionType } from '@dubaua/type-helpers';\n\nexport type AnimateOptions = {\n  duration: number;\n  delay?: number;\n  draw: (progress: number) => void;\n  onComplete?: () => void;\n  onCancel?: (progress: number) => void;\n  autoStart?: boolean;\n};\n\nexport const Directions = {\n  Forward: 1,\n  Backward: -1,\n} as const;\n\nexport type Direction = ExtractLiteralMapUnionType<typeof Directions>;\n","import { OptionConfig } from '@dubaua/merge-options';\nimport { AnimateOptions } from './types';\n\nexport const ANIMATE_OPTION_CONFIG: OptionConfig<AnimateOptions> = {\n  duration: {\n    required: true,\n    validator: (x) => typeof x === 'number' && x > 0,\n    description: 'a positive number of milliseconds',\n  },\n  delay: {\n    required: false,\n    default: 0,\n    validator: (x) => typeof x === 'number' && x >= 0,\n    description: 'a non-negative number of milliseconds',\n  },\n  draw: {\n    required: true,\n    validator: (x) => typeof x === 'function',\n    description: 'a function',\n  },\n  onComplete: {\n    required: false,\n    default: undefined,\n    validator: (x) => typeof x === 'function' || x === undefined,\n    description: 'a function',\n  },\n  onCancel: {\n    required: false,\n    default: undefined,\n    validator: (x) => typeof x === 'function' || x === undefined,\n    description: 'a function',\n  },\n  autoStart: {\n    required: false,\n    default: true,\n    validator: (x) => typeof x === 'boolean',\n    description: 'a boolean',\n  },\n};\n","import mergeOptions, { MergeOptionsResult } from '@dubaua/merge-options';\nimport Observable from '@dubaua/observable';\nimport { AnimateOptions, Direction, Directions } from './types';\nimport { ANIMATE_OPTION_CONFIG } from './options';\n\nclass Animation {\n  private options: MergeOptionsResult<AnimateOptions>;\n  private lastTimestamp = performance.now();\n  private progress = 0;\n  private delayBuffer = 0;\n  private requestId: number | null = null;\n  private _isRunning = new Observable<boolean>(false);\n  private direction: Direction = Directions.Forward;\n  private _isComplete = false;\n\n  constructor(userOptions: AnimateOptions) {\n    this.options = mergeOptions({\n      optionConfig: ANIMATE_OPTION_CONFIG,\n      userOptions,\n      prefix: '[animate]:',\n    });\n\n    this._isRunning.subscribe(this.onIsRunningChange);\n\n    if (this.options.autoStart) {\n      this.run();\n    }\n  }\n\n  public run() {\n    this.direction = Directions.Forward;\n    this._isRunning.value = true;\n\n    return this;\n  }\n\n  public runReverse() {\n    this.direction = Directions.Backward;\n    this._isRunning.value = true;\n\n    return this;\n  }\n\n  public reset() {\n    this.progress = 0;\n    this.delayBuffer = 0;\n    this._isRunning.value = false;\n    this.options.draw(this.progress);\n\n    return this;\n  }\n\n  public pause() {\n    this._isRunning.value = false;\n\n    return this;\n  }\n\n  public destroy() {\n    if (this.requestId !== null) {\n      window.cancelAnimationFrame(this.requestId);\n      this.requestId = null;\n    }\n\n    this._isRunning.reset();\n\n    return this;\n  }\n\n  public get isComplete(): boolean {\n    return this._isComplete;\n  }\n\n  public get isRunning(): boolean {\n    return this._isRunning.value;\n  }\n\n  private tick = (timestamp: number) => {\n    const timeDelta = timestamp - this.lastTimestamp;\n    const frameTick = (timeDelta / this.options.duration) * this.direction;\n\n    if (this.delayBuffer < this.options.delay) {\n      this.delayBuffer += timeDelta;\n    } else {\n      this.progress = Math.min(1, Math.max(0, this.progress + frameTick));\n      this.options.draw(this.progress);\n    }\n\n    const reachedEnd = this.direction === Directions.Forward ? this.progress === 1 : this.progress === 0;\n\n    if (reachedEnd) {\n      this._isRunning.value = false;\n      if (this.direction === Directions.Forward && typeof this.options.onComplete === 'function') {\n        this.options.onComplete();\n        this._isComplete = true;\n      }\n    } else {\n      this.lastTimestamp = timestamp;\n      this.requestId = window.requestAnimationFrame(this.tick);\n    }\n  };\n\n  private onIsRunningChange = (nextState: boolean) => {\n    if (nextState) {\n      this.lastTimestamp = performance.now();\n      this.requestId = window.requestAnimationFrame(this.tick);\n    } else {\n      if (typeof this.options.onCancel === 'function' && this.progress !== 1 && this.progress !== 0) {\n        this.options.onCancel(this.progress);\n      }\n      if (this.requestId !== null) {\n        window.cancelAnimationFrame(this.requestId);\n      }\n    }\n  };\n}\n\nexport default Animation;\n","import { buildCrossPath, Point } from './paths';\n\nconst eyeMaxRadius = 12;\n\nconst closedEyeLeftBase: Point[] = [\n  { x: 79, y: 74 },\n  { x: 105, y: 100 },\n  { x: 105, y: 74 },\n  { x: 79, y: 100 },\n];\nconst closedEyeLeftCenter: Point = { x: 92, y: 87 };\n\nconst closedEyeRightBase: Point[] = [\n  { x: 145, y: 74 },\n  { x: 171, y: 100 },\n  { x: 171, y: 74 },\n  { x: 145, y: 100 },\n];\nconst closedEyeRightCenter: Point = { x: 158, y: 87 };\n\nexport function renderOpenEye(value: number, node: SVGCircleElement): void {\n  const radius = eyeMaxRadius * value;\n  node.setAttribute('r', radius.toString());\n}\n\nfunction renderClosedEye(value: number, points: Point[], center: Point, node: SVGPathElement): void {\n  const d = buildCrossPath(points, center, value);\n  node.setAttribute('d', d);\n}\n\nexport function renderClosedEyeLeft(value: number, node: SVGPathElement): void {\n  renderClosedEye(value, closedEyeLeftBase, closedEyeLeftCenter, node);\n}\n\nexport function renderClosedEyeRight(value: number, node: SVGPathElement): void {\n  renderClosedEye(value, closedEyeRightBase, closedEyeRightCenter, node);\n}\n\nexport function renderOpenEyeLeft(value: number, node: SVGCircleElement): void {\n  renderOpenEye(value, node);\n}\n\nexport function renderOpenEyeRight(value: number, node: SVGCircleElement): void {\n  renderOpenEye(value, node);\n}\n","export type Point = { x: number; y: number };\n\nexport function buildCrossPath(points: ReadonlyArray<Point>, center: Point, factor: number): string {\n  const scaled = points.map(({ x, y }) => ({\n    x: center.x + (x - center.x) * factor,\n    y: center.y + (y - center.y) * factor,\n  }));\n\n  return `M${scaled[0].x} ${scaled[0].y}L${scaled[1].x} ${scaled[1].y}M${scaled[2].x} ${scaled[2].y}L${scaled[3].x} ${scaled[3].y}`;\n}\n\nexport function buildLinePath(points: ReadonlyArray<Point>, center: Point, factor: number): string {\n  const scaled = points.map(({ x, y }) => ({\n    x: center.x + (x - center.x) * factor,\n    y: center.y + (y - center.y) * factor,\n  }));\n\n  return `M${scaled[0].x} ${scaled[0].y}H${scaled[1].x}`;\n}\n","const browMaxTranslateY = 8;\n\nfunction renderBrow(scaleX: number, valueY: number, node: SVGPathElement): void {\n  const translateY = -browMaxTranslateY * valueY;\n  node.setAttribute('transform', `scale(${scaleX} 1) translate(0 ${translateY})`);\n}\n\nexport function renderLeftBrow(scaleX: number, translateY: number, node: SVGPathElement): void {\n  renderBrow(scaleX, translateY, node);\n}\n\nexport function renderRightBrow(scaleX: number, translateY: number, node: SVGPathElement): void {\n  renderBrow(scaleX, translateY, node);\n}\n","export function circleIn(t) {\n  return 1 - Math.sqrt(1 - t * t);\n}\n\nexport function circleOut(t) {\n  return Math.sqrt(1 - --t * t);\n}\n\nexport function circleInOut(t) {\n  return ((t *= 2) <= 1 ? 1 - Math.sqrt(1 - t * t) : Math.sqrt(1 - (t -= 2) * t) + 1) / 2;\n}\n","export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n","import { renderMouthEllipse, renderMouthLine } from './render-mouth-ellipse';\nimport { renderTongue } from './render-tongue';\nimport { renderOpenEyeLeft, renderOpenEyeRight, renderClosedEyeLeft, renderClosedEyeRight } from './render-open-eye';\nimport { renderLeftBrow, renderRightBrow } from './render-left-brow';\nimport { renderGlasses } from './render-glasses';\nimport { renderHand } from './render-hand';\nimport { EmojiFaceConfig } from './config';\nimport { EmojiNodes } from './select-emoji-nodes';\nimport { easeCubicInOut } from 'd3-ease';\n\nexport function renderEmojiFace(config: EmojiFaceConfig, nodes: EmojiNodes): void {\n  if (nodes.mouthClipPath && nodes.mouthShape) {\n    renderMouthEllipse(config.mouthEllipse, nodes.mouthClipPath, nodes.mouthShape);\n  }\n  if (nodes.mouthLine) {\n    renderMouthLine(config.mouthLineScaleX, config.mouthLineShiftX, nodes.mouthLine);\n  }\n  if (nodes.tongue) {\n    const tongueX = easeCubicInOut(config.tongueX);\n    const tongueY = easeCubicInOut(config.tongueY);\n    renderTongue(tongueX, tongueY, nodes.tongue);\n  }\n  if (nodes.leftEyeOpen) {\n    renderOpenEyeLeft(config.eyeOpenLeft, nodes.leftEyeOpen);\n  }\n  if (nodes.rightEyeOpen) {\n    renderOpenEyeRight(config.eyeOpenRight, nodes.rightEyeOpen);\n  }\n  if (nodes.leftEyeClosed) {\n    renderClosedEyeLeft(config.eyeClosedLeft, nodes.leftEyeClosed);\n  }\n  if (nodes.rightEyeClosed) {\n    renderClosedEyeRight(config.eyeClosedRight, nodes.rightEyeClosed);\n  }\n  if (nodes.leftBrow) {\n    renderLeftBrow(config.leftBrowScaleX, config.leftBrowY, nodes.leftBrow);\n  }\n  if (nodes.rightBrow) {\n    renderRightBrow(config.rightBrowScaleX, config.rightBrowY, nodes.rightBrow);\n  }\n  if (nodes.glass) {\n    renderGlasses(config.glasses, nodes.glass);\n  }\n  if (nodes.handInner && nodes.handOuter) {\n    const handValue = easeCubicInOut(config.hand);\n    renderHand(handValue, nodes.handInner, nodes.handOuter);\n  }\n}\n","const mouthEllipseMaxRy = 75;\nconst mouthLineMaxShiftX = 50; // px\n\nexport function renderMouthEllipse(\n  value: number,\n  clipNode: SVGEllipseElement,\n  shapeNode: SVGEllipseElement,\n): void {\n  const ry = (mouthEllipseMaxRy * value).toString();\n  clipNode.setAttribute('ry', ry);\n  shapeNode.setAttribute('ry', ry);\n}\n\nexport function renderMouthLine(scaleX: number, shiftX: number, node: SVGPathElement): void {\n  const translateX = mouthLineMaxShiftX * (shiftX - 0.5) * 2;\n  node.setAttribute('transform', `translate(${translateX} 0) scale(${scaleX} 1)`);\n}\n","const tongueMaxShiftX = 102;\nconst tongueMaxShiftY = 72;\n\nexport function renderTongue(valueX: number, valueY: number, node: SVGPathElement): void {\n  const shiftX = tongueMaxShiftX * valueX;\n  const shiftY = tongueMaxShiftY * valueY;\n  node.setAttribute('transform', `translate(${shiftX} ${shiftY})`);\n}\n","import { easeCircleIn } from 'd3-ease';\n\nconst glassesOffsetX = 550;\nconst glassesOffsetY = -100;\nconst glassesRotation = 30;\n\nexport function renderGlasses(value: number, node: SVGGElement): void {\n  const translateX = glassesOffsetX * (1 - easeCircleIn(value));\n  const translateY = glassesOffsetY * (1 - easeCircleIn(value));\n  const rotate = glassesRotation * (1 - easeCircleIn(value));\n  node.setAttribute('transform', `translate(${translateX} ${translateY}) rotate(${rotate})`);\n}\n","import { easeCircleIn } from 'd3-ease';\nconst handOffsetFactor = 12;\n\nexport function renderHand(value: number, innerNode: SVGGraphicsElement, outerNode: SVGGElement): void {\n  const translateX = -handOffsetFactor * (1 - easeCircleIn(value));\n  const translateY = handOffsetFactor * (1 - easeCircleIn(value));\n  outerNode.setAttribute('transform', `translate(${translateX} ${translateY})`);\n  innerNode.setAttribute('opacity', value.toString());\n}\n","export type EmojiFaceConfig = {\n  mouthEllipse: number;\n  mouthLineScaleX: number;\n  mouthLineShiftX: number;\n  tongueX: number;\n  tongueY: number;\n  eyeOpenLeft: number;\n  eyeOpenRight: number;\n  eyeClosedLeft: number;\n  eyeClosedRight: number;\n  leftBrowScaleX: number;\n  leftBrowY: number;\n  rightBrowScaleX: number;\n  rightBrowY: number;\n  glasses: number;\n  hand: number;\n};\n\nexport const currentConfig: EmojiFaceConfig = {\n  mouthEllipse: 0,\n  mouthLineScaleX: 1,\n  mouthLineShiftX: 0.5,\n  tongueX: 0.315,\n  tongueY: 0.7,\n  eyeOpenLeft: 0,\n  eyeOpenRight: 0,\n  eyeClosedLeft: 0.8,\n  eyeClosedRight: 0.8,\n  leftBrowScaleX: 0,\n  leftBrowY: 0,\n  rightBrowScaleX: 0,\n  rightBrowY: 0,\n  glasses: 0,\n  hand: 0,\n};\n\nconst configReasoning: EmojiFaceConfig = {\n  mouthEllipse: 0,\n  mouthLineScaleX: 1,\n  mouthLineShiftX: 0.5,\n  tongueX: 0.685,\n  tongueY: 0,\n  eyeOpenLeft: 0.8,\n  eyeOpenRight: 0.8,\n  eyeClosedLeft: 0,\n  eyeClosedRight: 0,\n  leftBrowScaleX: 0,\n  leftBrowY: 0,\n  rightBrowScaleX: 0,\n  rightBrowY: 0,\n  glasses: 0,\n  hand: 0,\n};\n\nconst configHowToUse: EmojiFaceConfig = {\n  mouthEllipse: 0,\n  mouthLineScaleX: 1,\n  mouthLineShiftX: 0.5,\n  tongueX: 0.685,\n  tongueY: 0.7,\n  eyeOpenLeft: 0.8,\n  eyeOpenRight: 0.8,\n  eyeClosedLeft: 0,\n  eyeClosedRight: 0,\n  leftBrowScaleX: 0,\n  leftBrowY: 0,\n  rightBrowScaleX: 0,\n  rightBrowY: 0,\n  glasses: 0,\n  hand: 0,\n};\n\nconst configHowItWorks: EmojiFaceConfig = {\n  mouthEllipse: 0,\n  mouthLineScaleX: 0.5,\n  mouthLineShiftX: 0.67,\n  tongueX: 0.685,\n  tongueY: 0,\n  eyeOpenLeft: 0.8,\n  eyeOpenRight: 0.8,\n  eyeClosedLeft: 0,\n  eyeClosedRight: 0,\n  leftBrowScaleX: 1,\n  leftBrowY: 1,\n  rightBrowScaleX: 1,\n  rightBrowY: 0,\n  glasses: 0,\n  hand: 1,\n};\n\nconst configOptions: EmojiFaceConfig = {\n  mouthEllipse: 0,\n  mouthLineScaleX: 1,\n  mouthLineShiftX: 0.5,\n  tongueX: 0.685,\n  tongueY: 0,\n  eyeOpenLeft: 0.8,\n  eyeOpenRight: 0.8,\n  eyeClosedLeft: 0,\n  eyeClosedRight: 0,\n  leftBrowScaleX: 0,\n  leftBrowY: 0,\n  rightBrowScaleX: 0,\n  rightBrowY: 0,\n  glasses: 1,\n  hand: 0,\n};\n\nconst configRecipes: EmojiFaceConfig = {\n  mouthEllipse: 1,\n  mouthLineScaleX: 1,\n  mouthLineShiftX: 0.5,\n  tongueX: 0.685,\n  tongueY: 0,\n  eyeOpenLeft: 1,\n  eyeOpenRight: 1,\n  eyeClosedLeft: 0,\n  eyeClosedRight: 0,\n  leftBrowScaleX: 0,\n  leftBrowY: 0,\n  rightBrowScaleX: 0,\n  rightBrowY: 0,\n  glasses: 0,\n  hand: 0,\n};\n\nexport const layerConfigs = [configReasoning, configHowToUse, configHowItWorks, configOptions, configRecipes];\n\nexport const deadConfig: EmojiFaceConfig = {\n  mouthEllipse: 0,\n  mouthLineScaleX: 1,\n  mouthLineShiftX: 0.5,\n  tongueX: 0.315,\n  tongueY: 0.7,\n  eyeOpenLeft: 0,\n  eyeOpenRight: 0,\n  eyeClosedLeft: 0.8,\n  eyeClosedRight: 0.8,\n  leftBrowScaleX: 0,\n  leftBrowY: 0,\n  rightBrowScaleX: 0,\n  rightBrowY: 0,\n  glasses: 0,\n  hand: 0,\n};\n","import { EmojiFaceConfig } from './config';\n\nexport function mixConfigByProgress(layersProgress: number[], configs: EmojiFaceConfig[]): EmojiFaceConfig {\n  return configs.reduce<EmojiFaceConfig>(\n    (acc, config, index) => {\n      const progress = layersProgress[index] ?? 0;\n\n      acc.mouthEllipse += config.mouthEllipse * progress;\n      acc.mouthLineScaleX += config.mouthLineScaleX * progress;\n      acc.mouthLineShiftX += config.mouthLineShiftX * progress;\n      acc.tongueX += config.tongueX * progress;\n      acc.tongueY += config.tongueY * progress;\n      acc.eyeOpenLeft += config.eyeOpenLeft * progress;\n      acc.eyeOpenRight += config.eyeOpenRight * progress;\n      acc.eyeClosedLeft += config.eyeClosedLeft * progress;\n      acc.eyeClosedRight += config.eyeClosedRight * progress;\n      acc.leftBrowScaleX += config.leftBrowScaleX * progress;\n      acc.leftBrowY += config.leftBrowY * progress;\n      acc.rightBrowScaleX += config.rightBrowScaleX * progress;\n      acc.rightBrowY += config.rightBrowY * progress;\n      acc.glasses += config.glasses * progress;\n      acc.hand += config.hand * progress;\n\n      return acc;\n    },\n    {\n      mouthEllipse: 0,\n      mouthLineScaleX: 0,\n      mouthLineShiftX: 0,\n      tongueX: 0,\n      tongueY: 0,\n      eyeOpenLeft: 0,\n      eyeOpenRight: 0,\n      eyeClosedLeft: 0,\n      eyeClosedRight: 0,\n      leftBrowScaleX: 0,\n      leftBrowY: 0,\n      rightBrowScaleX: 0,\n      rightBrowY: 0,\n      glasses: 0,\n      hand: 0,\n    },\n  );\n}\n","export function renderHpBar(\n  currentHp: number,\n  maxHp: number,\n  opacity: number,\n  outline: SVGRectElement,\n  fill: SVGRectElement,\n): void {\n  const baseWidth = 100;\n  const ratio = Math.max(0, Math.min(1, currentHp / maxHp));\n  const nextWidth = baseWidth * ratio;\n\n  fill.setAttribute('width', nextWidth.toString());\n\n  const { r, g, b } = colorForRatio(ratio);\n  fill.setAttribute('fill', `rgb(${r}, ${g}, ${b})`);\n  if (outline.parentElement) {\n    outline.parentElement.style.opacity = opacity.toString();\n  }\n}\n\nfunction colorForRatio(ratio: number): { r: number; g: number; b: number } {\n  const clamp = Math.max(0, Math.min(1, ratio));\n  const green = { r: 0, g: 255, b: 0 };\n  const yellow = { r: 255, g: 204, b: 0 };\n  const red = { r: 255, g: 51, b: 0 };\n\n  if (clamp <= 0.25) {\n    return red;\n  }\n  if (clamp <= 0.5) {\n    const t = (0.5 - clamp) / 0.25; // yellow -> red\n    return lerpColor(yellow, red, t);\n  }\n  if (clamp < 0.75) {\n    const t = (0.75 - clamp) / 0.25; // green -> yellow\n    return lerpColor(green, yellow, t);\n  }\n  return green;\n}\n\nfunction lerpColor(from: { r: number; g: number; b: number }, to: { r: number; g: number; b: number }, t: number) {\n  return {\n    r: Math.round(from.r + (to.r - from.r) * t),\n    g: Math.round(from.g + (to.g - from.g) * t),\n    b: Math.round(from.b + (to.b - from.b) * t),\n  };\n}\n","import { easeSinInOut } from 'd3-ease';\nimport Observable from '@dubaua/observable';\nimport Animation from '../../../ogawa/src/animate';\nimport { EmojiNodes, selectEmojiNodes } from './select-emoji-nodes';\nimport { renderEmojiFace } from './render-emoji-face';\nimport { EmojiFaceConfig, deadConfig, layerConfigs } from './config';\nimport { mixConfigByProgress } from './mix-config-by-progress';\nimport { renderHpBar } from './render-hp-bar';\n\nconst emojiAnimationDurationMs = 620;\nconst facePressOffsetPx = 2;\nconst MaxHP = 1000;\nconst HPRegenDelayMS = 1400;\n\ntype EmojiState = {\n  hp: Observable<number>;\n  hpRegen: number;\n  regenAnimation: Animation | null;\n  hpBarAnimation: Animation | null;\n  isDead: Observable<boolean>;\n  lastConfig: EmojiFaceConfig;\n  nodes: EmojiNodes[];\n};\n\nconst emojiState: EmojiState = {\n  hp: new Observable(1000),\n  hpRegen: 333,\n  regenAnimation: null,\n  hpBarAnimation: null,\n  isDead: new Observable(false),\n  lastConfig: deadConfig,\n  nodes: [],\n};\n\nemojiState.hp.subscribe((hp, prevHp) => {\n  const hasMissingHp = 0 < hp && hp < MaxHP;\n  const isDead = hp <= 0;\n  const isHit = prevHp !== undefined && hp < prevHp;\n\n  renderHpBars(hp, 1);\n\n  if (isDead) {\n    emojiState.regenAnimation?.pause().destroy();\n    emojiState.isDead.value = true;\n    return;\n  }\n\n  if (hasMissingHp && isHit) {\n    startDelayedRegen();\n  }\n});\n\nemojiState.isDead.subscribe((isDead) => {\n  if (isDead) {\n    new Animation({\n      duration: 320,\n      draw: (p) => {\n        const mixed = mixConfigByProgress([1 - p, p], [emojiState.lastConfig, deadConfig]);\n        emojiState.nodes.forEach((nodes) => renderEmojiFace(mixed, nodes));\n      },\n      onComplete: () => {\n        const buryAnimation = new Animation({\n          delay: 1000,\n          duration: 320,\n          draw: (p) => {\n            emojiState.nodes.forEach(({ face }) => {\n              if (face) {\n                face.style.transform = `translate(${p * 200}%,0)`;\n              }\n            });\n          },\n          onComplete: () => {\n            //      .\n          },\n        });\n      },\n    });\n  }\n});\n\nfunction startDelayedRegen(): void {\n  emojiState.regenAnimation?.pause().destroy();\n\n  const missingHp = MaxHP - emojiState.hp.value;\n  const duration = (missingHp / emojiState.hpRegen) * 1000;\n  const startHp = emojiState.hp.value;\n\n  emojiState.regenAnimation = new Animation({\n    duration,\n    delay: HPRegenDelayMS,\n    draw: (progress) => {\n      emojiState.hp.value = Math.min(MaxHP, startHp + missingHp * progress);\n    },\n    onComplete: () => {\n      emojiState.regenAnimation?.destroy();\n      emojiState.hpBarAnimation = new Animation({\n        delay: 2000,\n        duration: 320,\n        draw: (p) => {\n          renderHpBars(MaxHP, 1 - p);\n        },\n        onComplete: () => {\n          emojiState.regenAnimation?.destroy();\n        },\n      });\n    },\n  });\n}\n\nfunction renderHpBars(hp: number, opacity: number) {\n  emojiState.nodes.forEach((nodes) => {\n    if (nodes.hpBarOutline && nodes.hpBarFill) {\n      renderHpBar(hp, MaxHP, opacity, nodes.hpBarOutline, nodes.hpBarFill);\n    }\n  });\n}\n\nexport function initEmojiAnimation() {\n  const faceNodes = Array.from(document.querySelectorAll<HTMLElement>('[data-emoji-face]'));\n\n  if (faceNodes.length === 0) {\n    return { handleLayersUpdate: (_: number[]) => {} };\n  }\n\n  emojiState.nodes = faceNodes.map((face) => selectEmojiNodes(face));\n\n  const spinAnimation = new Animation({\n    autoStart: false,\n    duration: emojiAnimationDurationMs,\n    draw: (progress) => {\n      const easedProgress = easeSinInOut(progress);\n      emojiState.nodes.forEach((nodes) => {\n        const target = nodes.rotator;\n        if (target) {\n          target.setAttribute('transform', `rotate(${360 * easedProgress} 125 125)`);\n        }\n      });\n\n      emojiState.nodes.forEach((nodes) => {\n        if (nodes.handInner) {\n          const halfProgress = progress <= 0.5 ? progress / 0.5 : 2 - 2 * progress;\n          const angle = -3 * halfProgress;\n          nodes.handInner.style.transform = `rotate(${angle}deg)`;\n        }\n      });\n    },\n  });\n\n  faceNodes.forEach((faceNode) => {\n    let isRunning = false;\n    faceNode.addEventListener('mousedown', (e) => {\n      e.stopPropagation();\n\n      isRunning = spinAnimation.isRunning;\n      spinAnimation.reset();\n      if (!emojiState.isDead.value) {\n        faceNodes.forEach((faceNode) => {\n          faceNode.style.transform = `translateY(${facePressOffsetPx}px)`;\n        });\n      }\n    });\n\n    faceNode.addEventListener('mouseup', (e) => {\n      e.stopPropagation();\n\n      faceNodes.forEach((faceNode) => {\n        faceNode.style.transform = '';\n      });\n\n      if (!emojiState.isDead.value && isRunning) {\n        const damage = Math.round(Math.random() * 150) + 100; // TODO use rollDice\n        emojiState.hp.value = Math.min(Math.max(0, emojiState.hp.value - damage), MaxHP);\n      }\n\n      if (!emojiState.isDead.value) {\n        spinAnimation.run();\n      }\n    });\n  });\n\n  const handleLayersUpdate = (layersProgress: number[]) => {\n    emojiState.lastConfig = mixConfigByProgress(layersProgress, layerConfigs);\n\n    if (!emojiState.isDead.value) {\n      emojiState.nodes.forEach((nodes) => renderEmojiFace(emojiState.lastConfig, nodes));\n    }\n  };\n\n  handleLayersUpdate([1, 0, 0, 0, 0]);\n\n  return { handleLayersUpdate };\n}\n","import Immerser from '../src/immerser';\nimport './styles/main.scss';\nimport { initEmojiAnimation } from './emoji/animation';\n\ntype HighlightableElement = HTMLElement & { isHighlighting?: boolean };\n\ndeclare global {\n  interface Window {\n    immerserInstance?: Immerser;\n  }\n}\n\nconst { handleLayersUpdate } = initEmojiAnimation();\n\nconst immerserInstance = new Immerser({\n  solidClassnameArray: [\n    {\n      logo: 'logo--contrast-lg',\n      pager: 'pager--contrast-lg',\n      language: 'language--contrast-lg',\n    },\n    {\n      pager: 'pager--contrast-only-md',\n      menu: 'menu--contrast',\n      about: 'about--contrast',\n    },\n    {\n      logo: 'logo--contrast-lg',\n      pager: 'pager--contrast-lg',\n      language: 'language--contrast-lg',\n    },\n    {\n      logo: 'logo--contrast-only-md',\n      pager: 'pager--contrast-only-md',\n      language: 'language--contrast-only-md',\n      menu: 'menu--contrast',\n      about: 'about--contrast',\n    },\n    {\n      logo: 'logo--contrast-lg',\n      pager: 'pager--contrast-lg',\n      language: 'language--contrast-lg',\n    },\n  ],\n  fromViewportWidth: 1024,\n  pagerLinkActiveClassname: 'pager__link--active',\n  scrollAdjustThreshold: 50,\n  scrollAdjustDelay: 600,\n  on: {\n    init(immerser) {\n      window.immerserInstance = immerser;\n      console.log('init', immerser);\n    },\n    bind(immerser) {\n      console.log('bind', immerser);\n    },\n    unbind(immerser) {\n      console.log('unbind', immerser);\n    },\n    destroy(immerser) {\n      console.log('destroy', immerser);\n    },\n    activeLayerChange(activeIndex, immerser) {\n      console.log('activeLayerChange', activeIndex, immerser);\n    },\n    layersUpdate(layersProgress, immerser) {\n      console.log('layersProgress', layersProgress, immerser);\n      handleLayersUpdate(layersProgress);\n    },\n  },\n});\n\nconst highlighterNodeList = document.querySelectorAll<HTMLElement>('[data-highlighter]');\nconst highlighterAnimationClassname = 'highlighter-animation-active';\n\nfunction highlight(highlighterNode: HTMLElement) {\n  return () => {\n    if (!immerserInstance.isBound) {\n      return;\n    }\n    const targetSelector = highlighterNode.dataset.highlighter;\n    if (!targetSelector) {\n      return;\n    }\n    const targetNodeList = document.querySelectorAll<HighlightableElement>(targetSelector);\n    targetNodeList.forEach((targetNode) => {\n      if (targetNode.isHighlighting) {\n        return;\n      }\n      targetNode.isHighlighting = true;\n      targetNode.classList.add(highlighterAnimationClassname);\n      const timerId = window.setTimeout(() => {\n        targetNode.classList.remove(highlighterAnimationClassname);\n        window.clearTimeout(timerId);\n        targetNode.isHighlighting = false;\n      }, 1500);\n    });\n  };\n}\n\nhighlighterNodeList.forEach((highlighterNode) => {\n  highlighterNode.addEventListener('mouseover', highlight(highlighterNode));\n  highlighterNode.addEventListener('click', highlight(highlighterNode));\n});\n\nconst rulersNode = document.getElementById('rulers');\nif (rulersNode) {\n  document.addEventListener('keydown', ({ altKey, code, keyCode }) => {\n    const isR = code === 'KeyR' || keyCode === 82;\n    if (altKey && isR) {\n      rulersNode.classList.toggle('rulers--active');\n    }\n  });\n}\n\nconsole.log('welcome here, fella. Press Alt+R to see vertical rhythm');\n","export type EmojiNodes = {\n  face: HTMLElement | null;\n  mouthClipPath: SVGEllipseElement | null;\n  mouthShape: SVGEllipseElement | null;\n  mouthLine: SVGPathElement | null;\n  tongue: SVGPathElement | null;\n  leftEyeClosed: SVGPathElement | null;\n  rightEyeClosed: SVGPathElement | null;\n  leftEyeOpen: SVGCircleElement | null;\n  rightEyeOpen: SVGCircleElement | null;\n  leftBrow: SVGPathElement | null;\n  rightBrow: SVGPathElement | null;\n  glass: SVGGElement | null;\n  hpBarOutline: SVGRectElement | null;\n  hpBarFill: SVGRectElement | null;\n  handInner: SVGGraphicsElement | null;\n  handOuter: SVGGElement | null;\n  rotator: SVGGElement | null;\n};\n\nexport function selectEmojiNodes(root: HTMLElement): EmojiNodes {\n  return {\n    face: root,\n    mouthClipPath: root.querySelector<SVGEllipseElement>('[data-mouth-clip-path]'),\n    mouthShape: root.querySelector<SVGEllipseElement>('[data-mouth-shape]'),\n    mouthLine: root.querySelector<SVGPathElement>('[data-mouth-line]'),\n    tongue: root.querySelector<SVGPathElement>('[data-tongue]'),\n    leftEyeClosed: root.querySelector<SVGPathElement>('[data-left-eye-closed]'),\n    rightEyeClosed: root.querySelector<SVGPathElement>('[data-right-eye-closed]'),\n    leftEyeOpen: root.querySelector<SVGCircleElement>('[data-left-eye-open]'),\n    rightEyeOpen: root.querySelector<SVGCircleElement>('[data-right-eye-open]'),\n    leftBrow: root.querySelector<SVGPathElement>('[data-left-brow]'),\n    rightBrow: root.querySelector<SVGPathElement>('[data-right-brow]'),\n    glass: root.querySelector<SVGGElement>('[data-glass]'),\n    hpBarOutline: root.querySelector<SVGRectElement>('[data-emoji-hp-bar-outline]'),\n    hpBarFill: root.querySelector<SVGRectElement>('[data-emoji-hp-bar-fill]'),\n    handInner: root.querySelector<SVGGraphicsElement>('[data-emoji-hand]'),\n    handOuter: root.querySelector<SVGGElement>('[data-emoji-hand-outer]'),\n    rotator: root.querySelector<SVGGElement>('[data-emoji-rotator]'),\n  };\n}\n"],"names":["t","e","Symbol","toPrimitive","i","call","TypeError","String","module","exports","Observable","this","callbacks","internal","initialValue","r","prototype","subscribe","push","indexOf","slice","concat","reset","key","get","set","length","n","enumerable","configurable","writable","Object","defineProperty","o","hasOwnProperty","Array","isArray","optionConfig","userOptions","prefix","a","f","suffix","u","p","strict","d","c","join","s","l","g","v","required","y","default","b","description","x","validator","h","q","E","w","console","warn","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","__webpack_modules__","getter","__esModule","definition","obj","prop","CLASSNAME_REGEX","EVENT_NAMES","OPTION_CONFIG","solidClassnameArray","fromViewportWidth","pagerThreshold","hasToUpdateHash","scrollAdjustThreshold","scrollAdjustDelay","pagerLinkActiveClassname","str","test","isScrollHandled","on","_typeof","keys","every","eventName","includes","MESSAGE_PREFIX","CROPPED_FULL_ABSOLUTE_STYLES","position","top","right","bottom","left","overflow","NOT_INTERACTIVE_STYLES","pointerEvents","touchAction","INTERACTIVE_STYLES","bindStyles","node","styles","rule","style","getNodeArray","_ref","selector","_ref$parent","parent","document","nodeList","querySelectorAll","from","showMessageWithDocumentationLink","_ref2","message","error","_ref2$isWarning","isWarning","_ref2$docsHash","docsHash","resultMessage","Error","cause","limit","number","min","max","Math","getLastScrollPosition","scrollX","window","documentElement","scrollLeft","scrollY","scrollTop","offsetWidth","offsetHeight","Immerser","_classCallCheck","_defineProperty","root","layer","solid","pagerLink","mask","maskInner","synchroHover","init","Set","bind","unbind","destroy","activeLayerChange","layersUpdate","_init","value","_setDomNodes","_validateMarkup","_mergeOptions","_registerHandlersFromOptions","_readClassnamesFromMarkup","_validateSolidClassnameArray","_initSectionIds","_initLayerStateArray","_validateClassnames","_toggleBindOnResizeObserver","_setSizes","_addScrollAndResizeListeners","_emit","_this","_options","forEach","_this$_options$on","handler","_len","arguments","args","_key","_handlers","apply","_rootNode","querySelector","_selectors","_layerNodeArray","_solidNodeArray","mergeOptions","_this2","layerNode","layerIndex","dataset","immerserLayerConfig","JSON","parse","layerCount","_this3","id","__immerserCustomId","_layerStateIndexById","_this4","_layerStateArray","map","solidClassnames","beginEnter","beginLeave","endEnter","endLeave","layerBottom","layerTop","maskInnerNode","maskNode","_layerProgressArray","state","constructor","_this5","_unsubscribeToggleBindOnResize","_reactiveWindowWidth","nextWindowWidth","_isBound","_this6","_windowHeight","innerHeight","_immerserTop","offsetTop","_immerserHeight","_objectSpread","innerWidth","_onScroll","_handleScroll","addEventListener","_onResize","_handleResize","ResizeObserver","_resizeObserver","observe","_this7","_pagerLinkNodeArray","_originalSolidNodeArray","_maskNodeArray","_synchroHoverNodeArray","_isCustomMarkup","_customMaskNodeArray","_resizeFrameId","_scrollFrameId","_scrollAdjustTimerId","_reactiveActiveLayer","_reactiveSynchroHoverId","_unsubscribeRedrawingPager","_unsubscribeUpdatingHash","_unsubscribeActiveLayerChange","_unsubscribeSynchroHover","_onSynchroHoverMouseOver","_onSynchroHoverMouseOut","clear","_this8","_initCustomMarkup","stateIndex","createElement","immerserMask","immerserMaskInner","childNode","clonedChildNode","cloneNode","HTMLElement","__immerserCloned","appendChild","callback","index","forEachNode","clonedSolidNode","solidId","immerserSolid","classList","add","setAttribute","_detachOriginalSolidNodes","_this9","customMaskNode","children","child","_this0","removeChild","_this1","pagerLinkNode","href","layerId","split","immerserLayerIndex","toString","_this10","synchroHoverId","target","immerserSynchroHover","synchroHoverNode","_this11","_drawPagerLinks","_drawHash","nextIndex","_drawSynchroHover","_this$_unsubscribeRed","_this$_unsubscribeUpd","_this$_unsubscribeAct","_this$_unsubscribeSyn","_this12","removeEventListener","removeAttribute","_this13","_this14","immerserMaskNode","immerserMaskInnerNode","_this$_resizeObserver","disconnect","_this15","viewportBottom","layerHeight","overlap","overlapBase","_this16","_ref3","progress","transform","pagerScrollActivePoint","_this17","parseInt","remove","_this$_layerStateArra","location","hash","_this$_layerStateArra2","_getLastScrollPositio","topThreshold","abs","bottomThreshold","scrollTo","_this18","cancelAnimationFrame","requestAnimationFrame","_setLayersProgress","_draw","clearTimeout","setTimeout","_adjustScroll","_this19","render","_createMarkup","_initPagerLinks","_initHoverSynchro","_attachCallbacks","_detachCallbacks","_removeSyncroHoverListeners","_clearCustomSectionIds","_restoreOriginalSolidNodes","_cleanupClonedMarkup","_this$_unsubscribeTog","_removeScrollAndResizeListeners","_resetInternalState","original","wrapper","wrapped","_this20","off","_len2","_key2","__immerserOriginalHandler","handlerSet","storedHandler","getOriginalHandler","delete","pi","PI","Directions","ANIMATE_OPTION_CONFIG","duration","delay","draw","onComplete","onCancel","autoStart","Animation","performance","now","timestamp","timeDelta","lastTimestamp","frameTick","options","direction","delayBuffer","_isRunning","_isComplete","requestId","tick","nextState","onIsRunningChange","run","closedEyeLeftBase","closedEyeLeftCenter","closedEyeRightBase","closedEyeRightCenter","renderOpenEye","radius","renderClosedEye","points","center","factor","scaled","buildCrossPath","renderBrow","scaleX","valueY","translateY","circleIn","sqrt","cubicInOut","renderEmojiFace","config","nodes","clipNode","shapeNode","ry","shiftX","translateX","mouthClipPath","mouthShape","mouthEllipse","mouthLine","mouthLineScaleX","mouthLineShiftX","tongue","valueX","shiftY","renderTongue","easeCubicInOut","tongueX","tongueY","leftEyeOpen","renderOpenEyeLeft","eyeOpenLeft","rightEyeOpen","renderOpenEyeRight","eyeOpenRight","leftEyeClosed","renderClosedEyeLeft","eyeClosedLeft","rightEyeClosed","renderClosedEyeRight","eyeClosedRight","leftBrow","renderLeftBrow","leftBrowScaleX","leftBrowY","rightBrow","renderRightBrow","rightBrowScaleX","rightBrowY","glass","easeCircleIn","rotate","renderGlasses","glasses","handInner","handOuter","innerNode","outerNode","renderHand","hand","layerConfigs","deadConfig","mixConfigByProgress","layersProgress","configs","reduce","acc","_layersProgress$index","renderHpBar","currentHp","maxHp","opacity","outline","fill","ratio","nextWidth","_colorForRatio","clamp","green","yellow","red","lerpColor","colorForRatio","parentElement","to","round","MaxHP","emojiState","hp","hpRegen","regenAnimation","hpBarAnimation","isDead","lastConfig","renderHpBars","hpBarOutline","hpBarFill","prevHp","_emojiState$regenAnim","hasMissingHp","isHit","pause","_emojiState$regenAnim2","missingHp","startHp","_emojiState$regenAnim3","_emojiState$regenAnim4","startDelayedRegen","mixed","face","_initEmojiAnimation","faceNodes","handleLayersUpdate","_","rotator","spinAnimation","easedProgress","cos","angle","faceNode","isRunning","stopPropagation","damage","random","initEmojiAnimation","immerserInstance","logo","pager","language","menu","about","immerser","log","activeIndex","highlighterNodeList","highlighterAnimationClassname","highlight","highlighterNode","isBound","targetSelector","highlighter","targetNode","isHighlighting","timerId","rulersNode","getElementById","altKey","code","keyCode","toggle"],"ignoreList":[],"sourceRoot":""}