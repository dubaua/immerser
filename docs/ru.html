<!doctype html><html lang="ru" class="font-cyrillic"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="X-UA-Compatible" content="ie=edge"><title>иммёрсер — джаваскрипт библиотека для перекрашивания фиксированных блоков по скроллу</title><link href="https://fonts.googleapis.com/css?family=Questrial|Montserrat&display=swap&subset=cyrillic" rel="stylesheet"><link rel="icon" href="favicon.ico"><script defer="defer" src="main.js"></script><link href="main.css" rel="stylesheet"></head><body><div class="fixed" data-immerser><div class="fixed__pager pager" data-immerser-solid="pager"><a href="#reasoning" class="pager__link" data-immerser-synchro-hover="pager-reasoning" data-immerser-pager-link></a> <a href="#how-to-use" class="pager__link" data-immerser-synchro-hover="pager-how-to-use" data-immerser-pager-link></a> <a href="#how-it-works" class="pager__link" data-immerser-synchro-hover="pager-how-it-works" data-immerser-pager-link></a> <a href="#options" class="pager__link" data-immerser-synchro-hover="pager-options" data-immerser-pager-link></a> <a href="#recipes" class="pager__link" data-immerser-synchro-hover="pager-recipes" data-immerser-pager-link></a></div><a href="#reasoning" class="fixed__logo logo" data-immerser-solid="logo" data-immerser-synchro-hover="logo">иммёрсер</a><div class="fixed__menu menu" data-immerser-solid="menu"><a href="#reasoning" class="menu__link" data-immerser-synchro-hover="reasoning">Зачем нужен иммёрсер</a> <a href="#how-to-use" class="menu__link" data-immerser-synchro-hover="how-to-use">Как пользоваться</a> <a href="#how-it-works" class="menu__link" data-immerser-synchro-hover="how-it-works">Принцип работы</a> <a href="#options" class="menu__link" data-immerser-synchro-hover="options">Настройки</a> <a href="#recipes" class="menu__link" data-immerser-synchro-hover="recipes">Рецепты</a></div><div class="fixed__language language" data-immerser-solid="language"><a href="./" class="language__link">english</a><span class="language__link language__link--active">по-русски</span></div><div class="fixed__about about" data-immerser-solid="about"><span>&copy; 2025 &mdash; Владимир Лысов, Челябинск, Россия</span> <a href="https://github.com/dubaua/immerser">гитхаб</a> <a href="mailto:dubaua@gmail.com">dubaua@gmail.com</a></div><div data-immerser-mask><div data-immerser-mask-inner><div class="fixed__emoji emoji" data-emoji-animating="false"><svg class="emoji__face" width="250" height="250" viewBox="0 0 250 250" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="black" fill-rule="evenodd" clip-rule="evenodd" d="M92 99C98.6274 99 104 93.6274 104 87C104 80.3726 98.6274 75 92 75C85.3726 75 80 80.3726 80 87C80 93.6274 85.3726 99 92 99ZM92 94C95.866 94 99 90.866 99 87C99 83.134 95.866 80 92 80C88.134 80 85 83.134 85 87C85 90.866 88.134 94 92 94Z"/><path fill="black" fill-rule="evenodd" clip-rule="evenodd" d="M158 99C164.627 99 170 93.6274 170 87C170 80.3726 164.627 75 158 75C151.373 75 146 80.3726 146 87C146 93.6274 151.373 99 158 99ZM158 94C161.866 94 165 90.866 165 87C165 83.134 161.866 80 158 80C154.134 80 151 83.134 151 87C151 90.866 154.134 94 158 94Z"/><path fill="black" d="M200 125H50V130H200V125Z"/><path fill="black" fill-rule="evenodd" clip-rule="evenodd" d="M125 225C180.228 225 225 180.228 225 125C225 69.7715 180.228 25 125 25C69.7715 25 25 69.7715 25 125C25 180.228 69.7715 225 125 225ZM125 220C177.467 220 220 177.467 220 125C220 72.5329 177.467 30 125 30C72.5329 30 30 72.5329 30 125C30 177.467 72.5329 220 125 220Z"/></svg></div></div></div><div data-immerser-mask><div data-immerser-mask-inner><div class="fixed__emoji emoji" data-emoji-animating="false"><svg class="emoji__face" width="250" height="250" viewBox="0 0 250 250" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="white" fill-rule="evenodd" clip-rule="evenodd" d="M92 99C98.6274 99 104 93.6274 104 87C104 80.3726 98.6274 75 92 75C85.3726 75 80 80.3726 80 87C80 93.6274 85.3726 99 92 99ZM92 94C95.866 94 99 90.866 99 87C99 83.134 95.866 80 92 80C88.134 80 85 83.134 85 87C85 90.866 88.134 94 92 94Z"/><path fill="white" fill-rule="evenodd" clip-rule="evenodd" d="M158 99C164.627 99 170 93.6274 170 87C170 80.3726 164.627 75 158 75C151.373 75 146 80.3726 146 87C146 93.6274 151.373 99 158 99ZM158 94C161.866 94 165 90.866 165 87C165 83.134 161.866 80 158 80C154.134 80 151 83.134 151 87C151 90.866 154.134 94 158 94Z"/><path fill="white" fill-rule="evenodd" clip-rule="evenodd" d="M50 125H200V130H170V149C170 162.255 159.255 173 146 173C132.745 173 122 162.255 122 149V130H50V125ZM148.5 130H165V149C165 159.493 156.493 168 146 168C135.507 168 127 159.493 127 149V130H143.5V149.5H148.5V130Z"/><path fill="white" fill-rule="evenodd" clip-rule="evenodd" d="M125 225C180.228 225 225 180.228 225 125C225 69.7715 180.228 25 125 25C69.7715 25 25 69.7715 25 125C25 180.228 69.7715 225 125 225ZM125 220C177.467 220 220 177.467 220 125C220 72.5329 177.467 30 125 30C72.5329 30 30 72.5329 30 125C30 177.467 72.5329 220 125 220Z"/></svg></div></div></div><div data-immerser-mask><div data-immerser-mask-inner><div class="fixed__emoji emoji" data-emoji-animating="false"><svg class="emoji__face" width="250" height="250" viewBox="0 0 250 250" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M92 99C98.6274 99 104 93.6274 104 87C104 80.3726 98.6274 75 92 75C85.3726 75 80 80.3726 80 87C80 93.6274 85.3726 99 92 99ZM92 94C95.866 94 99 90.866 99 87C99 83.134 95.866 80 92 80C88.134 80 85 83.134 85 87C85 90.866 88.134 94 92 94Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M158 99C164.627 99 170 93.6274 170 87C170 80.3726 164.627 75 158 75C151.373 75 146 80.3726 146 87C146 93.6274 151.373 99 158 99ZM158 94C161.866 94 165 90.866 165 87C165 83.134 161.866 80 158 80C154.134 80 151 83.134 151 87C151 90.866 154.134 94 158 94Z" fill="black"/><path d="M99 125H182V130H99V125Z" fill="black"/><path d="M182 67H134V72H182V67Z" fill="black"/><path d="M68 59H116V64H68V59Z" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M225 125C225 180.228 180.228 225 125 225C69.7715 225 25 180.228 25 125C25 69.7715 69.7715 25 125 25C180.228 25 225 69.7715 225 125ZM220 125C220 177.467 177.467 220 125 220C72.5329 220 30 177.467 30 125C30 72.5329 72.5329 30 125 30C177.467 30 220 72.5329 220 125Z" fill="black"/></svg> <svg class="emoji__hand" width="250" height="250" viewBox="0 0 250 250" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M89.263 171.159C89.2214 170.999 89.1813 170.837 89.1431 170.673C88.745 168.967 89.4731 168.088 90.5752 166.757C92.3044 164.668 94.9541 161.467 95.6175 152.218C96.7036 137.075 86.623 122.485 77.3717 124.644C70.6987 126.202 72.0907 132.555 73.3485 138.296C73.8345 140.514 74.3004 142.641 74.2734 144.365C74.2711 144.515 74.2688 144.666 74.2666 144.817C74.1772 150.897 74.0743 157.885 64.7316 165.076C55.1563 172.445 48.4377 183.256 48.8769 193.935C49.3161 204.615 53.0991 218.622 61.4748 225.909C69.8505 233.196 79.1186 237.707 91.3728 237.414C100.639 237.192 116.261 234.018 123.694 229.291C124.795 228.768 125.752 227.984 126.48 227.015C127.257 226.139 127.734 225.225 127.842 224.28C127.86 224.124 127.868 223.972 127.867 223.823C127.923 223.506 127.959 223.182 127.974 222.853C128.11 219.842 126.452 217.165 123.945 215.858C128.087 215.457 131.411 212.061 131.606 207.783C131.797 203.576 128.896 199.944 124.911 199.088C129.092 198.476 132.389 194.97 132.588 190.591C132.797 185.97 129.485 182.005 125.022 181.295L161.029 172.89C165.87 171.76 168.877 166.92 167.748 162.08C166.618 157.24 161.778 154.232 156.937 155.362L89.263 171.159Z" fill="white" stroke="black" stroke-width="5" stroke-linejoin="round"/></svg></div></div></div><div data-immerser-mask><div data-immerser-mask-inner><div class="fixed__emoji emoji" data-emoji-animating="false"><svg class="emoji__face" width="250" height="250" viewBox="0 0 250 250" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="white" d="M50 125H200V130H50V125Z"/><path fill="white" d="M104 84.5H80V89.5H104V84.5Z"/><path fill="white" d="M146 84.5H170V89.5H146V84.5Z"/><path fill="white" fill-rule="evenodd" clip-rule="evenodd" d="M68 71H116V84.5H134V71H182V103H134V89.5H116V103H68V71ZM73 76H111V98H73V76ZM177 76H139V98H177V76Z"/><path fill="white" fill-rule="evenodd" clip-rule="evenodd" d="M225 125C225 180.228 180.228 225 125 225C69.7715 225 25 180.228 25 125C25 69.7715 69.7715 25 125 25C180.228 25 225 69.7715 225 125ZM220 125C220 177.467 177.467 220 125 220C72.5329 220 30 177.467 30 125C30 72.5329 72.5329 30 125 30C177.467 30 220 72.5329 220 125Z"/></svg></div></div></div><div data-immerser-mask><div data-immerser-mask-inner><div class="fixed__emoji emoji" data-emoji-animating="false"><svg class="emoji__face" width="250" height="250" viewBox="0 0 250 250" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill="black" fill-rule="evenodd" clip-rule="evenodd" d="M49.5016 126C49.5103 127.342 49.554 128.676 49.6319 130C50.2496 140.509 53.0168 150.44 57.5 159.36L57.5136 159.387C58.9941 162.33 60.6615 165.162 62.5 167.869C64.0483 170.148 65.7181 172.339 67.5 174.431C67.5315 174.468 67.5631 174.505 67.5947 174.542C67.63 174.583 67.6653 174.624 67.7007 174.665C69.2217 176.436 70.8233 178.136 72.5 179.759C74.1 181.307 75.7683 182.786 77.5 184.189C77.5745 184.249 77.649 184.309 77.7237 184.369C79.2671 185.61 80.8604 186.792 82.5 187.911C84.1224 189.018 85.7902 190.063 87.5 191.043C87.6202 191.112 87.7407 191.181 87.8613 191.249C89.3758 192.107 90.9228 192.913 92.5 193.666C94.135 194.447 95.8025 195.171 97.5 195.835C97.6118 195.879 97.7236 195.923 97.8356 195.966C99.367 196.556 100.922 197.099 102.5 197.591C104.143 198.103 105.811 198.561 107.5 198.962L107.665 199C109.258 199.375 110.87 199.698 112.5 199.97C116.566 200.647 120.742 201 125 201C129.258 201 133.434 200.647 137.5 199.97L137.59 199.955L137.707 199.935C139.323 199.661 140.921 199.336 142.5 198.962C144.189 198.561 145.857 198.103 147.5 197.591L147.535 197.58C149.216 197.055 150.872 196.472 152.5 195.835C154.197 195.171 155.865 194.447 157.5 193.666C157.572 193.632 157.643 193.598 157.715 193.563C157.759 193.542 157.804 193.52 157.849 193.499C159.431 192.733 160.982 191.914 162.5 191.043C164.21 190.063 165.878 189.018 167.5 187.911C167.572 187.862 167.644 187.812 167.716 187.763C169.359 186.634 170.955 185.441 172.5 184.189C174.232 182.786 175.9 181.307 177.5 179.759L177.512 179.747C179.258 178.057 180.923 176.282 182.5 174.431C184.282 172.339 185.952 170.148 187.5 167.869L187.602 167.718C189.406 165.049 191.044 162.258 192.5 159.36C196.983 150.44 199.75 140.509 200.368 130C200.446 128.675 200.49 127.342 200.498 125.999C200.499 125.833 200.5 125.667 200.5 125.5C200.5 125.333 200.499 125.167 200.498 125H49.5016C49.5005 125.167 49.5 125.333 49.5 125.5C49.5 125.667 49.5005 125.833 49.5016 126ZM57.5 130H54.6413C54.9877 135.499 55.9644 140.826 57.5 145.911V130ZM62.5 158.15C63.9847 160.986 65.6569 163.709 67.5 166.302V130H62.5V158.15ZM72.5 130V172.554C74.0814 174.317 75.7504 176.001 77.5 177.597V130H72.5ZM82.5 130V181.754C84.1139 182.976 85.782 184.129 87.5 185.21V130H82.5ZM92.5 130V188.078C94.1304 188.927 95.7981 189.713 97.5 190.435V130H92.5ZM102.5 130V192.333C104.141 192.885 105.808 193.379 107.5 193.811V130H102.5ZM112.5 130V194.895C114.148 195.19 115.815 195.428 117.5 195.606V130H112.5ZM122.5 130V195.956C123.33 195.985 124.163 196 125 196C125.837 196 126.67 195.985 127.5 195.956V130H122.5ZM132.5 130V195.606C134.185 195.428 135.852 195.19 137.5 194.895V130H132.5ZM142.5 130V193.811C144.192 193.379 145.859 192.885 147.5 192.333V130H142.5ZM152.5 130V190.435C154.202 189.713 155.87 188.927 157.5 188.078V130H152.5ZM162.5 130V185.21C164.218 184.129 165.886 182.976 167.5 181.754V130H162.5ZM172.5 130V177.597C174.25 176.001 175.919 174.317 177.5 172.554V130H172.5ZM182.5 130V166.302C184.343 163.709 186.015 160.986 187.5 158.15V130H182.5ZM192.5 130V145.911C194.036 140.826 195.012 135.499 195.359 130H192.5Z"/><path fill="black" fill-rule="evenodd" clip-rule="evenodd" d="M92 102C100.284 102 107 95.2843 107 87C107 78.7157 100.284 72 92 72C83.7157 72 77 78.7157 77 87C77 95.2843 83.7157 102 92 102ZM92 97C97.5229 97 102 92.5229 102 87C102 81.4772 97.5229 77 92 77C86.4772 77 82 81.4772 82 87C82 92.5229 86.4772 97 92 97Z"/><path fill="black" fill-rule="evenodd" clip-rule="evenodd" d="M158 102C166.284 102 173 95.2843 173 87C173 78.7157 166.284 72 158 72C149.716 72 143 78.7157 143 87C143 95.2843 149.716 102 158 102ZM158 97C163.523 97 168 92.5229 168 87C168 81.4772 163.523 77 158 77C152.477 77 148 81.4772 148 87C148 92.5229 152.477 97 158 97Z"/><path fill="black" fill-rule="evenodd" clip-rule="evenodd" d="M125 225C180.228 225 225 180.228 225 125C225 69.7715 180.228 25 125 25C69.7715 25 25 69.7715 25 125C25 180.228 69.7715 225 125 225ZM125 220C177.467 220 220 177.467 220 125C220 72.5329 177.467 30 125 30C72.5329 30 30 72.5329 30 125C30 177.467 72.5329 220 125 220Z"/></svg></div></div></div></div><header class="header"><a href="#reasoning" class="logo">иммёрсер</a></header><div id="reasoning" class="grid" data-immerser-layer data-immerser-layer-config='{"logo": "logo--contrast-lg", "pager": "pager--contrast-lg", "language": "language--contrast-lg"}'><div class="grid__col grid__col--alpha background--contrast"></div><div class="grid__col grid__col--beta tall start end background"><div class="grid__content typography"><h1>Зачем нужен иммёрсер?</h1><p>Иногда дизайнеры создают сложную логику и&nbsp;фиксируют части интерфейса. А&nbsp;еще они красят разделы страницы в&nbsp;контрастные цвета. Как с&nbsp;этим справиться?</p><p>Вам поможет иммёрсер&nbsp;&mdash; джаваскрипт библиотека для замены фиксированных элементов при прокрутке страницы.</p><p>Иммёрсер вычисляет состояния один раз в&nbsp;момент инициализации. Затем он&nbsp;следит за&nbsp;позицией скролла и&nbsp;планирует перерисовку документа в&nbsp;следующем такте цикла событий через метод requestAnimationFrame. Скрипт изменяет свойство transform, это задействует графический ускоритель.</p><p>Иммёрсер написан на&nbsp;тайпскрипте. Всего&nbsp;5.98Кб в&nbsp;сжатии gzip.</p><h1>Термины</h1><p><code class="highlighter" data-highlighter="[data-immerser]">Корневой элемент иммёрсера</code>&nbsp;&mdash; это родительский контейнер для ваших фиксированных <code class="highlighter" data-highlighter="[data-immerser-solid], .emoji">блоков</code>. Фактически они позиционированы абсолютно внутри фиксированного корневого элемента. <code class="highlighter" data-highlighter="[data-immerser-layer]">Слои</code>&nbsp;&mdash; это разделы страницы, окрашенные в&nbsp;разные цвета. Еще вы&nbsp;наверняка захотите добавить <code class="highlighter" data-highlighter="[data-immerser-solid='pager']">навигацию</code> по&nbsp;разделам, выделяющую активный раздел.</p></div></div><div class="grid__col--gamma background"></div></div><div id="how-to-use" class="grid" data-immerser-layer data-immerser-layer-config='{"pager": "pager--contrast-only-md", "menu": "menu--contrast", "about": "about--contrast"}'><div class="grid__col grid__col--alpha"></div><div class="grid__col grid__col--beta-gamma tall"><div class="grid"><div class="grid__col grid__col--beta start"><div class="grid__content typography"><h1>Установка</h1><p>Через npm:</p><p>Через yarn:</p><p>Или если вы хотите использовать иммёрсер в браузере как глобальную переменную:</p></div></div><div class="grid__col grid__col--gamma start background--contrast scroller-x"><div class="as-if-title" aria-hidden="true"></div><div class="grid__content"><div class="code-highlight code-highlight--contrast"><pre><code>npm install immerser

yarn add immerser

</code></pre><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>https://unpkg.com/immerser@4.0.3/dist/immerser.min.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></code></pre></div></div></div></div><div class="grid" id="prepare-your-markup"><div class="grid__col grid__col--beta"><div class="grid__content typography"><h1>Подготовьте разметку</h1><p>Сначала настройте свой фиксированный контейнер как корневой элемент иммёрсера, добавив атрибут <code>data-immerser</code></p><p>Затем расположите в&nbsp;нем абсолютно позиционированные дочерние элементы и&nbsp;добавьте каждому атрибут <code>data-immerser-solid="solid-id"</code> с&nbsp;идентификатором блока.</p><p>Добавьте каждому слою атрибут <code>data-immerser-layer</code>. Передайте конфигурацию в&nbsp;виде JSON в&nbsp;каждый слой с&nbsp;помощью атрибута <code>data-immerser-layer-config='{"solid-id": "classname-modifier"}'</code>. Также вы&nbsp;можете передать конфигурацию всех слоев массивом в&nbsp;параметре <code>solidClassnameArray</code> настроек. Конфигурация должна содержать описание классов для блоков, когда они находятся поверх слоя.</p><p>Так&nbsp;же вы&nbsp;можете добавить элемент с&nbsp;атрибутом <code>data-immerser-pager</code> для создания навигации.</p></div></div><div class="grid__col grid__col--gamma background--contrast scroller-x"><div class="as-if-title" aria-hidden="true"></div><div class="grid__content"><div class="code-highlight code-highlight--contrast"><pre><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fixed<span class="token punctuation">"</span></span> <span class="token attr-name">data-immerser</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fixed__pager pager<span class="token punctuation">"</span></span> <span class="token attr-name">data-immerser-pager</span> <span class="token attr-name">data-immerser-solid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pager<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#reasoning<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fixed__logo logo<span class="token punctuation">"</span></span> <span class="token attr-name">data-immerser-solid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>logo<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>иммёрсер<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fixed__menu menu<span class="token punctuation">"</span></span> <span class="token attr-name">data-immerser-solid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>menu<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#reasoning<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>menu__link<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Зачем нужен иммёрсер<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#how-to-use<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>menu__link<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Как пользоваться<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#how-it-works<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>menu__link<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Принцип работы<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#options<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>menu__link<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Настройки<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#recipes<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>menu__link<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Рецепты<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fixed__language language<span class="token punctuation">"</span></span> <span class="token attr-name">data-immerser-solid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>language<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>language__link<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>english<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/ru.html<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>language__link<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>по-русски<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fixed__about about<span class="token punctuation">"</span></span> <span class="token attr-name">data-immerser-solid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>about<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    &copy; 2025 &mdash; Владимир Лысов, Челябинск, Россия
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://github.com/dubaua/immerser<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>гитхаб<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>mailto:dubaua@gmail.com<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>dubaua@gmail.com<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">data-immerser-layer</span> <span class="token attr-name">data-immerser-layer-config</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>{"logo": "logo--contrast", "pager": "pager--contrast", "social": "social--contrast"}<span class="token punctuation">'</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>reasoning<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">data-immerser-layer</span> <span class="token attr-name">data-immerser-layer-config</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>{"menu": "menu--contrast", "about": "about--contrast"}<span class="token punctuation">'</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>how-to-use<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">data-immerser-layer</span> <span class="token attr-name">data-immerser-layer-config</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>{"logo": "logo--contrast", "pager": "pager--contrast", "social": "social--contrast"}<span class="token punctuation">'</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>how-it-works<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">data-immerser-layer</span> <span class="token attr-name">data-immerser-layer-config</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>{"menu": "menu--contrast", "about": "about--contrast"}<span class="token punctuation">'</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>options<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">data-immerser-layer</span> <span class="token attr-name">data-immerser-layer-config</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>{"logo": "logo--contrast", "pager": "pager--contrast", "social": "social--contrast"}<span class="token punctuation">'</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>recipes<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre></div></div></div></div><div class="grid" id="apply-styles"><div class="grid__col grid__col--beta"><div class="grid__content typography"><h1>Примените стили</h1><p>Добавьте стили цвета текста и&nbsp;фона на&nbsp;ваши блоки и&nbsp;слои с&nbsp;помощью классов, переданных в&nbsp;дата-атрибут или настройки. В&nbsp;примере я использую <a href="https://ru.bem.info/methodology/">методологию БЭМ</a>.</p></div></div><div class="grid__col grid__col--gamma background--contrast scroller-x"><div class="as-if-title" aria-hidden="true"></div><div class="grid__content"><div class="code-highlight code-highlight--contrast"><pre><code class="language-css"><span class="token selector">.fixed</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 2em<span class="token punctuation">;</span>
  <span class="token property">bottom</span><span class="token punctuation">:</span> 3em<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 3em<span class="token punctuation">;</span>
  <span class="token property">right</span><span class="token punctuation">:</span> 3em<span class="token punctuation">;</span>
  <span class="token property">z-index</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.fixed__pager</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">translate</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> -50%<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.fixed__logo</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.fixed__menu</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.fixed__language</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.fixed__about</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.pager,
.logo,
.menu,
.language,
.about</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> black<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.pager--contrast,
.logo--contrast,
.menu--contrast,
.language--contrast,
.about--contrast</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div></div></div></div><div class="grid" id="initialize-immerser"><div class="grid__col grid__col--beta end"><div class="grid__content typography"><h1>Инициализируйте иммёрсер</h1><p>Добавьте иммёрсер в&nbsp;код и&nbsp;создайте экземпляр с&nbsp;настройками.</p></div></div><div class="grid__col grid__col--gamma end background--contrast scroller-x"><div class="as-if-title" aria-hidden="true"></div><div class="grid__content"><div class="code-highlight code-highlight--contrast"><pre><code class="language-javascript"><span class="token comment">// Вам не нужно импортировать иммёрсер,</span>
<span class="token comment">// если вы используете его в браузере как глобальную переменную</span>
<span class="token keyword">import</span> Immerser <span class="token keyword">from</span> <span class="token string">'immerser'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> immerserInstance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Immerser</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// будет переопределена настройками,</span>
  <span class="token comment">// переданными в атрибут data-immerser-layer-config каждого слоя</span>
  <span class="token literal-property property">solidClassnameArray</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">logo</span><span class="token operator">:</span> <span class="token string">'logo--contrast-lg'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">pager</span><span class="token operator">:</span> <span class="token string">'pager--contrast-lg'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">language</span><span class="token operator">:</span> <span class="token string">'language--contrast-lg'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">pager</span><span class="token operator">:</span> <span class="token string">'pager--contrast-only-md'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">menu</span><span class="token operator">:</span> <span class="token string">'menu--contrast'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">about</span><span class="token operator">:</span> <span class="token string">'about--contrast'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">logo</span><span class="token operator">:</span> <span class="token string">'logo--contrast-lg'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">pager</span><span class="token operator">:</span> <span class="token string">'pager--contrast-lg'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">language</span><span class="token operator">:</span> <span class="token string">'language--contrast-lg'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">logo</span><span class="token operator">:</span> <span class="token string">'logo--contrast-only-md'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">pager</span><span class="token operator">:</span> <span class="token string">'pager--contrast-only-md'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">language</span><span class="token operator">:</span> <span class="token string">'language--contrast-only-md'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">menu</span><span class="token operator">:</span> <span class="token string">'menu--contrast'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">about</span><span class="token operator">:</span> <span class="token string">'about--contrast'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">logo</span><span class="token operator">:</span> <span class="token string">'logo--contrast-lg'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">pager</span><span class="token operator">:</span> <span class="token string">'pager--contrast-lg'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">language</span><span class="token operator">:</span> <span class="token string">'language--contrast-lg'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">hasToUpdateHash</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">fromViewportWidth</span><span class="token operator">:</span> <span class="token number">1024</span><span class="token punctuation">,</span>
  <span class="token literal-property property">pagerLinkActiveClassname</span><span class="token operator">:</span> <span class="token string">'pager__link--active'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">scrollAdjustThreshold</span><span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span>
  <span class="token literal-property property">scrollAdjustDelay</span><span class="token operator">:</span> <span class="token number">600</span><span class="token punctuation">,</span>
  <span class="token function">onInit</span><span class="token punctuation">(</span><span class="token parameter">immerser</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// колбек после инициализации</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">onBind</span><span class="token punctuation">(</span><span class="token parameter">immerser</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// колбек после привязки к документу</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">onUnbind</span><span class="token punctuation">(</span><span class="token parameter">immerser</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// колбек после отвязки от документа</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token parameter">immerser</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// колбек после уничтожения</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">onActiveLayerChange</span><span class="token punctuation">(</span><span class="token parameter">activeIndex<span class="token punctuation">,</span> immerser</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// колбек после смены активного слоя</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div></div></div></div></div><div id="how-it-works" class="grid" data-immerser-layer data-immerser-layer-config='{"logo": "logo--contrast-lg", "pager": "pager--contrast-lg", "language": "language--contrast-lg"}'><div class="grid__col grid__col--alpha background--contrast"></div><div class="tall start end grid__col grid__col--beta"><div class="grid__content typography"><h1>Принцип работы</h1><p>Сначала иммёрсер собирает информацию о&nbsp;слоях, блоках, окне и&nbsp;документе. Затем скрипт создает карту состояний для каждого слоя. Карта содержит размеры слоя, блоков и&nbsp;позиции их&nbsp;пересечений при скролле.</p><p>После сбора информации скрипт копирует все блоки в&nbsp;маскирующий контейнер и&nbsp;применяет к&nbsp;каждому классы, переданные в&nbsp;настройках. Если вы&nbsp;добавили навигацию, то&nbsp;иммёрсер создаст ссылки на&nbsp;каждый слой.</p><p>Затем иммёрсер подписывается на&nbsp;события скролла документа и&nbsp;изменения размеров окна.</p><p>При скролле иммёрсер двигает маскирующий контейнер так, чтобы показывать часть каждой группы блоков для каждого слоя под ними. При изменении размеров окна скрипт рассчитает карту состояний заново.</p></div></div><div class="grid__col grid__col--gamma"></div></div><div id="options" class="grid" data-immerser-layer data-immerser-layer-config='{"logo": "logo--contrast-only-md", "pager": "pager--contrast-only-md", "language": "language--contrast-only-md", "menu": "menu--contrast", "about": "about--contrast"}'><div class="grid__col grid__col--alpha"></div><div class="grid__col grid__col--beta-gamma tall start end background--contrast scroller-x"><div class="grid"><div class="grid__col grid__col--beta"><div class="grid__content typography"><h1>Настройки</h1><p>Вы&nbsp;можете передать настройки параметром функции конструктора или дата-атрибутом в&nbsp;документе. Дата-аттрибут обрабатывается последним, поэтому он&nbsp;переопределит настройки, переданные в&nbsp;конструктор.</p></div></div><div class="grid__col grid__col--gamma"></div></div><div class="grid"><div class="grid__col grid__col--beta-gamma"><div class="grid__content typography"><div class="code-highlight code-highlight--contrast code-highlight--inline"><table><thead><tr><th class="token property">параметр</th><th class="token property">тип</th><th class="token property">значение по умолчанию</th><th class="token property">описание</th></tr></thead><tbody><tr><td>solidClassnameArray</td><td class="token keyword">array</td><td class="token punctuation">[]</td><td>Массив настроек слоев. Конфигурация, переданная в data-immerser-layer-config перезапишет эту настройку для соответствующего слоя. Пример конфигурации <a href="#initialize-immerser">показан выше</a></td></tr><tr><td>fromViewportWidth</td><td class="token keyword">number</td><td class="token number">0</td><td>Минимальная ширина окна для инициализации иммёрсера</td></tr><tr><td>pagerThreshold</td><td class="token keyword">number</td><td class="token number">0.5</td><td>Насколько должен следующий слой быть видим в окне, чтобы он стал активен в навигации</td></tr><tr><td>hasToUpdateHash</td><td class="token keyword">boolean</td><td class="token boolean">false</td><td>Флаг, контролирующий обновление хеша страницы</td></tr><tr><td>scrollAdjustThreshold</td><td class="token keyword">number</td><td class="token number">0</td><td>Дистанция до&nbsp;верха или низа окна браузера в&nbsp;пикселях. Если текущая дистанция меньше переданного значения, то&nbsp;скрипт подстроит положение скролла</td></tr><tr><td>scrollAdjustDelay</td><td class="token keyword">number</td><td class="token number">600</td><td>Сколько ждать бездействия пользователя, чтобы начать подстройку скролла</td></tr><tr><td>pagerLinkActiveClassname</td><td class="token keyword">string</td><td class="token string nowrap">pager-link-active</td><td>Применяется, к каждой ссылке пейджера, ссылающуюся на активный слой</td></tr><tr><td>isScrollHandled</td><td class="token keyword">boolean</td><td class="token boolean">true</td><td>Подписывается на событие прокрутки, если включено. Выключите, если используете внешний контроллер скролла</td></tr><tr><td>onInit</td><td class="token keyword">function</td><td class="token keyword">null</td><td>Колбек после инициализации. Принимает один параметр — экземпляр иммёрсера</td></tr><tr><td>onBind</td><td class="token keyword">function</td><td class="token keyword">null</td><td>Колбек после привязки к документу. Принимает один параметр — экземпляр иммёрсера</td></tr><tr><td>onUnbind</td><td class="token keyword">function</td><td class="token keyword">null</td><td>Колбек после отвязки от документа. Принимает один параметр — экземпляр иммёрсера</td></tr><tr><td>onDestroy</td><td class="token keyword">function</td><td class="token keyword">null</td><td>Колбек после уничтожения. Принимает один параметр — экземпляр иммёрсера</td></tr><tr><td>onActiveLayerChange</td><td class="token keyword">function</td><td class="token keyword">null</td><td>Колбек после смены активного слоя. Принимает два параметра: индекс следующего слоя и экземпляр иммёрсера</td></tr></tbody></table></div></div></div></div></div></div><div id="recipes" class="grid" data-immerser-layer data-immerser-layer-config='{"logo": "logo--contrast-lg", "pager": "pager--contrast-lg", "language": "language--contrast-lg"}'><div class="grid__col grid__col--alpha background--contrast"></div><div class="grid__col grid__col--beta-gamma tall start end"><div class="grid"><div class="grid__col grid__col--beta"><div class="grid__content typography"><h1>Клонирование подписчиков</h1><p>Вы&nbsp;уже знаете, что иммёрсер клонирует элементы. Подписчики событий и&nbsp;данные, привязанные к&nbsp;нодам, не&nbsp;клонируются вместе с&nbsp;элементом. К&nbsp;счастью, вы&nbsp;можете разметить иммёрсер самостоятельно. Для этого разместите внутри корневого элемента маскирующие контейнеры для блоков по&nbsp;числу слоев. В&nbsp;таком случае скрипт не&nbsp;будет клонировать элементы. Подписчики и&nbsp;реактивная логика останутся нетронутыми. В&nbsp;примере на&nbsp;этой странице я&nbsp;создаю подписчик на&nbsp;клик по&nbsp;смайлу справа до&nbsp;инициализации.</p></div></div><div class="grid__col grid__col--gamma code-background background scroller-x"><div class="as-if-title" aria-hidden="true"></div><div class="grid__content"><div class="code-highlight"><pre><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fixed<span class="token punctuation">"</span></span> <span class="token attr-name">data-immerser</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">data-immerser-mask</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">data-immerser-mask-inner</span><span class="token punctuation">></span></span>
      <span class="token comment">&lt;!-- ваша разметка --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">data-immerser-mask</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">data-immerser-mask-inner</span><span class="token punctuation">></span></span>
      <span class="token comment">&lt;!-- ваша разметка --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code></pre></div></div></div></div><div class="grid"><div class="grid__col grid__col--beta"><div class="grid__content typography"><h1>Обработка наведения</h1><p>Если вы&nbsp;наведете мышь на&nbsp;элемент, находящийся на&nbsp;границе слоев, то&nbsp;псевдоселектор <code>:hover</code> сработает только на&nbsp;одну часть. Чтобы наведение сработало на&nbsp;все клоны элемента, задайте идентификатор наведения в&nbsp;атрибуте <code>data-immerser-synchro-hover="hoverId"</code>. При наведении мыши на&nbsp;такой элемент, ко&nbsp;всем его клонам добавится класс <code>_hover</code>. Стилизуйте по&nbsp;этому селектору вместе с&nbsp;псевдоселектором <code>:hover</code>, чтобы добиться нужного эффекта.</p></div></div><div class="grid__col grid__col--gamma code-background background scroller-x"><div class="as-if-title" aria-hidden="true"></div><div class="grid__content"><div class="code-highlight"><pre><code class="language-css"><span class="token selector">a:hover,
a._hover</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> magenta<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div></div></div></div><div class="grid"><div class="grid__col grid__col--beta"><div class="grid__content typography"><h1>Обработка изменения документа</h1><p>Иммёрсер не отслеживает изменения документа, если вы динамически добавляете или удаляете ноды. Если вы меняете высоту документа, и хотите, чтобы иммёрсер пересчитал и перерисовал блоки, вызовите метод <code>render</code> у экземпляра иммёрсера.</p></div></div><div class="grid__col grid__col--gamma code-background background scroller-x"><div class="as-if-title" aria-hidden="true"></div><div class="grid__content"><div class="code-highlight"><pre><code class="language-javascript"><span class="token comment">// проведите любые манипуляции, меняющие поток документа</span>
document<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>someNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>anotherNode<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// затем укажите иммёрсеру перерисовать штуки</span>
immerserInstance<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div></div></div></div></div><footer class="footer"><div class="language"><a href="./" class="language__link">english</a><span class="language__link language__link--active">по-русски</span></div><div class="about"><a href="https://github.com/dubaua/immerser">гитхаб</a> <a href="mailto:dubaua@gmail.com">dubaua@gmail.com</a></div></footer><div class="rulers" id="rulers"></div></body></html>