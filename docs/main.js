(()=>{var e={602:function(e,t,r){var o,n,i,a;function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}e=r.nmd(e),a=function(){return function(){"use strict";var e={819:function(e){function t(e){var t=function(e){if("object"!=s(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==s(t)?t:t+""}e.exports=function(){function e(e){this.callbacks=[],this.internal=e,this.initialValue=e}var r,o,n=e.prototype;return n.subscribe=function(e){var t=this;if("function"!=typeof e)throw new TypeError("[createObservable]: expected callback to be a function.");return this.callbacks.push(e),function(){var r=t.callbacks.indexOf(e);t.callbacks=t.callbacks.slice(0,r).concat(t.callbacks.slice(r+1))}},n.reset=function(){this.callbacks=[],this.internal=this.initialValue},r=e,(o=[{key:"value",get:function(){return this.internal},set:function(e){if(e!==this.internal){var t=this.internal;this.internal=e;for(var r=0;r<this.callbacks.length;r++)this.callbacks[r](this.internal,t)}}}])&&function(e,r){for(var o=0;o<r.length;o++){var n=r[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,t(n.key),n)}}(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),r}()},961:function(e){function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function r(e){return null!==e&&"object"==s(e)&&!1===Array.isArray(e)}function o(e){var r=e.optionConfig,o=e.userOptions,n=void 0===o?{}:o,i=e.prefix,a=void 0===i?"":i,l=e.suffix,u=void 0===l?"":l,c=e.strict,d=void 0===c||c,h=function(e){return[a,e,u].join(" ")},f={};for(var y in r)if(t(r,y)){var p=r[y],v=p.required,m=p.default,g=p.description,_=p.validator,b=n[y],w=!!t(p,"required")&&("function"==typeof v?v(n):v),S=t(n,y),k=_(b,n);if(w){if(!S)throw new TypeError(h(y+" is required."));if(!k)throw new TypeError(h("Expected "+y+" to be "+g+", got "+s(b)+" "+b+"."));f[y]=b}else if(f[y]=m,S)if(k)f[y]=b;else{if(d)throw new TypeError(h("Expected "+y+" to be "+g+", got "+s(b)+" "+b+"."));console.warn(h("Expected "+y+" to be "+g+", got "+s(b)+" "+b+". Fallback to default value "+m+"."))}}return f}var n="[mergeOptions]:",i="\nCheck out documentation https://github.com/dubaua/merge-options#parameters-and-return";function a(e){throw new TypeError([n,e,i].join(" "))}var l={optionConfig:{required:!0,validator:function(e){for(var o in e)if(t(e,o)){var n=e[o];if(r(n)||a("Expected optionConfig."+o+" to be an object with declarative option configuration, got "+s(n)+" "+n+"."),t(n,"required")){var i=n.required,l=s(i);"boolean"!==l&&"function"!==l&&a("Expected optionConfig."+o+".required to be either boolean or function, got "+s(i)+" "+i+".")}else t(n,"default")||a("Expected optionConfig."+o+" to either have required or default value.");if(t(n,"default")||t(n,"required")||a("Expected optionConfig."+o+" to either have required or default value."),t(n,"description")){var u=n.description;"string"!=typeof n.description&&a("Expected optionConfig."+o+".description to be a string, got "+s(u)+" "+u+".")}else a("Missing description on optionConfig."+o+" config.");if(t(n,"validator")){var c=n.validator;"function"!=typeof n.validator&&a("Expected optionConfig."+o+".validator to be a function, got "+s(c)+" "+c+".")}else a("Missing validator on optionConfig."+o+" config.")}return r(e)},description:"an object with declarative option configuration"},userOptions:{required:!1,default:{},validator:r,description:"an object"},prefix:{required:!1,default:"",validator:function(e){return"string"==typeof e},description:"a string"},suffix:{required:!1,default:"",validator:function(e){return"string"==typeof e},description:"a string"},strict:{required:!1,default:!0,validator:function(e){return"boolean"==typeof e},description:"a boolean"}};e.exports=function(e){var t=o({optionConfig:l,userOptions:e,prefix:n,suffix:i});return o(t)}}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,r),i.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};var o={};r.d(o,{default:function(){return Immerser}});var n=r(961),i=r.n(n),a=r(819),l=r.n(a);function u(e){return u="function"==typeof Symbol&&"symbol"==s(Symbol.iterator)?function(e){return s(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":s(e)},u(e)}var c=/^[a-z_-][a-z\d_-]*$/i,d=!1,h=["init","bind","unbind","destroy","activeLayerChange","layersUpdate"],f={solidClassnameArray:{default:[],description:"non empty array of objects",validator:function(e){return Array.isArray(e)&&0!==e.length}},fromViewportWidth:{default:0,description:"a natural number",validator:function(e){return"number"==typeof e&&0<=e&&e%1==0}},pagerThreshold:{default:.5,description:"a number between 0 and 1",validator:function(e){return"number"==typeof e&&0<=e&&e<=1}},hasToUpdateHash:{default:!1,description:"a boolean",validator:function(e){return"boolean"==typeof e}},scrollAdjustThreshold:{default:0,description:"a number greater than or equal to 0",validator:function(e){return"number"==typeof e&&e>=0}},scrollAdjustDelay:{default:600,description:"a number greater than or equal to 300",validator:function(e){return"number"==typeof e&&e>=300}},pagerLinkActiveClassname:{default:"pager-link-active",description:"valid non empty classname string",validator:function(e){return"string"==typeof e&&""!==e&&c.test(e)}},isScrollHandled:{default:!0,description:"a boolean",validator:function(e){return"boolean"==typeof e}},debug:{default:d,description:"a boolean",validator:function(e){return"boolean"==typeof e}},on:{default:{},description:"an object containing event handlers",validator:function(e){return void 0===e||!(!e||"object"!==u(e)||Array.isArray(e))&&Object.keys(e).every(function(t){return h.includes(t)&&void 0!==e[t]&&"function"==typeof e[t]})}}},y="[immerser:]",p={position:"absolute",top:"0",right:"0",bottom:"0",left:"0",overflow:"hidden"},v={pointerEvents:"none",touchAction:"none"},m={pointerEvents:"all",touchAction:"auto"};function g(e,t){for(var r in t)e.style[r]=t[r]}function _(e){var t=e.selector,r=e.parent,o=void 0===r?document:r;if(!o)return[];var n=o.querySelectorAll(t);return Array.from(n)}function b(e,t,r){return Math.max(Math.min(e,r),t)}function w(){var e=window.scrollX||document.documentElement.scrollLeft,t=window.scrollY||document.documentElement.scrollTop;return{x:b(e,0,document.documentElement.offsetWidth),y:b(t,0,document.documentElement.offsetHeight)}}function S(e){return S="function"==typeof Symbol&&"symbol"==s(Symbol.iterator)?function(e){return s(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":s(e)},S(e)}function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach(function(t){C(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function O(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,E(o.key),o)}}function C(e,t,r){return(t=E(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(e){var t=function(e){if("object"!=S(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==S(t)?t:t+""}var Immerser=function(){return e=function Immerser(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Immerser),C(this,"_options",{}),C(this,"_selectors",{root:"[data-immerser]",layer:"[data-immerser-layer]",solid:"[data-immerser-solid]",pagerLink:"[data-immerser-pager-link]",mask:"[data-immerser-mask]",maskInner:"[data-immerser-mask-inner]",synchroHover:"[data-immerser-synchro-hover]"}),C(this,"_layerStateArray",[]),C(this,"_layerStateIndexById",{}),C(this,"_isBound",!1),C(this,"_rootNode",null),C(this,"_layerNodeArray",[]),C(this,"_solidNodeArray",[]),C(this,"_pagerLinkNodeArray",[]),C(this,"_originalSolidNodeArray",[]),C(this,"_maskNodeArray",[]),C(this,"_synchroHoverNodeArray",[]),C(this,"_isCustomMarkup",!1),C(this,"_customMaskNodeArray",[]),C(this,"_windowHeight",0),C(this,"_immerserTop",0),C(this,"_immerserHeight",0),C(this,"_resizeFrameId",null),C(this,"_resizeObserver",null),C(this,"_scrollFrameId",null),C(this,"_scrollAdjustTimerId",null),C(this,"_reactiveActiveLayer",new(l())(-1)),C(this,"_reactiveWindowWidth",new(l())(-1)),C(this,"_reactiveSynchroHoverId",new(l())(null)),C(this,"_layerProgressArray",[]),C(this,"_unsubscribeRedrawingPager",null),C(this,"_unsubscribeUpdatingHash",null),C(this,"_unsubscribeActiveLayerChange",null),C(this,"_unsubscribeSynchroHover",null),C(this,"_unsubscribeToggleBindOnResize",null),C(this,"_handlers",{init:new Set,bind:new Set,unbind:new Set,destroy:new Set,activeLayerChange:new Set,layersUpdate:new Set}),C(this,"_onResize",null),C(this,"_onScroll",null),C(this,"_onSynchroHoverMouseOver",null),C(this,"_onSynchroHoverMouseOut",null),C(this,"debug",d),this._init(e)},t=[{key:"_init",value:function(e){this._mergeOptions(e),this.debug=this._options.debug,this._setDomNodes(),this._validateMarkup(),this._registerHandlersFromOptions(),this._readClassnamesFromMarkup(),this._validateSolidClassnameArray(),this._initSectionIds(),this._initLayerStateArray(),this._validateClassnames(),this._toggleBindOnResizeObserver(),this._setSizes(),this._addScrollAndResizeListeners(),this._emit("init",this)}},{key:"_registerHandlersFromOptions",value:function(){var e=this;this._options.on&&h.forEach(function(t){var r,o=null===(r=e._options.on)||void 0===r?void 0:r[t];"function"==typeof o&&e.on(t,o)})}},{key:"_emit",value:function(e){for(var t=this,r=arguments.length,o=new Array(r>1?r-1:0),n=1;n<r;n++)o[n-1]=arguments[n];this._handlers[e].forEach(function(r){try{r.apply(void 0,o)}catch(r){t._report({message:"handler for ".concat(e," event failed"),error:r,docsHash:"#events"})}})}},{key:"_report",value:function(e){var t=e.message,r=e.error,o=e.isWarning,n=void 0!==o&&o,i=e.docsHash,a=void 0===i?"":i,s="".concat(y," ").concat(t," \nCheck out documentation https://github.com/dubaua/immerser").concat(a);if(!n)throw new Error(s,{cause:r});this.debug&&(void 0!==r?console.warn(s,r):console.warn(s))}},{key:"_setDomNodes",value:function(){this._rootNode=document.querySelector(this._selectors.root),this._layerNodeArray=_({selector:this._selectors.layer}),this._solidNodeArray=_({selector:this._selectors.solid,parent:this._rootNode})}},{key:"_validateMarkup",value:function(){this._rootNode||this._report({message:"root node not found.",docsHash:"#prepare-your-markup"}),0===this._layerNodeArray.length&&this._report({message:"layer nodes not found.",docsHash:"#prepare-your-markup"}),0===this._solidNodeArray.length&&this._report({message:"solid nodes not found.",docsHash:"#prepare-your-markup"})}},{key:"_mergeOptions",value:function(e){this._options=i()({optionConfig:f,userOptions:e,prefix:y,suffix:"\nCheck out documentation https://github.com/dubaua/immerser#options"})}},{key:"_readClassnamesFromMarkup",value:function(){var e=this;this._layerNodeArray.forEach(function(t,r){if(t.dataset.immerserLayerConfig)try{e._options.solidClassnameArray[r]=JSON.parse(t.dataset.immerserLayerConfig)}catch(t){e._report({message:"Failed to parse JSON classname configuration.",error:t,docsHash:"#options"})}})}},{key:"_validateSolidClassnameArray",value:function(){var e=this._layerNodeArray.length;this._options.solidClassnameArray.length!==e&&this._report({message:"solidClassnameArray length differs from count of layers",docsHash:"#options"})}},{key:"_initSectionIds",value:function(){var e=this;this._layerNodeArray.forEach(function(t,r){var o=t.id;o||(o="immerser-section-".concat(r),t.id=o,t.__immerserCustomId=!0),e._layerStateIndexById[o]=r})}},{key:"_initLayerStateArray",value:function(){var e=this;this._layerStateArray=this._layerNodeArray.map(function(t,r){var o=e._options.solidClassnameArray[r];return{beginEnter:0,beginLeave:0,endEnter:0,endLeave:0,id:t.id,layerBottom:0,layerTop:0,maskInnerNode:null,maskNode:null,layerNode:t,solidClassnames:o}}),this._layerProgressArray=this._layerNodeArray.map(function(){return 0})}},{key:"_validateClassnames",value:function(){this._layerStateArray.every(function(e){return!(t=e.solidClassnames)||0===Object.keys(t).length&&t.constructor===Object;var t})&&this._report({message:"immerser will do nothing without solid classname configuration.",docsHash:"#prepare-your-markup",isWarning:!0})}},{key:"_toggleBindOnResizeObserver",value:function(){var e=this;this._unsubscribeToggleBindOnResize=this._reactiveWindowWidth.subscribe(function(t){t>=e._options.fromViewportWidth?e._isBound||e.bind():e._isBound&&e.unbind()})}},{key:"_setSizes",value:function(){var e=this;this._windowHeight=window.innerHeight,this._immerserTop=this._rootNode.offsetTop,this._immerserHeight=this._rootNode.offsetHeight,this._layerStateArray=this._layerStateArray.map(function(t){var r=t.layerNode.offsetTop,o=r+t.layerNode.offsetHeight,n=r-e._immerserTop,i=n-e._immerserHeight,a=o-e._immerserTop,s=a-e._immerserHeight;return A(A({},t),{},{layerTop:r,layerBottom:o,beginEnter:i,endEnter:n,beginLeave:s,endLeave:a})}),this._reactiveWindowWidth.value=window.innerWidth}},{key:"_addScrollAndResizeListeners",value:function(){this._options.isScrollHandled&&(this._onScroll=this._handleScroll.bind(this),window.addEventListener("scroll",this._onScroll,!1)),this._onResize=this._handleResize.bind(this),window.addEventListener("resize",this._onResize,!1),window.addEventListener("orientationchange",this._onResize,!1),"undefined"!=typeof ResizeObserver&&(this._resizeObserver=new ResizeObserver(this._onResize),this._resizeObserver.observe(this._rootNode))}},{key:"_resetInternalState",value:function(){var e=this;this._layerStateArray=[],this._layerStateIndexById={},this._isBound=!1,this._rootNode=null,this._layerNodeArray=[],this._solidNodeArray=[],this._pagerLinkNodeArray=[],this._originalSolidNodeArray=[],this._maskNodeArray=[],this._synchroHoverNodeArray=[],this._isCustomMarkup=!1,this._customMaskNodeArray=[],this._windowHeight=0,this._immerserTop=0,this._immerserHeight=0,this._resizeFrameId=null,this._resizeObserver=null,this._scrollFrameId=null,this._scrollAdjustTimerId=null,this._reactiveActiveLayer.reset(),this._reactiveWindowWidth.reset(),this._reactiveSynchroHoverId.reset(),this._layerProgressArray=[],this._unsubscribeRedrawingPager=null,this._unsubscribeUpdatingHash=null,this._unsubscribeActiveLayerChange=null,this._unsubscribeSynchroHover=null,this._unsubscribeToggleBindOnResize=null,this._onResize=null,this._onScroll=null,this._onSynchroHoverMouseOver=null,this._onSynchroHoverMouseOut=null,h.forEach(function(t){return e._handlers[t].clear()})}},{key:"_createMarkup",value:function(){var e=this;g(this._rootNode,v),this._initCustomMarkup(),this._originalSolidNodeArray=_({selector:this._selectors.solid,parent:this._rootNode}),this._layerStateArray=this._layerStateArray.map(function(t,r){var o=e._isCustomMarkup?e._customMaskNodeArray[r]:document.createElement("div");g(o,p);var n=e._isCustomMarkup?o.querySelector(e._selectors.maskInner):document.createElement("div");return n||(n=document.createElement("div")),g(n,p),e._isCustomMarkup||(o.dataset.immerserMask="",n.dataset.immerserMaskInner=""),e._originalSolidNodeArray.forEach(function(e){var t=e.cloneNode(!0);t instanceof HTMLElement&&(g(t,m),t.__immerserCloned=!0,n.appendChild(t))}),function(e,t){for(var r=0;r<e.length;r++)t(e[r])}(_({selector:e._selectors.solid,parent:n}),function(e){var r=e.dataset.immerserSolid;t.solidClassnames&&Object.prototype.hasOwnProperty.call(t.solidClassnames,r)&&e.classList.add(t.solidClassnames[r])}),0!==r&&o.setAttribute("aria-hidden","true"),o.appendChild(n),e._rootNode.appendChild(o),e._maskNodeArray.push(o),A(A({},t),{},{maskNode:o,maskInnerNode:n})}),this._detachOriginalSolidNodes()}},{key:"_initCustomMarkup",value:function(){var e=this;this._customMaskNodeArray=_({selector:this._selectors.mask,parent:this._rootNode}),this._isCustomMarkup=this._customMaskNodeArray.length===this._layerStateArray.length,this._customMaskNodeArray.length>0&&!this._isCustomMarkup&&this._report({message:"You're trying use custom markup, but count of your immerser masks doesn't equal layers count.",isWarning:!0,docsHash:"#cloning-event-listeners"}),this._customMaskNodeArray.forEach(function(t){var r=t.querySelector(e._selectors.maskInner);r&&Array.from(r.children).forEach(function(e){e instanceof HTMLElement&&g(e,m)})})}},{key:"_detachOriginalSolidNodes",value:function(){var e=this;this._rootNode&&this._originalSolidNodeArray.forEach(function(t){e._rootNode.removeChild(t)})}},{key:"_initPagerLinks",value:function(){var e=this;this._pagerLinkNodeArray=_({selector:this._selectors.pagerLink,parent:this._rootNode}),this._pagerLinkNodeArray.forEach(function(t){var r=t.href;if(r){var o=r.split("#")[1];if(o){var n=e._layerStateIndexById[o];t.dataset.immerserLayerIndex=n.toString()}}})}},{key:"_initHoverSynchro",value:function(){var e=this;this._synchroHoverNodeArray=_({selector:this._selectors.synchroHover,parent:this._rootNode}),this._onSynchroHoverMouseOver=function(t){var r=t.target.dataset.immerserSynchroHover;e._reactiveSynchroHoverId.value=r},this._onSynchroHoverMouseOut=function(){e._reactiveSynchroHoverId.value=null},this._synchroHoverNodeArray.forEach(function(t){t.addEventListener("mouseover",e._onSynchroHoverMouseOver),t.addEventListener("mouseout",e._onSynchroHoverMouseOut)})}},{key:"_attachCallbacks",value:function(){var e=this;this._pagerLinkNodeArray.length>0&&(this._unsubscribeRedrawingPager=this._reactiveActiveLayer.subscribe(this._drawPagerLinks.bind(this))),this._options.hasToUpdateHash&&(this._unsubscribeUpdatingHash=this._reactiveActiveLayer.subscribe(this._drawHash.bind(this))),this._unsubscribeActiveLayerChange=this._reactiveActiveLayer.subscribe(function(t){e._emit("activeLayerChange",t,e)}),this._synchroHoverNodeArray.length>0&&(this._unsubscribeSynchroHover=this._reactiveSynchroHoverId.subscribe(this._drawSynchroHover.bind(this)))}},{key:"_detachCallbacks",value:function(){var e,t,r,o;null===(e=this._unsubscribeRedrawingPager)||void 0===e||e.call(this),null===(t=this._unsubscribeUpdatingHash)||void 0===t||t.call(this),null===(r=this._unsubscribeActiveLayerChange)||void 0===r||r.call(this),null===(o=this._unsubscribeSynchroHover)||void 0===o||o.call(this)}},{key:"_removeSyncroHoverListeners",value:function(){var e=this;this._synchroHoverNodeArray.forEach(function(t){t.removeEventListener("mouseover",e._onSynchroHoverMouseOver),t.removeEventListener("mouseout",e._onSynchroHoverMouseOut)})}},{key:"_clearCustomSectionIds",value:function(){this._layerStateArray.forEach(function(e){e.layerNode.__immerserCustomId&&e.layerNode.removeAttribute("id")})}},{key:"_restoreOriginalSolidNodes",value:function(){var e=this;this._rootNode&&this._originalSolidNodeArray.forEach(function(t){e._rootNode.appendChild(t)})}},{key:"_cleanupClonedMarkup",value:function(){var e=this;this._maskNodeArray.forEach(function(t){if(e._isCustomMarkup){t.removeAttribute("style"),t.removeAttribute("aria-hidden");var r=t.querySelector(e._selectors.maskInner);if(!r)return;r.removeAttribute("style"),_({selector:e._selectors.solid,parent:r}).forEach(function(e){e.__immerserCloned&&r.removeChild(e)})}else e._rootNode&&e._rootNode.removeChild(t)})}},{key:"_removeScrollAndResizeListeners",value:function(){var e;this._options.isScrollHandled&&window.removeEventListener("scroll",this._onScroll,!1),window.removeEventListener("resize",this._onResize,!1),window.removeEventListener("orientationchange",this._onResize,!1),null===(e=this._resizeObserver)||void 0===e||e.disconnect()}},{key:"_setLayersProgress",value:function(e){var t=this,r=null!=e?e:w().y,o=r+this._windowHeight;this._layerProgressArray=this._layerStateArray.map(function(e){var n=e.layerTop,i=e.layerBottom,a=i-n,s=Math.min(i,o)-Math.max(n,r),l=Math.min(a,t._windowHeight);return l<=0?0:Math.max(0,Math.min(1,s/l))})}},{key:"_draw",value:function(e){var t=this,r=void 0!==e?e:w().y;this._layerStateArray.forEach(function(e,o){var n,i=e.beginEnter,a=e.endEnter,s=e.beginLeave,l=e.endLeave,u=e.maskNode,c=e.maskInnerNode,d=e.layerTop,h=e.layerBottom;n=i>r?t._immerserHeight:i<=r&&r<a?a-r:a<=r&&r<s?0:s<=r&&r<l?s-r:-t._immerserHeight,u.style.transform="translateY(".concat(n,"px)"),c.style.transform="translateY(".concat(-n,"px)");var f=r+t._windowHeight*(1-t._options.pagerThreshold);d<=f&&f<h&&(t._reactiveActiveLayer.value=o)})}},{key:"_drawPagerLinks",value:function(e){var t=this;this._pagerLinkNodeArray.forEach(function(r){parseInt(r.dataset.immerserLayerIndex,10)===e?r.classList.add(t._options.pagerLinkActiveClassname):r.classList.remove(t._options.pagerLinkActiveClassname)})}},{key:"_drawHash",value:function(e){var t=this._layerStateArray[e],r=t.id,o=t.layerNode;o.removeAttribute("id"),window.location.hash=r,o.setAttribute("id",r)}},{key:"_drawSynchroHover",value:function(e){this._synchroHoverNodeArray.forEach(function(t){t.dataset.immerserSynchroHover===e?t.classList.add("_hover"):t.classList.remove("_hover")})}},{key:"_adjustScroll",value:function(){var e=this._layerStateArray[this._reactiveActiveLayer.value],t=e.layerTop,r=e.layerBottom,o=w(),n=o.x,i=o.y,a=Math.abs(i-t),s=Math.abs(i+this._windowHeight-r);0!==a&&0!==s&&(a<=s&&a<=this._options.scrollAdjustThreshold?window.scrollTo(n,t):s<=a&&s<=this._options.scrollAdjustThreshold&&window.scrollTo(n,r-this._windowHeight))}},{key:"_handleScroll",value:function(){var e=this;this._isBound&&(this._scrollFrameId&&(window.cancelAnimationFrame(this._scrollFrameId),this._scrollFrameId=null),this._scrollFrameId=window.requestAnimationFrame(function(){var t=w().y;e._setLayersProgress(t),e._emit("layersUpdate",e._layerProgressArray,e),e._draw(t),e._options.scrollAdjustThreshold>0&&(e._scrollAdjustTimerId&&(clearTimeout(e._scrollAdjustTimerId),e._scrollAdjustTimerId=null),e._scrollAdjustTimerId=setTimeout(e._adjustScroll.bind(e),e._options.scrollAdjustDelay))}))}},{key:"_handleResize",value:function(){var e=this;this._resizeFrameId&&(window.cancelAnimationFrame(this._resizeFrameId),this._resizeFrameId=null),this._resizeFrameId=window.requestAnimationFrame(function(){e.render()})}},{key:"bind",value:function(){this._createMarkup(),this._initPagerLinks(),this._initHoverSynchro(),this._attachCallbacks(),this._isBound=!0,this._setLayersProgress(),this._draw(),this._emit("bind",this)}},{key:"unbind",value:function(){this._detachCallbacks(),this._removeSyncroHoverListeners(),this._clearCustomSectionIds(),this._restoreOriginalSolidNodes(),this._cleanupClonedMarkup(),this._isBound=!1,this._emit("unbind",this),this._reactiveActiveLayer.value=void 0}},{key:"destroy",value:function(){var e;this.unbind(),null===(e=this._unsubscribeToggleBindOnResize)||void 0===e||e.call(this),this._removeScrollAndResizeListeners(),this._emit("destroy",this),this._resetInternalState()}},{key:"render",value:function(){this._setSizes(),this._setLayersProgress(),this._draw()}},{key:"syncScroll",value:function(){this._options.isScrollHandled?this._report({message:"syncScroll requires the isScrollHandled flag set to false. Call ignored.",isWarning:!0,docsHash:"#external-scroll-engine"}):(this._setLayersProgress(),this._draw())}},{key:"on",value:function(e,t){this._handlers[e].add(t)}},{key:"once",value:function(e,t){var r,o,n=this;this._handlers[e].add((r=function(){n.off(e,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];t.apply(void 0,o)},(o=r).__immerserOriginalHandler=t,o))}},{key:"off",value:function(e,t){var r=this._handlers[e];r.forEach(function(e){var o=function(e){return e.__immerserOriginalHandler}(e);e!==t&&o!==t||r.delete(e)})}},{key:"activeIndex",get:function(){return this._reactiveActiveLayer.value}},{key:"isBound",get:function(){return this._isBound}},{key:"rootNode",get:function(){return this._rootNode}},{key:"layerProgressArray",get:function(){return this._layerProgressArray}}],t&&O(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();return o.default}()},"object"==s(t)&&"object"==s(e)?e.exports=a():(n=[],void 0===(i="function"==typeof(o=a)?o.apply(t,n):o)||(e.exports=i))},819:e=>{"use strict";function t(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}e.exports=function(){function e(e){this.callbacks=[],this.internal=e,this.initialValue=e}var r,o,n=e.prototype;return n.subscribe=function(e){var t=this;if("function"!=typeof e)throw new TypeError("[createObservable]: expected callback to be a function.");return this.callbacks.push(e),function(){var r=t.callbacks.indexOf(e);t.callbacks=t.callbacks.slice(0,r).concat(t.callbacks.slice(r+1))}},n.reset=function(){this.callbacks=[],this.internal=this.initialValue},r=e,(o=[{key:"value",get:function(){return this.internal},set:function(e){if(e!==this.internal){var t=this.internal;this.internal=e;for(var r=0;r<this.callbacks.length;r++)this.callbacks[r](this.internal,t)}}}])&&function(e,r){for(var o=0;o<r.length;o++){var n=r[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,t(n.key),n)}}(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),r}()},884:function(e){var t;t=()=>(()=>{"use strict";var e={51(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ANIMATE_OPTION_CONFIG=void 0,t.ANIMATE_OPTION_CONFIG={duration:{required:!0,validator:e=>"number"==typeof e&&e>0,description:"a positive number of milliseconds"},delay:{required:!1,default:0,validator:e=>"number"==typeof e&&e>=0,description:"a non-negative number of milliseconds"},draw:{required:!0,validator:e=>"function"==typeof e,description:"a function"},onComplete:{required:!1,default:void 0,validator:e=>"function"==typeof e||void 0===e,description:"a function"},onCancel:{required:!1,default:void 0,validator:e=>"function"==typeof e||void 0===e,description:"a function"},autoStart:{required:!1,default:!0,validator:e=>"boolean"==typeof e,description:"a boolean"}}},320(e,t,r){var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Directions=t.Ogawa=void 0;const n=o(r(961)),i=o(r(819)),a=r(732);Object.defineProperty(t,"Directions",{enumerable:!0,get:function(){return a.Directions}});const s=r(51);t.Ogawa=class{options;lastTimestamp=performance.now();progress=0;delayBuffer=0;requestId=null;_isRunning=new i.default(!1);direction=a.Directions.Forward;_isComplete=!1;constructor(e){this.options=(0,n.default)({optionConfig:s.ANIMATE_OPTION_CONFIG,userOptions:e,prefix:"[animate]:"}),this._isRunning.subscribe(this.onIsRunningChange),this.options.autoStart&&this.run()}run(){return this.direction=a.Directions.Forward,this._isRunning.value=!0,this}runReverse(){return this.direction=a.Directions.Backward,this._isRunning.value=!0,this}reset(){return this.progress=0,this.delayBuffer=0,this._isRunning.value=!1,null!==this.requestId&&(window.cancelAnimationFrame(this.requestId),this.requestId=null),this.options.draw(this.progress),this}pause(){return this._isRunning.value=!1,this}destroy(){return null!==this.requestId&&(window.cancelAnimationFrame(this.requestId),this.requestId=null),this._isRunning.reset(),this}get isComplete(){return this._isComplete}get isRunning(){return this._isRunning.value}tick=e=>{const t=e-this.lastTimestamp,r=t/this.options.duration*this.direction;this.delayBuffer<this.options.delay?this.delayBuffer+=t:(this.progress=Math.min(1,Math.max(0,this.progress+r)),this.options.draw(this.progress)),(this.direction===a.Directions.Forward?1===this.progress:0===this.progress)?(this._isRunning.value=!1,this.direction===a.Directions.Forward&&"function"==typeof this.options.onComplete&&(this.options.onComplete(),this._isComplete=!0)):(this.lastTimestamp=e,this.requestId=window.requestAnimationFrame(this.tick))};onIsRunningChange=e=>{e?(this.lastTimestamp=performance.now(),this.requestId=window.requestAnimationFrame(this.tick)):("function"==typeof this.options.onCancel&&1!==this.progress&&0!==this.progress&&this.options.onCancel(this.progress),null!==this.requestId&&window.cancelAnimationFrame(this.requestId))}}},732(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Directions=void 0,t.Directions={Forward:1,Backward:-1}},819(e){function t(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}e.exports=function(){function e(e){this.callbacks=[],this.internal=e,this.initialValue=e}var r,o,n=e.prototype;return n.subscribe=function(e){var t=this;if("function"!=typeof e)throw new TypeError("[createObservable]: expected callback to be a function.");return this.callbacks.push(e),function(){var r=t.callbacks.indexOf(e);t.callbacks=t.callbacks.slice(0,r).concat(t.callbacks.slice(r+1))}},n.reset=function(){this.callbacks=[],this.internal=this.initialValue},r=e,(o=[{key:"value",get:function(){return this.internal},set:function(e){if(e!==this.internal){var t=this.internal;this.internal=e;for(var r=0;r<this.callbacks.length;r++)this.callbacks[r](this.internal,t)}}}])&&function(e,r){for(var o=0;o<r.length;o++){var n=r[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,t(n.key),n)}}(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),r}()},961(e){function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function r(e){return null!==e&&"object"==typeof e&&!1===Array.isArray(e)}function o(e){var r=e.optionConfig,o=e.userOptions,n=void 0===o?{}:o,i=e.prefix,a=void 0===i?"":i,s=e.suffix,l=void 0===s?"":s,u=e.strict,c=void 0===u||u,d=function(e){return[a,e,l].join(" ")},h={};for(var f in r)if(t(r,f)){var y=r[f],p=y.required,v=y.default,m=y.description,g=y.validator,_=n[f],b=!!t(y,"required")&&("function"==typeof p?p(n):p),w=t(n,f),S=g(_,n);if(b){if(!w)throw new TypeError(d(f+" is required."));if(!S)throw new TypeError(d("Expected "+f+" to be "+m+", got "+typeof _+" "+_+"."));h[f]=_}else if(h[f]=v,w)if(S)h[f]=_;else{if(c)throw new TypeError(d("Expected "+f+" to be "+m+", got "+typeof _+" "+_+"."));console.warn(d("Expected "+f+" to be "+m+", got "+typeof _+" "+_+". Fallback to default value "+v+"."))}}return h}var n="[mergeOptions]:",i="\nCheck out documentation https://github.com/dubaua/merge-options#parameters-and-return";function a(e){throw new TypeError([n,e,i].join(" "))}var s={optionConfig:{required:!0,validator:function(e){for(var o in e)if(t(e,o)){var n=e[o];if(r(n)||a("Expected optionConfig."+o+" to be an object with declarative option configuration, got "+typeof n+" "+n+"."),t(n,"required")){var i=n.required,s=typeof i;"boolean"!==s&&"function"!==s&&a("Expected optionConfig."+o+".required to be either boolean or function, got "+typeof i+" "+i+".")}else t(n,"default")||a("Expected optionConfig."+o+" to either have required or default value.");if(t(n,"default")||t(n,"required")||a("Expected optionConfig."+o+" to either have required or default value."),t(n,"description")){var l=n.description;"string"!=typeof n.description&&a("Expected optionConfig."+o+".description to be a string, got "+typeof l+" "+l+".")}else a("Missing description on optionConfig."+o+" config.");if(t(n,"validator")){var u=n.validator;"function"!=typeof n.validator&&a("Expected optionConfig."+o+".validator to be a function, got "+typeof u+" "+u+".")}else a("Missing validator on optionConfig."+o+" config.")}return r(e)},description:"an object with declarative option configuration"},userOptions:{required:!1,default:{},validator:r,description:"an object"},prefix:{required:!1,default:"",validator:function(e){return"string"==typeof e},description:"a string"},suffix:{required:!1,default:"",validator:function(e){return"string"==typeof e},description:"a string"},strict:{required:!1,default:!0,validator:function(e){return"boolean"==typeof e},description:"a boolean"}};e.exports=function(e){var t=o({optionConfig:s,userOptions:e,prefix:n,suffix:i});return o(t)}}},t={};return function r(o){var n=t[o];if(void 0!==n)return n.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,r),i.exports}(320)})(),e.exports=t()}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var i=t[o]={id:o,loaded:!1,exports:{}};return e[o].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";var e=r(602),t=r.n(e),o=Math.PI;var n=r(819),i=r.n(n),a=r(884);var s=[{x:79,y:74},{x:105,y:100},{x:105,y:74},{x:79,y:100}],l={x:92,y:87},u=[{x:145,y:74},{x:171,y:100},{x:171,y:74},{x:145,y:100}],c={x:158,y:87};function d(e,t){var r=12*e;t.setAttribute("r",r.toString())}function h(e,t,r,o){var n=function(e,t,r){var o=e.map(function(e){var o=e.x,n=e.y;return{x:t.x+(o-t.x)*r,y:t.y+(n-t.y)*r}});return"M".concat(o[0].x," ").concat(o[0].y,"L").concat(o[1].x," ").concat(o[1].y,"M").concat(o[2].x," ").concat(o[2].y,"L").concat(o[3].x," ").concat(o[3].y)}(t,r,e);o.setAttribute("d",n)}function f(e,t,r){var o=-8*t;r.setAttribute("transform","scale(".concat(e," 1) translate(0 ").concat(o,")"))}function y(e){return 1-Math.sqrt(1-e*e)}function p(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}function v(e,t){var r,o,n,i,a,v,m,g;(t.mouthClipPath&&t.mouthShape&&(r=e.mouthEllipse,o=t.mouthClipPath,n=t.mouthShape,i=(75*r).toString(),o.setAttribute("ry",i),n.setAttribute("ry",i)),t.mouthLine&&(a=e.mouthLineScaleX,v=e.mouthLineShiftX,m=t.mouthLine,g=50*(v-.5)*2,m.setAttribute("transform","translate(".concat(g," 0) scale(").concat(a," 1)"))),t.tongue)&&function(e,t,r){var o=102*e,n=72*t;r.setAttribute("transform","translate(".concat(o," ").concat(n,")"))}(p(e.tongueX),p(e.tongueY),t.tongue);(t.leftEyeOpen&&function(e,t){d(e,t)}(e.eyeOpenLeft,t.leftEyeOpen),t.rightEyeOpen&&function(e,t){d(e,t)}(e.eyeOpenRight,t.rightEyeOpen),t.leftEyeClosed&&function(e,t){h(e,s,l,t)}(e.eyeClosedLeft,t.leftEyeClosed),t.rightEyeClosed&&function(e,t){h(e,u,c,t)}(e.eyeClosedRight,t.rightEyeClosed),t.leftBrow&&function(e,t,r){f(e,t,r)}(e.leftBrowScaleX,e.leftBrowY,t.leftBrow),t.rightBrow&&function(e,t,r){f(e,t,r)}(e.rightBrowScaleX,e.rightBrowY,t.rightBrow),t.glass&&function(e,t){var r=550*(1-y(e)),o=-100*(1-y(e)),n=30*(1-y(e));t.setAttribute("transform","translate(".concat(r," ").concat(o,") rotate(").concat(n,")"))}(e.glasses,t.glass),t.handInner&&t.handOuter)&&function(e,t,r){var o=-12*(1-y(e)),n=12*(1-y(e));r.setAttribute("transform","translate(".concat(o," ").concat(n,")")),t.setAttribute("opacity",e.toString())}(p(e.hand),t.handInner,t.handOuter)}var m=[{mouthEllipse:0,mouthLineScaleX:1,mouthLineShiftX:.5,tongueX:.685,tongueY:0,eyeOpenLeft:.8,eyeOpenRight:.8,eyeClosedLeft:0,eyeClosedRight:0,leftBrowScaleX:0,leftBrowY:0,rightBrowScaleX:0,rightBrowY:0,glasses:0,hand:0},{mouthEllipse:0,mouthLineScaleX:1,mouthLineShiftX:.5,tongueX:.685,tongueY:.7,eyeOpenLeft:.8,eyeOpenRight:.8,eyeClosedLeft:0,eyeClosedRight:0,leftBrowScaleX:0,leftBrowY:0,rightBrowScaleX:0,rightBrowY:0,glasses:0,hand:0},{mouthEllipse:0,mouthLineScaleX:.5,mouthLineShiftX:.67,tongueX:.685,tongueY:0,eyeOpenLeft:.8,eyeOpenRight:.8,eyeClosedLeft:0,eyeClosedRight:0,leftBrowScaleX:1,leftBrowY:1,rightBrowScaleX:1,rightBrowY:0,glasses:0,hand:1},{mouthEllipse:0,mouthLineScaleX:1,mouthLineShiftX:.5,tongueX:.685,tongueY:0,eyeOpenLeft:.8,eyeOpenRight:.8,eyeClosedLeft:0,eyeClosedRight:0,leftBrowScaleX:0,leftBrowY:0,rightBrowScaleX:0,rightBrowY:0,glasses:1,hand:0},{mouthEllipse:1,mouthLineScaleX:1,mouthLineShiftX:.5,tongueX:.685,tongueY:0,eyeOpenLeft:1,eyeOpenRight:1,eyeClosedLeft:0,eyeClosedRight:0,leftBrowScaleX:0,leftBrowY:0,rightBrowScaleX:0,rightBrowY:0,glasses:0,hand:0}],g={mouthEllipse:0,mouthLineScaleX:1,mouthLineShiftX:.5,tongueX:.315,tongueY:.7,eyeOpenLeft:0,eyeOpenRight:0,eyeClosedLeft:.8,eyeClosedRight:.8,leftBrowScaleX:0,leftBrowY:0,rightBrowScaleX:0,rightBrowY:0,glasses:0,hand:0};function _(e,t){return t.reduce(function(t,r,o){var n,i=null!==(n=e[o])&&void 0!==n?n:0;return t.mouthEllipse+=r.mouthEllipse*i,t.mouthLineScaleX+=r.mouthLineScaleX*i,t.mouthLineShiftX+=r.mouthLineShiftX*i,t.tongueX+=r.tongueX*i,t.tongueY+=r.tongueY*i,t.eyeOpenLeft+=r.eyeOpenLeft*i,t.eyeOpenRight+=r.eyeOpenRight*i,t.eyeClosedLeft+=r.eyeClosedLeft*i,t.eyeClosedRight+=r.eyeClosedRight*i,t.leftBrowScaleX+=r.leftBrowScaleX*i,t.leftBrowY+=r.leftBrowY*i,t.rightBrowScaleX+=r.rightBrowScaleX*i,t.rightBrowY+=r.rightBrowY*i,t.glasses+=r.glasses*i,t.hand+=r.hand*i,t},{mouthEllipse:0,mouthLineScaleX:0,mouthLineShiftX:0,tongueX:0,tongueY:0,eyeOpenLeft:0,eyeOpenRight:0,eyeClosedLeft:0,eyeClosedRight:0,leftBrowScaleX:0,leftBrowY:0,rightBrowScaleX:0,rightBrowY:0,glasses:0,hand:0})}function b(e,t,r,o,n){var i=Math.max(0,Math.min(1,e/t)),a=100*i;n.setAttribute("width",a.toString());var s=function(e){var t=Math.max(0,Math.min(1,e)),r={r:0,g:255,b:0},o={r:255,g:204,b:0},n={r:255,g:51,b:0};if(t<=.25)return n;if(t<=.5){return w(o,n,(.5-t)/.25)}if(t<.75){return w(r,o,(.75-t)/.25)}return r}(i),l=s.r,u=s.g,c=s.b;n.setAttribute("fill","rgb(".concat(l,", ").concat(u,", ").concat(c,")")),o.parentElement&&(o.parentElement.style.opacity=r.toString())}function w(e,t,r){return{r:Math.round(e.r+(t.r-e.r)*r),g:Math.round(e.g+(t.g-e.g)*r),b:Math.round(e.b+(t.b-e.b)*r)}}var S=new(t())({solidClassnameArray:[{logo:"logo--contrast-lg",pager:"pager--contrast-lg",language:"language--contrast-lg"},{pager:"pager--contrast-only-md",menu:"menu--contrast",about:"about--contrast"},{logo:"logo--contrast-lg",pager:"pager--contrast-lg",language:"language--contrast-lg"},{logo:"logo--contrast-only-md",pager:"pager--contrast-only-md",language:"language--contrast-only-md",menu:"menu--contrast",about:"about--contrast"},{logo:"logo--contrast-lg",pager:"pager--contrast-lg",language:"language--contrast-lg"}],fromViewportWidth:1024,pagerLinkActiveClassname:"pager__link--active",scrollAdjustThreshold:50,scrollAdjustDelay:600,on:{init:function(e){window.immerserInstance=e,console.log("init",e)},bind:function(e){console.log("bind",e)},unbind:function(e){console.log("unbind",e)},destroy:function(e){console.log("destroy",e)},activeLayerChange:function(e,t){console.log("activeLayerChange",e,t)}}}),k=function(e){var t=1e3,r={hp:new(i())(1e3),hpRegen:333,regenAnimation:null,hpBarAnimation:null,isDead:new(i())(!1),lastConfig:g,nodes:[]};function n(e,o){r.nodes.forEach(function(r){r.hpBarOutline&&r.hpBarFill&&b(e,t,o,r.hpBarOutline,r.hpBarFill)})}var s=Array.from(document.querySelectorAll("[data-emoji-face]"));if(0===s.length)return{handleLayersUpdate:function(e){}};r.nodes=s.map(function(e){return{face:t=e,mouthClipPath:t.querySelector("[data-mouth-clip-path]"),mouthShape:t.querySelector("[data-mouth-shape]"),mouthLine:t.querySelector("[data-mouth-line]"),tongue:t.querySelector("[data-tongue]"),leftEyeClosed:t.querySelector("[data-left-eye-closed]"),rightEyeClosed:t.querySelector("[data-right-eye-closed]"),leftEyeOpen:t.querySelector("[data-left-eye-open]"),rightEyeOpen:t.querySelector("[data-right-eye-open]"),leftBrow:t.querySelector("[data-left-brow]"),rightBrow:t.querySelector("[data-right-brow]"),glass:t.querySelector("[data-glass]"),hpBarOutline:t.querySelector("[data-emoji-hp-bar-outline]"),hpBarFill:t.querySelector("[data-emoji-hp-bar-fill]"),handInner:t.querySelector("[data-emoji-hand]"),handOuter:t.querySelector("[data-emoji-hand-outer]"),rotator:t.querySelector("[data-emoji-rotator]")};var t});var l=new a.Ogawa({autoStart:!1,duration:620,draw:function(e){var t,n=(t=e,(1-Math.cos(o*t))/2);r.nodes.forEach(function(e){var t=e.rotator;t&&t.setAttribute("transform","rotate(".concat(360*n," 125 125)"))}),r.nodes.forEach(function(t){if(t.handInner){var r=-3*(e<=.5?e/.5:2-2*e);t.handInner.style.transform="rotate(".concat(r,"deg)")}})}}),u=s.map(function(e){var o=!1,n=function(e){e.stopPropagation(),o=l.isRunning,l.reset(),r.isDead.value||s.forEach(function(e){e.style.transform="translateY(".concat(2,"px)")})},i=function(e){if(e.stopPropagation(),s.forEach(function(e){e.style.transform=""}),!r.isDead.value&&o){var n=Math.round(150*Math.random())+100;r.hp.value=Math.min(Math.max(0,r.hp.value-n),t)}r.isDead.value||l.run()};return e.addEventListener("mousedown",n),e.addEventListener("mouseup",i),{faceNode:e,onMouseDown:n,onMouseUp:i}}),c=function(t){console.log("layersUpdate",t,e),r.lastConfig=_(t,m),r.isDead.value||r.nodes.forEach(function(e){return v(r.lastConfig,e)})};return c([1,0,0,0,0]),r.hp.subscribe(function(e,o){var i,s=0<e&&e<t,l=e<=0,u=void 0!==o&&e<o;if(n(e,1),l)return null===(i=r.regenAnimation)||void 0===i||i.pause().destroy(),void(r.isDead.value=!0);s&&u&&function(){var e;null===(e=r.regenAnimation)||void 0===e||e.pause().destroy();var o=t-r.hp.value,i=o/r.hpRegen*1e3,s=r.hp.value;r.regenAnimation=new a.Ogawa({duration:i,delay:1400,draw:function(e){r.hp.value=Math.min(t,s+o*e)},onComplete:function(){var e;null===(e=r.regenAnimation)||void 0===e||e.destroy(),r.hpBarAnimation=new a.Ogawa({delay:2e3,duration:320,draw:function(e){n(t,1-e)},onComplete:function(){var e;null===(e=r.regenAnimation)||void 0===e||e.destroy()}})}})}()}),r.isDead.subscribe(function(t){if(t)var o=new a.Ogawa({duration:320,draw:function(e){var t=_([1-e,e],[r.lastConfig,g]);r.nodes.forEach(function(e){return v(t,e)})},onComplete:function(){var t=new a.Ogawa({delay:1e3,duration:320,draw:function(e){r.nodes.forEach(function(t){var r=t.face;r&&(r.style.transform="translate(".concat(200*e,"%,0)"))})},onComplete:function(){var n,i;e.off("layersUpdate",c),u.forEach(function(e){var t=e.faceNode,r=e.onMouseDown,o=e.onMouseUp;t.removeEventListener("mousedown",r),t.removeEventListener("mouseup",o),t.style.transform=""}),l.pause().destroy(),null===(n=r.regenAnimation)||void 0===n||n.pause().destroy(),r.regenAnimation=null,null===(i=r.hpBarAnimation)||void 0===i||i.pause().destroy(),r.hpBarAnimation=null,r.hp.reset(),r.isDead.reset(),r.nodes.forEach(function(e){e.face=null,e.mouthClipPath=null,e.mouthShape=null,e.mouthLine=null,e.tongue=null,e.leftEyeClosed=null,e.rightEyeClosed=null,e.leftEyeOpen=null,e.rightEyeOpen=null,e.leftBrow=null,e.rightBrow=null,e.glass=null,e.hpBarOutline=null,e.hpBarFill=null,e.handInner=null,e.handOuter=null,e.rotator=null}),r.nodes=[],r.lastConfig=g,s.forEach(function(e){return e.remove()}),s.length=0,u.length=0,t.destroy(),o.destroy()}})}})}),{handleLayersUpdate:c}}(S),A=k.handleLayersUpdate;S.on("layersUpdate",A);var O=document.querySelectorAll("[data-highlighter]"),C="highlighter-animation-active";function E(e){return function(){if(S.isBound){var t=e.dataset.highlighter;if(t)document.querySelectorAll(t).forEach(function(e){if(!e.isHighlighting){e.isHighlighting=!0,e.classList.add(C);var t=window.setTimeout(function(){e.classList.remove(C),window.clearTimeout(t),e.isHighlighting=!1},1500)}})}}}O.forEach(function(e){e.addEventListener("mouseover",E(e)),e.addEventListener("click",E(e))});var L=document.getElementById("rulers");L&&document.addEventListener("keydown",function(e){var t=e.altKey,r=e.code,o=e.keyCode;t&&("KeyR"===r||82===o)&&L.classList.toggle("rulers--active")}),console.log("welcome here, fella. Press Alt+R to see vertical rhythm")})()})();
//# sourceMappingURL=main.js.map