(()=>{var e={263:function(e,t,r){var o,i,n,s;function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}e=r.nmd(e),s=function(){return function(){"use strict";var e={819:function(e){function t(e){var t=function(e){if("object"!=a(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==a(t)?t:t+""}e.exports=function(){function e(e){this.callbacks=[],this.internal=e,this.initialValue=e}var r,o,i=e.prototype;return i.subscribe=function(e){var t=this;if("function"!=typeof e)throw new TypeError("[createObservable]: expected callback to be a function.");return this.callbacks.push(e),function(){var r=t.callbacks.indexOf(e);t.callbacks=t.callbacks.slice(0,r).concat(t.callbacks.slice(r+1))}},i.reset=function(){this.callbacks=[],this.internal=this.initialValue},r=e,(o=[{key:"value",get:function(){return this.internal},set:function(e){if(e!==this.internal){var t=this.internal;this.internal=e;for(var r=0;r<this.callbacks.length;r++)this.callbacks[r](this.internal,t)}}}])&&function(e,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,t(i.key),i)}}(r.prototype,o),Object.defineProperty(r,"prototype",{writable:!1}),r}()},961:function(e){function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function r(e){return null!==e&&"object"==a(e)&&!1===Array.isArray(e)}function o(e){var r=e.optionConfig,o=e.userOptions,i=void 0===o?{}:o,n=e.prefix,s=void 0===n?"":n,l=e.suffix,u=void 0===l?"":l,c=e.strict,d=void 0===c||c,h=function(e){return[s,e,u].join(" ")},y={};for(var f in r)if(t(r,f)){var v=r[f],m=v.required,_=v.default,p=v.description,g=v.validator,b=i[f],A=!!t(v,"required")&&("function"==typeof m?m(i):m),k=t(i,f),w=g(b,i);if(A){if(!k)throw new TypeError(h(f+" is required."));if(!w)throw new TypeError(h("Expected "+f+" to be "+p+", got "+a(b)+" "+b+"."));y[f]=b}else if(y[f]=_,k)if(w)y[f]=b;else{if(d)throw new TypeError(h("Expected "+f+" to be "+p+", got "+a(b)+" "+b+"."));console.warn(h("Expected "+f+" to be "+p+", got "+a(b)+" "+b+". Fallback to default value "+_+"."))}}return y}var i="[mergeOptions]:",n="\nCheck out documentation https://github.com/dubaua/merge-options#parameters-and-return";function s(e){throw new TypeError([i,e,n].join(" "))}var l={optionConfig:{required:!0,validator:function(e){for(var o in e)if(t(e,o)){var i=e[o];if(r(i)||s("Expected optionConfig."+o+" to be an object with declarative option configuration, got "+a(i)+" "+i+"."),t(i,"required")){var n=i.required,l=a(n);"boolean"!==l&&"function"!==l&&s("Expected optionConfig."+o+".required to be either boolean or function, got "+a(n)+" "+n+".")}else t(i,"default")||s("Expected optionConfig."+o+" to either have required or default value.");if(t(i,"default")||t(i,"required")||s("Expected optionConfig."+o+" to either have required or default value."),t(i,"description")){var u=i.description;"string"!=typeof i.description&&s("Expected optionConfig."+o+".description to be a string, got "+a(u)+" "+u+".")}else s("Missing description on optionConfig."+o+" config.");if(t(i,"validator")){var c=i.validator;"function"!=typeof i.validator&&s("Expected optionConfig."+o+".validator to be a function, got "+a(c)+" "+c+".")}else s("Missing validator on optionConfig."+o+" config.")}return r(e)},description:"an object with declarative option configuration"},userOptions:{required:!1,default:{},validator:r,description:"an object"},prefix:{required:!1,default:"",validator:function(e){return"string"==typeof e},description:"a string"},suffix:{required:!1,default:"",validator:function(e){return"string"==typeof e},description:"a string"},strict:{required:!1,default:!0,validator:function(e){return"boolean"==typeof e},description:"a boolean"}};e.exports=function(e){var t=o({optionConfig:l,userOptions:e,prefix:i,suffix:n});return o(t)}}},t={};function r(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o](n,n.exports,r),n.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};var o={};r.d(o,{default:function(){return Immerser}});var i=r(961),n=r.n(i),s=r(819),l=r.n(s),u=/^[a-z_-][a-z\d_-]*$/i,c={solidClassnameArray:{default:[],description:"non empty array of objects",validator:function(e){return Array.isArray(e)&&0!==e.length}},fromViewportWidth:{default:0,description:"a natural number",validator:function(e){return"number"==typeof e&&0<=e&&e%1==0}},pagerThreshold:{default:.5,description:"a number between 0 and 1",validator:function(e){return"number"==typeof e&&0<=e&&e<=1}},hasToUpdateHash:{default:!1,description:"a boolean",validator:function(e){return"boolean"==typeof e}},scrollAdjustThreshold:{default:0,description:"a number greater than or equal to 0",validator:function(e){return"number"==typeof e&&e>=0}},scrollAdjustDelay:{default:600,description:"a number greater than or equal to 300",validator:function(e){return"number"==typeof e&&e>=300}},pagerLinkActiveClassname:{default:"pager-link-active",description:"valid non empty classname string",validator:function(e){return"string"==typeof e&&""!==e&&u.test(e)}},isScrollHandled:{default:!0,description:"a boolean",validator:function(e){return"boolean"==typeof e}},onInit:{default:null,description:"a function",validator:function(e){return"function"==typeof e}},onBind:{default:null,description:"a function",validator:function(e){return"function"==typeof e}},onUnbind:{default:null,description:"a function",validator:function(e){return"function"==typeof e}},onDestroy:{default:null,description:"a function",validator:function(e){return"function"==typeof e}},onActiveLayerChange:{default:null,description:"a function",validator:function(e){return"function"==typeof e}},onLayersUpdate:{default:null,description:"a function",validator:function(e){return"function"==typeof e}}},d="[immerser:]",h={position:"absolute",top:"0",right:"0",bottom:"0",left:"0",overflow:"hidden"},y={pointerEvents:"none",touchAction:"none"},f={pointerEvents:"all",touchAction:"auto"};function v(e,t){for(var r in t)e.style[r]=t[r]}function m(e){var t=e.selector,r=e.parent,o=void 0===r?document:r;if(!o)return[];var i=o.querySelectorAll(t);return Array.from(i)}function _(e){var t=e.message,r=e.error,o=e.isWarning,i=void 0!==o&&o,n=e.docsHash,s=void 0===n?"":n,a="".concat(d," ").concat(t," \nCheck out documentation https://github.com/dubaua/immerser").concat(s);if(!i)throw new Error(a,{cause:r});void 0!==r?console.warn(a,r):console.warn(a)}function p(e,t,r){return Math.max(Math.min(e,r),t)}function g(){var e=window.scrollX||document.documentElement.scrollLeft,t=window.scrollY||document.documentElement.scrollTop;return{x:p(e,0,document.documentElement.offsetWidth),y:p(t,0,document.documentElement.offsetHeight)}}function b(e){return b="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(e){return a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":a(e)},b(e)}function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach(function(t){S(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function w(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,N(o.key),o)}}function S(e,t,r){return(t=N(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N(e){var t=function(e){if("object"!=b(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==b(t)?t:t+""}var Immerser=function(){return e=function Immerser(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Immerser),S(this,"_options",{}),S(this,"_selectors",{root:"[data-immerser]",layer:"[data-immerser-layer]",solid:"[data-immerser-solid]",pagerLink:"[data-immerser-pager-link]",mask:"[data-immerser-mask]",maskInner:"[data-immerser-mask-inner]",synchroHover:"[data-immerser-synchro-hover]"}),S(this,"_layerStateArray",[]),S(this,"_layerStateIndexById",{}),S(this,"_isBound",!1),S(this,"_rootNode",null),S(this,"_layerNodeArray",[]),S(this,"_solidNodeArray",[]),S(this,"_pagerLinkNodeArray",[]),S(this,"_originalSolidNodeArray",[]),S(this,"_maskNodeArray",[]),S(this,"_synchroHoverNodeArray",[]),S(this,"_isCustomMarkup",!1),S(this,"_customMaskNodeArray",[]),S(this,"_windowHeight",0),S(this,"_immerserTop",0),S(this,"_immerserHeight",0),S(this,"_resizeFrameId",null),S(this,"_resizeObserver",null),S(this,"_scrollFrameId",null),S(this,"_scrollAdjustTimerId",null),S(this,"_reactiveActiveLayer",new(l())(0)),S(this,"_reactiveWindowWidth",new(l())),S(this,"_reactiveSynchroHoverId",new(l())(null)),S(this,"_layerProgressArray",[]),S(this,"_unsubscribeRedrawingPager",null),S(this,"_unsubscribeUpdatingHash",null),S(this,"_unsubscribeActiveLayerChange",null),S(this,"_unsubscribeSynchroHover",null),S(this,"_unsubscribeToggleBindOnResize",null),S(this,"_onResize",null),S(this,"_onScroll",null),S(this,"_onSynchroHoverMouseOver",null),S(this,"_onSynchroHoverMouseOut",null),this._init(e)},t=[{key:"_init",value:function(e){var t,r;this._setDomNodes(),this._validateMarkup(),this._mergeOptions(e),this._readClassnamesFromMarkup(),this._validateSolidClassnameArray(),this._initSectionIds(),this._initLayerStateArray(),this._validateClassnames(),this._toggleBindOnResizeObserver(),this._setSizes(),this._addScrollAndResizeListeners(),null===(t=(r=this._options).onInit)||void 0===t||t.call(r,this)}},{key:"_setDomNodes",value:function(){this._rootNode=document.querySelector(this._selectors.root),this._layerNodeArray=m({selector:this._selectors.layer}),this._solidNodeArray=m({selector:this._selectors.solid,parent:this._rootNode})}},{key:"_validateMarkup",value:function(){this._rootNode||_({message:"root node not found.",docsHash:"#prepare-your-markup"}),0===this._layerNodeArray.length&&_({message:"layer nodes not found.",docsHash:"#prepare-your-markup"}),0===this._solidNodeArray.length&&_({message:"solid nodes not found.",docsHash:"#prepare-your-markup"})}},{key:"_mergeOptions",value:function(e){this._options=n()({optionConfig:c,userOptions:e,prefix:d,suffix:"\nCheck out documentation https://github.com/dubaua/immerser#options"})}},{key:"_readClassnamesFromMarkup",value:function(){var e=this;this._layerNodeArray.forEach(function(t,r){if(t.dataset.immerserLayerConfig)try{e._options.solidClassnameArray[r]=JSON.parse(t.dataset.immerserLayerConfig)}catch(e){_({message:"Failed to parse JSON classname configuration.",error:e,docsHash:"#options"})}})}},{key:"_validateSolidClassnameArray",value:function(){var e=this._layerNodeArray.length;this._options.solidClassnameArray.length!==e&&_({message:"solidClassnameArray length differs from count of layers",docsHash:"#options"})}},{key:"_initSectionIds",value:function(){var e=this;this._layerNodeArray.forEach(function(t,r){var o=t.id;o||(o="immerser-section-".concat(r),t.id=o,t.__immerserCustomId=!0),e._layerStateIndexById[o]=r})}},{key:"_initLayerStateArray",value:function(){var e=this;this._layerStateArray=this._layerNodeArray.map(function(t,r){var o=e._options.solidClassnameArray[r];return{beginEnter:0,beginLeave:0,endEnter:0,endLeave:0,id:t.id,layerBottom:0,layerTop:0,maskInnerNode:null,maskNode:null,layerNode:t,solidClassnames:o}}),this._layerProgressArray=this._layerNodeArray.map(function(){return 0})}},{key:"_validateClassnames",value:function(){this._layerStateArray.every(function(e){return!(t=e.solidClassnames)||0===Object.keys(t).length&&t.constructor===Object;var t})&&_({message:"immerser will do nothing without solid classname configuration.",docsHash:"#prepare-your-markup"})}},{key:"_toggleBindOnResizeObserver",value:function(){var e=this;this._unsubscribeToggleBindOnResize=this._reactiveWindowWidth.subscribe(function(t){t>=e._options.fromViewportWidth?e._isBound||e.bind():e._isBound&&e.unbind()})}},{key:"_setSizes",value:function(){var e=this;this._windowHeight=window.innerHeight,this._immerserTop=this._rootNode.offsetTop,this._immerserHeight=this._rootNode.offsetHeight,this._layerStateArray=this._layerStateArray.map(function(t){var r=t.layerNode.offsetTop,o=r+t.layerNode.offsetHeight,i=r-e._immerserTop,n=i-e._immerserHeight,s=o-e._immerserTop,a=s-e._immerserHeight;return k(k({},t),{},{layerTop:r,layerBottom:o,beginEnter:n,endEnter:i,beginLeave:a,endLeave:s})}),this._reactiveWindowWidth.value=window.innerWidth}},{key:"_addScrollAndResizeListeners",value:function(){this._options.isScrollHandled&&(this._onScroll=this._handleScroll.bind(this),window.addEventListener("scroll",this._onScroll,!1)),this._onResize=this._handleResize.bind(this),window.addEventListener("resize",this._onResize,!1),window.addEventListener("orientationchange",this._onResize,!1),"undefined"!=typeof ResizeObserver&&(this._resizeObserver=new ResizeObserver(this._onResize),this._resizeObserver.observe(this._rootNode))}},{key:"_resetInternalState",value:function(){this._layerStateArray=[],this._layerStateIndexById={},this._isBound=!1,this._rootNode=null,this._layerNodeArray=[],this._solidNodeArray=[],this._pagerLinkNodeArray=[],this._originalSolidNodeArray=[],this._maskNodeArray=[],this._synchroHoverNodeArray=[],this._isCustomMarkup=!1,this._customMaskNodeArray=[],this._windowHeight=0,this._immerserTop=0,this._immerserHeight=0,this._resizeFrameId=null,this._resizeObserver=null,this._scrollFrameId=null,this._scrollAdjustTimerId=null,this._reactiveActiveLayer.reset(),this._reactiveWindowWidth.reset(),this._reactiveSynchroHoverId.reset(),this._layerProgressArray=[],this._unsubscribeRedrawingPager=null,this._unsubscribeUpdatingHash=null,this._unsubscribeActiveLayerChange=null,this._unsubscribeSynchroHover=null,this._unsubscribeToggleBindOnResize=null,this._onResize=null,this._onScroll=null,this._onSynchroHoverMouseOver=null,this._onSynchroHoverMouseOut=null}},{key:"_createMarkup",value:function(){var e=this;v(this._rootNode,y),this._initCustomMarkup(),this._originalSolidNodeArray=m({selector:this._selectors.solid,parent:this._rootNode}),this._layerStateArray=this._layerStateArray.map(function(t,r){var o=e._isCustomMarkup?e._customMaskNodeArray[r]:document.createElement("div");v(o,h);var i=e._isCustomMarkup?o.querySelector(e._selectors.maskInner):document.createElement("div");return i||(i=document.createElement("div")),v(i,h),e._isCustomMarkup||(o.dataset.immerserMask="",i.dataset.immerserMaskInner=""),e._originalSolidNodeArray.forEach(function(e){var t=e.cloneNode(!0);t instanceof HTMLElement&&(v(t,f),t.__immerserCloned=!0,i.appendChild(t))}),function(e,t){for(var r=0;r<e.length;r++)t(e[r])}(m({selector:e._selectors.solid,parent:i}),function(e){var r=e.dataset.immerserSolid;t.solidClassnames&&Object.prototype.hasOwnProperty.call(t.solidClassnames,r)&&e.classList.add(t.solidClassnames[r])}),0!==r&&o.setAttribute("aria-hidden","true"),o.appendChild(i),e._rootNode.appendChild(o),e._maskNodeArray.push(o),k(k({},t),{},{maskNode:o,maskInnerNode:i})}),this._detachOriginalSolidNodes()}},{key:"_initCustomMarkup",value:function(){var e=this;this._customMaskNodeArray=m({selector:this._selectors.mask,parent:this._rootNode}),this._isCustomMarkup=this._customMaskNodeArray.length===this._layerStateArray.length,this._customMaskNodeArray.length>0&&!this._isCustomMarkup&&_({message:"You're trying use custom markup, but count of your immerser masks doesn't equal layers count.",isWarning:!0,docsHash:"#cloning-event-listeners"}),this._customMaskNodeArray.forEach(function(t){var r=t.querySelector(e._selectors.maskInner);r&&Array.from(r.children).forEach(function(e){e instanceof HTMLElement&&v(e,f)})})}},{key:"_detachOriginalSolidNodes",value:function(){var e=this;this._rootNode&&this._originalSolidNodeArray.forEach(function(t){e._rootNode.removeChild(t)})}},{key:"_initPagerLinks",value:function(){var e=this;this._pagerLinkNodeArray=m({selector:this._selectors.pagerLink,parent:this._rootNode}),this._pagerLinkNodeArray.forEach(function(t){var r=t.href;if(r){var o=r.split("#")[1];if(o){var i=e._layerStateIndexById[o];t.dataset.immerserLayerIndex=i.toString()}}})}},{key:"_initHoverSynchro",value:function(){var e=this;this._synchroHoverNodeArray=m({selector:this._selectors.synchroHover,parent:this._rootNode}),this._onSynchroHoverMouseOver=function(t){var r=t.target.dataset.immerserSynchroHover;e._reactiveSynchroHoverId.value=r},this._onSynchroHoverMouseOut=function(){e._reactiveSynchroHoverId.value=null},this._synchroHoverNodeArray.forEach(function(t){t.addEventListener("mouseover",e._onSynchroHoverMouseOver),t.addEventListener("mouseout",e._onSynchroHoverMouseOut)})}},{key:"_attachCallbacks",value:function(){var e=this;this._pagerLinkNodeArray.length>0&&(this._unsubscribeRedrawingPager=this._reactiveActiveLayer.subscribe(this._drawPagerLinks.bind(this))),this._options.hasToUpdateHash&&(this._unsubscribeUpdatingHash=this._reactiveActiveLayer.subscribe(this._drawHash.bind(this))),this._options.onActiveLayerChange&&(this._unsubscribeActiveLayerChange=this._reactiveActiveLayer.subscribe(function(t){e._options.onActiveLayerChange(t,e)})),this._synchroHoverNodeArray.length>0&&(this._unsubscribeSynchroHover=this._reactiveSynchroHoverId.subscribe(this._drawSynchroHover.bind(this)))}},{key:"_detachCallbacks",value:function(){var e,t,r,o;null===(e=this._unsubscribeRedrawingPager)||void 0===e||e.call(this),null===(t=this._unsubscribeUpdatingHash)||void 0===t||t.call(this),null===(r=this._unsubscribeActiveLayerChange)||void 0===r||r.call(this),null===(o=this._unsubscribeSynchroHover)||void 0===o||o.call(this)}},{key:"_removeSyncroHoverListeners",value:function(){var e=this;this._synchroHoverNodeArray.forEach(function(t){t.removeEventListener("mouseover",e._onSynchroHoverMouseOver),t.removeEventListener("mouseout",e._onSynchroHoverMouseOut)})}},{key:"_clearCustomSectionIds",value:function(){this._layerStateArray.forEach(function(e){e.layerNode.__immerserCustomId&&e.layerNode.removeAttribute("id")})}},{key:"_restoreOriginalSolidNodes",value:function(){var e=this;this._rootNode&&this._originalSolidNodeArray.forEach(function(t){e._rootNode.appendChild(t)})}},{key:"_cleanupClonedMarkup",value:function(){var e=this;this._maskNodeArray.forEach(function(t){if(e._isCustomMarkup){t.removeAttribute("style"),t.removeAttribute("aria-hidden");var r=t.querySelector(e._selectors.maskInner);if(!r)return;r.removeAttribute("style"),m({selector:e._selectors.solid,parent:r}).forEach(function(e){e.__immerserCloned&&r.removeChild(e)})}else e._rootNode&&e._rootNode.removeChild(t)})}},{key:"_removeScrollAndResizeListeners",value:function(){var e;this._options.isScrollHandled&&window.removeEventListener("scroll",this._onScroll,!1),window.removeEventListener("resize",this._onResize,!1),window.removeEventListener("orientationchange",this._onResize,!1),null===(e=this._resizeObserver)||void 0===e||e.disconnect()}},{key:"_setLayersProgress",value:function(e){var t=this,r=null!=e?e:g().y,o=r+this._windowHeight;this._layerProgressArray=this._layerStateArray.map(function(e){var i=e.layerTop,n=e.layerBottom,s=n-i,a=Math.min(n,o)-Math.max(i,r),l=Math.min(s,t._windowHeight);return l<=0?0:Math.max(0,Math.min(1,a/l))})}},{key:"_draw",value:function(e){var t=this,r=void 0!==e?e:g().y;this._layerStateArray.forEach(function(e,o){var i,n=e.beginEnter,s=e.endEnter,a=e.beginLeave,l=e.endLeave,u=e.maskNode,c=e.maskInnerNode,d=e.layerTop,h=e.layerBottom;i=n>r?t._immerserHeight:n<=r&&r<s?s-r:s<=r&&r<a?0:a<=r&&r<l?a-r:-t._immerserHeight,u.style.transform="translateY(".concat(i,"px)"),c.style.transform="translateY(".concat(-i,"px)");var y=r+t._windowHeight*(1-t._options.pagerThreshold);d<=y&&y<h&&(t._reactiveActiveLayer.value=o)})}},{key:"_drawPagerLinks",value:function(e){var t=this;this._pagerLinkNodeArray.forEach(function(r){parseInt(r.dataset.immerserLayerIndex,10)===e?r.classList.add(t._options.pagerLinkActiveClassname):r.classList.remove(t._options.pagerLinkActiveClassname)})}},{key:"_drawHash",value:function(e){var t=this._layerStateArray[e],r=t.id,o=t.layerNode;o.removeAttribute("id"),window.location.hash=r,o.setAttribute("id",r)}},{key:"_drawSynchroHover",value:function(e){this._synchroHoverNodeArray.forEach(function(t){t.dataset.immerserSynchroHover===e?t.classList.add("_hover"):t.classList.remove("_hover")})}},{key:"_adjustScroll",value:function(){var e=this._layerStateArray[this._reactiveActiveLayer.value],t=e.layerTop,r=e.layerBottom,o=g(),i=o.x,n=o.y,s=Math.abs(n-t),a=Math.abs(n+this._windowHeight-r);0!==s&&0!==a&&(s<=a&&s<=this._options.scrollAdjustThreshold?window.scrollTo(i,t):a<=s&&a<=this._options.scrollAdjustThreshold&&window.scrollTo(i,r-this._windowHeight))}},{key:"_handleScroll",value:function(){var e=this;this._isBound&&(this._scrollFrameId&&(window.cancelAnimationFrame(this._scrollFrameId),this._scrollFrameId=null),this._scrollFrameId=window.requestAnimationFrame(function(){var t,r,o=g().y;e._setLayersProgress(o),null===(t=(r=e._options).onLayersUpdate)||void 0===t||t.call(r,e._layerProgressArray,e),e._draw(o),e._options.scrollAdjustThreshold>0&&(e._scrollAdjustTimerId&&(clearTimeout(e._scrollAdjustTimerId),e._scrollAdjustTimerId=null),e._scrollAdjustTimerId=setTimeout(e._adjustScroll.bind(e),e._options.scrollAdjustDelay))}))}},{key:"_handleResize",value:function(){var e=this;this._resizeFrameId&&(window.cancelAnimationFrame(this._resizeFrameId),this._resizeFrameId=null),this._resizeFrameId=window.requestAnimationFrame(function(){e.render()})}},{key:"bind",value:function(){var e,t;this._createMarkup(),this._initPagerLinks(),this._initHoverSynchro(),this._attachCallbacks(),this._isBound=!0,this._setLayersProgress(),this._draw(),null===(e=(t=this._options).onBind)||void 0===e||e.call(t,this)}},{key:"unbind",value:function(){var e,t;this._detachCallbacks(),this._removeSyncroHoverListeners(),this._clearCustomSectionIds(),this._restoreOriginalSolidNodes(),this._cleanupClonedMarkup(),this._isBound=!1,null===(e=(t=this._options).onUnbind)||void 0===e||e.call(t,this),this._reactiveActiveLayer.value=void 0}},{key:"destroy",value:function(){var e,t,r;this.unbind(),null===(e=this._unsubscribeToggleBindOnResize)||void 0===e||e.call(this),this._removeScrollAndResizeListeners(),null===(t=(r=this._options).onDestroy)||void 0===t||t.call(r,this),this._resetInternalState()}},{key:"render",value:function(){this._setSizes(),this._setLayersProgress(),this._draw()}},{key:"syncScroll",value:function(){this._options.isScrollHandled||(this._setLayersProgress(),this._draw())}},{key:"activeIndex",get:function(){return this._reactiveActiveLayer.value}},{key:"isBound",get:function(){return this._isBound}},{key:"rootNode",get:function(){return this._rootNode}},{key:"layerProgressArray",get:function(){return this._layerProgressArray}}],t&&w(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();return o.default}()},"object"==a(t)&&"object"==a(e)?e.exports=s():(i=[],void 0===(n="function"==typeof(o=s)?o.apply(t,i):o)||(e.exports=n))}},t={};function r(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={id:o,loaded:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.loaded=!0,n.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";var e=r(263),t=new(r.n(e)())({solidClassnameArray:[{logo:"logo--contrast-lg",pager:"pager--contrast-lg",language:"language--contrast-lg"},{pager:"pager--contrast-only-md",menu:"menu--contrast",about:"about--contrast"},{logo:"logo--contrast-lg",pager:"pager--contrast-lg",language:"language--contrast-lg"},{logo:"logo--contrast-only-md",pager:"pager--contrast-only-md",language:"language--contrast-only-md",menu:"menu--contrast",about:"about--contrast"},{logo:"logo--contrast-lg",pager:"pager--contrast-lg",language:"language--contrast-lg"}],fromViewportWidth:1024,pagerLinkActiveClassname:"pager__link--active",scrollAdjustThreshold:50,scrollAdjustDelay:600,onInit:function(e){window.imm=e,console.log("onInit",e)},onBind:function(e){console.log("onBind",e)},onUnbind:function(e){console.log("onUnbind",e)},onDestroy:function(e){console.log("onDestroy",e)},onActiveLayerChange:function(e,t){console.log("onActiveLayerChange",e,t)}}),o=document.querySelectorAll("[data-highlighter]"),i="highlighter-animation-active";function n(e){return function(){if(t.isBound)for(var r=e.dataset.highlighter,o=document.querySelectorAll(r),n=function(){var e=o[s];if(!e.isHighlighting){e.isHighlighting=!0,e.classList.add(i);var t=setTimeout(function(){e.classList.remove(i),clearTimeout(t),e.isHighlighting=!1},1500)}},s=0;s<o.length;s++)n()}}for(var s=0;s<o.length;s++){var a=o[s];a.addEventListener("mouseover",n(a)),a.addEventListener("click",n(a))}var l=document.querySelectorAll("[data-emoji-animating]"),u=null;function c(){if(!u){for(var e=0;e<l.length;e++)l[e].dataset.emojiAnimating="true";u=setTimeout(function(){for(var e=0;e<l.length;e++)l[e].dataset.emojiAnimating="false";clearTimeout(u),u=null},620)}}for(var d=0;d<l.length;d++)l[d].addEventListener("click",c);var h=document.getElementById("rulers");document.addEventListener("keydown",function(e){var t=e.altKey,r=e.code,o=e.keyCode;t&&("KeyR"===r||82===o)&&h.classList.toggle("rulers--active")}),console.log("welcome here, fella. Press Alt+R to see vertical rhythm"),window.immerserInstance=t})()})();
//# sourceMappingURL=main.js.map